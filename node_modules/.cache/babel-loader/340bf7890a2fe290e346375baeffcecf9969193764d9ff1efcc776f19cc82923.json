{"ast":null,"code":"const I = typeof window < \"u\" ? window : global;\nfunction de(e) {\n  function h(o) {\n    var t = document.createElement(\"div\");\n    return (o || \"\").split(\" \").forEach(function (n) {\n      t.classList.add(n);\n    }), t;\n  }\n  var a = {\n    rows_container: function () {\n      return h(\"dhx_cal_navbar_rows_container\");\n    },\n    row: function () {\n      return h(\"dhx_cal_navbar_row\");\n    },\n    view: function (o) {\n      var t = h(\"dhx_cal_tab\");\n      return t.setAttribute(\"name\", o.view + \"_tab\"), t.setAttribute(\"data-tab\", o.view), e.config.fix_tab_position && (o.$firstTab ? t.classList.add(\"dhx_cal_tab_first\") : o.$lastTab ? t.classList.add(\"dhx_cal_tab_last\") : o.view !== \"week\" && t.classList.add(\"dhx_cal_tab_standalone\"), o.$segmentedTab && t.classList.add(\"dhx_cal_tab_segmented\")), t;\n    },\n    date: function () {\n      return h(\"dhx_cal_date\");\n    },\n    button: function (o) {\n      return h(\"dhx_cal_nav_button dhx_cal_nav_button_custom dhx_cal_tab\");\n    },\n    builtInButton: function (o) {\n      return h(\"dhx_cal_\" + o.view + \"_button dhx_cal_nav_button\");\n    },\n    spacer: function () {\n      return h(\"dhx_cal_line_spacer\");\n    },\n    minicalendarButton: function (o) {\n      var t = h(\"dhx_minical_icon\");\n      return o.click || t.$_eventAttached || e.event(t, \"click\", function () {\n        e.isCalendarVisible() ? e.destroyCalendar() : e.renderCalendar({\n          position: this,\n          date: e.getState().date,\n          navigation: !0,\n          handler: function (n, s) {\n            e.setCurrentView(n), e.destroyCalendar();\n          }\n        });\n      }), t;\n    },\n    html_element: function (o) {\n      return h(\"dhx_cal_nav_content\");\n    }\n  };\n  function r(o) {\n    var t = function (c) {\n      var u;\n      if (c.view) switch (c.view) {\n        case \"today\":\n        case \"next\":\n        case \"prev\":\n          u = a.builtInButton;\n          break;\n        case \"date\":\n          u = a.date;\n          break;\n        case \"spacer\":\n          u = a.spacer;\n          break;\n        case \"button\":\n          u = a.button;\n          break;\n        case \"minicalendar\":\n          u = a.minicalendarButton;\n          break;\n        default:\n          u = a.view;\n      } else c.rows ? u = a.rows_container : c.cols && (u = a.row);\n      return u;\n    }(o);\n    if (t) {\n      var n = t(o);\n      if (o.css && n.classList.add(o.css), o.width && ((s = o.width) === 1 * s && (s += \"px\"), n.style.width = s), o.height && ((s = o.height) === 1 * s && (s += \"px\"), n.style.height = s), o.click && e.event(n, \"click\", o.click), o.html && (n.innerHTML = o.html), o.align) {\n        var s = \"\";\n        o.align == \"right\" ? s = \"flex-end\" : o.align == \"left\" && (s = \"flex-start\"), n.style.justifyContent = s;\n      }\n      return n;\n    }\n  }\n  function d(o) {\n    return typeof o == \"string\" && (o = {\n      view: o\n    }), o.view || o.rows || o.cols || (o.view = \"button\"), o;\n  }\n  function i(o) {\n    var t,\n      n = document.createDocumentFragment();\n    t = Array.isArray(o) ? o : [o];\n    for (var s = 0; s < t.length; s++) {\n      var c,\n        u = d(t[s]);\n      u.view === \"day\" && t[s + 1] && ((c = d(t[s + 1])).view !== \"week\" && c.view !== \"month\" || (u.$firstTab = !0, u.$segmentedTab = !0)), u.view === \"week\" && t[s - 1] && ((c = d(t[s + 1])).view !== \"week\" && c.view !== \"month\" || (u.$segmentedTab = !0)), u.view === \"month\" && t[s - 1] && ((c = d(t[s - 1])).view !== \"week\" && c.view !== \"day\" || (u.$lastTab = !0, u.$segmentedTab = !0));\n      var v = r(u);\n      n.appendChild(v), (u.cols || u.rows) && v.appendChild(i(u.cols || u.rows));\n    }\n    return n;\n  }\n  e._init_nav_bar = function (o) {\n    var t = this.$container.querySelector(\".dhx_cal_navline\");\n    return t || ((t = document.createElement(\"div\")).className = \"dhx_cal_navline dhx_cal_navline_flex\", e._update_nav_bar(o, t), t);\n  };\n  var _ = null;\n  e._update_nav_bar = function (o, t) {\n    if (o) {\n      var n = !1,\n        s = o.height || e.xy.nav_height;\n      _ !== null && _ === s || (n = !0), n && (e.xy.nav_height = s), t.innerHTML = \"\", t.appendChild(i(o)), e.unset_actions(), e._els = [], e.get_elements(), e.set_actions(), t.style.display = s === 0 ? \"none\" : \"\", _ = s;\n    }\n  };\n}\nfunction _e(e) {\n  function h(i) {\n    for (var _ = document.body; i && i != _;) i = i.parentNode;\n    return _ == i;\n  }\n  function a(i) {\n    return {\n      w: i.innerWidth || document.documentElement.clientWidth,\n      h: i.innerHeight || document.documentElement.clientHeight\n    };\n  }\n  function r(i, _) {\n    var o,\n      t = a(_);\n    i.event(_, \"resize\", function () {\n      clearTimeout(o), o = setTimeout(function () {\n        if (h(i.$container) && !i.$destroyed) {\n          var n,\n            s,\n            c = a(_);\n          s = c, ((n = t).w != s.w || n.h != s.h) && (t = c, d(i));\n        }\n      }, 150);\n    });\n  }\n  function d(i) {\n    !i.$destroyed && i.$root && h(i.$root) && i.callEvent(\"onSchedulerResize\", []) && (i.updateView(), i.callEvent(\"onAfterSchedulerResize\", []));\n  }\n  (function (i) {\n    var _ = i.$container;\n    window.getComputedStyle(_).getPropertyValue(\"position\") == \"static\" && (_.style.position = \"relative\");\n    var o = document.createElement(\"iframe\");\n    o.className = \"scheduler_container_resize_watcher\", o.tabIndex = -1, i.config.wai_aria_attributes && (o.setAttribute(\"role\", \"none\"), o.setAttribute(\"aria-hidden\", !0)), window.Sfdc || window.$A || window.Aura ? function (t) {\n      var n = t.$root.offsetHeight,\n        s = t.$root.offsetWidth;\n      (function c() {\n        t.$destroyed || (t.$root && (t.$root.offsetHeight == n && t.$root.offsetWidth == s || d(t), n = t.$root.offsetHeight, s = t.$root.offsetWidth), setTimeout(c, 200));\n      })();\n    }(i) : (_.appendChild(o), o.contentWindow ? r(i, o.contentWindow) : (_.removeChild(o), r(i, window)));\n  })(e);\n}\nclass le {\n  constructor() {\n    this._silent_mode = !1, this.listeners = {};\n  }\n  _silentStart() {\n    this._silent_mode = !0;\n  }\n  _silentEnd() {\n    this._silent_mode = !1;\n  }\n}\nconst ce = function (e) {\n  let h = {},\n    a = 0;\n  const r = function () {\n    let d = !0;\n    for (const i in h) {\n      const _ = h[i].apply(e, arguments);\n      d = d && _;\n    }\n    return d;\n  };\n  return r.addEvent = function (d, i) {\n    if (typeof d == \"function\") {\n      let _;\n      if (i && i.id ? _ = i.id : (_ = a, a++), i && i.once) {\n        const o = d;\n        d = function () {\n          o(), r.removeEvent(_);\n        };\n      }\n      return h[_] = d, _;\n    }\n    return !1;\n  }, r.removeEvent = function (d) {\n    delete h[d];\n  }, r.clear = function () {\n    h = {};\n  }, r;\n};\nfunction Q(e) {\n  const h = new le();\n  e.attachEvent = function (a, r, d) {\n    a = \"ev_\" + a.toLowerCase(), h.listeners[a] || (h.listeners[a] = ce(this)), d && d.thisObject && (r = r.bind(d.thisObject));\n    let i = a + \":\" + h.listeners[a].addEvent(r, d);\n    return d && d.id && (i = d.id), i;\n  }, e.attachAll = function (a) {\n    this.attachEvent(\"listen_all\", a);\n  }, e.callEvent = function (a, r) {\n    if (h._silent_mode) return !0;\n    const d = \"ev_\" + a.toLowerCase(),\n      i = h.listeners;\n    return i.ev_listen_all && i.ev_listen_all.apply(this, [a].concat(r)), !i[d] || i[d].apply(this, r);\n  }, e.checkEvent = function (a) {\n    return !!h.listeners[\"ev_\" + a.toLowerCase()];\n  }, e.detachEvent = function (a) {\n    if (a) {\n      let r = h.listeners;\n      for (const i in r) r[i].removeEvent(a);\n      const d = a.split(\":\");\n      if (r = h.listeners, d.length === 2) {\n        const i = d[0],\n          _ = d[1];\n        r[i] && r[i].removeEvent(_);\n      }\n    }\n  }, e.detachAllEvents = function () {\n    for (const a in h.listeners) h.listeners[a].clear();\n  };\n}\nconst ee = {\n  event: function (e, h, a) {\n    e.addEventListener ? e.addEventListener(h, a, !1) : e.attachEvent && e.attachEvent(\"on\" + h, a);\n  },\n  eventRemove: function (e, h, a) {\n    e.removeEventListener ? e.removeEventListener(h, a, !1) : e.detachEvent && e.detachEvent(\"on\" + h, a);\n  }\n};\nfunction he(e) {\n  var h = function () {\n    var a = function (r, d) {\n      r = r || ee.event, d = d || ee.eventRemove;\n      var i = [],\n        _ = {\n          attach: function (o, t, n, s) {\n            i.push({\n              element: o,\n              event: t,\n              callback: n,\n              capture: s\n            }), r(o, t, n, s);\n          },\n          detach: function (o, t, n, s) {\n            d(o, t, n, s);\n            for (var c = 0; c < i.length; c++) {\n              var u = i[c];\n              u.element === o && u.event === t && u.callback === n && u.capture === s && (i.splice(c, 1), c--);\n            }\n          },\n          detachAll: function () {\n            for (var o = i.slice(), t = 0; t < o.length; t++) {\n              var n = o[t];\n              _.detach(n.element, n.event, n.callback, n.capture), _.detach(n.element, n.event, n.callback, void 0), _.detach(n.element, n.event, n.callback, !1), _.detach(n.element, n.event, n.callback, !0);\n            }\n            i.splice(0, i.length);\n          },\n          extend: function () {\n            return a(this.event, this.eventRemove);\n          }\n        };\n      return _;\n    };\n    return a();\n  }();\n  e.event = h.attach, e.eventRemove = h.detach, e._eventRemoveAll = h.detachAll, e._createDomEventScope = h.extend, e._trim = function (a) {\n    return (String.prototype.trim || function () {\n      return this.replace(/^\\s+|\\s+$/g, \"\");\n    }).apply(a);\n  }, e._isDate = function (a) {\n    return !(!a || typeof a != \"object\") && !!(a.getFullYear && a.getMonth && a.getDate);\n  }, e._isObject = function (a) {\n    return a && typeof a == \"object\";\n  };\n}\nvar ue = Date.now();\nfunction Y(e) {\n  return !(!e || typeof e != \"object\") && !!(e.getFullYear && e.getMonth && e.getDate);\n}\nconst V = {\n  uid: function () {\n    return ue++;\n  },\n  mixin: function (e, h, a) {\n    for (var r in h) (e[r] === void 0 || a) && (e[r] = h[r]);\n    return e;\n  },\n  copy: function e(h) {\n    var a, r, d;\n    if (h && typeof h == \"object\") switch (!0) {\n      case Y(h):\n        r = new Date(h);\n        break;\n      case (d = h, Array.isArray ? Array.isArray(d) : d && d.length !== void 0 && d.pop && d.push):\n        for (r = new Array(h.length), a = 0; a < h.length; a++) r[a] = e(h[a]);\n        break;\n      case function (i) {\n        return i && typeof i == \"object\" && Function.prototype.toString.call(i.constructor) === \"function String() { [native code] }\";\n      }(h):\n        r = new String(h);\n        break;\n      case function (i) {\n        return i && typeof i == \"object\" && Function.prototype.toString.call(i.constructor) === \"function Number() { [native code] }\";\n      }(h):\n        r = new Number(h);\n        break;\n      case function (i) {\n        return i && typeof i == \"object\" && Function.prototype.toString.call(i.constructor) === \"function Boolean() { [native code] }\";\n      }(h):\n        r = new Boolean(h);\n        break;\n      default:\n        for (a in r = {}, h) {\n          const i = typeof h[a];\n          i === \"string\" || i === \"number\" || i === \"boolean\" ? r[a] = h[a] : Y(h[a]) ? r[a] = new Date(h[a]) : Object.prototype.hasOwnProperty.apply(h, [a]) && (r[a] = e(h[a]));\n        }\n    }\n    return r || h;\n  },\n  defined: function (e) {\n    return e !== void 0;\n  },\n  isDate: Y,\n  delay: function (e, h) {\n    var a,\n      r = function () {\n        r.$cancelTimeout(), r.$pending = !0;\n        var d = Array.prototype.slice.call(arguments);\n        a = setTimeout(function () {\n          e.apply(this, d), r.$pending = !1;\n        }, h);\n      };\n    return r.$pending = !1, r.$cancelTimeout = function () {\n      clearTimeout(a), r.$pending = !1;\n    }, r.$execute = function () {\n      var d = Array.prototype.slice.call(arguments);\n      e.apply(this, d), r.$cancelTimeout();\n    }, r;\n  }\n};\nfunction ne(e) {\n  if (!e) return \"\";\n  var h = e.className || \"\";\n  return h.baseVal && (h = h.baseVal), h.indexOf || (h = \"\"), h || \"\";\n}\nfunction ie(e, h, a) {\n  a === void 0 && (a = !0);\n  for (var r = e.target || e.srcElement, d = \"\"; r;) {\n    if (d = ne(r)) {\n      var i = d.indexOf(h);\n      if (i >= 0) {\n        if (!a) return r;\n        var _ = i === 0 || !(d.charAt(i - 1) || \"\").trim(),\n          o = i + h.length >= d.length || !d.charAt(i + h.length).trim();\n        if (_ && o) return r;\n      }\n    }\n    r = r.parentNode;\n  }\n  return null;\n}\nfunction fe(e) {\n  var h = !1,\n    a = !1;\n  if (window.getComputedStyle) {\n    var r = window.getComputedStyle(e, null);\n    h = r.display, a = r.visibility;\n  } else e.currentStyle && (h = e.currentStyle.display, a = e.currentStyle.visibility);\n  var d = !1,\n    i = ie({\n      target: e\n    }, \"dhx_form_repeat\", !1);\n  return i && (d = i.style.height == \"0px\"), d = d || !e.offsetHeight, h != \"none\" && a != \"hidden\" && !d;\n}\nfunction ve(e) {\n  return !isNaN(e.getAttribute(\"tabindex\")) && 1 * e.getAttribute(\"tabindex\") >= 0;\n}\nfunction ge(e) {\n  return !{\n    a: !0,\n    area: !0\n  }[e.nodeName.loLowerCase()] || !!e.getAttribute(\"href\");\n}\nfunction me(e) {\n  return !{\n    input: !0,\n    select: !0,\n    textarea: !0,\n    button: !0,\n    object: !0\n  }[e.nodeName.toLowerCase()] || !e.hasAttribute(\"disabled\");\n}\nfunction re() {\n  return document.head.createShadowRoot || document.head.attachShadow;\n}\nfunction te(e) {\n  if (!e || !re()) return document.body;\n  for (; e.parentNode && (e = e.parentNode);) if (e instanceof ShadowRoot) return e.host;\n  return document.body;\n}\nconst q = {\n  getAbsoluteLeft: function (e) {\n    return this.getOffset(e).left;\n  },\n  getAbsoluteTop: function (e) {\n    return this.getOffset(e).top;\n  },\n  getOffsetSum: function (e) {\n    for (var h = 0, a = 0; e;) h += parseInt(e.offsetTop), a += parseInt(e.offsetLeft), e = e.offsetParent;\n    return {\n      top: h,\n      left: a\n    };\n  },\n  getOffsetRect: function (e) {\n    var h = e.getBoundingClientRect(),\n      a = 0,\n      r = 0;\n    if (/Mobi/.test(navigator.userAgent)) {\n      var d = document.createElement(\"div\");\n      d.style.position = \"absolute\", d.style.left = \"0px\", d.style.top = \"0px\", d.style.width = \"1px\", d.style.height = \"1px\", document.body.appendChild(d);\n      var i = d.getBoundingClientRect();\n      a = h.top - i.top, r = h.left - i.left, d.parentNode.removeChild(d);\n    } else {\n      var _ = document.body,\n        o = document.documentElement,\n        t = window.pageYOffset || o.scrollTop || _.scrollTop,\n        n = window.pageXOffset || o.scrollLeft || _.scrollLeft,\n        s = o.clientTop || _.clientTop || 0,\n        c = o.clientLeft || _.clientLeft || 0;\n      a = h.top + t - s, r = h.left + n - c;\n    }\n    return {\n      top: Math.round(a),\n      left: Math.round(r)\n    };\n  },\n  getOffset: function (e) {\n    return e.getBoundingClientRect ? this.getOffsetRect(e) : this.getOffsetSum(e);\n  },\n  closest: function (e, h) {\n    return e && h ? K(e, h) : null;\n  },\n  insertAfter: function (e, h) {\n    h.nextSibling ? h.parentNode.insertBefore(e, h.nextSibling) : h.parentNode.appendChild(e);\n  },\n  remove: function (e) {\n    e && e.parentNode && e.parentNode.removeChild(e);\n  },\n  isChildOf: function (e, h) {\n    return h.contains(e);\n  },\n  getFocusableNodes: function (e) {\n    for (var h = e.querySelectorAll([\"a[href]\", \"area[href]\", \"input\", \"select\", \"textarea\", \"button\", \"iframe\", \"object\", \"embed\", \"[tabindex]\", \"[contenteditable]\"].join(\", \")), a = Array.prototype.slice.call(h, 0), r = 0; r < a.length; r++) a[r].$position = r;\n    for (a.sort(function (i, _) {\n      return i.tabIndex === 0 && _.tabIndex !== 0 ? 1 : i.tabIndex !== 0 && _.tabIndex === 0 ? -1 : i.tabIndex === _.tabIndex ? i.$position - _.$position : i.tabIndex < _.tabIndex ? -1 : 1;\n    }), r = 0; r < a.length; r++) {\n      var d = a[r];\n      (ve(d) || me(d) || ge(d)) && fe(d) || (a.splice(r, 1), r--);\n    }\n    return a;\n  },\n  getClassName: ne,\n  locateCss: ie,\n  getRootNode: te,\n  hasShadowParent: function (e) {\n    return !!te(e);\n  },\n  isShadowDomSupported: re,\n  getActiveElement: function () {\n    var e = document.activeElement;\n    return e.shadowRoot && (e = e.shadowRoot.activeElement), e === document.body && document.getSelection && (e = document.getSelection().focusNode || document.body), e;\n  },\n  getRelativeEventPosition: function (e, h) {\n    var a = document.documentElement,\n      r = function (d) {\n        var i = 0,\n          _ = 0,\n          o = 0,\n          t = 0;\n        if (d.getBoundingClientRect) {\n          var n = d.getBoundingClientRect(),\n            s = document.body,\n            c = document.documentElement || document.body.parentNode || document.body,\n            u = window.pageYOffset || c.scrollTop || s.scrollTop,\n            v = window.pageXOffset || c.scrollLeft || s.scrollLeft,\n            m = c.clientTop || s.clientTop || 0,\n            l = c.clientLeft || s.clientLeft || 0;\n          i = n.top + u - m, _ = n.left + v - l, o = document.body.offsetWidth - n.right, t = document.body.offsetHeight - n.bottom;\n        } else {\n          for (; d;) i += parseInt(d.offsetTop, 10), _ += parseInt(d.offsetLeft, 10), d = d.offsetParent;\n          o = document.body.offsetWidth - d.offsetWidth - _, t = document.body.offsetHeight - d.offsetHeight - i;\n        }\n        return {\n          y: Math.round(i),\n          x: Math.round(_),\n          width: d.offsetWidth,\n          height: d.offsetHeight,\n          right: Math.round(o),\n          bottom: Math.round(t)\n        };\n      }(h);\n    return {\n      x: e.clientX + a.scrollLeft - a.clientLeft - r.x + h.scrollLeft,\n      y: e.clientY + a.scrollTop - a.clientTop - r.y + h.scrollTop\n    };\n  },\n  getTargetNode: function (e) {\n    var h;\n    return e.tagName ? h = e : (h = (e = e || window.event).target || e.srcElement).shadowRoot && e.composedPath && (h = e.composedPath()[0]), h;\n  },\n  getNodePosition: function (e) {\n    var h = 0,\n      a = 0,\n      r = 0,\n      d = 0;\n    if (e.getBoundingClientRect) {\n      var i = e.getBoundingClientRect(),\n        _ = document.body,\n        o = document.documentElement || document.body.parentNode || document.body,\n        t = window.pageYOffset || o.scrollTop || _.scrollTop,\n        n = window.pageXOffset || o.scrollLeft || _.scrollLeft,\n        s = o.clientTop || _.clientTop || 0,\n        c = o.clientLeft || _.clientLeft || 0;\n      h = i.top + t - s, a = i.left + n - c, r = document.body.offsetWidth - i.right, d = document.body.offsetHeight - i.bottom;\n    } else {\n      for (; e;) h += parseInt(e.offsetTop, 10), a += parseInt(e.offsetLeft, 10), e = e.offsetParent;\n      r = document.body.offsetWidth - e.offsetWidth - a, d = document.body.offsetHeight - e.offsetHeight - h;\n    }\n    return {\n      y: Math.round(h),\n      x: Math.round(a),\n      width: e.offsetWidth,\n      height: e.offsetHeight,\n      right: Math.round(r),\n      bottom: Math.round(d)\n    };\n  }\n};\nvar K;\nif (Element.prototype.closest) K = function (e, h) {\n  return e.closest(h);\n};else {\n  var pe = Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n  K = function (e, h) {\n    var a = e;\n    do {\n      if (pe.call(a, h)) return a;\n      a = a.parentElement || a.parentNode;\n    } while (a !== null && a.nodeType === 1);\n    return null;\n  };\n}\nvar B = typeof window < \"u\";\nconst ye = {\n  isIE: B && (navigator.userAgent.indexOf(\"MSIE\") >= 0 || navigator.userAgent.indexOf(\"Trident\") >= 0),\n  isOpera: B && navigator.userAgent.indexOf(\"Opera\") >= 0,\n  isChrome: B && navigator.userAgent.indexOf(\"Chrome\") >= 0,\n  isKHTML: B && (navigator.userAgent.indexOf(\"Safari\") >= 0 || navigator.userAgent.indexOf(\"Konqueror\") >= 0),\n  isFF: B && navigator.userAgent.indexOf(\"Firefox\") >= 0,\n  isIPad: B && navigator.userAgent.search(/iPad/gi) >= 0,\n  isEdge: B && navigator.userAgent.indexOf(\"Edge\") != -1,\n  isNode: !B || typeof navigator > \"u\"\n};\nfunction W(e) {\n  if (typeof e == \"string\" || typeof e == \"number\") return e;\n  var h = \"\";\n  for (var a in e) {\n    var r = \"\";\n    e.hasOwnProperty(a) && (r = a + \"=\" + (r = typeof e[a] == \"string\" ? encodeURIComponent(e[a]) : typeof e[a] == \"number\" ? e[a] : encodeURIComponent(JSON.stringify(e[a]))), h.length && (r = \"&\" + r), h += r);\n  }\n  return h;\n}\nfunction be(e) {\n  var h = function (i, _) {\n      for (var o = \"var temp=date.match(/[a-zA-Z]+|[0-9]+/g);\", t = i.match(/%[a-zA-Z]/g), n = 0; n < t.length; n++) switch (t[n]) {\n        case \"%j\":\n        case \"%d\":\n          o += \"set[2]=temp[\" + n + \"]||1;\";\n          break;\n        case \"%n\":\n        case \"%m\":\n          o += \"set[1]=(temp[\" + n + \"]||1)-1;\";\n          break;\n        case \"%y\":\n          o += \"set[0]=temp[\" + n + \"]*1+(temp[\" + n + \"]>50?1900:2000);\";\n          break;\n        case \"%g\":\n        case \"%G\":\n        case \"%h\":\n        case \"%H\":\n          o += \"set[3]=temp[\" + n + \"]||0;\";\n          break;\n        case \"%i\":\n          o += \"set[4]=temp[\" + n + \"]||0;\";\n          break;\n        case \"%Y\":\n          o += \"set[0]=temp[\" + n + \"]||0;\";\n          break;\n        case \"%a\":\n        case \"%A\":\n          o += \"set[3]=set[3]%12+((temp[\" + n + \"]||'').toLowerCase()=='am'?0:12);\";\n          break;\n        case \"%s\":\n          o += \"set[5]=temp[\" + n + \"]||0;\";\n          break;\n        case \"%M\":\n          o += \"set[1]=this.locale.date.month_short_hash[temp[\" + n + \"]]||0;\";\n          break;\n        case \"%F\":\n          o += \"set[1]=this.locale.date.month_full_hash[temp[\" + n + \"]]||0;\";\n      }\n      var s = \"set[0],set[1],set[2],set[3],set[4],set[5]\";\n      return _ && (s = \" Date.UTC(\" + s + \")\"), new Function(\"date\", \"var set=[0,0,1,0,0,0]; \" + o + \" return new Date(\" + s + \");\");\n    },\n    a = function (i, _) {\n      const o = i.match(/%[a-zA-Z]/g);\n      return function (t) {\n        for (var n = [0, 0, 1, 0, 0, 0], s = t.match(/[a-zA-Z]+|[0-9]+/g), c = 0; c < o.length; c++) switch (o[c]) {\n          case \"%j\":\n          case \"%d\":\n            n[2] = s[c] || 1;\n            break;\n          case \"%n\":\n          case \"%m\":\n            n[1] = (s[c] || 1) - 1;\n            break;\n          case \"%y\":\n            n[0] = 1 * s[c] + (s[c] > 50 ? 1900 : 2e3);\n            break;\n          case \"%g\":\n          case \"%G\":\n          case \"%h\":\n          case \"%H\":\n            n[3] = s[c] || 0;\n            break;\n          case \"%i\":\n            n[4] = s[c] || 0;\n            break;\n          case \"%Y\":\n            n[0] = s[c] || 0;\n            break;\n          case \"%a\":\n          case \"%A\":\n            n[3] = n[3] % 12 + ((s[c] || \"\").toLowerCase() == \"am\" ? 0 : 12);\n            break;\n          case \"%s\":\n            n[5] = s[c] || 0;\n            break;\n          case \"%M\":\n            n[1] = e.locale.date.month_short_hash[s[c]] || 0;\n            break;\n          case \"%F\":\n            n[1] = e.locale.date.month_full_hash[s[c]] || 0;\n        }\n        return _ ? new Date(Date.UTC(n[0], n[1], n[2], n[3], n[4], n[5])) : new Date(n[0], n[1], n[2], n[3], n[4], n[5]);\n      };\n    };\n  let r;\n  function d() {\n    var i = !1;\n    return e.config.csp === \"auto\" ? (r === void 0 && (r = function () {\n      try {\n        new Function(\"cspEnabled = false;\"), r = !1;\n      } catch {\n        r = !0;\n      }\n      return r;\n    }()), i = r) : i = e.config.csp, i;\n  }\n  e.date = {\n    init: function () {\n      for (var i = e.locale.date.month_short, _ = e.locale.date.month_short_hash = {}, o = 0; o < i.length; o++) _[i[o]] = o;\n      for (i = e.locale.date.month_full, _ = e.locale.date.month_full_hash = {}, o = 0; o < i.length; o++) _[i[o]] = o;\n    },\n    date_part: function (i) {\n      var _ = new Date(i);\n      return i.setHours(0), i.setMinutes(0), i.setSeconds(0), i.setMilliseconds(0), i.getHours() && (i.getDate() < _.getDate() || i.getMonth() < _.getMonth() || i.getFullYear() < _.getFullYear()) && i.setTime(i.getTime() + 36e5 * (24 - i.getHours())), i;\n    },\n    time_part: function (i) {\n      return (i.valueOf() / 1e3 - 60 * i.getTimezoneOffset()) % 86400;\n    },\n    week_start: function (i) {\n      var _ = i.getDay();\n      return e.config.start_on_monday && (_ === 0 ? _ = 6 : _--), this.date_part(this.add(i, -1 * _, \"day\"));\n    },\n    month_start: function (i) {\n      return i.setDate(1), this.date_part(i);\n    },\n    year_start: function (i) {\n      return i.setMonth(0), this.month_start(i);\n    },\n    day_start: function (i) {\n      return this.date_part(i);\n    },\n    _add_days: function (i, _) {\n      var o = new Date(i.valueOf());\n      if (o.setDate(o.getDate() + _), _ == Math.round(_) && _ > 0) {\n        var t = (+o - +i) % 864e5;\n        if (t && i.getTimezoneOffset() == o.getTimezoneOffset()) {\n          var n = t / 36e5;\n          o.setTime(o.getTime() + 60 * (24 - n) * 60 * 1e3);\n        }\n      }\n      return _ >= 0 && !i.getHours() && o.getHours() && (o.getDate() < i.getDate() || o.getMonth() < i.getMonth() || o.getFullYear() < i.getFullYear()) && o.setTime(o.getTime() + 36e5 * (24 - o.getHours())), o;\n    },\n    add: function (i, _, o) {\n      var t = new Date(i.valueOf());\n      switch (o) {\n        case \"day\":\n          t = e.date._add_days(t, _);\n          break;\n        case \"week\":\n          t = e.date._add_days(t, 7 * _);\n          break;\n        case \"month\":\n          t.setMonth(t.getMonth() + _);\n          break;\n        case \"year\":\n          t.setYear(t.getFullYear() + _);\n          break;\n        case \"hour\":\n          t.setTime(t.getTime() + 60 * _ * 60 * 1e3);\n          break;\n        case \"minute\":\n          t.setTime(t.getTime() + 60 * _ * 1e3);\n          break;\n        default:\n          return e.date[\"add_\" + o](i, _, o);\n      }\n      return t;\n    },\n    to_fixed: function (i) {\n      return i < 10 ? \"0\" + i : i;\n    },\n    copy: function (i) {\n      return new Date(i.valueOf());\n    },\n    date_to_str: function (i, _) {\n      return d() ? function (o, t) {\n        return function (n) {\n          return o.replace(/%[a-zA-Z]/g, function (s) {\n            switch (s) {\n              case \"%d\":\n                return t ? e.date.to_fixed(n.getUTCDate()) : e.date.to_fixed(n.getDate());\n              case \"%m\":\n                return t ? e.date.to_fixed(n.getUTCMonth() + 1) : e.date.to_fixed(n.getMonth() + 1);\n              case \"%j\":\n                return t ? n.getUTCDate() : n.getDate();\n              case \"%n\":\n                return t ? n.getUTCMonth() + 1 : n.getMonth() + 1;\n              case \"%y\":\n                return t ? e.date.to_fixed(n.getUTCFullYear() % 100) : e.date.to_fixed(n.getFullYear() % 100);\n              case \"%Y\":\n                return t ? n.getUTCFullYear() : n.getFullYear();\n              case \"%D\":\n                return t ? e.locale.date.day_short[n.getUTCDay()] : e.locale.date.day_short[n.getDay()];\n              case \"%l\":\n                return t ? e.locale.date.day_full[n.getUTCDay()] : e.locale.date.day_full[n.getDay()];\n              case \"%M\":\n                return t ? e.locale.date.month_short[n.getUTCMonth()] : e.locale.date.month_short[n.getMonth()];\n              case \"%F\":\n                return t ? e.locale.date.month_full[n.getUTCMonth()] : e.locale.date.month_full[n.getMonth()];\n              case \"%h\":\n                return t ? e.date.to_fixed((n.getUTCHours() + 11) % 12 + 1) : e.date.to_fixed((n.getHours() + 11) % 12 + 1);\n              case \"%g\":\n                return t ? (n.getUTCHours() + 11) % 12 + 1 : (n.getHours() + 11) % 12 + 1;\n              case \"%G\":\n                return t ? n.getUTCHours() : n.getHours();\n              case \"%H\":\n                return t ? e.date.to_fixed(n.getUTCHours()) : e.date.to_fixed(n.getHours());\n              case \"%i\":\n                return t ? e.date.to_fixed(n.getUTCMinutes()) : e.date.to_fixed(n.getMinutes());\n              case \"%a\":\n                return t ? n.getUTCHours() > 11 ? \"pm\" : \"am\" : n.getHours() > 11 ? \"pm\" : \"am\";\n              case \"%A\":\n                return t ? n.getUTCHours() > 11 ? \"PM\" : \"AM\" : n.getHours() > 11 ? \"PM\" : \"AM\";\n              case \"%s\":\n                return t ? e.date.to_fixed(n.getUTCSeconds()) : e.date.to_fixed(n.getSeconds());\n              case \"%W\":\n                return t ? e.date.to_fixed(e.date.getUTCISOWeek(n)) : e.date.to_fixed(e.date.getISOWeek(n));\n              default:\n                return s;\n            }\n          });\n        };\n      }(i, _) : (i = i.replace(/%[a-zA-Z]/g, function (o) {\n        switch (o) {\n          case \"%d\":\n            return '\"+this.date.to_fixed(date.getDate())+\"';\n          case \"%m\":\n            return '\"+this.date.to_fixed((date.getMonth()+1))+\"';\n          case \"%j\":\n            return '\"+date.getDate()+\"';\n          case \"%n\":\n            return '\"+(date.getMonth()+1)+\"';\n          case \"%y\":\n            return '\"+this.date.to_fixed(date.getFullYear()%100)+\"';\n          case \"%Y\":\n            return '\"+date.getFullYear()+\"';\n          case \"%D\":\n            return '\"+this.locale.date.day_short[date.getDay()]+\"';\n          case \"%l\":\n            return '\"+this.locale.date.day_full[date.getDay()]+\"';\n          case \"%M\":\n            return '\"+this.locale.date.month_short[date.getMonth()]+\"';\n          case \"%F\":\n            return '\"+this.locale.date.month_full[date.getMonth()]+\"';\n          case \"%h\":\n            return '\"+this.date.to_fixed((date.getHours()+11)%12+1)+\"';\n          case \"%g\":\n            return '\"+((date.getHours()+11)%12+1)+\"';\n          case \"%G\":\n            return '\"+date.getHours()+\"';\n          case \"%H\":\n            return '\"+this.date.to_fixed(date.getHours())+\"';\n          case \"%i\":\n            return '\"+this.date.to_fixed(date.getMinutes())+\"';\n          case \"%a\":\n            return '\"+(date.getHours()>11?\"pm\":\"am\")+\"';\n          case \"%A\":\n            return '\"+(date.getHours()>11?\"PM\":\"AM\")+\"';\n          case \"%s\":\n            return '\"+this.date.to_fixed(date.getSeconds())+\"';\n          case \"%W\":\n            return '\"+this.date.to_fixed(this.date.getISOWeek(date))+\"';\n          default:\n            return o;\n        }\n      }), _ && (i = i.replace(/date\\.get/g, \"date.getUTC\")), new Function(\"date\", 'return \"' + i + '\";').bind(e));\n    },\n    str_to_date: function (i, _, o) {\n      var t = d() ? a : h,\n        n = t(i, _),\n        s = /^[0-9]{4}(\\-|\\/)[0-9]{2}(\\-|\\/)[0-9]{2} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/,\n        c = /^[0-9]{2}\\/[0-9]{2}\\/[0-9]{4} ?(([0-9]{1,2}:[0-9]{2})(:[0-9]{1,2})?)?$/,\n        u = /^[0-9]{2}\\-[0-9]{2}\\-[0-9]{4} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/,\n        v = /^([\\+-]?\\d{4}(?!\\d{2}\\b))((-?)((0[1-9]|1[0-2])(\\3([12]\\d|0[1-9]|3[01]))?|W([0-4]\\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\\d|[12]\\d{2}|3([0-5]\\d|6[1-6])))([T\\s]((([01]\\d|2[0-3])((:?)[0-5]\\d)?|24\\:?00)([\\.,]\\d+(?!:))?)?(\\17[0-5]\\d([\\.,]\\d+)?)?([zZ]|([\\+-])([01]\\d|2[0-3]):?([0-5]\\d)?)?)?)?$/,\n        m = t(\"%Y-%m-%d %H:%i:%s\", _),\n        l = t(\"%m/%d/%Y %H:%i:%s\", _),\n        f = t(\"%d-%m-%Y %H:%i:%s\", _);\n      return function (g) {\n        if (!o && !e.config.parse_exact_format) {\n          if (g && g.getISOWeek) return new Date(g);\n          if (typeof g == \"number\") return new Date(g);\n          if (p = g, s.test(String(p))) return m(g);\n          if (function (y) {\n            return c.test(String(y));\n          }(g)) return l(g);\n          if (function (y) {\n            return u.test(String(y));\n          }(g)) return f(g);\n          if (function (y) {\n            return v.test(y);\n          }(g)) return new Date(g);\n        }\n        var p;\n        return n.call(e, g);\n      };\n    },\n    getISOWeek: function (i) {\n      if (!i) return !1;\n      var _ = (i = this.date_part(new Date(i))).getDay();\n      _ === 0 && (_ = 7);\n      var o = new Date(i.valueOf());\n      o.setDate(i.getDate() + (4 - _));\n      var t = o.getFullYear(),\n        n = Math.round((o.getTime() - new Date(t, 0, 1).getTime()) / 864e5);\n      return 1 + Math.floor(n / 7);\n    },\n    getUTCISOWeek: function (i) {\n      return this.getISOWeek(this.convert_to_utc(i));\n    },\n    convert_to_utc: function (i) {\n      return new Date(i.getUTCFullYear(), i.getUTCMonth(), i.getUTCDate(), i.getUTCHours(), i.getUTCMinutes(), i.getUTCSeconds());\n    }\n  };\n}\nfunction oe(e) {\n  return function () {\n    var h = {};\n    for (var a in this._events) {\n      var r = this._events[a];\n      r.id.toString().indexOf(\"#\") == -1 && (h[r.id] = r);\n    }\n    return h;\n  }.bind(e);\n}\nfunction xe(e) {\n  e._loaded = {}, e._load = function (a, r) {\n    if (a = a || this._load_url) {\n      var d;\n      if (a += (a.indexOf(\"?\") == -1 ? \"?\" : \"&\") + \"timeshift=\" + ( /* @__PURE__ */new Date()).getTimezoneOffset(), this.config.prevent_cache && (a += \"&uid=\" + this.uid()), r = r || this._date, this._load_mode) {\n        var i = this.templates.load_format;\n        for (r = this.date[this._load_mode + \"_start\"](new Date(r.valueOf())); r > this._min_date;) r = this.date.add(r, -1, this._load_mode);\n        d = r;\n        for (var _ = !0; d < this._max_date;) d = this.date.add(d, 1, this._load_mode), this._loaded[i(r)] && _ ? r = this.date.add(r, 1, this._load_mode) : _ = !1;\n        var o = d;\n        do d = o, o = this.date.add(d, -1, this._load_mode); while (o > r && this._loaded[i(o)]);\n        if (d <= r) return !1;\n        for (e.ajax.get(a + \"&from=\" + i(r) + \"&to=\" + i(d), t); r < d;) this._loaded[i(r)] = !0, r = this.date.add(r, 1, this._load_mode);\n      } else e.ajax.get(a, t);\n      return this.callEvent(\"onXLS\", []), this.callEvent(\"onLoadStart\", []), !0;\n    }\n    function t(n) {\n      e.on_load(n), e.callEvent(\"onLoadEnd\", []);\n    }\n  }, e._parsers = {}, function (a) {\n    a._parsers.xml = {\n      canParse: function (r, d) {\n        if (d.responseXML && d.responseXML.firstChild) return !0;\n        try {\n          var i = a.ajax.parse(d.responseText),\n            _ = a.ajax.xmltop(\"data\", i);\n          if (_ && _.tagName === \"data\") return !0;\n        } catch {}\n        return !1;\n      },\n      parse: function (r) {\n        var d;\n        if (r.xmlDoc.responseXML || (r.xmlDoc.responseXML = a.ajax.parse(r.xmlDoc.responseText)), (d = a.ajax.xmltop(\"data\", r.xmlDoc)).tagName != \"data\") return null;\n        var i = d.getAttribute(\"dhx_security\");\n        i && (window.dhtmlx && (window.dhtmlx.security_key = i), a.security_key = i);\n        for (var _ = a.ajax.xpath(\"//coll_options\", r.xmlDoc), o = 0; o < _.length; o++) {\n          var t = _[o].getAttribute(\"for\"),\n            n = a.serverList[t];\n          n || (a.serverList[t] = n = []), n.splice(0, n.length);\n          for (var s = a.ajax.xpath(\".//item\", _[o]), c = 0; c < s.length; c++) {\n            for (var u = s[c].attributes, v = {\n                key: s[c].getAttribute(\"value\"),\n                label: s[c].getAttribute(\"label\")\n              }, m = 0; m < u.length; m++) {\n              var l = u[m];\n              l.nodeName != \"value\" && l.nodeName != \"label\" && (v[l.nodeName] = l.nodeValue);\n            }\n            n.push(v);\n          }\n        }\n        _.length && a.callEvent(\"onOptionsLoad\", []);\n        var f = a.ajax.xpath(\"//userdata\", r.xmlDoc);\n        for (o = 0; o < f.length; o++) {\n          var g = a._xmlNodeToJSON(f[o]);\n          a._userdata[g.name] = g.text;\n        }\n        var p = [];\n        for (d = a.ajax.xpath(\"//event\", r.xmlDoc), o = 0; o < d.length; o++) {\n          var y = p[o] = a._xmlNodeToJSON(d[o]);\n          a._init_event(y);\n        }\n        return p;\n      }\n    };\n  }(e), function (a) {\n    a.json = a._parsers.json = {\n      canParse: function (r) {\n        if (r && typeof r == \"object\") return !0;\n        if (typeof r == \"string\") try {\n          var d = JSON.parse(r);\n          return Object.prototype.toString.call(d) === \"[object Object]\" || Object.prototype.toString.call(d) === \"[object Array]\";\n        } catch {\n          return !1;\n        }\n        return !1;\n      },\n      parse: function (r) {\n        var d = [];\n        typeof r == \"string\" && (r = JSON.parse(r)), Object.prototype.toString.call(r) === \"[object Array]\" ? d = r : r && (r.events ? d = r.events : r.data && (d = r.data)), d = d || [], r.dhx_security && (window.dhtmlx && (window.dhtmlx.security_key = r.dhx_security), a.security_key = r.dhx_security);\n        var i = r && r.collections ? r.collections : {},\n          _ = !1;\n        for (var o in i) if (i.hasOwnProperty(o)) {\n          _ = !0;\n          var t = i[o],\n            n = a.serverList[o];\n          n || (a.serverList[o] = n = []), n.splice(0, n.length);\n          for (var s = 0; s < t.length; s++) {\n            var c = t[s],\n              u = {\n                key: c.value,\n                label: c.label\n              };\n            for (var v in c) if (c.hasOwnProperty(v)) {\n              if (v == \"value\" || v == \"label\") continue;\n              u[v] = c[v];\n            }\n            n.push(u);\n          }\n        }\n        _ && a.callEvent(\"onOptionsLoad\", []);\n        for (var m = [], l = 0; l < d.length; l++) {\n          var f = d[l];\n          a._init_event(f), m.push(f);\n        }\n        return m;\n      }\n    };\n  }(e), function (a) {\n    a.ical = a._parsers.ical = {\n      canParse: function (r) {\n        return typeof r == \"string\" && new RegExp(\"^BEGIN:VCALENDAR\").test(r);\n      },\n      parse: function (r) {\n        var d = r.match(RegExp(this.c_start + \"[^\\f]*\" + this.c_end, \"\"));\n        if (d.length) {\n          d[0] = d[0].replace(/[\\r\\n]+ /g, \"\"), d[0] = d[0].replace(/[\\r\\n]+(?=[a-z \\t])/g, \" \"), d[0] = d[0].replace(/;[^:\\r\\n]*:/g, \":\");\n          for (var i, _ = [], o = RegExp(\"(?:\" + this.e_start + \")([^\\f]*?)(?:\" + this.e_end + \")\", \"g\"); (i = o.exec(d)) !== null;) {\n            for (var t, n = {}, s = /[^\\r\\n]+[\\r\\n]+/g; (t = s.exec(i[1])) !== null;) this.parse_param(t.toString(), n);\n            n.uid && !n.id && (n.id = n.uid), _.push(n);\n          }\n          return _;\n        }\n      },\n      parse_param: function (r, d) {\n        var i = r.indexOf(\":\");\n        if (i != -1) {\n          var _ = r.substr(0, i).toLowerCase(),\n            o = r.substr(i + 1).replace(/\\\\,/g, \",\").replace(/[\\r\\n]+$/, \"\");\n          _ == \"summary\" ? _ = \"text\" : _ == \"dtstart\" ? (_ = \"start_date\", o = this.parse_date(o, 0, 0)) : _ == \"dtend\" && (_ = \"end_date\", o = this.parse_date(o, 0, 0)), d[_] = o;\n        }\n      },\n      parse_date: function (r, d, i) {\n        var _ = r.split(\"T\"),\n          o = !1;\n        _[1] && (d = _[1].substr(0, 2), i = _[1].substr(2, 2), o = _[1][6] == \"Z\");\n        var t = _[0].substr(0, 4),\n          n = parseInt(_[0].substr(4, 2), 10) - 1,\n          s = _[0].substr(6, 2);\n        return a.config.server_utc || o ? new Date(Date.UTC(t, n, s, d, i)) : new Date(t, n, s, d, i);\n      },\n      c_start: \"BEGIN:VCALENDAR\",\n      e_start: \"BEGIN:VEVENT\",\n      e_end: \"END:VEVENT\",\n      c_end: \"END:VCALENDAR\"\n    };\n  }(e), e.on_load = function (a) {\n    var r;\n    this.callEvent(\"onBeforeParse\", []);\n    var d = !1,\n      i = !1;\n    for (var _ in this._parsers) {\n      var o = this._parsers[_];\n      if (o.canParse(a.xmlDoc.responseText, a.xmlDoc)) {\n        try {\n          var t = a.xmlDoc.responseText;\n          _ === \"xml\" && (t = a), (r = o.parse(t)) || (d = !0);\n        } catch {\n          d = !0;\n        }\n        i = !0;\n        break;\n      }\n    }\n    if (!i) if (this._process && this[this._process]) try {\n      r = this[this._process].parse(a.xmlDoc.responseText);\n    } catch {\n      d = !0;\n    } else d = !0;\n    (d || a.xmlDoc.status && a.xmlDoc.status >= 400) && (this.callEvent(\"onLoadError\", [a.xmlDoc]), r = []), this._process_loading(r), this.callEvent(\"onXLE\", []), this.callEvent(\"onParse\", []);\n  }, e._process_loading = function (a) {\n    this._loading = !0, this._not_render = !0;\n    for (var r = 0; r < a.length; r++) this.callEvent(\"onEventLoading\", [a[r]]) && this.addEvent(a[r]);\n    this._not_render = !1, this._render_wait && this.render_view_data(), this._loading = !1, this._after_call && this._after_call(), this._after_call = null;\n  }, e._init_event = function (a) {\n    a.text = a.text || a._tagvalue || \"\", a.start_date = e._init_date(a.start_date), a.end_date = e._init_date(a.end_date);\n  }, e._init_date = function (a) {\n    return a ? typeof a == \"string\" ? e._helpers.parseDate(a) : new Date(a) : null;\n  };\n  const h = oe(e);\n  e.serialize = function () {\n    const a = [],\n      r = h();\n    for (var d in r) {\n      const o = {};\n      var i = r[d];\n      for (var _ in i) {\n        if (_.charAt(0) == \"$\" || _.charAt(0) == \"_\") continue;\n        let t;\n        const n = i[_];\n        t = e.utils.isDate(n) ? e.defined(e.templates.xml_format) ? e.templates.xml_format(n) : e.templates.format_date(n) : n, o[_] = t;\n      }\n      a.push(o);\n    }\n    return a;\n  }, e.parse = function (a, r) {\n    this._process = r, this.on_load({\n      xmlDoc: {\n        responseText: a\n      }\n    });\n  }, e.load = function (a, r) {\n    typeof r == \"string\" && (this._process = r, r = arguments[2]), this._load_url = a, this._after_call = r, this._load(a, this._date);\n  }, e.setLoadMode = function (a) {\n    a == \"all\" && (a = \"\"), this._load_mode = a;\n  }, e.serverList = function (a, r) {\n    return r ? (this.serverList[a] = r.slice(0), this.serverList[a]) : (this.serverList[a] = this.serverList[a] || [], this.serverList[a]);\n  }, e._userdata = {}, e._xmlNodeToJSON = function (a) {\n    for (var r = {}, d = 0; d < a.attributes.length; d++) r[a.attributes[d].name] = a.attributes[d].value;\n    for (d = 0; d < a.childNodes.length; d++) {\n      var i = a.childNodes[d];\n      i.nodeType == 1 && (r[i.tagName] = i.firstChild ? i.firstChild.nodeValue : \"\");\n    }\n    return r.text || (r.text = a.firstChild ? a.firstChild.nodeValue : \"\"), r;\n  }, e.attachEvent(\"onXLS\", function () {\n    var a;\n    this.config.show_loading === !0 && ((a = this.config.show_loading = document.createElement(\"div\")).className = \"dhx_loading\", a.style.left = Math.round((this._x - 128) / 2) + \"px\", a.style.top = Math.round((this._y - 15) / 2) + \"px\", this._obj.appendChild(a));\n  }), e.attachEvent(\"onXLE\", function () {\n    var a = this.config.show_loading;\n    a && typeof a == \"object\" && (a.parentNode && a.parentNode.removeChild(a), this.config.show_loading = !0);\n  });\n}\nfunction we(e) {\n  e._init_touch_events = function () {\n    if ((this.config.touch && (navigator.userAgent.indexOf(\"Mobile\") != -1 || navigator.userAgent.indexOf(\"iPad\") != -1 || navigator.userAgent.indexOf(\"Android\") != -1 || navigator.userAgent.indexOf(\"Touch\") != -1) && !window.MSStream || navigator.platform === \"MacIntel\" && navigator.maxTouchPoints > 1) && (this.xy.scroll_width = 0, this._mobile = !0), this.config.touch) {\n      var h = !0;\n      try {\n        document.createEvent(\"TouchEvent\");\n      } catch {\n        h = !1;\n      }\n      h ? this._touch_events([\"touchmove\", \"touchstart\", \"touchend\"], function (a) {\n        return a.touches && a.touches.length > 1 ? null : a.touches[0] ? {\n          target: a.target,\n          pageX: a.touches[0].pageX,\n          pageY: a.touches[0].pageY,\n          clientX: a.touches[0].clientX,\n          clientY: a.touches[0].clientY\n        } : a;\n      }, function () {\n        return !1;\n      }) : window.PointerEvent || window.navigator.pointerEnabled ? this._touch_events([\"pointermove\", \"pointerdown\", \"pointerup\"], function (a) {\n        return a.pointerType == \"mouse\" ? null : a;\n      }, function (a) {\n        return !a || a.pointerType == \"mouse\";\n      }) : window.navigator.msPointerEnabled && this._touch_events([\"MSPointerMove\", \"MSPointerDown\", \"MSPointerUp\"], function (a) {\n        return a.pointerType == a.MSPOINTER_TYPE_MOUSE ? null : a;\n      }, function (a) {\n        return !a || a.pointerType == a.MSPOINTER_TYPE_MOUSE;\n      });\n    }\n  }, e._touch_events = function (h, a, r) {\n    var d,\n      i,\n      _,\n      o,\n      t,\n      n,\n      s = 0;\n    function c(v, m, l) {\n      e.event(v, m, function (f) {\n        return !!e._is_lightbox_open() || (r(f) ? void 0 : l(f));\n      }, {\n        passive: !1\n      });\n    }\n    function u(v) {\n      r(v) || (e._hide_global_tip(), o && (e._on_mouse_up(a(v)), e._temp_touch_block = !1), e._drag_id = null, e._drag_mode = null, e._drag_pos = null, e._pointerDragId = null, clearTimeout(_), o = n = !1, t = !0);\n    }\n    c(document.body, h[0], function (v) {\n      if (!r(v)) {\n        var m = a(v);\n        if (m) {\n          if (o) return function (l) {\n            if (!r(l)) {\n              var f = e.getState().drag_mode,\n                g = !!e.matrix && e.matrix[e._mode],\n                p = e.render_view_data;\n              f == \"create\" && g && (e.render_view_data = function () {\n                for (var y = e.getState().drag_id, w = e.getEvent(y), b = g.y_property, k = e.getEvents(w.start_date, w.end_date), E = 0; E < k.length; E++) k[E][b] != w[b] && (k.splice(E, 1), E--);\n                w._sorder = k.length - 1, w._count = k.length, this.render_data([w], e.getState().mode);\n              }), e._on_mouse_move(l), f == \"create\" && g && (e.render_view_data = p), l.preventDefault && l.preventDefault(), l.cancelBubble = !0;\n            }\n          }(m), v.preventDefault && v.preventDefault(), v.cancelBubble = !0, e._update_global_tip(), !1;\n          i = a(v), n && (i ? (d.target != i.target || Math.abs(d.pageX - i.pageX) > 5 || Math.abs(d.pageY - i.pageY) > 5) && (t = !0, clearTimeout(_)) : t = !0);\n        }\n      }\n    }), c(this._els.dhx_cal_data[0], \"touchcancel\", u), c(this._els.dhx_cal_data[0], \"contextmenu\", function (v) {\n      if (!r(v)) return n ? (v && v.preventDefault && v.preventDefault(), v.cancelBubble = !0, !1) : void 0;\n    }), c(this._obj, h[1], function (v) {\n      var m;\n      if (document && document.body && document.body.classList.add(\"dhx_cal_touch_active\"), !r(v)) if (e._pointerDragId = v.pointerId, o = t = !1, n = !0, m = i = a(v)) {\n        var l = /* @__PURE__ */new Date();\n        if (!t && !o && l - s < 250) return e._click.dhx_cal_data(m), window.setTimeout(function () {\n          e.$destroyed || e._on_dbl_click(m);\n        }, 50), v.preventDefault && v.preventDefault(), v.cancelBubble = !0, e._block_next_stop = !0, !1;\n        if (s = l, !t && !o && e.config.touch_drag) {\n          var f = e._locate_event(document.activeElement),\n            g = e._locate_event(m.target),\n            p = d ? e._locate_event(d.target) : null;\n          if (f && g && f == g && f != p) return v.preventDefault && v.preventDefault(), v.cancelBubble = !0, e._ignore_next_click = !1, e._click.dhx_cal_data(m), d = m, !1;\n          _ = setTimeout(function () {\n            if (!e.$destroyed) {\n              o = !0;\n              var y = d.target,\n                w = e._getClassName(y);\n              y && w.indexOf(\"dhx_body\") != -1 && (y = y.previousSibling), e._on_mouse_down(d, y), e._drag_mode && e._drag_mode != \"create\" && e.for_rendered(e._drag_id, function (b, k) {\n                b.style.display = \"none\", e._rendered.splice(k, 1);\n              }), e.config.touch_tip && e._show_global_tip(), e.updateEvent(e._drag_id);\n            }\n          }, e.config.touch_drag), d = m;\n        }\n      } else t = !0;\n    }), c(this._els.dhx_cal_data[0], h[2], function (v) {\n      if (document && document.body && document.body.classList.remove(\"dhx_cal_touch_active\"), !r(v)) return e.config.touch_swipe_dates && !o && function (m, l, f, g) {\n        if (!m || !l) return !1;\n        for (var p = m.target; p && p != e._obj;) p = p.parentNode;\n        if (p != e._obj || e.matrix && e.matrix[e.getState().mode] && e.matrix[e.getState().mode].scrollable) return !1;\n        var y = Math.abs(m.pageY - l.pageY),\n          w = Math.abs(m.pageX - l.pageX);\n        return y < g && w > f && (!y || w / y > 3) && (m.pageX > l.pageX ? e._click.dhx_cal_next_button() : e._click.dhx_cal_prev_button(), !0);\n      }(d, i, 200, 100) && (e._block_next_stop = !0), o && (e._ignore_next_click = !0, setTimeout(function () {\n        e._ignore_next_click = !1;\n      }, 100)), u(v), e._block_next_stop ? (e._block_next_stop = !1, v.preventDefault && v.preventDefault(), v.cancelBubble = !0, !1) : void 0;\n    }), e.event(document.body, h[2], u);\n  }, e._show_global_tip = function () {\n    e._hide_global_tip();\n    var h = e._global_tip = document.createElement(\"div\");\n    h.className = \"dhx_global_tip\", e._update_global_tip(1), document.body.appendChild(h);\n  }, e._update_global_tip = function (h) {\n    var a = e._global_tip;\n    if (a) {\n      var r = \"\";\n      if (e._drag_id && !h) {\n        var d = e.getEvent(e._drag_id);\n        d && (r = \"<div>\" + (d._timed ? e.templates.event_header(d.start_date, d.end_date, d) : e.templates.day_date(d.start_date, d.end_date, d)) + \"</div>\");\n      }\n      e._drag_mode == \"create\" || e._drag_mode == \"new-size\" ? a.innerHTML = (e.locale.labels.drag_to_create || \"Drag to create\") + r : a.innerHTML = (e.locale.labels.drag_to_move || \"Drag to move\") + r;\n    }\n  }, e._hide_global_tip = function () {\n    var h = e._global_tip;\n    h && h.parentNode && (h.parentNode.removeChild(h), e._global_tip = 0);\n  };\n}\nfunction ke(e) {\n  var h, a;\n  function r() {\n    if (e._is_material_skin()) return !0;\n    if (a !== void 0) return a;\n    var o = document.createElement(\"div\");\n    o.style.position = \"absolute\", o.style.left = \"-9999px\", o.style.top = \"-9999px\", o.innerHTML = \"<div class='dhx_cal_container'><div class='dhx_cal_data'><div class='dhx_cal_event'><div class='dhx_body'></div></div><div>\", document.body.appendChild(o);\n    var t = window.getComputedStyle(o.querySelector(\".dhx_body\")).getPropertyValue(\"box-sizing\");\n    document.body.removeChild(o), (a = t === \"border-box\") || setTimeout(function () {\n      a = void 0;\n    }, 1e3);\n  }\n  function d() {\n    if (!e._is_material_skin() && !e._border_box_events()) {\n      var o = a;\n      a = void 0, h = void 0, o !== r() && e.$container && e.getState().mode && e.setCurrentView();\n    }\n  }\n  function i(o) {\n    var t = o.getMinutes();\n    return t = t < 10 ? \"0\" + t : t, \"<span class='dhx_scale_h'>\" + o.getHours() + \"</span><span class='dhx_scale_m'>&nbsp;\" + t + \"</span>\";\n  }\n  e._addThemeClass = function () {\n    document.documentElement.setAttribute(\"data-scheduler-theme\", e.skin);\n  }, e._skin_settings = {\n    fix_tab_position: [1, 0],\n    use_select_menu_space: [1, 0],\n    wide_form: [1, 0],\n    hour_size_px: [44, 42],\n    displayed_event_color: [\"#ff4a4a\", \"ffc5ab\"],\n    displayed_event_text_color: [\"#ffef80\", \"7e2727\"]\n  }, e._skin_xy = {\n    lightbox_additional_height: [90, 50],\n    nav_height: [59, 22],\n    bar_height: [24, 20]\n  }, e._is_material_skin = function () {\n    return e.skin ? (e.skin + \"\").indexOf(\"material\") > -1 : function () {\n      if (h === void 0) {\n        var o = document.createElement(\"div\");\n        o.style.position = \"absolute\", o.style.left = \"-9999px\", o.style.top = \"-9999px\", o.innerHTML = \"<div class='dhx_cal_container'><div class='dhx_cal_scale_placeholder'></div><div>\", document.body.appendChild(o);\n        var t = window.getComputedStyle(o.querySelector(\".dhx_cal_scale_placeholder\")).getPropertyValue(\"position\");\n        h = t === \"absolute\", setTimeout(function () {\n          h = null, o && o.parentNode && o.parentNode.removeChild(o);\n        }, 500);\n      }\n      return h;\n    }();\n  }, e._build_skin_info = function () {\n    (function () {\n      const v = e.$container;\n      clearInterval(_), v && (_ = setInterval(() => {\n        const m = getComputedStyle(v).getPropertyValue(\"--dhx-scheduler-theme\");\n        m && m !== e.skin && e.setSkin(m);\n      }, 100));\n    })();\n    const o = getComputedStyle(this.$container),\n      t = o.getPropertyValue(\"--dhx-scheduler-theme\");\n    let n,\n      s = !!t,\n      c = {},\n      u = !1;\n    if (s) {\n      n = t;\n      for (let v in e.xy) c[v] = o.getPropertyValue(\"--dhx-scheduler-xy-\".concat(v));\n      c.hour_size_px = o.getPropertyValue(\"--dhx-scheduler-config-hour_size_px\"), c.wide_form = o.getPropertyValue(\"--dhx-scheduler-config-form_wide\");\n    } else n = function () {\n      for (var v = document.getElementsByTagName(\"link\"), m = 0; m < v.length; m++) {\n        var l = v[m].href.match(\"dhtmlxscheduler_([a-z]+).css\");\n        if (l) return l[1];\n      }\n    }(), u = e._is_material_skin();\n    if (e._theme_info = {\n      theme: n,\n      cssVarTheme: s,\n      oldMaterialTheme: u,\n      values: c\n    }, e._theme_info.cssVarTheme) {\n      const v = this._theme_info.values;\n      for (let m in e.xy) isNaN(parseInt(v[m])) || (e.xy[m] = parseInt(v[m]));\n    }\n  }, e.event(window, \"DOMContentLoaded\", d), e.event(window, \"load\", d), e._border_box_events = function () {\n    return r();\n  }, e._configure = function (o, t, n) {\n    for (var s in t) o[s] === void 0 && (o[s] = t[s][n]);\n  }, e.setSkin = function (o) {\n    this.skin = o, e._addThemeClass(), e.$container && (this._skin_init(), this.render());\n  };\n  let _ = null;\n  e.attachEvent(\"onDestroy\", function () {\n    clearInterval(_);\n  }), e._skin_init = function () {\n    this._build_skin_info(), this.skin || (this.skin = this._theme_info.theme), e._addThemeClass(), e.skin === \"flat\" ? e.templates.hour_scale = i : e.templates.hour_scale === i && (e.templates.hour_scale = e.date.date_to_str(e.config.hour_date)), e.attachEvent(\"onTemplatesReady\", function () {\n      var o = e.date.date_to_str(\"%d\");\n      e.templates._old_month_day || (e.templates._old_month_day = e.templates.month_day);\n      var t = e.templates._old_month_day;\n      e.templates.month_day = function (n) {\n        if (this._mode == \"month\") {\n          var s = o(n);\n          return n.getDate() == 1 && (s = e.locale.date.month_full[n.getMonth()] + \" \" + s), +n == +e.date.date_part(this._currentDate()) && (s = e.locale.labels.dhx_cal_today_button + \" \" + s), s;\n        }\n        return t.call(this, n);\n      }, e.config.fix_tab_position && (e._els.dhx_cal_navline[0].querySelectorAll(\"[data-tab]\").forEach(n => {\n        switch (n.getAttribute(\"data-tab\") || n.getAttribute(\"name\")) {\n          case \"day\":\n          case \"day_tab\":\n            n.classList.add(\"dhx_cal_tab_first\"), n.classList.add(\"dhx_cal_tab_segmented\");\n            break;\n          case \"week\":\n          case \"week_tab\":\n            n.classList.add(\"dhx_cal_tab_segmented\");\n            break;\n          case \"month\":\n          case \"month_tab\":\n            n.classList.add(\"dhx_cal_tab_last\"), n.classList.add(\"dhx_cal_tab_segmented\");\n            break;\n          default:\n            n.classList.add(\"dhx_cal_tab_standalone\");\n        }\n      }), function (n) {\n        if (e.config.header) return;\n        const s = Array.from(n.querySelectorAll(\".dhx_cal_tab\")),\n          c = [\"day\", \"week\", \"month\"].map(v => s.find(m => m.getAttribute(\"data-tab\") === v)).filter(v => v !== void 0);\n        let u = s.length > 0 ? s[0] : null;\n        c.reverse().forEach(v => {\n          n.insertBefore(v, u), u = v;\n        });\n      }(e._els.dhx_cal_navline[0]));\n    }, {\n      once: !0\n    });\n  };\n}\nfunction Ee(e, h) {\n  this.$scheduler = e, this.$dp = h, this._dataProcessorHandlers = [], this.attach = function () {\n    var a = this.$dp,\n      r = this.$scheduler;\n    this._dataProcessorHandlers.push(r.attachEvent(\"onEventAdded\", function (d) {\n      !this._loading && this._validId(d) && a.setUpdated(d, !0, \"inserted\");\n    })), this._dataProcessorHandlers.push(r.attachEvent(\"onConfirmedBeforeEventDelete\", function (d) {\n      if (this._validId(d)) {\n        var i = a.getState(d);\n        return i == \"inserted\" || this._new_event ? (a.setUpdated(d, !1), !0) : i != \"deleted\" && (i == \"true_deleted\" || (a.setUpdated(d, !0, \"deleted\"), !1));\n      }\n    })), this._dataProcessorHandlers.push(r.attachEvent(\"onEventChanged\", function (d) {\n      !this._loading && this._validId(d) && a.setUpdated(d, !0, \"updated\");\n    })), this._dataProcessorHandlers.push(r.attachEvent(\"onClearAll\", function () {\n      a._in_progress = {}, a._invalid = {}, a.updatedRows = [], a._waitMode = 0;\n    })), a.attachEvent(\"insertCallback\", r._update_callback), a.attachEvent(\"updateCallback\", r._update_callback), a.attachEvent(\"deleteCallback\", function (d, i) {\n      r.getEvent(i) ? (r.setUserData(i, this.action_param, \"true_deleted\"), r.deleteEvent(i)) : r._add_rec_marker && r._update_callback(d, i);\n    });\n  }, this.detach = function () {\n    for (var a in this._dataProcessorHandlers) {\n      var r = this._dataProcessorHandlers[a];\n      this.$scheduler.detachEvent(r);\n    }\n    this._dataProcessorHandlers = [];\n  };\n}\nfunction G(e) {\n  return this.serverProcessor = e, this.action_param = \"!nativeeditor_status\", this.object = null, this.updatedRows = [], this.autoUpdate = !0, this.updateMode = \"cell\", this._tMode = \"GET\", this._headers = null, this._payload = null, this.post_delim = \"_\", this._waitMode = 0, this._in_progress = {}, this._invalid = {}, this.messages = [], this.styles = {\n    updated: \"font-weight:bold;\",\n    inserted: \"font-weight:bold;\",\n    deleted: \"text-decoration : line-through;\",\n    invalid: \"background-color:FFE0E0;\",\n    invalid_cell: \"border-bottom:2px solid red;\",\n    error: \"color:red;\",\n    clear: \"font-weight:normal;text-decoration:none;\"\n  }, this.enableUTFencoding(!0), Q(this), this;\n}\nfunction De(e) {\n  var h = \"data-dhxbox\",\n    a = null;\n  function r(g, p) {\n    var y = g.callback;\n    m.hide(g.box), a = g.box = null, y && y(p);\n  }\n  function d(g) {\n    if (a) {\n      var p = g.which || g.keyCode,\n        y = !1;\n      if (l.keyboard) {\n        if (p == 13 || p == 32) {\n          var w = g.target || g.srcElement;\n          q.getClassName(w).indexOf(\"scheduler_popup_button\") > -1 && w.click ? w.click() : (r(a, !0), y = !0);\n        }\n        p == 27 && (r(a, !1), y = !0);\n      }\n      return y ? (g.preventDefault && g.preventDefault(), !(g.cancelBubble = !0)) : void 0;\n    }\n  }\n  function i(g) {\n    i.cover || (i.cover = document.createElement(\"div\"), e.event(i.cover, \"keydown\", d), i.cover.className = \"dhx_modal_cover\", document.body.appendChild(i.cover)), i.cover.style.display = g ? \"inline-block\" : \"none\";\n  }\n  function _(g, p, y) {\n    var w = e._waiAria.messageButtonAttrString(g),\n      b = (p || \"\").toLowerCase().replace(/ /g, \"_\");\n    return \"<div \".concat(w, \" class='scheduler_popup_button dhtmlx_popup_button \", \"scheduler_\".concat(b, \"_button dhtmlx_\").concat(b, \"_button\"), \"' data-result='\").concat(y, \"' result='\").concat(y, \"' ><div>\").concat(g, \"</div></div>\");\n  }\n  function o() {\n    for (var g = [].slice.apply(arguments, [0]), p = 0; p < g.length; p++) if (g[p]) return g[p];\n  }\n  function t(g, p, y) {\n    var w = g.tagName ? g : function (E, D, x) {\n      var S = document.createElement(\"div\"),\n        N = V.uid();\n      e._waiAria.messageModalAttr(S, N), S.className = \" scheduler_modal_box dhtmlx_modal_box scheduler-\" + E.type + \" dhtmlx-\" + E.type, S.setAttribute(h, 1);\n      var M = \"\";\n      if (E.width && (S.style.width = E.width), E.height && (S.style.height = E.height), E.title && (M += '<div class=\"scheduler_popup_title dhtmlx_popup_title\">' + E.title + \"</div>\"), M += '<div class=\"scheduler_popup_text dhtmlx_popup_text\" id=\"' + N + '\"><span>' + (E.content ? \"\" : E.text) + '</span></div><div  class=\"scheduler_popup_controls dhtmlx_popup_controls\">', D && (M += _(o(E.ok, e.locale.labels.message_ok, \"OK\"), \"ok\", !0)), x && (M += _(o(E.cancel, e.locale.labels.message_cancel, \"Cancel\"), \"cancel\", !1)), E.buttons) for (var A = 0; A < E.buttons.length; A++) {\n        var C = E.buttons[A];\n        M += typeof C == \"object\" ? _(C.label, C.css || \"scheduler_\" + C.label.toLowerCase() + \"_button dhtmlx_\" + C.label.toLowerCase() + \"_button\", C.value || A) : _(C, C, A);\n      }\n      if (M += \"</div>\", S.innerHTML = M, E.content) {\n        var T = E.content;\n        typeof T == \"string\" && (T = document.getElementById(T)), T.style.display == \"none\" && (T.style.display = \"\"), S.childNodes[E.title ? 1 : 0].appendChild(T);\n      }\n      return e.event(S, \"click\", function (O) {\n        var L = O.target || O.srcElement;\n        if (L.className || (L = L.parentNode), q.closest(L, \".scheduler_popup_button\")) {\n          var H = L.getAttribute(\"data-result\");\n          r(E, H = H == \"true\" || H != \"false\" && H);\n        }\n      }), E.box = S, (D || x) && (a = E), S;\n    }(g, p, y);\n    g.hidden || i(!0), document.body.appendChild(w);\n    var b = Math.abs(Math.floor(((window.innerWidth || document.documentElement.offsetWidth) - w.offsetWidth) / 2)),\n      k = Math.abs(Math.floor(((window.innerHeight || document.documentElement.offsetHeight) - w.offsetHeight) / 2));\n    return g.position == \"top\" ? w.style.top = \"-3px\" : w.style.top = k + \"px\", w.style.left = b + \"px\", e.event(w, \"keydown\", d), m.focus(w), g.hidden && m.hide(w), e.callEvent(\"onMessagePopup\", [w]), w;\n  }\n  function n(g) {\n    return t(g, !0, !1);\n  }\n  function s(g) {\n    return t(g, !0, !0);\n  }\n  function c(g) {\n    return t(g);\n  }\n  function u(g, p, y) {\n    return typeof g != \"object\" && (typeof p == \"function\" && (y = p, p = \"\"), g = {\n      text: g,\n      type: p,\n      callback: y\n    }), g;\n  }\n  function v(g, p, y, w) {\n    return typeof g != \"object\" && (g = {\n      text: g,\n      type: p,\n      expire: y,\n      id: w\n    }), g.id = g.id || V.uid(), g.expire = g.expire || l.expire, g;\n  }\n  e.event(document, \"keydown\", d, !0);\n  var m = function () {\n    var g = u.apply(this, arguments);\n    return g.type = g.type || \"alert\", c(g);\n  };\n  m.hide = function (g) {\n    for (; g && g.getAttribute && !g.getAttribute(h);) g = g.parentNode;\n    g && (g.parentNode.removeChild(g), i(!1), e.callEvent(\"onAfterMessagePopup\", [g]));\n  }, m.focus = function (g) {\n    setTimeout(function () {\n      var p = q.getFocusableNodes(g);\n      p.length && p[0].focus && p[0].focus();\n    }, 1);\n  };\n  var l = function (g, p, y, w) {\n    switch ((g = v.apply(this, arguments)).type = g.type || \"info\", g.type.split(\"-\")[0]) {\n      case \"alert\":\n        return n(g);\n      case \"confirm\":\n        return s(g);\n      case \"modalbox\":\n        return c(g);\n      default:\n        return function (b) {\n          l.area || (l.area = document.createElement(\"div\"), l.area.className = \"scheduler_message_area dhtmlx_message_area\", l.area.style[l.position] = \"5px\", document.body.appendChild(l.area)), l.hide(b.id);\n          var k = document.createElement(\"div\");\n          return k.innerHTML = \"<div>\" + b.text + \"</div>\", k.className = \"scheduler-info dhtmlx-info scheduler-\" + b.type + \" dhtmlx-\" + b.type, e.event(k, \"click\", function () {\n            l.hide(b.id), b = null;\n          }), e._waiAria.messageInfoAttr(k), l.position == \"bottom\" && l.area.firstChild ? l.area.insertBefore(k, l.area.firstChild) : l.area.appendChild(k), b.expire > 0 && (l.timers[b.id] = window.setTimeout(function () {\n            l && l.hide(b.id);\n          }, b.expire)), l.pull[b.id] = k, k = null, b.id;\n        }(g);\n    }\n  };\n  l.seed = ( /* @__PURE__ */new Date()).valueOf(), l.uid = V.uid, l.expire = 4e3, l.keyboard = !0, l.position = \"top\", l.pull = {}, l.timers = {}, l.hideAll = function () {\n    for (var g in l.pull) l.hide(g);\n  }, l.hide = function (g) {\n    var p = l.pull[g];\n    p && p.parentNode && (window.setTimeout(function () {\n      p.parentNode.removeChild(p), p = null;\n    }, 2e3), p.className += \" hidden\", l.timers[g] && window.clearTimeout(l.timers[g]), delete l.pull[g]);\n  };\n  var f = [];\n  return e.attachEvent(\"onMessagePopup\", function (g) {\n    f.push(g);\n  }), e.attachEvent(\"onAfterMessagePopup\", function (g) {\n    for (var p = 0; p < f.length; p++) f[p] === g && (f.splice(p, 1), p--);\n  }), e.attachEvent(\"onDestroy\", function () {\n    i.cover && i.cover.parentNode && i.cover.parentNode.removeChild(i.cover);\n    for (var g = 0; g < f.length; g++) f[g].parentNode && f[g].parentNode.removeChild(f[g]);\n    f = null, l.area && l.area.parentNode && l.area.parentNode.removeChild(l.area), l = null;\n  }), {\n    alert: function () {\n      var g = u.apply(this, arguments);\n      return g.type = g.type || \"confirm\", n(g);\n    },\n    confirm: function () {\n      var g = u.apply(this, arguments);\n      return g.type = g.type || \"alert\", s(g);\n    },\n    message: l,\n    modalbox: m\n  };\n}\nG.prototype = {\n  setTransactionMode: function (e, h) {\n    typeof e == \"object\" ? (this._tMode = e.mode || this._tMode, e.headers !== void 0 && (this._headers = e.headers), e.payload !== void 0 && (this._payload = e.payload), this._tSend = !!h) : (this._tMode = e, this._tSend = h), this._tMode == \"REST\" && (this._tSend = !1, this._endnm = !0), this._tMode === \"JSON\" || this._tMode === \"REST-JSON\" ? (this._tSend = !1, this._endnm = !0, this._serializeAsJson = !0, this._headers = this._headers || {}, this._headers[\"Content-Type\"] = \"application/json\") : this._headers && !this._headers[\"Content-Type\"] && (this._headers[\"Content-Type\"] = \"application/x-www-form-urlencoded\"), this._tMode === \"CUSTOM\" && (this._tSend = !1, this._endnm = !0, this._router = e.router);\n  },\n  escape: function (e) {\n    return this._utf ? encodeURIComponent(e) : escape(e);\n  },\n  enableUTFencoding: function (e) {\n    this._utf = !!e;\n  },\n  setDataColumns: function (e) {\n    this._columns = typeof e == \"string\" ? e.split(\",\") : e;\n  },\n  getSyncState: function () {\n    return !this.updatedRows.length;\n  },\n  enableDataNames: function (e) {\n    this._endnm = !!e;\n  },\n  enablePartialDataSend: function (e) {\n    this._changed = !!e;\n  },\n  setUpdateMode: function (e, h) {\n    this.autoUpdate = e == \"cell\", this.updateMode = e, this.dnd = h;\n  },\n  ignore: function (e, h) {\n    this._silent_mode = !0, e.call(h || window), this._silent_mode = !1;\n  },\n  setUpdated: function (e, h, a) {\n    if (!this._silent_mode) {\n      var r = this.findRow(e);\n      a = a || \"updated\";\n      var d = this.$scheduler.getUserData(e, this.action_param);\n      d && a == \"updated\" && (a = d), h ? (this.set_invalid(e, !1), this.updatedRows[r] = e, this.$scheduler.setUserData(e, this.action_param, a), this._in_progress[e] && (this._in_progress[e] = \"wait\")) : this.is_invalid(e) || (this.updatedRows.splice(r, 1), this.$scheduler.setUserData(e, this.action_param, \"\")), this.markRow(e, h, a), h && this.autoUpdate && this.sendData(e);\n    }\n  },\n  markRow: function (e, h, a) {\n    var r = \"\",\n      d = this.is_invalid(e);\n    if (d && (r = this.styles[d], h = !0), this.callEvent(\"onRowMark\", [e, h, a, d]) && (r = this.styles[h ? a : \"clear\"] + r, this.$scheduler[this._methods[0]](e, r), d && d.details)) {\n      r += this.styles[d + \"_cell\"];\n      for (var i = 0; i < d.details.length; i++) d.details[i] && this.$scheduler[this._methods[1]](e, i, r);\n    }\n  },\n  getActionByState: function (e) {\n    return e === \"inserted\" ? \"create\" : e === \"updated\" ? \"update\" : e === \"deleted\" ? \"delete\" : \"update\";\n  },\n  getState: function (e) {\n    return this.$scheduler.getUserData(e, this.action_param);\n  },\n  is_invalid: function (e) {\n    return this._invalid[e];\n  },\n  set_invalid: function (e, h, a) {\n    a && (h = {\n      value: h,\n      details: a,\n      toString: function () {\n        return this.value.toString();\n      }\n    }), this._invalid[e] = h;\n  },\n  checkBeforeUpdate: function (e) {\n    return !0;\n  },\n  sendData: function (e) {\n    return this.$scheduler.editStop && this.$scheduler.editStop(), e === void 0 || this._tSend ? this.sendAllData() : !this._in_progress[e] && (this.messages = [], !(!this.checkBeforeUpdate(e) && this.callEvent(\"onValidationError\", [e, this.messages])) && void this._beforeSendData(this._getRowData(e), e));\n  },\n  _beforeSendData: function (e, h) {\n    if (!this.callEvent(\"onBeforeUpdate\", [h, this.getState(h), e])) return !1;\n    this._sendData(e, h);\n  },\n  serialize: function (e, h) {\n    if (this._serializeAsJson) return this._serializeAsJSON(e);\n    if (typeof e == \"string\") return e;\n    if (h !== void 0) return this.serialize_one(e, \"\");\n    var a = [],\n      r = [];\n    for (var d in e) e.hasOwnProperty(d) && (a.push(this.serialize_one(e[d], d + this.post_delim)), r.push(d));\n    return a.push(\"ids=\" + this.escape(r.join(\",\"))), this.$scheduler.security_key && a.push(\"dhx_security=\" + this.$scheduler.security_key), a.join(\"&\");\n  },\n  serialize_one: function (e, h) {\n    if (typeof e == \"string\") return e;\n    var a = [],\n      r = \"\";\n    for (var d in e) if (e.hasOwnProperty(d)) {\n      if ((d == \"id\" || d == this.action_param) && this._tMode == \"REST\") continue;\n      r = typeof e[d] == \"string\" || typeof e[d] == \"number\" ? e[d] : JSON.stringify(e[d]), a.push(this.escape((h || \"\") + d) + \"=\" + this.escape(r));\n    }\n    return a.join(\"&\");\n  },\n  _applyPayload: function (e) {\n    var h = this.$scheduler.ajax;\n    if (this._payload) for (var a in this._payload) e = e + h.urlSeparator(e) + this.escape(a) + \"=\" + this.escape(this._payload[a]);\n    return e;\n  },\n  _sendData: function (e, h) {\n    if (e) {\n      if (!this.callEvent(\"onBeforeDataSending\", h ? [h, this.getState(h), e] : [null, null, e])) return !1;\n      h && (this._in_progress[h] = ( /* @__PURE__ */new Date()).valueOf());\n      var a = this,\n        r = this.$scheduler.ajax;\n      if (this._tMode !== \"CUSTOM\") {\n        var d,\n          i = {\n            callback: function (m) {\n              var l = [];\n              if (h) l.push(h);else if (e) for (var f in e) l.push(f);\n              return a.afterUpdate(a, m, l);\n            },\n            headers: a._headers\n          },\n          _ = this.serverProcessor + (this._user ? r.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, \"dhx_version=\" + this.$scheduler.getUserData(0, \"version\")].join(\"&\") : \"\"),\n          o = this._applyPayload(_);\n        switch (this._tMode) {\n          case \"GET\":\n            d = this._cleanupArgumentsBeforeSend(e), i.url = o + r.urlSeparator(o) + this.serialize(d, h), i.method = \"GET\";\n            break;\n          case \"POST\":\n            d = this._cleanupArgumentsBeforeSend(e), i.url = o, i.method = \"POST\", i.data = this.serialize(d, h);\n            break;\n          case \"JSON\":\n            d = {};\n            var t = this._cleanupItemBeforeSend(e);\n            for (var n in t) n !== this.action_param && n !== \"id\" && n !== \"gr_id\" && (d[n] = t[n]);\n            i.url = o, i.method = \"POST\", i.data = JSON.stringify({\n              id: h,\n              action: e[this.action_param],\n              data: d\n            });\n            break;\n          case \"REST\":\n          case \"REST-JSON\":\n            switch (o = _.replace(/(&|\\?)editing=true/, \"\"), d = \"\", this.getState(h)) {\n              case \"inserted\":\n                i.method = \"POST\", i.data = this.serialize(e, h);\n                break;\n              case \"deleted\":\n                i.method = \"DELETE\", o = o + (o.slice(-1) === \"/\" ? \"\" : \"/\") + h;\n                break;\n              default:\n                i.method = \"PUT\", i.data = this.serialize(e, h), o = o + (o.slice(-1) === \"/\" ? \"\" : \"/\") + h;\n            }\n            i.url = this._applyPayload(o);\n        }\n        return this._waitMode++, r.query(i);\n      }\n      {\n        var s = this.getState(h),\n          c = this.getActionByState(s),\n          u = function (l) {\n            var f = s;\n            if (l && l.responseText && l.setRequestHeader) {\n              l.status !== 200 && (f = \"error\");\n              try {\n                l = JSON.parse(l.responseText);\n              } catch {}\n            }\n            f = f || \"updated\";\n            var g = h,\n              p = h;\n            l && (f = l.action || f, g = l.sid || g, p = l.id || l.tid || p), a.afterUpdateCallback(g, p, f, l);\n          };\n        const m = \"event\";\n        var v;\n        if (this._router instanceof Function) v = this._router(m, c, e, h);else switch (s) {\n          case \"inserted\":\n            v = this._router[m].create(e);\n            break;\n          case \"deleted\":\n            v = this._router[m].delete(h);\n            break;\n          default:\n            v = this._router[m].update(e, h);\n        }\n        if (v) {\n          if (!v.then && v.id === void 0 && v.tid === void 0 && v.action === void 0) throw new Error(\"Incorrect router return value. A Promise or a response object is expected\");\n          v.then ? v.then(u).catch(function (l) {\n            l && l.action ? u(l) : u({\n              action: \"error\",\n              value: l\n            });\n          }) : u(v);\n        } else u(null);\n      }\n    }\n  },\n  sendAllData: function () {\n    if (this.updatedRows.length && this.updateMode !== \"off\") {\n      this.messages = [];\n      var e = !0;\n      if (this._forEachUpdatedRow(function (h) {\n        e = e && this.checkBeforeUpdate(h);\n      }), !e && !this.callEvent(\"onValidationError\", [\"\", this.messages])) return !1;\n      this._tSend ? this._sendData(this._getAllData()) : this._forEachUpdatedRow(function (h) {\n        if (!this._in_progress[h]) {\n          if (this.is_invalid(h)) return;\n          this._beforeSendData(this._getRowData(h), h);\n        }\n      });\n    }\n  },\n  _getAllData: function (e) {\n    var h = {},\n      a = !1;\n    return this._forEachUpdatedRow(function (r) {\n      if (!this._in_progress[r] && !this.is_invalid(r)) {\n        var d = this._getRowData(r);\n        this.callEvent(\"onBeforeUpdate\", [r, this.getState(r), d]) && (h[r] = d, a = !0, this._in_progress[r] = ( /* @__PURE__ */new Date()).valueOf());\n      }\n    }), a ? h : null;\n  },\n  findRow: function (e) {\n    var h = 0;\n    for (h = 0; h < this.updatedRows.length && e != this.updatedRows[h]; h++);\n    return h;\n  },\n  defineAction: function (e, h) {\n    this._uActions || (this._uActions = {}), this._uActions[e] = h;\n  },\n  afterUpdateCallback: function (e, h, a, r) {\n    if (this.$scheduler) {\n      var d = e,\n        i = a !== \"error\" && a !== \"invalid\";\n      if (i || this.set_invalid(e, a), this._uActions && this._uActions[a] && !this._uActions[a](r)) return delete this._in_progress[d];\n      this._in_progress[d] !== \"wait\" && this.setUpdated(e, !1);\n      var _ = e;\n      switch (a) {\n        case \"inserted\":\n        case \"insert\":\n          h != e && (this.setUpdated(e, !1), this.$scheduler[this._methods[2]](e, h), e = h);\n          break;\n        case \"delete\":\n        case \"deleted\":\n          return this.$scheduler.setUserData(e, this.action_param, \"true_deleted\"), this.$scheduler[this._methods[3]](e, h), delete this._in_progress[d], this.callEvent(\"onAfterUpdate\", [e, a, h, r]);\n      }\n      this._in_progress[d] !== \"wait\" ? (i && this.$scheduler.setUserData(e, this.action_param, \"\"), delete this._in_progress[d]) : (delete this._in_progress[d], this.setUpdated(h, !0, this.$scheduler.getUserData(e, this.action_param))), this.callEvent(\"onAfterUpdate\", [_, a, h, r]);\n    }\n  },\n  _errorResponse: function (e, h) {\n    return this.$scheduler && this.$scheduler.callEvent && this.$scheduler.callEvent(\"onSaveError\", [h, e.xmlDoc]), this.cleanUpdate(h);\n  },\n  _setDefaultTransactionMode: function () {\n    this.serverProcessor && (this.setTransactionMode(\"POST\", !0), this.serverProcessor += (this.serverProcessor.indexOf(\"?\") !== -1 ? \"&\" : \"?\") + \"editing=true\", this._serverProcessor = this.serverProcessor);\n  },\n  afterUpdate: function (e, h, a) {\n    var r = this.$scheduler.ajax;\n    if (h.xmlDoc.status === 200) {\n      var d;\n      try {\n        d = JSON.parse(h.xmlDoc.responseText);\n      } catch {\n        h.xmlDoc.responseText.length || (d = {});\n      }\n      if (d) {\n        var i = d.action || this.getState(a) || \"updated\",\n          _ = d.sid || a[0],\n          o = d.tid || a[0];\n        return e.afterUpdateCallback(_, o, i, d), void e.finalizeUpdate();\n      }\n      var t = r.xmltop(\"data\", h.xmlDoc);\n      if (!t) return this._errorResponse(h, a);\n      var n = r.xpath(\"//data/action\", t);\n      if (!n.length) return this._errorResponse(h, a);\n      for (var s = 0; s < n.length; s++) {\n        var c = n[s];\n        i = c.getAttribute(\"type\"), _ = c.getAttribute(\"sid\"), o = c.getAttribute(\"tid\"), e.afterUpdateCallback(_, o, i, c);\n      }\n      e.finalizeUpdate();\n    } else this._errorResponse(h, a);\n  },\n  cleanUpdate: function (e) {\n    if (e) for (var h = 0; h < e.length; h++) delete this._in_progress[e[h]];\n  },\n  finalizeUpdate: function () {\n    this._waitMode && this._waitMode--, this.callEvent(\"onAfterUpdateFinish\", []), this.updatedRows.length || this.callEvent(\"onFullSync\", []);\n  },\n  init: function (e) {\n    if (!this._initialized) {\n      this.$scheduler = e, this.$scheduler._dp_init && this.$scheduler._dp_init(this), this._setDefaultTransactionMode(), this._methods = this._methods || [\"_set_event_text_style\", \"\", \"_dp_change_event_id\", \"_dp_hook_delete\"], function (a, r) {\n        a._validId = function (d) {\n          return !this._is_virtual_event || !this._is_virtual_event(d);\n        }, a.setUserData = function (d, i, _) {\n          if (d) {\n            var o = this.getEvent(d);\n            o && (o[i] = _);\n          } else this._userdata[i] = _;\n        }, a.getUserData = function (d, i) {\n          if (d) {\n            var _ = this.getEvent(d);\n            return _ ? _[i] : null;\n          }\n          return this._userdata[i];\n        }, a._set_event_text_style = function (d, i) {\n          if (a.getEvent(d)) {\n            this.for_rendered(d, function (o) {\n              o.style.cssText += \";\" + i;\n            });\n            var _ = this.getEvent(d);\n            _._text_style = i, this.event_updated(_);\n          }\n        }, a._update_callback = function (d, i) {\n          var _ = a._xmlNodeToJSON(d.firstChild);\n          _.rec_type == \"none\" && (_.rec_pattern = \"none\"), _.text = _.text || _._tagvalue, _.start_date = a._helpers.parseDate(_.start_date), _.end_date = a._helpers.parseDate(_.end_date), a.addEvent(_), a._add_rec_marker && a.setCurrentView();\n        }, a._dp_change_event_id = function (d, i) {\n          a.getEvent(d) && a.changeEventId(d, i);\n        }, a._dp_hook_delete = function (d, i) {\n          if (a.getEvent(d)) return i && d != i && (this.getUserData(d, r.action_param) == \"true_deleted\" && this.setUserData(d, r.action_param, \"updated\"), this.changeEventId(d, i)), this.deleteEvent(i, !0);\n        }, a.setDp = function () {\n          this._dp = r;\n        }, a.setDp();\n      }(this.$scheduler, this);\n      var h = new Ee(this.$scheduler, this);\n      h.attach(), this.attachEvent(\"onDestroy\", function () {\n        delete this._getRowData, delete this.$scheduler._dp, delete this.$scheduler._dataprocessor, delete this.$scheduler._set_event_text_style, delete this.$scheduler._dp_change_event_id, delete this.$scheduler._dp_hook_delete, delete this.$scheduler, h.detach();\n      }), this.$scheduler.callEvent(\"onDataProcessorReady\", [this]), this._initialized = !0, e._dataprocessor = this;\n    }\n  },\n  setOnAfterUpdate: function (e) {\n    this.attachEvent(\"onAfterUpdate\", e);\n  },\n  setOnBeforeUpdateHandler: function (e) {\n    this.attachEvent(\"onBeforeDataSending\", e);\n  },\n  setAutoUpdate: function (e, h) {\n    e = e || 2e3, this._user = h || ( /* @__PURE__ */new Date()).valueOf(), this._need_update = !1, this._update_busy = !1, this.attachEvent(\"onAfterUpdate\", function (d, i, _, o) {\n      this.afterAutoUpdate(d, i, _, o);\n    }), this.attachEvent(\"onFullSync\", function () {\n      this.fullSync();\n    });\n    var a = this;\n    let r = I.setInterval(function () {\n      a.loadUpdate();\n    }, e);\n    this.attachEvent(\"onDestroy\", function () {\n      clearInterval(r);\n    });\n  },\n  afterAutoUpdate: function (e, h, a, r) {\n    return h != \"collision\" || (this._need_update = !0, !1);\n  },\n  fullSync: function () {\n    return this._need_update && (this._need_update = !1, this.loadUpdate()), !0;\n  },\n  getUpdates: function (e, h) {\n    var a = this.$scheduler.ajax;\n    if (this._update_busy) return !1;\n    this._update_busy = !0, a.get(e, h);\n  },\n  _getXmlNodeValue: function (e) {\n    return e.firstChild ? e.firstChild.nodeValue : \"\";\n  },\n  loadUpdate: function () {\n    var e = this,\n      h = this.$scheduler.ajax,\n      a = this.$scheduler.getUserData(0, \"version\"),\n      r = this.serverProcessor + h.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, \"dhx_version=\" + a].join(\"&\");\n    r = r.replace(\"editing=true&\", \"\"), this.getUpdates(r, function (d) {\n      var i = h.xpath(\"//userdata\", d);\n      e.$scheduler.setUserData(0, \"version\", e._getXmlNodeValue(i[0]));\n      var _ = h.xpath(\"//update\", d);\n      if (_.length) {\n        e._silent_mode = !0;\n        for (var o = 0; o < _.length; o++) {\n          var t = _[o].getAttribute(\"status\"),\n            n = _[o].getAttribute(\"id\"),\n            s = _[o].getAttribute(\"parent\");\n          switch (t) {\n            case \"inserted\":\n              this.callEvent(\"insertCallback\", [_[o], n, s]);\n              break;\n            case \"updated\":\n              this.callEvent(\"updateCallback\", [_[o], n, s]);\n              break;\n            case \"deleted\":\n              this.callEvent(\"deleteCallback\", [_[o], n, s]);\n          }\n        }\n        e._silent_mode = !1;\n      }\n      e._update_busy = !1, e = null;\n    });\n  },\n  destructor: function () {\n    this.callEvent(\"onDestroy\", []), this.detachAllEvents(), this.updatedRows = [], this._in_progress = {}, this._invalid = {}, this._headers = null, this._payload = null, delete this._initialized;\n  },\n  url: function (e) {\n    this.serverProcessor = this._serverProcessor = e;\n  },\n  _serializeAsJSON: function (e) {\n    if (typeof e == \"string\") return e;\n    var h = this.$scheduler.utils.copy(e);\n    return this._tMode === \"REST-JSON\" && (delete h.id, delete h[this.action_param]), JSON.stringify(h);\n  },\n  _cleanupArgumentsBeforeSend: function (e) {\n    var h;\n    if (e[this.action_param] === void 0) for (var a in h = {}, e) h[a] = this._cleanupArgumentsBeforeSend(e[a]);else h = this._cleanupItemBeforeSend(e);\n    return h;\n  },\n  _cleanupItemBeforeSend: function (e) {\n    var h = null;\n    return e && (e[this.action_param] === \"deleted\" ? ((h = {}).id = e.id, h[this.action_param] = e[this.action_param]) : h = e), h;\n  },\n  _forEachUpdatedRow: function (e) {\n    for (var h = this.updatedRows.slice(), a = 0; a < h.length; a++) {\n      var r = h[a];\n      this.$scheduler.getUserData(r, this.action_param) && e.call(this, r);\n    }\n  },\n  _prepareDataItem: function (e) {\n    var h = {},\n      a = this.$scheduler,\n      r = a.utils.copy(e);\n    for (var d in r) d.indexOf(\"_\") !== 0 && r[d] && (r[d].getUTCFullYear ? h[d] = a._helpers.formatDate(r[d]) : typeof r[d] == \"object\" ? h[d] = this._prepareDataItem(r[d]) : r[d] === null ? h[d] = \"\" : h[d] = r[d]);\n    return h[this.action_param] = a.getUserData(e.id, this.action_param), h;\n  },\n  _getRowData: function (e) {\n    var h = this.$scheduler.getEvent(e);\n    return h || (h = {\n      id: e\n    }), this._prepareDataItem(h);\n  }\n};\nconst Se = {\n    date: {\n      month_full: [\"كانون الثاني\", \"شباط\", \"آذار\", \"نيسان\", \"أيار\", \"حزيران\", \"تموز\", \"آب\", \"أيلول\", \"تشرين الأول\", \"تشرين الثاني\", \"كانون الأول\"],\n      month_short: [\"يناير\", \"فبراير\", \"مارس\", \"أبريل\", \"مايو\", \"يونيو\", \"يوليو\", \"أغسطس\", \"سبتمبر\", \"أكتوبر\", \"نوفمبر\", \"ديسمبر\"],\n      day_full: [\"الأحد\", \"الأثنين\", \"ألثلاثاء\", \"الأربعاء\", \"ألحميس\", \"ألجمعة\", \"السبت\"],\n      day_short: [\"احد\", \"اثنين\", \"ثلاثاء\", \"اربعاء\", \"خميس\", \"جمعة\", \"سبت\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"اليوم\",\n      day_tab: \"يوم\",\n      week_tab: \"أسبوع\",\n      month_tab: \"شهر\",\n      new_event: \"حدث جديد\",\n      icon_save: \"اخزن\",\n      icon_cancel: \"الغاء\",\n      icon_details: \"تفاصيل\",\n      icon_edit: \"تحرير\",\n      icon_delete: \"حذف\",\n      confirm_closing: \"التغييرات سوف تضيع, هل انت متأكد؟\",\n      confirm_deleting: \"الحدث سيتم حذفها نهائيا ، هل أنت متأكد؟\",\n      section_description: \"الوصف\",\n      section_time: \"الفترة الزمنية\",\n      full_day: \"طوال اليوم\",\n      confirm_recurring: \"هل تريد تحرير مجموعة كاملة من الأحداث المتكررة؟\",\n      section_recurring: \"تكرار الحدث\",\n      button_recurring: \"تعطيل\",\n      button_recurring_open: \"تمكين\",\n      button_edit_series: \"تحرير سلسلة\",\n      button_edit_occurrence: \"تعديل نسخة\",\n      grid_tab: \"جدول\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\"\n    }\n  },\n  Ne = {\n    date: {\n      month_full: [\"Студзень\", \"Люты\", \"Сакавік\", \"Красавік\", \"Maй\", \"Чэрвень\", \"Ліпень\", \"Жнівень\", \"Верасень\", \"Кастрычнік\", \"Лістапад\", \"Снежань\"],\n      month_short: [\"Студз\", \"Лют\", \"Сак\", \"Крас\", \"Maй\", \"Чэр\", \"Ліп\", \"Жнів\", \"Вер\", \"Каст\", \"Ліст\", \"Снеж\"],\n      day_full: [\"Нядзеля\", \"Панядзелак\", \"Аўторак\", \"Серада\", \"Чацвер\", \"Пятніца\", \"Субота\"],\n      day_short: [\"Нд\", \"Пн\", \"Аўт\", \"Ср\", \"Чцв\", \"Пт\", \"Сб\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Сёння\",\n      day_tab: \"Дзень\",\n      week_tab: \"Тыдзень\",\n      month_tab: \"Месяц\",\n      new_event: \"Новая падзея\",\n      icon_save: \"Захаваць\",\n      icon_cancel: \"Адмяніць\",\n      icon_details: \"Дэталі\",\n      icon_edit: \"Змяніць\",\n      icon_delete: \"Выдаліць\",\n      confirm_closing: \"\",\n      confirm_deleting: \"Падзея будзе выдалена незваротна, працягнуць?\",\n      section_description: \"Апісанне\",\n      section_time: \"Перыяд часу\",\n      full_day: \"Увесь дзень\",\n      confirm_recurring: \"Вы хочаце змяніць усю серыю паўтаральных падзей?\",\n      section_recurring: \"Паўтарэнне\",\n      button_recurring: \"Адключана\",\n      button_recurring_open: \"Уключана\",\n      button_edit_series: \"Рэдагаваць серыю\",\n      button_edit_occurrence: \"Рэдагаваць асобнік\",\n      agenda_tab: \"Спіс\",\n      date: \"Дата\",\n      description: \"Апісанне\",\n      year_tab: \"Год\",\n      week_agenda_tab: \"Спіс\",\n      grid_tab: \"Спic\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\",\n      repeat_radio_day: \"Дзень\",\n      repeat_radio_week: \"Тыдзень\",\n      repeat_radio_month: \"Месяц\",\n      repeat_radio_year: \"Год\",\n      repeat_radio_day_type: \"Кожны\",\n      repeat_text_day_count: \"дзень\",\n      repeat_radio_day_type2: \"Кожны працоўны дзень\",\n      repeat_week: \" Паўтараць кожны\",\n      repeat_text_week_count: \"тыдзень\",\n      repeat_radio_month_type: \"Паўтараць\",\n      repeat_radio_month_start: \"\",\n      repeat_text_month_day: \" чысла кожнага\",\n      repeat_text_month_count: \"месяцу\",\n      repeat_text_month_count2_before: \"кожны \",\n      repeat_text_month_count2_after: \"месяц\",\n      repeat_year_label: \"\",\n      select_year_day2: \"\",\n      repeat_text_year_day: \"дзень\",\n      select_year_month: \"\",\n      repeat_radio_end: \"Без даты заканчэння\",\n      repeat_text_occurences_count: \"паўтораў\",\n      repeat_radio_end2: \"\",\n      repeat_radio_end3: \"Да \",\n      month_for_recurring: [\"Студзеня\", \"Лютага\", \"Сакавіка\", \"Красавіка\", \"Мая\", \"Чэрвеня\", \"Ліпeня\", \"Жніўня\", \"Верасня\", \"Кастрычніка\", \"Лістапада\", \"Снежня\"],\n      day_for_recurring: [\"Нядзелю\", \"Панядзелак\", \"Аўторак\", \"Сераду\", \"Чацвер\", \"Пятніцу\", \"Суботу\"]\n    }\n  },\n  Me = {\n    date: {\n      month_full: [\"Gener\", \"Febrer\", \"Març\", \"Abril\", \"Maig\", \"Juny\", \"Juliol\", \"Agost\", \"Setembre\", \"Octubre\", \"Novembre\", \"Desembre\"],\n      month_short: [\"Gen\", \"Feb\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Oct\", \"Nov\", \"Des\"],\n      day_full: [\"Diumenge\", \"Dilluns\", \"Dimarts\", \"Dimecres\", \"Dijous\", \"Divendres\", \"Dissabte\"],\n      day_short: [\"Dg\", \"Dl\", \"Dm\", \"Dc\", \"Dj\", \"Dv\", \"Ds\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Hui\",\n      day_tab: \"Dia\",\n      week_tab: \"Setmana\",\n      month_tab: \"Mes\",\n      new_event: \"Nou esdeveniment\",\n      icon_save: \"Guardar\",\n      icon_cancel: \"Cancel·lar\",\n      icon_details: \"Detalls\",\n      icon_edit: \"Editar\",\n      icon_delete: \"Esborrar\",\n      confirm_closing: \"\",\n      confirm_deleting: \"L'esdeveniment s'esborrarà definitivament, continuar ?\",\n      section_description: \"Descripció\",\n      section_time: \"Periode de temps\",\n      full_day: \"Tot el dia\",\n      confirm_recurring: \"¿Desitja modificar el conjunt d'esdeveniments repetits?\",\n      section_recurring: \"Repeteixca l'esdeveniment\",\n      button_recurring: \"Impedit\",\n      button_recurring_open: \"Permés\",\n      button_edit_series: \"Edit sèrie\",\n      button_edit_occurrence: \"Edita Instància\",\n      agenda_tab: \"Agenda\",\n      date: \"Data\",\n      description: \"Descripció\",\n      year_tab: \"Any\",\n      week_agenda_tab: \"Agenda\",\n      grid_tab: \"Taula\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\"\n    }\n  },\n  Ae = {\n    date: {\n      month_full: [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"十月\", \"十一月\", \"十二月\"],\n      month_short: [\"1月\", \"2月\", \"3月\", \"4月\", \"5月\", \"6月\", \"7月\", \"8月\", \"9月\", \"10月\", \"11月\", \"12月\"],\n      day_full: [\"星期日\", \"星期一\", \"星期二\", \"星期三\", \"星期四\", \"星期五\", \"星期六\"],\n      day_short: [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"今天\",\n      day_tab: \"日\",\n      week_tab: \"周\",\n      month_tab: \"月\",\n      new_event: \"新建日程\",\n      icon_save: \"保存\",\n      icon_cancel: \"关闭\",\n      icon_details: \"详细\",\n      icon_edit: \"编辑\",\n      icon_delete: \"删除\",\n      confirm_closing: \"请确认是否撤销修改!\",\n      confirm_deleting: \"是否删除日程?\",\n      section_description: \"描述\",\n      section_time: \"时间范围\",\n      full_day: \"整天\",\n      confirm_recurring: \"请确认是否将日程设为重复模式?\",\n      section_recurring: \"重复周期\",\n      button_recurring: \"禁用\",\n      button_recurring_open: \"启用\",\n      button_edit_series: \"编辑系列\",\n      button_edit_occurrence: \"编辑实例\",\n      agenda_tab: \"议程\",\n      date: \"日期\",\n      description: \"说明\",\n      year_tab: \"今年\",\n      week_agenda_tab: \"议程\",\n      grid_tab: \"电网\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\",\n      repeat_radio_day: \"按天\",\n      repeat_radio_week: \"按周\",\n      repeat_radio_month: \"按月\",\n      repeat_radio_year: \"按年\",\n      repeat_radio_day_type: \"每\",\n      repeat_text_day_count: \"天\",\n      repeat_radio_day_type2: \"每个工作日\",\n      repeat_week: \" 重复 每\",\n      repeat_text_week_count: \"星期的:\",\n      repeat_radio_month_type: \"重复\",\n      repeat_radio_month_start: \"在\",\n      repeat_text_month_day: \"日 每\",\n      repeat_text_month_count: \"月\",\n      repeat_text_month_count2_before: \"每\",\n      repeat_text_month_count2_after: \"月\",\n      repeat_year_label: \"在\",\n      select_year_day2: \"的\",\n      repeat_text_year_day: \"日\",\n      select_year_month: \"月\",\n      repeat_radio_end: \"无结束日期\",\n      repeat_text_occurences_count: \"次结束\",\n      repeat_radio_end2: \"重复\",\n      repeat_radio_end3: \"结束于\",\n      month_for_recurring: [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"十月\", \"十一月\", \"十二月\"],\n      day_for_recurring: [\"星期日\", \"星期一\", \"星期二\", \"星期三\", \"星期四\", \"星期五\", \"星期六\"]\n    }\n  },\n  Ce = {\n    date: {\n      month_full: [\"Leden\", \"Únor\", \"Březen\", \"Duben\", \"Květen\", \"Červen\", \"Červenec\", \"Srpen\", \"Září\", \"Říjen\", \"Listopad\", \"Prosinec\"],\n      month_short: [\"Led\", \"Ún\", \"Bře\", \"Dub\", \"Kvě\", \"Čer\", \"Čec\", \"Srp\", \"Září\", \"Říj\", \"List\", \"Pro\"],\n      day_full: [\"Neděle\", \"Pondělí\", \"Úterý\", \"Středa\", \"Čtvrtek\", \"Pátek\", \"Sobota\"],\n      day_short: [\"Ne\", \"Po\", \"Út\", \"St\", \"Čt\", \"Pá\", \"So\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Dnes\",\n      day_tab: \"Den\",\n      week_tab: \"Týden\",\n      month_tab: \"Měsíc\",\n      new_event: \"Nová událost\",\n      icon_save: \"Uložit\",\n      icon_cancel: \"Zpět\",\n      icon_details: \"Detail\",\n      icon_edit: \"Edituj\",\n      icon_delete: \"Smazat\",\n      confirm_closing: \"\",\n      confirm_deleting: \"Událost bude trvale smazána, opravdu?\",\n      section_description: \"Poznámky\",\n      section_time: \"Doba platnosti\",\n      confirm_recurring: \"Přejete si upravit celou řadu opakovaných událostí?\",\n      section_recurring: \"Opakování události\",\n      button_recurring: \"Vypnuto\",\n      button_recurring_open: \"Zapnuto\",\n      button_edit_series: \"Edit series\",\n      button_edit_occurrence: \"Upravit instance\",\n      agenda_tab: \"Program\",\n      date: \"Datum\",\n      description: \"Poznámka\",\n      year_tab: \"Rok\",\n      full_day: \"Full day\",\n      week_agenda_tab: \"Program\",\n      grid_tab: \"Mřížka\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\",\n      repeat_radio_day: \"Denně\",\n      repeat_radio_week: \"Týdně\",\n      repeat_radio_month: \"Měsíčně\",\n      repeat_radio_year: \"Ročně\",\n      repeat_radio_day_type: \"každý\",\n      repeat_text_day_count: \"Den\",\n      repeat_radio_day_type2: \"pracovní dny\",\n      repeat_week: \"Opakuje každých\",\n      repeat_text_week_count: \"Týdnů na:\",\n      repeat_radio_month_type: \"u každého\",\n      repeat_radio_month_start: \"na\",\n      repeat_text_month_day: \"Den každého\",\n      repeat_text_month_count: \"Měsíc\",\n      repeat_text_month_count2_before: \"každý\",\n      repeat_text_month_count2_after: \"Měsíc\",\n      repeat_year_label: \"na\",\n      select_year_day2: \"v\",\n      repeat_text_year_day: \"Den v\",\n      select_year_month: \"\",\n      repeat_radio_end: \"bez data ukončení\",\n      repeat_text_occurences_count: \"Události\",\n      repeat_radio_end2: \"po\",\n      repeat_radio_end3: \"Konec\",\n      month_for_recurring: [\"Leden\", \"Únor\", \"Březen\", \"Duben\", \"Květen\", \"Červen\", \"Červenec\", \"Srpen\", \"Září\", \"Říjen\", \"Listopad\", \"Prosinec\"],\n      day_for_recurring: [\"Neděle \", \"Pondělí\", \"Úterý\", \"Středa\", \"Čtvrtek\", \"Pátek\", \"Sobota\"]\n    }\n  },\n  Te = {\n    date: {\n      month_full: [\"Januar\", \"Februar\", \"Marts\", \"April\", \"Maj\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"December\"],\n      month_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\n      day_full: [\"Søndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lørdag\"],\n      day_short: [\"Søn\", \"Man\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lør\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Idag\",\n      day_tab: \"Dag\",\n      week_tab: \"Uge\",\n      month_tab: \"Måned\",\n      new_event: \"Ny begivenhed\",\n      icon_save: \"Gem\",\n      icon_cancel: \"Fortryd\",\n      icon_details: \"Detaljer\",\n      icon_edit: \"Tilret\",\n      icon_delete: \"Slet\",\n      confirm_closing: \"Dine rettelser vil gå tabt.. Er dy sikker?\",\n      confirm_deleting: \"Bigivenheden vil blive slettet permanent. Er du sikker?\",\n      section_description: \"Beskrivelse\",\n      section_time: \"Tidsperiode\",\n      confirm_recurring: \"Vil du tilrette hele serien af gentagne begivenheder?\",\n      section_recurring: \"Gentag begivenhed\",\n      button_recurring: \"Frakoblet\",\n      button_recurring_open: \"Tilkoblet\",\n      button_edit_series: \"Rediger serien\",\n      button_edit_occurrence: \"Rediger en kopi\",\n      agenda_tab: \"Dagsorden\",\n      date: \"Dato\",\n      description: \"Beskrivelse\",\n      year_tab: \"År\",\n      week_agenda_tab: \"Dagsorden\",\n      grid_tab: \"Grid\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\",\n      repeat_radio_day: \"Daglig\",\n      repeat_radio_week: \"Ugenlig\",\n      repeat_radio_month: \"Månedlig\",\n      repeat_radio_year: \"Årlig\",\n      repeat_radio_day_type: \"Hver\",\n      repeat_text_day_count: \"dag\",\n      repeat_radio_day_type2: \"På hver arbejdsdag\",\n      repeat_week: \" Gentager sig hver\",\n      repeat_text_week_count: \"uge på følgende dage:\",\n      repeat_radio_month_type: \"Hver den\",\n      repeat_radio_month_start: \"Den\",\n      repeat_text_month_day: \" i hver\",\n      repeat_text_month_count: \"måned\",\n      repeat_text_month_count2_before: \"hver\",\n      repeat_text_month_count2_after: \"måned\",\n      repeat_year_label: \"Den\",\n      select_year_day2: \"i\",\n      repeat_text_year_day: \"dag i\",\n      select_year_month: \"\",\n      repeat_radio_end: \"Ingen slutdato\",\n      repeat_text_occurences_count: \"gentagelse\",\n      repeat_radio_end2: \"Efter\",\n      repeat_radio_end3: \"Slut\",\n      month_for_recurring: [\"Januar\", \"Februar\", \"März\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Dezember\"],\n      day_for_recurring: [\"Søndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lørdag\"]\n    }\n  },\n  Oe = {\n    date: {\n      month_full: [\" Januar\", \" Februar\", \" März \", \" April\", \" Mai\", \" Juni\", \" Juli\", \" August\", \" September \", \" Oktober\", \" November \", \" Dezember\"],\n      month_short: [\"Jan\", \"Feb\", \"Mär\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dez\"],\n      day_full: [\"Sonntag\", \"Montag\", \"Dienstag\", \" Mittwoch\", \" Donnerstag\", \"Freitag\", \"Samstag\"],\n      day_short: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Heute\",\n      day_tab: \"Tag\",\n      week_tab: \"Woche\",\n      month_tab: \"Monat\",\n      new_event: \"neuer Eintrag\",\n      icon_save: \"Speichern\",\n      icon_cancel: \"Abbrechen\",\n      icon_details: \"Details\",\n      icon_edit: \"Ändern\",\n      icon_delete: \"Löschen\",\n      confirm_closing: \"\",\n      confirm_deleting: \"Der Eintrag wird gelöscht\",\n      section_description: \"Beschreibung\",\n      section_time: \"Zeitspanne\",\n      full_day: \"Ganzer Tag\",\n      confirm_recurring: \"Wollen Sie alle Einträge bearbeiten oder nur diesen einzelnen Eintrag?\",\n      section_recurring: \"Wiederholung\",\n      button_recurring: \"Aus\",\n      button_recurring_open: \"An\",\n      button_edit_series: \"Bearbeiten Sie die Serie\",\n      button_edit_occurrence: \"Bearbeiten Sie eine Kopie\",\n      agenda_tab: \"Agenda\",\n      date: \"Datum\",\n      description: \"Beschreibung\",\n      year_tab: \"Jahre\",\n      week_agenda_tab: \"Agenda\",\n      grid_tab: \"Grid\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\",\n      repeat_radio_day: \"Täglich\",\n      repeat_radio_week: \"Wöchentlich\",\n      repeat_radio_month: \"Monatlich\",\n      repeat_radio_year: \"Jährlich\",\n      repeat_radio_day_type: \"jeden\",\n      repeat_text_day_count: \"Tag\",\n      repeat_radio_day_type2: \"an jedem Arbeitstag\",\n      repeat_week: \" Wiederholt sich jede\",\n      repeat_text_week_count: \"Woche am:\",\n      repeat_radio_month_type: \"an jedem\",\n      repeat_radio_month_start: \"am\",\n      repeat_text_month_day: \"Tag eines jeden\",\n      repeat_text_month_count: \"Monats\",\n      repeat_text_month_count2_before: \"jeden\",\n      repeat_text_month_count2_after: \"Monats\",\n      repeat_year_label: \"am\",\n      select_year_day2: \"im\",\n      repeat_text_year_day: \"Tag im\",\n      select_year_month: \"\",\n      repeat_radio_end: \"kein Enddatum\",\n      repeat_text_occurences_count: \"Ereignissen\",\n      repeat_radio_end3: \"Schluß\",\n      repeat_radio_end2: \"nach\",\n      month_for_recurring: [\"Januar\", \"Februar\", \"März\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Dezember\"],\n      day_for_recurring: [\"Sonntag\", \"Montag\", \"Dienstag\", \"Mittwoch\", \"Donnerstag\", \"Freitag\", \"Samstag\"]\n    }\n  },\n  $e = {\n    date: {\n      month_full: [\"Ιανουάριος\", \"Φεβρουάριος\", \"Μάρτιος\", \"Απρίλιος\", \"Μάϊος\", \"Ιούνιος\", \"Ιούλιος\", \"Αύγουστος\", \"Σεπτέμβριος\", \"Οκτώβριος\", \"Νοέμβριος\", \"Δεκέμβριος\"],\n      month_short: [\"ΙΑΝ\", \"ΦΕΒ\", \"ΜΑΡ\", \"ΑΠΡ\", \"ΜΑΙ\", \"ΙΟΥΝ\", \"ΙΟΥΛ\", \"ΑΥΓ\", \"ΣΕΠ\", \"ΟΚΤ\", \"ΝΟΕ\", \"ΔΕΚ\"],\n      day_full: [\"Κυριακή\", \"Δευτέρα\", \"Τρίτη\", \"Τετάρτη\", \"Πέμπτη\", \"Παρασκευή\", \"Σάββατο\"],\n      day_short: [\"ΚΥ\", \"ΔΕ\", \"ΤΡ\", \"ΤΕ\", \"ΠΕ\", \"ΠΑ\", \"ΣΑ\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Σήμερα\",\n      day_tab: \"Ημέρα\",\n      week_tab: \"Εβδομάδα\",\n      month_tab: \"Μήνας\",\n      new_event: \"Νέο έργο\",\n      icon_save: \"Αποθήκευση\",\n      icon_cancel: \"Άκυρο\",\n      icon_details: \"Λεπτομέρειες\",\n      icon_edit: \"Επεξεργασία\",\n      icon_delete: \"Διαγραφή\",\n      confirm_closing: \"\",\n      confirm_deleting: \"Το έργο θα διαγραφεί οριστικά. Θέλετε να συνεχίσετε;\",\n      section_description: \"Περιγραφή\",\n      section_time: \"Χρονική περίοδος\",\n      full_day: \"Πλήρης Ημέρα\",\n      confirm_recurring: \"Θέλετε να επεξεργασθείτε ολόκληρη την ομάδα των επαναλαμβανόμενων έργων;\",\n      section_recurring: \"Επαναλαμβανόμενο έργο\",\n      button_recurring: \"Ανενεργό\",\n      button_recurring_open: \"Ενεργό\",\n      button_edit_series: \"Επεξεργαστείτε τη σειρά\",\n      button_edit_occurrence: \"Επεξεργασία ένα αντίγραφο\",\n      agenda_tab: \"Ημερήσια Διάταξη\",\n      date: \"Ημερομηνία\",\n      description: \"Περιγραφή\",\n      year_tab: \"Έτος\",\n      week_agenda_tab: \"Ημερήσια Διάταξη\",\n      grid_tab: \"Πλέγμα\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\",\n      repeat_radio_day: \"Ημερησίως\",\n      repeat_radio_week: \"Εβδομαδιαίως\",\n      repeat_radio_month: \"Μηνιαίως\",\n      repeat_radio_year: \"Ετησίως\",\n      repeat_radio_day_type: \"Κάθε\",\n      repeat_text_day_count: \"ημέρα\",\n      repeat_radio_day_type2: \"Κάθε εργάσιμη\",\n      repeat_week: \" Επανάληψη κάθε\",\n      repeat_text_week_count: \"εβδομάδα τις επόμενες ημέρες:\",\n      repeat_radio_month_type: \"Επανάληψη\",\n      repeat_radio_month_start: \"Την\",\n      repeat_text_month_day: \"ημέρα κάθε\",\n      repeat_text_month_count: \"μήνα\",\n      repeat_text_month_count2_before: \"κάθε\",\n      repeat_text_month_count2_after: \"μήνα\",\n      repeat_year_label: \"Την\",\n      select_year_day2: \"του\",\n      repeat_text_year_day: \"ημέρα\",\n      select_year_month: \"μήνα\",\n      repeat_radio_end: \"Χωρίς ημερομηνία λήξεως\",\n      repeat_text_occurences_count: \"επαναλήψεις\",\n      repeat_radio_end3: \"Λήγει την\",\n      repeat_radio_end2: \"Μετά από\",\n      month_for_recurring: [\"Ιανουάριος\", \"Φεβρουάριος\", \"Μάρτιος\", \"Απρίλιος\", \"Μάϊος\", \"Ιούνιος\", \"Ιούλιος\", \"Αύγουστος\", \"Σεπτέμβριος\", \"Οκτώβριος\", \"Νοέμβριος\", \"Δεκέμβριος\"],\n      day_for_recurring: [\"Κυριακή\", \"Δευτέρα\", \"Τρίτη\", \"Τετάρτη\", \"Πέμπτη\", \"Παρασκευή\", \"Σάββατο\"]\n    }\n  },\n  He = {\n    date: {\n      month_full: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n      month_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n      day_full: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n      day_short: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Today\",\n      day_tab: \"Day\",\n      week_tab: \"Week\",\n      month_tab: \"Month\",\n      new_event: \"New event\",\n      icon_save: \"Save\",\n      icon_cancel: \"Cancel\",\n      icon_details: \"Details\",\n      icon_edit: \"Edit\",\n      icon_delete: \"Delete\",\n      confirm_closing: \"\",\n      confirm_deleting: \"Event will be deleted permanently, are you sure?\",\n      section_description: \"Description\",\n      section_time: \"Time period\",\n      full_day: \"Full day\",\n      confirm_recurring: \"Do you want to edit the whole set of repeated events?\",\n      section_recurring: \"Repeat event\",\n      button_recurring: \"Disabled\",\n      button_recurring_open: \"Enabled\",\n      button_edit_series: \"Edit series\",\n      button_edit_occurrence: \"Edit occurrence\",\n      agenda_tab: \"Agenda\",\n      date: \"Date\",\n      description: \"Description\",\n      year_tab: \"Year\",\n      week_agenda_tab: \"Agenda\",\n      grid_tab: \"Grid\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\",\n      repeat_radio_day: \"Daily\",\n      repeat_radio_week: \"Weekly\",\n      repeat_radio_month: \"Monthly\",\n      repeat_radio_year: \"Yearly\",\n      repeat_radio_day_type: \"Every\",\n      repeat_text_day_count: \"day\",\n      repeat_radio_day_type2: \"Every workday\",\n      repeat_week: \" Repeat every\",\n      repeat_text_week_count: \"week next days:\",\n      repeat_radio_month_type: \"Repeat\",\n      repeat_radio_month_start: \"On\",\n      repeat_text_month_day: \"day every\",\n      repeat_text_month_count: \"month\",\n      repeat_text_month_count2_before: \"every\",\n      repeat_text_month_count2_after: \"month\",\n      repeat_year_label: \"On\",\n      select_year_day2: \"of\",\n      repeat_text_year_day: \"day\",\n      select_year_month: \"month\",\n      repeat_radio_end: \"No end date\",\n      repeat_text_occurences_count: \"occurrences\",\n      repeat_radio_end2: \"After\",\n      repeat_radio_end3: \"End by\",\n      month_for_recurring: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n      day_for_recurring: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]\n    }\n  },\n  Le = {\n    date: {\n      month_full: [\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"],\n      month_short: [\"Ene\", \"Feb\", \"Mar\", \"Abr\", \"May\", \"Jun\", \"Jul\", \"Ago\", \"Sep\", \"Oct\", \"Nov\", \"Dic\"],\n      day_full: [\"Domingo\", \"Lunes\", \"Martes\", \"Miércoles\", \"Jueves\", \"Viernes\", \"Sábado\"],\n      day_short: [\"Dom\", \"Lun\", \"Mar\", \"Mié\", \"Jue\", \"Vie\", \"Sáb\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Hoy\",\n      day_tab: \"Día\",\n      week_tab: \"Semana\",\n      month_tab: \"Mes\",\n      new_event: \"Nuevo evento\",\n      icon_save: \"Guardar\",\n      icon_cancel: \"Cancelar\",\n      icon_details: \"Detalles\",\n      icon_edit: \"Editar\",\n      icon_delete: \"Eliminar\",\n      confirm_closing: \"\",\n      confirm_deleting: \"El evento se borrará definitivamente, ¿continuar?\",\n      section_description: \"Descripción\",\n      section_time: \"Período\",\n      full_day: \"Todo el día\",\n      confirm_recurring: \"¿Desea modificar el conjunto de eventos repetidos?\",\n      section_recurring: \"Repita el evento\",\n      button_recurring: \"Impedido\",\n      button_recurring_open: \"Permitido\",\n      button_edit_series: \"Editar la serie\",\n      button_edit_occurrence: \"Editar este evento\",\n      agenda_tab: \"Día\",\n      date: \"Fecha\",\n      description: \"Descripción\",\n      year_tab: \"Año\",\n      week_agenda_tab: \"Día\",\n      grid_tab: \"Reja\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\",\n      repeat_radio_day: \"Diariamente\",\n      repeat_radio_week: \"Semanalmente\",\n      repeat_radio_month: \"Mensualmente\",\n      repeat_radio_year: \"Anualmente\",\n      repeat_radio_day_type: \"Cada\",\n      repeat_text_day_count: \"dia\",\n      repeat_radio_day_type2: \"Cada jornada de trabajo\",\n      repeat_week: \" Repetir cada\",\n      repeat_text_week_count: \"semana:\",\n      repeat_radio_month_type: \"Repita\",\n      repeat_radio_month_start: \"El\",\n      repeat_text_month_day: \"dia cada \",\n      repeat_text_month_count: \"mes\",\n      repeat_text_month_count2_before: \"cada\",\n      repeat_text_month_count2_after: \"mes\",\n      repeat_year_label: \"El\",\n      select_year_day2: \"del\",\n      repeat_text_year_day: \"dia\",\n      select_year_month: \"mes\",\n      repeat_radio_end: \"Sin fecha de finalización\",\n      repeat_text_occurences_count: \"ocurrencias\",\n      repeat_radio_end3: \"Fin\",\n      repeat_radio_end2: \"Después de\",\n      month_for_recurring: [\"Enero\", \"Febrero\", \"Маrzo\", \"Аbril\", \"Mayo\", \"Junio\", \"Julio\", \"Аgosto\", \"Setiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"],\n      day_for_recurring: [\"Domingo\", \"Lunes\", \"Martes\", \"Miércoles\", \"Jeuves\", \"Viernes\", \"Sabado\"]\n    }\n  },\n  ze = {\n    date: {\n      month_full: [\"Tammikuu\", \"Helmikuu\", \"Maaliskuu\", \"Huhtikuu\", \"Toukokuu\", \"Kes&auml;kuu\", \"Hein&auml;kuu\", \"Elokuu\", \"Syyskuu\", \"Lokakuu\", \"Marraskuu\", \"Joulukuu\"],\n      month_short: [\"Tam\", \"Hel\", \"Maa\", \"Huh\", \"Tou\", \"Kes\", \"Hei\", \"Elo\", \"Syy\", \"Lok\", \"Mar\", \"Jou\"],\n      day_full: [\"Sunnuntai\", \"Maanantai\", \"Tiistai\", \"Keskiviikko\", \"Torstai\", \"Perjantai\", \"Lauantai\"],\n      day_short: [\"Su\", \"Ma\", \"Ti\", \"Ke\", \"To\", \"Pe\", \"La\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Tänään\",\n      day_tab: \"Päivä\",\n      week_tab: \"Viikko\",\n      month_tab: \"Kuukausi\",\n      new_event: \"Uusi tapahtuma\",\n      icon_save: \"Tallenna\",\n      icon_cancel: \"Peru\",\n      icon_details: \"Tiedot\",\n      icon_edit: \"Muokkaa\",\n      icon_delete: \"Poista\",\n      confirm_closing: \"\",\n      confirm_deleting: \"Haluatko varmasti poistaa tapahtuman?\",\n      section_description: \"Kuvaus\",\n      section_time: \"Aikajakso\",\n      full_day: \"Koko päivä\",\n      confirm_recurring: \"Haluatko varmasti muokata toistuvan tapahtuman kaikkia jaksoja?\",\n      section_recurring: \"Toista tapahtuma\",\n      button_recurring: \"Ei k&auml;yt&ouml;ss&auml;\",\n      button_recurring_open: \"K&auml;yt&ouml;ss&auml;\",\n      button_edit_series: \"Muokkaa sarja\",\n      button_edit_occurrence: \"Muokkaa kopio\",\n      agenda_tab: \"Esityslista\",\n      date: \"Päivämäärä\",\n      description: \"Kuvaus\",\n      year_tab: \"Vuoden\",\n      week_agenda_tab: \"Esityslista\",\n      grid_tab: \"Ritilä\",\n      drag_to_create: \"Luo uusi vetämällä\",\n      drag_to_move: \"Siirrä vetämällä\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\",\n      repeat_radio_day: \"P&auml;ivitt&auml;in\",\n      repeat_radio_week: \"Viikoittain\",\n      repeat_radio_month: \"Kuukausittain\",\n      repeat_radio_year: \"Vuosittain\",\n      repeat_radio_day_type: \"Joka\",\n      repeat_text_day_count: \"p&auml;iv&auml;\",\n      repeat_radio_day_type2: \"Joka arkip&auml;iv&auml;\",\n      repeat_week: \"Toista joka\",\n      repeat_text_week_count: \"viikko n&auml;in&auml; p&auml;ivin&auml;:\",\n      repeat_radio_month_type: \"Toista\",\n      repeat_radio_month_start: \"\",\n      repeat_text_month_day: \"p&auml;iv&auml;n&auml; joka\",\n      repeat_text_month_count: \"kuukausi\",\n      repeat_text_month_count2_before: \"joka\",\n      repeat_text_month_count2_after: \"kuukausi\",\n      repeat_year_label: \"\",\n      select_year_day2: \"\",\n      repeat_text_year_day: \"p&auml;iv&auml;\",\n      select_year_month: \"kuukausi\",\n      repeat_radio_end: \"Ei loppumisaikaa\",\n      repeat_text_occurences_count: \"Toiston j&auml;lkeen\",\n      repeat_radio_end3: \"Loppuu\",\n      repeat_radio_end2: \"\",\n      month_for_recurring: [\"Tammikuu\", \"Helmikuu\", \"Maaliskuu\", \"Huhtikuu\", \"Toukokuu\", \"Kes&auml;kuu\", \"Hein&auml;kuu\", \"Elokuu\", \"Syyskuu\", \"Lokakuu\", \"Marraskuu\", \"Joulukuu\"],\n      day_for_recurring: [\"Sunnuntai\", \"Maanantai\", \"Tiistai\", \"Keskiviikko\", \"Torstai\", \"Perjantai\", \"Lauantai\"]\n    }\n  },\n  je = {\n    date: {\n      month_full: [\"Janvier\", \"Février\", \"Mars\", \"Avril\", \"Mai\", \"Juin\", \"Juillet\", \"Août\", \"Septembre\", \"Octobre\", \"Novembre\", \"Décembre\"],\n      month_short: [\"Jan\", \"Fév\", \"Mar\", \"Avr\", \"Mai\", \"Juin\", \"Juil\", \"Aoû\", \"Sep\", \"Oct\", \"Nov\", \"Déc\"],\n      day_full: [\"Dimanche\", \"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\"],\n      day_short: [\"Dim\", \"Lun\", \"Mar\", \"Mer\", \"Jeu\", \"Ven\", \"Sam\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Aujourd'hui\",\n      day_tab: \"Jour\",\n      week_tab: \"Semaine\",\n      month_tab: \"Mois\",\n      new_event: \"Nouvel événement\",\n      icon_save: \"Enregistrer\",\n      icon_cancel: \"Annuler\",\n      icon_details: \"Détails\",\n      icon_edit: \"Modifier\",\n      icon_delete: \"Effacer\",\n      confirm_closing: \"\",\n      confirm_deleting: \"L'événement sera effacé sans appel, êtes-vous sûr ?\",\n      section_description: \"Description\",\n      section_time: \"Période\",\n      full_day: \"Journée complète\",\n      confirm_recurring: \"Voulez-vous éditer toute une série d'évènements répétés?\",\n      section_recurring: \"Périodicité\",\n      button_recurring: \"Désactivé\",\n      button_recurring_open: \"Activé\",\n      button_edit_series: \"Modifier la série\",\n      button_edit_occurrence: \"Modifier une copie\",\n      agenda_tab: \"Jour\",\n      date: \"Date\",\n      description: \"Description\",\n      year_tab: \"Année\",\n      week_agenda_tab: \"Jour\",\n      grid_tab: \"Grille\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\",\n      repeat_radio_day: \"Quotidienne\",\n      repeat_radio_week: \"Hebdomadaire\",\n      repeat_radio_month: \"Mensuelle\",\n      repeat_radio_year: \"Annuelle\",\n      repeat_radio_day_type: \"Chaque\",\n      repeat_text_day_count: \"jour\",\n      repeat_radio_day_type2: \"Chaque journée de travail\",\n      repeat_week: \" Répéter toutes les\",\n      repeat_text_week_count: \"semaine:\",\n      repeat_radio_month_type: \"Répéter\",\n      repeat_radio_month_start: \"Le\",\n      repeat_text_month_day: \"jour chaque\",\n      repeat_text_month_count: \"mois\",\n      repeat_text_month_count2_before: \"chaque\",\n      repeat_text_month_count2_after: \"mois\",\n      repeat_year_label: \"Le\",\n      select_year_day2: \"du\",\n      repeat_text_year_day: \"jour\",\n      select_year_month: \"mois\",\n      repeat_radio_end: \"Pas de date d&quot;achèvement\",\n      repeat_text_occurences_count: \"occurrences\",\n      repeat_radio_end3: \"Fin\",\n      repeat_radio_end2: \"Après\",\n      month_for_recurring: [\"Janvier\", \"Février\", \"Mars\", \"Avril\", \"Mai\", \"Juin\", \"Juillet\", \"Août\", \"Septembre\", \"Octobre\", \"Novembre\", \"Décembre\"],\n      day_for_recurring: [\"Dimanche\", \"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\"]\n    }\n  },\n  Pe = {\n    date: {\n      month_full: [\"ינואר\", \"פברואר\", \"מרץ\", \"אפריל\", \"מאי\", \"יוני\", \"יולי\", \"אוגוסט\", \"ספטמבר\", \"אוקטובר\", \"נובמבר\", \"דצמבר\"],\n      month_short: [\"ינו\", \"פבר\", \"מרץ\", \"אפר\", \"מאי\", \"יונ\", \"יול\", \"אוג\", \"ספט\", \"אוק\", \"נוב\", \"דצמ\"],\n      day_full: [\"ראשון\", \"שני\", \"שלישי\", \"רביעי\", \"חמישי\", \"שישי\", \"שבת\"],\n      day_short: [\"א\", \"ב\", \"ג\", \"ד\", \"ה\", \"ו\", \"ש\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"היום\",\n      day_tab: \"יום\",\n      week_tab: \"שבוע\",\n      month_tab: \"חודש\",\n      new_event: \"ארוע חדש\",\n      icon_save: \"שמור\",\n      icon_cancel: \"בטל\",\n      icon_details: \"פרטים\",\n      icon_edit: \"ערוך\",\n      icon_delete: \"מחק\",\n      confirm_closing: \"\",\n      confirm_deleting: \"ארוע ימחק סופית.להמשיך?\",\n      section_description: \"תיאור\",\n      section_time: \"תקופה\",\n      confirm_recurring: \"האם ברצונך לשנות כל סדרת ארועים מתמשכים?\",\n      section_recurring: \"להעתיק ארוע\",\n      button_recurring: \"לא פעיל\",\n      button_recurring_open: \"פעיל\",\n      full_day: \"יום שלם\",\n      button_edit_series: \"ערוך את הסדרה\",\n      button_edit_occurrence: \"עריכת עותק\",\n      agenda_tab: \"סדר יום\",\n      date: \"תאריך\",\n      description: \"תיאור\",\n      year_tab: \"לשנה\",\n      week_agenda_tab: \"סדר יום\",\n      grid_tab: \"סורג\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"גרור כדי להזיז\",\n      message_ok: \"OK\",\n      message_cancel: \"בטל\",\n      next: \"הבא\",\n      prev: \"הקודם\",\n      year: \"שנה\",\n      month: \"חודש\",\n      day: \"יום\",\n      hour: \"שעה\",\n      minute: \"דקה\",\n      repeat_radio_day: \"יומי\",\n      repeat_radio_week: \"שבועי\",\n      repeat_radio_month: \"חודשי\",\n      repeat_radio_year: \"שנתי\",\n      repeat_radio_day_type: \"חזור כל\",\n      repeat_text_day_count: \"ימים\",\n      repeat_radio_day_type2: \"חזור כל יום עבודה\",\n      repeat_week: \" חזור כל\",\n      repeat_text_week_count: \"שבוע לפי ימים:\",\n      repeat_radio_month_type: \"חזור כל\",\n      repeat_radio_month_start: \"כל\",\n      repeat_text_month_day: \"ימים כל\",\n      repeat_text_month_count: \"חודשים\",\n      repeat_text_month_count2_before: \"חזור כל\",\n      repeat_text_month_count2_after: \"חודש\",\n      repeat_year_label: \"כל\",\n      select_year_day2: \"בחודש\",\n      repeat_text_year_day: \"ימים\",\n      select_year_month: \"חודש\",\n      repeat_radio_end: \"לעולם לא מסתיים\",\n      repeat_text_occurences_count: \"אירועים\",\n      repeat_radio_end3: \"מסתיים ב\",\n      repeat_radio_end2: \"אחרי\",\n      month_for_recurring: [\"ינואר\", \"פברואר\", \"מרץ\", \"אפריל\", \"מאי\", \"יוני\", \"יולי\", \"אוגוסט\", \"ספטמבר\", \"אוקטובר\", \"נובמבר\", \"דצמבר\"],\n      day_for_recurring: [\"ראשון\", \"שני\", \"שלישי\", \"רביעי\", \"חמישי\", \"שישי\", \"שבת\"]\n    }\n  },\n  Ve = {\n    date: {\n      month_full: [\"Január\", \"Február\", \"Március\", \"Április\", \"Május\", \"Június\", \"Július\", \"Augusztus\", \"Szeptember\", \"Október\", \"November\", \"December\"],\n      month_short: [\"Jan\", \"Feb\", \"Már\", \"Ápr\", \"Máj\", \"Jún\", \"Júl\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\n      day_full: [\"Vasárnap\", \"Hétfõ\", \"Kedd\", \"Szerda\", \"Csütörtök\", \"Péntek\", \"szombat\"],\n      day_short: [\"Va\", \"Hé\", \"Ke\", \"Sze\", \"Csü\", \"Pé\", \"Szo\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Ma\",\n      day_tab: \"Nap\",\n      week_tab: \"Hét\",\n      month_tab: \"Hónap\",\n      new_event: \"Új esemény\",\n      icon_save: \"Mentés\",\n      icon_cancel: \"Mégse\",\n      icon_details: \"Részletek\",\n      icon_edit: \"Szerkesztés\",\n      icon_delete: \"Törlés\",\n      confirm_closing: \"\",\n      confirm_deleting: \"Az esemény törölve lesz, biztosan folytatja?\",\n      section_description: \"Leírás\",\n      section_time: \"Idõszak\",\n      full_day: \"Egesz napos\",\n      confirm_recurring: \"Biztosan szerkeszteni akarod az összes ismétlõdõ esemény beállítását?\",\n      section_recurring: \"Esemény ismétlése\",\n      button_recurring: \"Tiltás\",\n      button_recurring_open: \"Engedélyezés\",\n      button_edit_series: \"Edit series\",\n      button_edit_occurrence: \"Szerkesztés bíróság\",\n      agenda_tab: \"Napirend\",\n      date: \"Dátum\",\n      description: \"Leírás\",\n      year_tab: \"Év\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\"\n    }\n  },\n  Ie = {\n    date: {\n      month_full: [\"Januari\", \"Februari\", \"Maret\", \"April\", \"Mei\", \"Juni\", \"Juli\", \"Agustus\", \"September\", \"Oktober\", \"November\", \"Desember\"],\n      month_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mei\", \"Jun\", \"Jul\", \"Ags\", \"Sep\", \"Okt\", \"Nov\", \"Des\"],\n      day_full: [\"Minggu\", \"Senin\", \"Selasa\", \"Rabu\", \"Kamis\", \"Jumat\", \"Sabtu\"],\n      day_short: [\"Ming\", \"Sen\", \"Sel\", \"Rab\", \"Kam\", \"Jum\", \"Sab\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Hari Ini\",\n      day_tab: \"Hari\",\n      week_tab: \"Minggu\",\n      month_tab: \"Bulan\",\n      new_event: \"Acara Baru\",\n      icon_save: \"Simpan\",\n      icon_cancel: \"Batal\",\n      icon_details: \"Detail\",\n      icon_edit: \"Edit\",\n      icon_delete: \"Hapus\",\n      confirm_closing: \"\",\n      confirm_deleting: \"Acara akan dihapus\",\n      section_description: \"Keterangan\",\n      section_time: \"Periode\",\n      full_day: \"Hari penuh\",\n      confirm_recurring: \"Apakah acara ini akan berulang?\",\n      section_recurring: \"Acara Rutin\",\n      button_recurring: \"Tidak Difungsikan\",\n      button_recurring_open: \"Difungsikan\",\n      button_edit_series: \"Mengedit seri\",\n      button_edit_occurrence: \"Mengedit salinan\",\n      agenda_tab: \"Agenda\",\n      date: \"Tanggal\",\n      description: \"Keterangan\",\n      year_tab: \"Tahun\",\n      week_agenda_tab: \"Agenda\",\n      grid_tab: \"Tabel\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\"\n    }\n  },\n  Be = {\n    date: {\n      month_full: [\"Gennaio\", \"Febbraio\", \"Marzo\", \"Aprile\", \"Maggio\", \"Giugno\", \"Luglio\", \"Agosto\", \"Settembre\", \"Ottobre\", \"Novembre\", \"Dicembre\"],\n      month_short: [\"Gen\", \"Feb\", \"Mar\", \"Apr\", \"Mag\", \"Giu\", \"Lug\", \"Ago\", \"Set\", \"Ott\", \"Nov\", \"Dic\"],\n      day_full: [\"Domenica\", \"Lunedì\", \"Martedì\", \"Mercoledì\", \"Giovedì\", \"Venerdì\", \"Sabato\"],\n      day_short: [\"Dom\", \"Lun\", \"Mar\", \"Mer\", \"Gio\", \"Ven\", \"Sab\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Oggi\",\n      day_tab: \"Giorno\",\n      week_tab: \"Settimana\",\n      month_tab: \"Mese\",\n      new_event: \"Nuovo evento\",\n      icon_save: \"Salva\",\n      icon_cancel: \"Chiudi\",\n      icon_details: \"Dettagli\",\n      icon_edit: \"Modifica\",\n      icon_delete: \"Elimina\",\n      confirm_closing: \"\",\n      confirm_deleting: \"L'evento sarà eliminato, siete sicuri?\",\n      section_description: \"Descrizione\",\n      section_time: \"Periodo di tempo\",\n      full_day: \"Intera giornata\",\n      confirm_recurring: \"Vuoi modificare l'intera serie di eventi?\",\n      section_recurring: \"Ripetere l'evento\",\n      button_recurring: \"Disattivato\",\n      button_recurring_open: \"Attivato\",\n      button_edit_series: \"Modificare la serie\",\n      button_edit_occurrence: \"Modificare una copia\",\n      agenda_tab: \"Agenda\",\n      date: \"Data\",\n      description: \"Descrizione\",\n      year_tab: \"Anno\",\n      week_agenda_tab: \"Agenda\",\n      grid_tab: \"Griglia\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\",\n      repeat_radio_day: \"Quotidiano\",\n      repeat_radio_week: \"Settimanale\",\n      repeat_radio_month: \"Mensile\",\n      repeat_radio_year: \"Annuale\",\n      repeat_radio_day_type: \"Ogni\",\n      repeat_text_day_count: \"giorno\",\n      repeat_radio_day_type2: \"Ogni giornata lavorativa\",\n      repeat_week: \" Ripetere ogni\",\n      repeat_text_week_count: \"settimana:\",\n      repeat_radio_month_type: \"Ripetere\",\n      repeat_radio_month_start: \"Il\",\n      repeat_text_month_day: \"giorno ogni\",\n      repeat_text_month_count: \"mese\",\n      repeat_text_month_count2_before: \"ogni\",\n      repeat_text_month_count2_after: \"mese\",\n      repeat_year_label: \"Il\",\n      select_year_day2: \"del\",\n      repeat_text_year_day: \"giorno\",\n      select_year_month: \"mese\",\n      repeat_radio_end: \"Senza data finale\",\n      repeat_text_occurences_count: \"occorenze\",\n      repeat_radio_end3: \"Fine\",\n      repeat_radio_end2: \"Dopo\",\n      month_for_recurring: [\"Gennaio\", \"Febbraio\", \"Marzo\", \"Aprile\", \"Maggio\", \"Jiugno\", \"Luglio\", \"Agosto\", \"Settembre\", \"Ottobre\", \"Novembre\", \"Dicembre\"],\n      day_for_recurring: [\"Domenica\", \"Lunedì\", \"Martedì\", \"Mercoledì\", \"Jovedì\", \"Venerdì\", \"Sabato\"]\n    }\n  },\n  Re = {\n    date: {\n      month_full: [\"1月\", \"2月\", \"3月\", \"4月\", \"5月\", \"6月\", \"7月\", \"8月\", \"9月\", \"10月\", \"11月\", \"12月\"],\n      month_short: [\"1月\", \"2月\", \"3月\", \"4月\", \"5月\", \"6月\", \"7月\", \"8月\", \"9月\", \"10月\", \"11月\", \"12月\"],\n      day_full: [\"日曜日\", \"月曜日\", \"火曜日\", \"水曜日\", \"木曜日\", \"金曜日\", \"土曜日\"],\n      day_short: [\"日\", \"月\", \"火\", \"水\", \"木\", \"金\", \"土\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"今日\",\n      day_tab: \"日\",\n      week_tab: \"週\",\n      month_tab: \"月\",\n      new_event: \"新イベント\",\n      icon_save: \"保存\",\n      icon_cancel: \"キャンセル\",\n      icon_details: \"詳細\",\n      icon_edit: \"編集\",\n      icon_delete: \"削除\",\n      confirm_closing: \"\",\n      confirm_deleting: \"イベント完全に削除されます、宜しいですか？\",\n      section_description: \"デスクリプション\",\n      section_time: \"期間\",\n      confirm_recurring: \"繰り返されているイベントを全て編集しますか？\",\n      section_recurring: \"イベントを繰り返す\",\n      button_recurring: \"無効\",\n      button_recurring_open: \"有効\",\n      full_day: \"終日\",\n      button_edit_series: \"シリーズを編集します\",\n      button_edit_occurrence: \"コピーを編集\",\n      agenda_tab: \"議題は\",\n      date: \"日付\",\n      description: \"説明\",\n      year_tab: \"今年\",\n      week_agenda_tab: \"議題は\",\n      grid_tab: \"グリッド\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\"\n    }\n  };\nclass qe {\n  constructor(h) {\n    this._locales = {};\n    for (const a in h) this._locales[a] = h[a];\n  }\n  addLocale(h, a) {\n    this._locales[h] = a;\n  }\n  getLocale(h) {\n    return this._locales[h];\n  }\n}\nconst Fe = {\n    date: {\n      month_full: [\"Januar\", \"Februar\", \"Mars\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Desember\"],\n      month_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Des\"],\n      day_full: [\"Søndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lørdag\"],\n      day_short: [\"Søn\", \"Mon\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lør\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"I dag\",\n      day_tab: \"Dag\",\n      week_tab: \"Uke\",\n      month_tab: \"Måned\",\n      new_event: \"Ny hendelse\",\n      icon_save: \"Lagre\",\n      icon_cancel: \"Avbryt\",\n      icon_details: \"Detaljer\",\n      icon_edit: \"Rediger\",\n      icon_delete: \"Slett\",\n      confirm_closing: \"\",\n      confirm_deleting: \"Hendelsen vil bli slettet permanent. Er du sikker?\",\n      section_description: \"Beskrivelse\",\n      section_time: \"Tidsperiode\",\n      confirm_recurring: \"Vil du forandre hele dette settet av repeterende hendelser?\",\n      section_recurring: \"Repeter hendelsen\",\n      button_recurring: \"Av\",\n      button_recurring_open: \"På\",\n      button_edit_series: \"Rediger serien\",\n      button_edit_occurrence: \"Redigere en kopi\",\n      agenda_tab: \"Agenda\",\n      date: \"Dato\",\n      description: \"Beskrivelse\",\n      year_tab: \"År\",\n      week_agenda_tab: \"Agenda\",\n      grid_tab: \"Grid\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\",\n      repeat_radio_day: \"Daglig\",\n      repeat_radio_week: \"Ukentlig\",\n      repeat_radio_month: \"Månedlig\",\n      repeat_radio_year: \"Årlig\",\n      repeat_radio_day_type: \"Hver\",\n      repeat_text_day_count: \"dag\",\n      repeat_radio_day_type2: \"Alle hverdager\",\n      repeat_week: \" Gjentas hver\",\n      repeat_text_week_count: \"uke på:\",\n      repeat_radio_month_type: \"På hver\",\n      repeat_radio_month_start: \"På\",\n      repeat_text_month_day: \"dag hver\",\n      repeat_text_month_count: \"måned\",\n      repeat_text_month_count2_before: \"hver\",\n      repeat_text_month_count2_after: \"måned\",\n      repeat_year_label: \"på\",\n      select_year_day2: \"i\",\n      repeat_text_year_day: \"dag i\",\n      select_year_month: \"\",\n      repeat_radio_end: \"Ingen sluttdato\",\n      repeat_text_occurences_count: \"forekomst\",\n      repeat_radio_end3: \"Stop den\",\n      repeat_radio_end2: \"Etter\",\n      month_for_recurring: [\"Januar\", \"Februar\", \"Mars\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Desember\"],\n      day_for_recurring: [\"Sondag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lørdag\"]\n    }\n  },\n  Je = {\n    date: {\n      month_full: [\"Januari\", \"Februari\", \"Maart\", \"April\", \"Mei\", \"Juni\", \"Juli\", \"Augustus\", \"September\", \"Oktober\", \"November\", \"December\"],\n      month_short: [\"Jan\", \"Feb\", \"mrt\", \"Apr\", \"Mei\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\n      day_full: [\"Zondag\", \"Maandag\", \"Dinsdag\", \"Woensdag\", \"Donderdag\", \"Vrijdag\", \"Zaterdag\"],\n      day_short: [\"Zo\", \"Ma\", \"Di\", \"Wo\", \"Do\", \"Vr\", \"Za\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Vandaag\",\n      day_tab: \"Dag\",\n      week_tab: \"Week\",\n      month_tab: \"Maand\",\n      new_event: \"Nieuw item\",\n      icon_save: \"Opslaan\",\n      icon_cancel: \"Annuleren\",\n      icon_details: \"Details\",\n      icon_edit: \"Bewerken\",\n      icon_delete: \"Verwijderen\",\n      confirm_closing: \"\",\n      confirm_deleting: \"Item zal permanent worden verwijderd, doorgaan?\",\n      section_description: \"Beschrijving\",\n      section_time: \"Tijd periode\",\n      full_day: \"Hele dag\",\n      confirm_recurring: \"Wilt u alle terugkerende items bijwerken?\",\n      section_recurring: \"Item herhalen\",\n      button_recurring: \"Uit\",\n      button_recurring_open: \"Aan\",\n      button_edit_series: \"Bewerk de serie\",\n      button_edit_occurrence: \"Bewerk een kopie\",\n      agenda_tab: \"Agenda\",\n      date: \"Datum\",\n      description: \"Omschrijving\",\n      year_tab: \"Jaar\",\n      week_agenda_tab: \"Agenda\",\n      grid_tab: \"Tabel\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\",\n      repeat_radio_day: \"Dagelijks\",\n      repeat_radio_week: \"Wekelijks\",\n      repeat_radio_month: \"Maandelijks\",\n      repeat_radio_year: \"Jaarlijks\",\n      repeat_radio_day_type: \"Elke\",\n      repeat_text_day_count: \"dag(en)\",\n      repeat_radio_day_type2: \"Elke werkdag\",\n      repeat_week: \" Herhaal elke\",\n      repeat_text_week_count: \"week op de volgende dagen:\",\n      repeat_radio_month_type: \"Herhaal\",\n      repeat_radio_month_start: \"Op\",\n      repeat_text_month_day: \"dag iedere\",\n      repeat_text_month_count: \"maanden\",\n      repeat_text_month_count2_before: \"iedere\",\n      repeat_text_month_count2_after: \"maanden\",\n      repeat_year_label: \"Op\",\n      select_year_day2: \"van\",\n      repeat_text_year_day: \"dag\",\n      select_year_month: \"maand\",\n      repeat_radio_end: \"Geen eind datum\",\n      repeat_text_occurences_count: \"keren\",\n      repeat_radio_end3: \"Eindigd per\",\n      repeat_radio_end2: \"Na\",\n      month_for_recurring: [\"Januari\", \"Februari\", \"Maart\", \"April\", \"Mei\", \"Juni\", \"Juli\", \"Augustus\", \"September\", \"Oktober\", \"November\", \"December\"],\n      day_for_recurring: [\"Zondag\", \"Maandag\", \"Dinsdag\", \"Woensdag\", \"Donderdag\", \"Vrijdag\", \"Zaterdag\"]\n    }\n  },\n  Ue = {\n    date: {\n      month_full: [\"Januar\", \"Februar\", \"Mars\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Desember\"],\n      month_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Des\"],\n      day_full: [\"Søndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lørdag\"],\n      day_short: [\"Søn\", \"Man\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lør\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Idag\",\n      day_tab: \"Dag\",\n      week_tab: \"Uke\",\n      month_tab: \"Måned\",\n      new_event: \"Ny\",\n      icon_save: \"Lagre\",\n      icon_cancel: \"Avbryt\",\n      icon_details: \"Detaljer\",\n      icon_edit: \"Endre\",\n      icon_delete: \"Slett\",\n      confirm_closing: \"Endringer blir ikke lagret, er du sikker?\",\n      confirm_deleting: \"Oppføringen vil bli slettet, er du sikker?\",\n      section_description: \"Beskrivelse\",\n      section_time: \"Tidsperiode\",\n      full_day: \"Full dag\",\n      confirm_recurring: \"Vil du endre hele settet med repeterende oppføringer?\",\n      section_recurring: \"Repeterende oppføring\",\n      button_recurring: \"Ikke aktiv\",\n      button_recurring_open: \"Aktiv\",\n      button_edit_series: \"Rediger serien\",\n      button_edit_occurrence: \"Redigere en kopi\",\n      agenda_tab: \"Agenda\",\n      date: \"Dato\",\n      description: \"Beskrivelse\",\n      year_tab: \"År\",\n      week_agenda_tab: \"Agenda\",\n      grid_tab: \"Grid\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\"\n    }\n  },\n  Ye = {\n    date: {\n      month_full: [\"Styczeń\", \"Luty\", \"Marzec\", \"Kwiecień\", \"Maj\", \"Czerwiec\", \"Lipiec\", \"Sierpień\", \"Wrzesień\", \"Październik\", \"Listopad\", \"Grudzień\"],\n      month_short: [\"Sty\", \"Lut\", \"Mar\", \"Kwi\", \"Maj\", \"Cze\", \"Lip\", \"Sie\", \"Wrz\", \"Paź\", \"Lis\", \"Gru\"],\n      day_full: [\"Niedziela\", \"Poniedziałek\", \"Wtorek\", \"Środa\", \"Czwartek\", \"Piątek\", \"Sobota\"],\n      day_short: [\"Nie\", \"Pon\", \"Wto\", \"Śro\", \"Czw\", \"Pią\", \"Sob\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Dziś\",\n      day_tab: \"Dzień\",\n      week_tab: \"Tydzień\",\n      month_tab: \"Miesiąc\",\n      new_event: \"Nowe zdarzenie\",\n      icon_save: \"Zapisz\",\n      icon_cancel: \"Anuluj\",\n      icon_details: \"Szczegóły\",\n      icon_edit: \"Edytuj\",\n      icon_delete: \"Usuń\",\n      confirm_closing: \"\",\n      confirm_deleting: \"Zdarzenie zostanie usunięte na zawsze, kontynuować?\",\n      section_description: \"Opis\",\n      section_time: \"Okres czasu\",\n      full_day: \"Cały dzień\",\n      confirm_recurring: \"Czy chcesz edytować cały zbiór powtarzających się zdarzeń?\",\n      section_recurring: \"Powtórz zdarzenie\",\n      button_recurring: \"Nieaktywne\",\n      button_recurring_open: \"Aktywne\",\n      button_edit_series: \"Edytuj serię\",\n      button_edit_occurrence: \"Edytuj kopię\",\n      agenda_tab: \"Agenda\",\n      date: \"Data\",\n      description: \"Opis\",\n      year_tab: \"Rok\",\n      week_agenda_tab: \"Agenda\",\n      grid_tab: \"Tabela\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\",\n      repeat_radio_day: \"Codziennie\",\n      repeat_radio_week: \"Co tydzie\",\n      repeat_radio_month: \"Co miesic\",\n      repeat_radio_year: \"Co rok\",\n      repeat_radio_day_type: \"Kadego\",\n      repeat_text_day_count: \"dnia\",\n      repeat_radio_day_type2: \"Kadego dnia roboczego\",\n      repeat_week: \" Powtarzaj kadego\",\n      repeat_text_week_count: \"tygodnia w dni:\",\n      repeat_radio_month_type: \"Powtrz\",\n      repeat_radio_month_start: \"W\",\n      repeat_text_month_day: \"dnia kadego\",\n      repeat_text_month_count: \"miesica\",\n      repeat_text_month_count2_before: \"kadego\",\n      repeat_text_month_count2_after: \"miesica\",\n      repeat_year_label: \"W\",\n      select_year_day2: \"miesica\",\n      repeat_text_year_day: \"dnia miesica\",\n      select_year_month: \"\",\n      repeat_radio_end: \"Bez daty kocowej\",\n      repeat_text_occurences_count: \"wystpieniu/ach\",\n      repeat_radio_end3: \"Zakocz w\",\n      repeat_radio_end2: \"Po\",\n      month_for_recurring: [\"Stycznia\", \"Lutego\", \"Marca\", \"Kwietnia\", \"Maja\", \"Czerwca\", \"Lipca\", \"Sierpnia\", \"Wrzenia\", \"Padziernka\", \"Listopada\", \"Grudnia\"],\n      day_for_recurring: [\"Niedziela\", \"Poniedziaek\", \"Wtorek\", \"roda\", \"Czwartek\", \"Pitek\", \"Sobota\"]\n    }\n  },\n  We = {\n    date: {\n      month_full: [\"Janeiro\", \"Fevereiro\", \"Março\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"],\n      month_short: [\"Jan\", \"Fev\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Out\", \"Nov\", \"Dez\"],\n      day_full: [\"Domingo\", \"Segunda\", \"Terça\", \"Quarta\", \"Quinta\", \"Sexta\", \"Sábado\"],\n      day_short: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sab\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Hoje\",\n      day_tab: \"Dia\",\n      week_tab: \"Semana\",\n      month_tab: \"Mês\",\n      new_event: \"Novo evento\",\n      icon_save: \"Salvar\",\n      icon_cancel: \"Cancelar\",\n      icon_details: \"Detalhes\",\n      icon_edit: \"Editar\",\n      icon_delete: \"Deletar\",\n      confirm_closing: \"\",\n      confirm_deleting: \"Tem certeza que deseja excluir?\",\n      section_description: \"Descrição\",\n      section_time: \"Período de tempo\",\n      full_day: \"Dia inteiro\",\n      confirm_recurring: \"Deseja editar todos esses eventos repetidos?\",\n      section_recurring: \"Repetir evento\",\n      button_recurring: \"Desabilitar\",\n      button_recurring_open: \"Habilitar\",\n      button_edit_series: \"Editar a série\",\n      button_edit_occurrence: \"Editar uma cópia\",\n      agenda_tab: \"Dia\",\n      date: \"Data\",\n      description: \"Descrição\",\n      year_tab: \"Ano\",\n      week_agenda_tab: \"Dia\",\n      grid_tab: \"Grade\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\",\n      repeat_radio_day: \"Diário\",\n      repeat_radio_week: \"Semanal\",\n      repeat_radio_month: \"Mensal\",\n      repeat_radio_year: \"Anual\",\n      repeat_radio_day_type: \"Cada\",\n      repeat_text_day_count: \"dia(s)\",\n      repeat_radio_day_type2: \"Cada trabalho diário\",\n      repeat_week: \" Repita cada\",\n      repeat_text_week_count: \"semana:\",\n      repeat_radio_month_type: \"Repetir\",\n      repeat_radio_month_start: \"Em\",\n      repeat_text_month_day: \"todo dia\",\n      repeat_text_month_count: \"mês\",\n      repeat_text_month_count2_before: \"todo\",\n      repeat_text_month_count2_after: \"mês\",\n      repeat_year_label: \"Em\",\n      select_year_day2: \"of\",\n      repeat_text_year_day: \"dia\",\n      select_year_month: \"mês\",\n      repeat_radio_end: \"Sem data final\",\n      repeat_text_occurences_count: \"ocorrências\",\n      repeat_radio_end3: \"Fim\",\n      repeat_radio_end2: \"Depois\",\n      month_for_recurring: [\"Janeiro\", \"Fevereiro\", \"Março\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"],\n      day_for_recurring: [\"Domingo\", \"Segunda\", \"Terça\", \"Quarta\", \"Quinta\", \"Sexta\", \"Sábado\"]\n    }\n  },\n  Ke = {\n    date: {\n      month_full: [\"Ianuarie\", \"Februarie\", \"Martie\", \"Aprilie\", \"Mai\", \"Iunie\", \"Iulie\", \"August\", \"Septembrie\", \"Octombrie\", \"November\", \"December\"],\n      month_short: [\"Ian\", \"Feb\", \"Mar\", \"Apr\", \"Mai\", \"Iun\", \"Iul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n      day_full: [\"Duminica\", \"Luni\", \"Marti\", \"Miercuri\", \"Joi\", \"Vineri\", \"Sambata\"],\n      day_short: [\"Du\", \"Lu\", \"Ma\", \"Mi\", \"Jo\", \"Vi\", \"Sa\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Astazi\",\n      day_tab: \"Zi\",\n      week_tab: \"Saptamana\",\n      month_tab: \"Luna\",\n      new_event: \"Eveniment nou\",\n      icon_save: \"Salveaza\",\n      icon_cancel: \"Anuleaza\",\n      icon_details: \"Detalii\",\n      icon_edit: \"Editeaza\",\n      icon_delete: \"Sterge\",\n      confirm_closing: \"Schimbarile nu vor fi salvate, esti sigur?\",\n      confirm_deleting: \"Evenimentul va fi sters permanent, esti sigur?\",\n      section_description: \"Descriere\",\n      section_time: \"Interval\",\n      full_day: \"Toata ziua\",\n      confirm_recurring: \"Vrei sa editezi toata seria de evenimente repetate?\",\n      section_recurring: \"Repetare\",\n      button_recurring: \"Dezactivata\",\n      button_recurring_open: \"Activata\",\n      button_edit_series: \"Editeaza serie\",\n      button_edit_occurrence: \"Editeaza doar intrare\",\n      agenda_tab: \"Agenda\",\n      date: \"Data\",\n      description: \"Descriere\",\n      year_tab: \"An\",\n      week_agenda_tab: \"Agenda\",\n      grid_tab: \"Lista\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\",\n      repeat_radio_day: \"Zilnic\",\n      repeat_radio_week: \"Saptamanal\",\n      repeat_radio_month: \"Lunar\",\n      repeat_radio_year: \"Anual\",\n      repeat_radio_day_type: \"La fiecare\",\n      repeat_text_day_count: \"zi(le)\",\n      repeat_radio_day_type2: \"Fiecare zi lucratoare\",\n      repeat_week: \" Repeta la fiecare\",\n      repeat_text_week_count: \"saptamana in urmatoarele zile:\",\n      repeat_radio_month_type: \"Repeta in\",\n      repeat_radio_month_start: \"In a\",\n      repeat_text_month_day: \"zi la fiecare\",\n      repeat_text_month_count: \"luni\",\n      repeat_text_month_count2_before: \"la fiecare\",\n      repeat_text_month_count2_after: \"luni\",\n      repeat_year_label: \"In\",\n      select_year_day2: \"a lunii\",\n      repeat_text_year_day: \"zi a lunii\",\n      select_year_month: \"\",\n      repeat_radio_end: \"Fara data de sfarsit\",\n      repeat_text_occurences_count: \"evenimente\",\n      repeat_radio_end3: \"La data\",\n      repeat_radio_end2: \"Dupa\",\n      month_for_recurring: [\"Ianuarie\", \"Februarie\", \"Martie\", \"Aprilie\", \"Mai\", \"Iunie\", \"Iulie\", \"August\", \"Septembrie\", \"Octombrie\", \"Noiembrie\", \"Decembrie\"],\n      day_for_recurring: [\"Duminica\", \"Luni\", \"Marti\", \"Miercuri\", \"Joi\", \"Vineri\", \"Sambata\"]\n    }\n  },\n  Ge = {\n    date: {\n      month_full: [\"Январь\", \"Февраль\", \"Март\", \"Апрель\", \"Maй\", \"Июнь\", \"Июль\", \"Август\", \"Сентябрь\", \"Oктябрь\", \"Ноябрь\", \"Декабрь\"],\n      month_short: [\"Янв\", \"Фев\", \"Maр\", \"Aпр\", \"Maй\", \"Июн\", \"Июл\", \"Aвг\", \"Сен\", \"Окт\", \"Ноя\", \"Дек\"],\n      day_full: [\"Воскресенье\", \"Понедельник\", \"Вторник\", \"Среда\", \"Четверг\", \"Пятница\", \"Суббота\"],\n      day_short: [\"Вс\", \"Пн\", \"Вт\", \"Ср\", \"Чт\", \"Пт\", \"Сб\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Сегодня\",\n      day_tab: \"День\",\n      week_tab: \"Неделя\",\n      month_tab: \"Месяц\",\n      new_event: \"Новое событие\",\n      icon_save: \"Сохранить\",\n      icon_cancel: \"Отменить\",\n      icon_details: \"Детали\",\n      icon_edit: \"Изменить\",\n      icon_delete: \"Удалить\",\n      confirm_closing: \"\",\n      confirm_deleting: \"Событие будет удалено безвозвратно, продолжить?\",\n      section_description: \"Описание\",\n      section_time: \"Период времени\",\n      full_day: \"Весь день\",\n      confirm_recurring: \"Вы хотите изменить всю серию повторяющихся событий?\",\n      section_recurring: \"Повторение\",\n      button_recurring: \"Отключено\",\n      button_recurring_open: \"Включено\",\n      button_edit_series: \"Редактировать серию\",\n      button_edit_occurrence: \"Редактировать экземпляр\",\n      agenda_tab: \"Список\",\n      date: \"Дата\",\n      description: \"Описание\",\n      year_tab: \"Год\",\n      week_agenda_tab: \"Список\",\n      grid_tab: \"Таблица\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\",\n      repeat_radio_day: \"День\",\n      repeat_radio_week: \"Неделя\",\n      repeat_radio_month: \"Месяц\",\n      repeat_radio_year: \"Год\",\n      repeat_radio_day_type: \"Каждый\",\n      repeat_text_day_count: \"день\",\n      repeat_radio_day_type2: \"Каждый рабочий день\",\n      repeat_week: \" Повторять каждую\",\n      repeat_text_week_count: \"неделю , в:\",\n      repeat_radio_month_type: \"Повторять\",\n      repeat_radio_month_start: \"\",\n      repeat_text_month_day: \" числа каждый \",\n      repeat_text_month_count: \"месяц\",\n      repeat_text_month_count2_before: \"каждый \",\n      repeat_text_month_count2_after: \"месяц\",\n      repeat_year_label: \"\",\n      select_year_day2: \"\",\n      repeat_text_year_day: \"день\",\n      select_year_month: \"\",\n      repeat_radio_end: \"Без даты окончания\",\n      repeat_text_occurences_count: \"повторений\",\n      repeat_radio_end3: \"До \",\n      repeat_radio_end2: \"\",\n      month_for_recurring: [\"Января\", \"Февраля\", \"Марта\", \"Апреля\", \"Мая\", \"Июня\", \"Июля\", \"Августа\", \"Сентября\", \"Октября\", \"Ноября\", \"Декабря\"],\n      day_for_recurring: [\"Воскресенье\", \"Понедельник\", \"Вторник\", \"Среду\", \"Четверг\", \"Пятницу\", \"Субботу\"]\n    }\n  },\n  Xe = {\n    date: {\n      month_full: [\"Januar\", \"Februar\", \"Marec\", \"April\", \"Maj\", \"Junij\", \"Julij\", \"Avgust\", \"September\", \"Oktober\", \"November\", \"December\"],\n      month_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\n      day_full: [\"Nedelja\", \"Ponedeljek\", \"Torek\", \"Sreda\", \"Četrtek\", \"Petek\", \"Sobota\"],\n      day_short: [\"Ned\", \"Pon\", \"Tor\", \"Sre\", \"Čet\", \"Pet\", \"Sob\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Danes\",\n      day_tab: \"Dan\",\n      week_tab: \"Teden\",\n      month_tab: \"Mesec\",\n      new_event: \"Nov dogodek\",\n      icon_save: \"Shrani\",\n      icon_cancel: \"Prekliči\",\n      icon_details: \"Podrobnosti\",\n      icon_edit: \"Uredi\",\n      icon_delete: \"Izbriši\",\n      confirm_closing: \"\",\n      confirm_deleting: \"Dogodek bo izbrisan. Želite nadaljevati?\",\n      section_description: \"Opis\",\n      section_time: \"Časovni okvir\",\n      full_day: \"Ves dan\",\n      confirm_recurring: \"Želite urediti celoten set ponavljajočih dogodkov?\",\n      section_recurring: \"Ponovi dogodek\",\n      button_recurring: \"Onemogočeno\",\n      button_recurring_open: \"Omogočeno\",\n      button_edit_series: \"Edit series\",\n      button_edit_occurrence: \"Edit occurrence\",\n      agenda_tab: \"Zadeva\",\n      date: \"Datum\",\n      description: \"Opis\",\n      year_tab: \"Leto\",\n      week_agenda_tab: \"Zadeva\",\n      grid_tab: \"Miza\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\"\n    }\n  },\n  Ze = {\n    date: {\n      month_full: [\"Január\", \"Február\", \"Marec\", \"Apríl\", \"Máj\", \"Jún\", \"Júl\", \"August\", \"September\", \"Október\", \"November\", \"December\"],\n      month_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Máj\", \"Jún\", \"Júl\", \"Aug\", \"Sept\", \"Okt\", \"Nov\", \"Dec\"],\n      day_full: [\"Nedeľa\", \"Pondelok\", \"Utorok\", \"Streda\", \"Štvrtok\", \"Piatok\", \"Sobota\"],\n      day_short: [\"Ne\", \"Po\", \"Ut\", \"St\", \"Št\", \"Pi\", \"So\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Dnes\",\n      day_tab: \"Deň\",\n      week_tab: \"Týždeň\",\n      month_tab: \"Mesiac\",\n      new_event: \"Nová udalosť\",\n      icon_save: \"Uložiť\",\n      icon_cancel: \"Späť\",\n      icon_details: \"Detail\",\n      icon_edit: \"Edituj\",\n      icon_delete: \"Zmazať\",\n      confirm_closing: \"Vaše zmeny nebudú uložené. Skutočne?\",\n      confirm_deleting: \"Udalosť bude natrvalo vymazaná. Skutočne?\",\n      section_description: \"Poznámky\",\n      section_time: \"Doba platnosti\",\n      confirm_recurring: \"Prajete si upraviť celú radu opakovaných udalostí?\",\n      section_recurring: \"Opakovanie udalosti\",\n      button_recurring: \"Vypnuté\",\n      button_recurring_open: \"Zapnuté\",\n      button_edit_series: \"Upraviť opakovania\",\n      button_edit_occurrence: \"Upraviť inštancie\",\n      agenda_tab: \"Program\",\n      date: \"Dátum\",\n      description: \"Poznámka\",\n      year_tab: \"Rok\",\n      full_day: \"Celý deň\",\n      week_agenda_tab: \"Program\",\n      grid_tab: \"Mriežka\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\",\n      repeat_radio_day: \"Denne\",\n      repeat_radio_week: \"Týždenne\",\n      repeat_radio_month: \"Mesaène\",\n      repeat_radio_year: \"Roène\",\n      repeat_radio_day_type: \"Každý\",\n      repeat_text_day_count: \"deò\",\n      repeat_radio_day_type2: \"Každý prac. deò\",\n      repeat_week: \"Opakova každý\",\n      repeat_text_week_count: \"týždeò v dòoch:\",\n      repeat_radio_month_type: \"Opakova\",\n      repeat_radio_month_start: \"On\",\n      repeat_text_month_day: \"deò každý\",\n      repeat_text_month_count: \"mesiac\",\n      repeat_text_month_count2_before: \"každý\",\n      repeat_text_month_count2_after: \"mesiac\",\n      repeat_year_label: \"On\",\n      select_year_day2: \"poèas\",\n      repeat_text_year_day: \"deò\",\n      select_year_month: \"mesiac\",\n      repeat_radio_end: \"Bez dátumu ukonèenia\",\n      repeat_text_occurences_count: \"udalostiach\",\n      repeat_radio_end3: \"Ukonèi\",\n      repeat_radio_end2: \"Po\",\n      month_for_recurring: [\"Január\", \"Február\", \"Marec\", \"Apríl\", \"Máj\", \"Jún\", \"Júl\", \"August\", \"September\", \"Október\", \"November\", \"December\"],\n      day_for_recurring: [\"Nede¾a\", \"Pondelok\", \"Utorok\", \"Streda\", \"Štvrtok\", \"Piatok\", \"Sobota\"]\n    }\n  },\n  Qe = {\n    date: {\n      month_full: [\"Januari\", \"Februari\", \"Mars\", \"April\", \"Maj\", \"Juni\", \"Juli\", \"Augusti\", \"September\", \"Oktober\", \"November\", \"December\"],\n      month_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\n      day_full: [\"Söndag\", \"Måndag\", \"Tisdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lördag\"],\n      day_short: [\"Sön\", \"Mån\", \"Tis\", \"Ons\", \"Tor\", \"Fre\", \"Lör\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Idag\",\n      day_tab: \"Dag\",\n      week_tab: \"Vecka\",\n      month_tab: \"Månad\",\n      new_event: \"Ny händelse\",\n      icon_save: \"Spara\",\n      icon_cancel: \"Ångra\",\n      icon_details: \"Detaljer\",\n      icon_edit: \"Ändra\",\n      icon_delete: \"Ta bort\",\n      confirm_closing: \"\",\n      confirm_deleting: \"Är du säker på att du vill ta bort händelsen permanent?\",\n      section_description: \"Beskrivning\",\n      section_time: \"Tid\",\n      full_day: \"Hela dagen\",\n      confirm_recurring: \"Vill du redigera hela serien med repeterande händelser?\",\n      section_recurring: \"Upprepa händelse\",\n      button_recurring: \"Inaktiverat\",\n      button_recurring_open: \"Aktiverat\",\n      button_edit_series: \"Redigera serien\",\n      button_edit_occurrence: \"Redigera en kopia\",\n      agenda_tab: \"Dagordning\",\n      date: \"Datum\",\n      description: \"Beskrivning\",\n      year_tab: \"År\",\n      week_agenda_tab: \"Dagordning\",\n      grid_tab: \"Galler\",\n      drag_to_create: \"Dra för att skapa ny\",\n      drag_to_move: \"Dra för att flytta\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\",\n      repeat_radio_day: \"Dagligen\",\n      repeat_radio_week: \"Veckovis\",\n      repeat_radio_month: \"Månadsvis\",\n      repeat_radio_year: \"Årligen\",\n      repeat_radio_day_type: \"Var\",\n      repeat_text_day_count: \"dag\",\n      repeat_radio_day_type2: \"Varje arbetsdag\",\n      repeat_week: \" Upprepa var\",\n      repeat_text_week_count: \"vecka dessa dagar:\",\n      repeat_radio_month_type: \"Upprepa\",\n      repeat_radio_month_start: \"Den\",\n      repeat_text_month_day: \"dagen var\",\n      repeat_text_month_count: \"månad\",\n      repeat_text_month_count2_before: \"var\",\n      repeat_text_month_count2_after: \"månad\",\n      repeat_year_label: \"Den\",\n      select_year_day2: \"i\",\n      repeat_text_year_day: \"dag i\",\n      select_year_month: \"månad\",\n      repeat_radio_end: \"Inget slutdatum\",\n      repeat_text_occurences_count: \"upprepningar\",\n      repeat_radio_end3: \"Sluta efter\",\n      repeat_radio_end2: \"Efter\",\n      month_for_recurring: [\"Januari\", \"Februari\", \"Mars\", \"April\", \"Maj\", \"Juni\", \"Juli\", \"Augusti\", \"September\", \"Oktober\", \"November\", \"December\"],\n      day_for_recurring: [\"Söndag\", \"Måndag\", \"Tisdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lördag\"]\n    }\n  },\n  et = {\n    date: {\n      month_full: [\"Ocak\", \"Þubat\", \"Mart\", \"Nisan\", \"Mayýs\", \"Haziran\", \"Temmuz\", \"Aðustos\", \"Eylül\", \"Ekim\", \"Kasým\", \"Aralýk\"],\n      month_short: [\"Oca\", \"Þub\", \"Mar\", \"Nis\", \"May\", \"Haz\", \"Tem\", \"Aðu\", \"Eyl\", \"Eki\", \"Kas\", \"Ara\"],\n      day_full: [\"Pazar\", \"Pazartes,\", \"Salý\", \"Çarþamba\", \"Perþembe\", \"Cuma\", \"Cumartesi\"],\n      day_short: [\"Paz\", \"Pts\", \"Sal\", \"Çar\", \"Per\", \"Cum\", \"Cts\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Bugün\",\n      day_tab: \"Gün\",\n      week_tab: \"Hafta\",\n      month_tab: \"Ay\",\n      new_event: \"Uygun\",\n      icon_save: \"Kaydet\",\n      icon_cancel: \"Ýptal\",\n      icon_details: \"Detaylar\",\n      icon_edit: \"Düzenle\",\n      icon_delete: \"Sil\",\n      confirm_closing: \"\",\n      confirm_deleting: \"Etkinlik silinecek, devam?\",\n      section_description: \"Açýklama\",\n      section_time: \"Zaman aralýðý\",\n      full_day: \"Tam gün\",\n      confirm_recurring: \"Tüm tekrar eden etkinlikler silinecek, devam?\",\n      section_recurring: \"Etkinliði tekrarla\",\n      button_recurring: \"Pasif\",\n      button_recurring_open: \"Aktif\",\n      button_edit_series: \"Dizi düzenleme\",\n      button_edit_occurrence: \"Bir kopyasını düzenleyin\",\n      agenda_tab: \"Ajanda\",\n      date: \"Tarih\",\n      description: \"Açýklama\",\n      year_tab: \"Yýl\",\n      week_agenda_tab: \"Ajanda\",\n      grid_tab: \"Izgara\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\"\n    }\n  },\n  tt = {\n    date: {\n      month_full: [\"Січень\", \"Лютий\", \"Березень\", \"Квітень\", \"Травень\", \"Червень\", \"Липень\", \"Серпень\", \"Вересень\", \"Жовтень\", \"Листопад\", \"Грудень\"],\n      month_short: [\"Січ\", \"Лют\", \"Бер\", \"Кві\", \"Тра\", \"Чер\", \"Лип\", \"Сер\", \"Вер\", \"Жов\", \"Лис\", \"Гру\"],\n      day_full: [\"Неділя\", \"Понеділок\", \"Вівторок\", \"Середа\", \"Четвер\", \"П'ятниця\", \"Субота\"],\n      day_short: [\"Нед\", \"Пон\", \"Вів\", \"Сер\", \"Чет\", \"Птн\", \"Суб\"]\n    },\n    labels: {\n      dhx_cal_today_button: \"Сьогодні\",\n      day_tab: \"День\",\n      week_tab: \"Тиждень\",\n      month_tab: \"Місяць\",\n      new_event: \"Нова подія\",\n      icon_save: \"Зберегти\",\n      icon_cancel: \"Відміна\",\n      icon_details: \"Деталі\",\n      icon_edit: \"Редагувати\",\n      icon_delete: \"Вилучити\",\n      confirm_closing: \"\",\n      confirm_deleting: \"Подія вилучиться назавжди. Ви впевнені?\",\n      section_description: \"Опис\",\n      section_time: \"Часовий проміжок\",\n      full_day: \"Весь день\",\n      confirm_recurring: \"Хочете редагувати весь перелік повторюваних подій?\",\n      section_recurring: \"Повторювана подія\",\n      button_recurring: \"Відключено\",\n      button_recurring_open: \"Включено\",\n      button_edit_series: \"Редагувати серію\",\n      button_edit_occurrence: \"Редагувати примірник\",\n      agenda_tab: \"Перелік\",\n      date: \"Дата\",\n      description: \"Опис\",\n      year_tab: \"Рік\",\n      week_agenda_tab: \"Перелік\",\n      grid_tab: \"Таблиця\",\n      drag_to_create: \"Drag to create\",\n      drag_to_move: \"Drag to move\",\n      message_ok: \"OK\",\n      message_cancel: \"Cancel\",\n      next: \"Next\",\n      prev: \"Previous\",\n      year: \"Year\",\n      month: \"Month\",\n      day: \"Day\",\n      hour: \"Hour\",\n      minute: \"Minute\",\n      repeat_radio_day: \"День\",\n      repeat_radio_week: \"Тиждень\",\n      repeat_radio_month: \"Місяць\",\n      repeat_radio_year: \"Рік\",\n      repeat_radio_day_type: \"Кожний\",\n      repeat_text_day_count: \"день\",\n      repeat_radio_day_type2: \"Кожний робочий день\",\n      repeat_week: \" Повторювати кожен\",\n      repeat_text_week_count: \"тиждень , по:\",\n      repeat_radio_month_type: \"Повторювати\",\n      repeat_radio_month_start: \"\",\n      repeat_text_month_day: \" числа кожний \",\n      repeat_text_month_count: \"місяць\",\n      repeat_text_month_count2_before: \"кожен \",\n      repeat_text_month_count2_after: \"місяць\",\n      repeat_year_label: \"\",\n      select_year_day2: \"\",\n      repeat_text_year_day: \"день\",\n      select_year_month: \"\",\n      repeat_radio_end: \"Без дати закінчення\",\n      repeat_text_occurences_count: \"повторень\",\n      repeat_radio_end3: \"До \",\n      repeat_radio_end2: \"\",\n      month_for_recurring: [\"січня\", \"лютого\", \"березня\", \"квітня\", \"травня\", \"червня\", \"липня\", \"серпня\", \"вересня\", \"жовтня\", \"листопада\", \"грудня\"],\n      day_for_recurring: [\"Неділям\", \"Понеділкам\", \"Вівторкам\", \"Середам\", \"Четвергам\", \"П'ятницям\", \"Суботам\"]\n    }\n  };\nclass at {\n  constructor(h, a) {\n    let r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    this.state = {\n      date: /* @__PURE__ */new Date(),\n      modes: [\"days\", \"months\", \"years\"],\n      currentRange: [],\n      eventDates: [],\n      currentModeIndex: 0,\n      ...r\n    }, this.container = null, this.element = null, this.onStateChangeHandlers = [], this.scheduler = h, this._domEvents = h._createDomEventScope(), this.state = this.getState(), Q(this), a && (this.container = a, this.render(this.container)), this.onStateChange((d, i) => {\n      this.callEvent(\"onStateChange\", [i, d]);\n    });\n  }\n  getState() {\n    return {\n      ...this.state,\n      mode: this.state.modes[this.state.currentModeIndex]\n    };\n  }\n  setState(h) {\n    const a = {\n      ...this.state\n    };\n    h.mode && (h.currentModeIndex = this.state.modes.indexOf(h.mode)), this.state = {\n      ...this.state,\n      ...h\n    }, this._notifyStateChange(a, this.state), this.container && this.render(this.container);\n  }\n  onStateChange(h) {\n    return this.onStateChangeHandlers.push(h), () => {\n      const a = this.onStateChangeHandlers.indexOf(h);\n      a !== -1 && this.onStateChangeHandlers.splice(a, 1);\n    };\n  }\n  _notifyStateChange(h, a) {\n    this.onStateChangeHandlers.forEach(r => r(h, a));\n  }\n  _adjustDate(h) {\n    const {\n        mode: a,\n        date: r\n      } = this.getState(),\n      d = new Date(r);\n    a === \"days\" ? d.setMonth(r.getMonth() + h) : a === \"months\" ? d.setFullYear(r.getFullYear() + h) : d.setFullYear(r.getFullYear() + 10 * h), this.setState({\n      date: d\n    });\n  }\n  _toggleMode() {\n    const h = (this.state.currentModeIndex + 1) % this.state.modes.length;\n    this.setState({\n      currentModeIndex: h\n    });\n  }\n  _renderCalendarHeader(h) {\n    const {\n        mode: a,\n        date: r\n      } = this.getState(),\n      d = document.createElement(\"div\");\n    d.classList.add(\"dhx_cal_datepicker_header\");\n    const i = document.createElement(\"button\");\n    i.classList.add(\"dhx_cal_datepicker_arrow\", \"scheduler_icon\", \"arrow_left\"), d.appendChild(i);\n    const _ = document.createElement(\"div\");\n    if (_.classList.add(\"dhx_cal_datepicker_title\"), a === \"days\") _.innerText = r.toLocaleString(\"default\", {\n      month: \"long\"\n    }) + \" \" + r.getFullYear();else if (a === \"months\") _.innerText = r.getFullYear();else {\n      const t = 10 * Math.floor(r.getFullYear() / 10);\n      _.innerText = \"\".concat(t, \" - \").concat(t + 9);\n    }\n    this._domEvents.attach(_, \"click\", this._toggleMode.bind(this)), d.appendChild(_);\n    const o = document.createElement(\"button\");\n    o.classList.add(\"dhx_cal_datepicker_arrow\", \"scheduler_icon\", \"arrow_right\"), d.appendChild(o), h.appendChild(d), this._domEvents.attach(i, \"click\", this._adjustDate.bind(this, -1)), this._domEvents.attach(o, \"click\", this._adjustDate.bind(this, 1));\n  }\n  render(h) {\n    this._domEvents.detachAll(), this.container = h || this.container, this.container.innerHTML = \"\", this.element || (this.element = document.createElement(\"div\"), this.element.classList.add(\"dhx_cal_datepicker\")), this.element.innerHTML = \"\", this.container.appendChild(this.element), this._renderCalendarHeader(this.element);\n    const a = document.createElement(\"div\");\n    a.classList.add(\"dhx_cal_datepicker_data\"), this.element.appendChild(a);\n    const {\n      mode: r\n    } = this.getState();\n    r === \"days\" ? this._renderDayGrid(a) : r === \"months\" ? this._renderMonthGrid(a) : this._renderYearGrid(a);\n  }\n  _renderDayGridHeader(h) {\n    const {\n        date: a\n      } = this.getState(),\n      r = this.scheduler;\n    let d = r.date.week_start(new Date(a));\n    const i = r.date.add(r.date.week_start(new Date(a)), 1, \"week\");\n    h.classList.add(\"dhx_cal_datepicker_days\");\n    const _ = r.date.date_to_str(\"%D\");\n    for (; d.valueOf() < i.valueOf();) {\n      const o = _(d),\n        t = document.createElement(\"div\");\n      t.setAttribute(\"data-day\", d.getDay()), t.classList.add(\"dhx_cal_datepicker_dayname\"), t.innerText = o, h.appendChild(t), d = r.date.add(d, 1, \"day\");\n    }\n  }\n  _weeksBetween(h, a) {\n    const r = this.scheduler;\n    let d = 0,\n      i = new Date(h);\n    for (; i.valueOf() < a.valueOf();) d += 1, i = r.date.week_start(r.date.add(i, 1, \"week\"));\n    return d;\n  }\n  _renderDayGrid(h) {\n    const {\n      date: a,\n      currentRange: r,\n      eventDates: d,\n      minWeeks: i\n    } = this.getState();\n    let _ = r[0],\n      o = r[1];\n    const t = d.reduce((y, w) => (y[this.scheduler.date.day_start(new Date(w)).valueOf()] = !0, y), {}),\n      n = document.createElement(\"div\");\n    this._renderDayGridHeader(n), h.appendChild(n);\n    const s = this.scheduler,\n      c = s.date.week_start(s.date.month_start(new Date(a))),\n      u = s.date.month_start(new Date(a)),\n      v = s.date.add(s.date.month_start(new Date(a)), 1, \"month\");\n    let m = s.date.add(s.date.month_start(new Date(a)), 1, \"month\");\n    const l = s.date.date_part(s._currentDate());\n    m.getDay() !== 0 && (m = s.date.add(s.date.week_start(m), 1, \"week\"));\n    let f = this._weeksBetween(c, m);\n    i && f < i && (m = s.date.add(m, i - f, \"week\"));\n    let g = c;\n    const p = document.createElement(\"div\");\n    for (p.classList.add(\"dhx_cal_datepicker_days\"), this._domEvents.attach(p, \"click\", y => {\n      const w = y.target.closest(\"[data-cell-date]\"),\n        b = new Date(w.getAttribute(\"data-cell-date\"));\n      this.callEvent(\"onDateClick\", [b, y]);\n    }); g.valueOf() < m.valueOf();) {\n      const y = document.createElement(\"div\");\n      y.setAttribute(\"data-cell-date\", s.templates.format_date(g)), y.setAttribute(\"data-day\", g.getDay()), y.innerHTML = g.getDate(), g.valueOf() < u.valueOf() ? y.classList.add(\"dhx_before\") : g.valueOf() >= v.valueOf() && y.classList.add(\"dhx_after\"), g.getDay() !== 0 && g.getDay() !== 6 || y.classList.add(\"dhx_cal_datepicker_weekend\"), g.valueOf() == l.valueOf() && y.classList.add(\"dhx_now\"), _ && o && g.valueOf() >= _.valueOf() && g.valueOf() < o.valueOf() && y.classList.add(\"dhx_cal_datepicker_current\"), t[g.valueOf()] && y.classList.add(\"dhx_cal_datepicker_event\"), y.classList.add(\"dhx_cal_datepicker_date\"), p.appendChild(y), g = s.date.add(g, 1, \"day\");\n    }\n    h.appendChild(p);\n  }\n  _renderMonthGrid(h) {\n    const {\n        date: a\n      } = this.getState(),\n      r = document.createElement(\"div\");\n    r.classList.add(\"dhx_cal_datepicker_months\");\n    const d = [];\n    for (let t = 0; t < 12; t++) d.push(new Date(a.getFullYear(), t, 1));\n    const i = this.scheduler.date.date_to_str(\"%M\");\n    d.forEach(t => {\n      const n = document.createElement(\"div\");\n      n.classList.add(\"dhx_cal_datepicker_month\"), a.getMonth() === t.getMonth() && n.classList.add(\"dhx_cal_datepicker_current\"), n.setAttribute(\"data-month\", t.getMonth()), n.innerHTML = i(t), this._domEvents.attach(n, \"click\", () => {\n        const s = new Date(t);\n        this.setState({\n          date: s,\n          mode: \"days\"\n        });\n      }), r.appendChild(n);\n    }), h.appendChild(r);\n    const _ = document.createElement(\"div\");\n    _.classList.add(\"dhx_cal_datepicker_done\");\n    const o = document.createElement(\"button\");\n    o.innerText = \"Done\", o.classList.add(\"dhx_cal_datepicker_done_btn\"), this._domEvents.attach(o, \"click\", () => {\n      this.setState({\n        mode: \"days\"\n      });\n    }), _.appendChild(o), h.appendChild(_);\n  }\n  _renderYearGrid(h) {\n    const {\n        date: a\n      } = this.getState(),\n      r = 10 * Math.floor(a.getFullYear() / 10),\n      d = document.createElement(\"div\");\n    d.classList.add(\"dhx_cal_datepicker_years\");\n    for (let o = r - 1; o <= r + 10; o++) {\n      const t = document.createElement(\"div\");\n      t.innerText = o, t.classList.add(\"dhx_cal_datepicker_year\"), t.setAttribute(\"data-year\", o), a.getFullYear() === o && t.classList.add(\"dhx_cal_datepicker_current\"), this._domEvents.attach(t, \"click\", () => {\n        this.setState({\n          date: new Date(o, a.getMonth(), 1),\n          mode: \"months\"\n        });\n      }), d.appendChild(t);\n    }\n    h.appendChild(d);\n    const i = document.createElement(\"div\");\n    i.classList.add(\"dhx_cal_datepicker_done\");\n    const _ = document.createElement(\"button\");\n    _.innerText = \"Done\", _.classList.add(\"dhx_cal_datepicker_done_btn\"), this._domEvents.attach(_, \"click\", () => {\n      this.setState({\n        mode: \"months\"\n      });\n    }), i.appendChild(_), h.appendChild(i);\n  }\n  destructor() {\n    this.onStateChangeHandlers = [], this.element && (this.element.innerHTML = \"\", this.element.remove()), this._domEvents.detachAll(), this.callEvent(\"onDestroy\", []), this.detachAllEvents(), this.scheduler = null;\n  }\n}\nfunction nt(e) {\n  const h = {\n    version: \"7.0.5\"\n  };\n  (function (t) {\n    var n = {\n        agenda: \"https://docs.dhtmlx.com/scheduler/agenda_view.html\",\n        grid: \"https://docs.dhtmlx.com/scheduler/grid_view.html\",\n        map: \"https://docs.dhtmlx.com/scheduler/map_view.html\",\n        unit: \"https://docs.dhtmlx.com/scheduler/units_view.html\",\n        timeline: \"https://docs.dhtmlx.com/scheduler/timeline_view.html\",\n        week_agenda: \"https://docs.dhtmlx.com/scheduler/weekagenda_view.html\",\n        year: \"https://docs.dhtmlx.com/scheduler/year_view.html\",\n        anythingElse: \"https://docs.dhtmlx.com/scheduler/views.html\"\n      },\n      s = {\n        agenda: \"ext/dhtmlxscheduler_agenda_view.js\",\n        grid: \"ext/dhtmlxscheduler_grid_view.js\",\n        map: \"ext/dhtmlxscheduler_map_view.js\",\n        unit: \"ext/dhtmlxscheduler_units.js\",\n        timeline: \"ext/dhtmlxscheduler_timeline.js, ext/dhtmlxscheduler_treetimeline.js, ext/dhtmlxscheduler_daytimeline.js\",\n        week_agenda: \"ext/dhtmlxscheduler_week_agenda.js\",\n        year: \"ext/dhtmlxscheduler_year_view.js\",\n        limit: \"ext/dhtmlxscheduler_limit.js\"\n      };\n    t._commonErrorMessages = {\n      unknownView: function (c) {\n        var u = s[c] ? \"You're probably missing \" + s[c] + \".\" : \"\";\n        return \"`\" + c + \"` view is not defined. \\nPlease check parameters you pass to `scheduler.init` or `scheduler.setCurrentView` in your code and ensure you've imported appropriate extensions. \\nRelated docs: \" + (n[c] || n.anythingElse) + \"\\n\" + (u ? u + \"\\n\" : \"\");\n      },\n      collapsedContainer: function (c) {\n        return \"Scheduler container height is set to *100%* but the rendered height is zero and the scheduler is not visible. \\nMake sure that the container has some initial height or use different units. For example:\\n<div id='scheduler_here' class='dhx_cal_container' style='width:100%; height:600px;'> \\n\";\n      }\n    }, t.createTimelineView = function () {\n      throw new Error(\"scheduler.createTimelineView is not implemented. Be sure to add the required extension: \" + s.timeline + \"\\nRelated docs: \" + n.timeline);\n    }, t.createUnitsView = function () {\n      throw new Error(\"scheduler.createUnitsView is not implemented. Be sure to add the required extension: \" + s.unit + \"\\nRelated docs: \" + n.unit);\n    }, t.createGridView = function () {\n      throw new Error(\"scheduler.createGridView is not implemented. Be sure to add the required extension: \" + s.grid + \"\\nRelated docs: \" + n.grid);\n    }, t.addMarkedTimespan = function () {\n      throw new Error(\"scheduler.addMarkedTimespan is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_limit.js\\nRelated docs: https://docs.dhtmlx.com/scheduler/limits.html\");\n    }, t.renderCalendar = function () {\n      throw new Error(\"scheduler.renderCalendar is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_minical.js\\nhttps://docs.dhtmlx.com/scheduler/minicalendar.html\");\n    }, t.exportToPNG = function () {\n      throw new Error([\"scheduler.exportToPNG is not implemented.\", \"This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/png.html\", \"Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml\"].join(\"\\n\"));\n    }, t.exportToPDF = function () {\n      throw new Error([\"scheduler.exportToPDF is not implemented.\", \"This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/pdf.html\", \"Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml\"].join(\"\\n\"));\n    };\n  })(h), he(h), function (t) {\n    Q(t), de(t), t._detachDomEvent = function (l, f, g) {\n      l.removeEventListener ? l.removeEventListener(f, g, !1) : l.detachEvent && l.detachEvent(\"on\" + f, g);\n    }, t._init_once = function () {\n      _e(t), t._init_once = function () {};\n    };\n    const n = {\n        render: function (l) {\n          return t._init_nav_bar(l);\n        }\n      },\n      s = {\n        render: function (l) {\n          const f = document.createElement(\"div\");\n          return f.className = \"dhx_cal_header\", f;\n        }\n      },\n      c = {\n        render: function (l) {\n          const f = document.createElement(\"div\");\n          return f.className = \"dhx_cal_data\", f;\n        }\n      };\n    function u(l) {\n      return !!(l.querySelector(\".dhx_cal_header\") && l.querySelector(\".dhx_cal_data\") && l.querySelector(\".dhx_cal_navline\"));\n    }\n    t.init = function (l, f, g) {\n      if (!this.$destroyed) {\n        if (f = f || t._currentDate(), g = g || \"week\", this._obj && this.unset_actions(), this._obj = typeof l == \"string\" ? document.getElementById(l) : l, this.$container = this._obj, this.$root = this._obj, !this.$container.offsetHeight && this.$container.offsetWidth && this.$container.style.height === \"100%\" && window.console.error(t._commonErrorMessages.collapsedContainer(), this.$container), this.config.wai_aria_attributes && this.config.wai_aria_application_role && this.$container.setAttribute(\"role\", \"application\"), this.config.header || u(this.$container) || (this.config.header = function (p) {\n          const y = [\"day\", \"week\", \"month\"];\n          if (p.matrix) for (const w in p.matrix) y.push(w);\n          if (p._props) for (const w in p._props) y.push(w);\n          if (p._grid && p._grid.names) for (const w in p._grid.names) y.push(w);\n          return [\"map\", \"agenda\", \"week_agenda\", \"year\"].forEach(function (w) {\n            p[w + \"_view\"] && y.push(w);\n          }), y.concat([\"date\"]).concat([\"prev\", \"today\", \"next\"]);\n        }(this), window.console.log([\"Required DOM elements are missing from the scheduler container and **scheduler.config.header** is not specified.\", \"Using a default header configuration: \", \"scheduler.config.header = \" + JSON.stringify(this.config.header, null, 2), \"Check this article for the details: https://docs.dhtmlx.com/scheduler/initialization.html\"].join(\"\\n\"))), this.config.header) this.$container.innerHTML = \"\", this.$container.classList.add(\"dhx_cal_container\"), this.config.header.height && (this.xy.nav_height = this.config.header.height), this.$container.appendChild(n.render(this.config.header)), this.$container.appendChild(s.render()), this.$container.appendChild(c.render());else if (!u(this.$container)) throw new Error([\"Required DOM elements are missing from the scheduler container.\", \"Be sure to either specify them manually in the markup: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviamarkup\", \"Or to use **scheduler.config.header** setting so they could be created automatically: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviaheaderconfig\"].join(\"\\n\"));\n        this.config.rtl && (this.$container.className += \" dhx_cal_container_rtl\"), this._skin_init && t._skin_init(), t.date.init(), this._scroll = !0, this._els = [], this.get_elements(), this.init_templates(), this.set_actions(), this._init_once(), this._init_touch_events(), this.set_sizes(), t.callEvent(\"onSchedulerReady\", []), t.$initialized = !0, this.setCurrentView(f, g);\n      }\n    }, t.xy = {\n      min_event_height: 20,\n      bar_height: 24,\n      scale_width: 50,\n      scroll_width: 18,\n      scale_height: 20,\n      month_scale_height: 20,\n      menu_width: 25,\n      margin_top: 0,\n      margin_left: 0,\n      editor_width: 140,\n      month_head_height: 22,\n      event_header_height: 14\n    }, t.keys = {\n      edit_save: 13,\n      edit_cancel: 27\n    }, t.bind = function (l, f) {\n      return l.bind ? l.bind(f) : function () {\n        return l.apply(f, arguments);\n      };\n    }, t.set_sizes = function () {\n      var l = this._x = this._obj.clientWidth - this.xy.margin_left,\n        f = this._table_view ? 0 : this.xy.scale_width + this.xy.scroll_width,\n        g = this.$container.querySelector(\".dhx_cal_scale_placeholder\");\n      t._is_material_skin() ? (g || ((g = document.createElement(\"div\")).className = \"dhx_cal_scale_placeholder\", this.$container.insertBefore(g, this._els.dhx_cal_header[0])), g.style.display = \"block\", this.set_xy(g, l, this.xy.scale_height + 1, 0, this._els.dhx_cal_header[0].offsetTop)) : g && g.parentNode.removeChild(g), this._lightbox && (t.$container.offsetWidth < 1200 || this._setLbPosition(document.querySelector(\".dhx_cal_light\"))), this._data_width = l - f, this._els.dhx_cal_navline[0].style.width = l + \"px\";\n      const p = this._els.dhx_cal_header[0];\n      this.set_xy(p, this._data_width, this.xy.scale_height), p.style.left = \"\", p.style.right = \"\", this._table_view ? this.config.rtl ? p.style.right = \"-1px\" : p.style.left = \"-1px\" : this.config.rtl ? p.style.right = \"\".concat(this.xy.scale_width, \"px\") : p.style.left = \"\".concat(this.xy.scale_width, \"px\");\n    }, t.set_xy = function (l, f, g, p, y) {\n      function w(k) {\n        let E = k;\n        return isNaN(Number(E)) || (E = Math.max(0, E) + \"px\"), E;\n      }\n      var b = \"left\";\n      f !== void 0 && (l.style.width = w(f)), g !== void 0 && (l.style.height = w(g)), arguments.length > 3 && (p !== void 0 && (this.config.rtl && (b = \"right\"), l.style[b] = p + \"px\"), y !== void 0 && (l.style.top = y + \"px\"));\n    }, t.get_elements = function () {\n      const l = this._obj.getElementsByTagName(\"DIV\");\n      for (let f = 0; f < l.length; f++) {\n        let g = t._getClassName(l[f]);\n        const p = l[f].getAttribute(\"data-tab\") || l[f].getAttribute(\"name\") || \"\";\n        g && (g = g.split(\" \")[0]), this._els[g] || (this._els[g] = []), this._els[g].push(l[f]);\n        let y = t.locale.labels[p + \"_tab\"] || t.locale.labels[p || g];\n        typeof y != \"string\" && p && !l[f].innerHTML && (y = p.split(\"_\")[0]), y && (this._waiAria.labelAttr(l[f], y), l[f].innerHTML = y);\n      }\n    };\n    const v = t._createDomEventScope();\n    function m(l, f) {\n      const g = new Date(l),\n        p = (new Date(f).getTime() - g.getTime()) / 864e5;\n      return Math.abs(p);\n    }\n    t.unset_actions = function () {\n      v.detachAll();\n    }, t.set_actions = function () {\n      for (const l in this._els) if (this._click[l]) for (let f = 0; f < this._els[l].length; f++) {\n        const g = this._els[l][f],\n          p = this._click[l].bind(g);\n        v.attach(g, \"click\", p);\n      }\n      v.attach(this._obj, \"selectstart\", function (l) {\n        return l.preventDefault(), !1;\n      }), v.attach(this._obj, \"mousemove\", function (l) {\n        t._temp_touch_block || t._on_mouse_move(l);\n      }), v.attach(this._obj, \"mousedown\", function (l) {\n        t._ignore_next_click || t._on_mouse_down(l);\n      }), v.attach(this._obj, \"mouseup\", function (l) {\n        t._ignore_next_click || t._on_mouse_up(l);\n      }), v.attach(this._obj, \"dblclick\", function (l) {\n        t._on_dbl_click(l);\n      }), v.attach(this._obj, \"contextmenu\", function (l) {\n        return t.checkEvent(\"onContextMenu\") && l.preventDefault(), t.callEvent(\"onContextMenu\", [t._locate_event(l.target), l]);\n      });\n    }, t.select = function (l) {\n      this._select_id != l && (t._close_not_saved(), this.editStop(!1), this._select_id && this.unselect(), this._select_id = l, this.updateEvent(l), this.callEvent(\"onEventSelected\", [l]));\n    }, t.unselect = function (l) {\n      if (l && l != this._select_id) return;\n      const f = this._select_id;\n      this._select_id = null, f && this.getEvent(f) && this.updateEvent(f), this.callEvent(\"onEventUnselected\", [f]);\n    }, t.getState = function () {\n      return {\n        mode: this._mode,\n        date: new Date(this._date),\n        min_date: new Date(this._min_date),\n        max_date: new Date(this._max_date),\n        editor_id: this._edit_id,\n        lightbox_id: this._lightbox_id,\n        new_event: this._new_event,\n        select_id: this._select_id,\n        expanded: this.expanded,\n        drag_id: this._drag_id,\n        drag_mode: this._drag_mode\n      };\n    }, t._click = {\n      dhx_cal_data: function (l) {\n        if (t._ignore_next_click) return l.preventDefault && l.preventDefault(), l.cancelBubble = !0, t._ignore_next_click = !1, !1;\n        const f = t._locate_event(l.target);\n        if (f) {\n          if (!t.callEvent(\"onClick\", [f, l]) || t.config.readonly) return;\n        } else t.callEvent(\"onEmptyClick\", [t.getActionData(l).date, l]);\n        if (f && t.config.select) {\n          t.select(f);\n          const g = l.target.closest(\".dhx_menu_icon\"),\n            p = t._getClassName(g);\n          p.indexOf(\"_icon\") != -1 && t._click.buttons[p.split(\" \")[1].replace(\"icon_\", \"\")](f);\n        } else t._close_not_saved(), t.getState().select_id && ( /* @__PURE__ */new Date()).valueOf() - (t._new_event || 0) > 500 && t.unselect();\n      },\n      dhx_cal_prev_button: function () {\n        t._click.dhx_cal_next_button(0, -1);\n      },\n      dhx_cal_next_button: function (l, f) {\n        let g = 1;\n        t.config.rtl && (f = -f, g = -g), t.setCurrentView(t.date.add(t.date[t._mode + \"_start\"](new Date(t._date)), f || g, t._mode));\n      },\n      dhx_cal_today_button: function () {\n        t.callEvent(\"onBeforeTodayDisplayed\", []) && t.setCurrentView(t._currentDate());\n      },\n      dhx_cal_tab: function () {\n        const l = this.getAttribute(\"data-tab\"),\n          f = this.getAttribute(\"name\"),\n          g = l || f.substring(0, f.search(\"_tab\"));\n        t.setCurrentView(t._date, g);\n      },\n      buttons: {\n        delete: function (l) {\n          const f = t.locale.labels.confirm_deleting;\n          t._dhtmlx_confirm({\n            message: f,\n            title: t.locale.labels.title_confirm_deleting,\n            callback: function () {\n              t.deleteEvent(l);\n            },\n            config: {\n              ok: t.locale.labels.icon_delete\n            }\n          });\n        },\n        edit: function (l) {\n          t.edit(l);\n        },\n        save: function (l) {\n          t.editStop(!0);\n        },\n        details: function (l) {\n          t.showLightbox(l);\n        },\n        form: function (l) {\n          t.showLightbox(l);\n        },\n        cancel: function (l) {\n          t.editStop(!1);\n        }\n      }\n    }, t._dhtmlx_confirm = function (_ref) {\n      let {\n        message: l,\n        title: f,\n        callback: g,\n        config: p\n      } = _ref;\n      if (!l) return g();\n      p = p || {};\n      const y = {\n        ...p,\n        text: l\n      };\n      f && (y.title = f), g && (y.callback = function (w) {\n        w && g();\n      }), t.confirm(y);\n    }, t.addEventNow = function (l, f, g) {\n      let p = {};\n      t._isObject(l) && !t._isDate(l) && (p = l, l = null);\n      const y = 6e4 * (this.config.event_duration || this.config.time_step);\n      l || (l = p.start_date || Math.round(t._currentDate().valueOf() / y) * y);\n      let w = new Date(l);\n      if (!f) {\n        let E = this.config.first_hour;\n        E > w.getHours() && (w.setHours(E), l = w.valueOf()), f = l.valueOf() + y;\n      }\n      let b = new Date(f);\n      w.valueOf() == b.valueOf() && b.setTime(b.valueOf() + y), p.start_date = p.start_date || w, p.end_date = p.end_date || b, p.text = p.text || this.locale.labels.new_event, p.id = this._drag_id = p.id || this.uid(), this._drag_mode = \"new-size\", this._loading = !0;\n      const k = this.addEvent(p);\n      return this.callEvent(\"onEventCreated\", [this._drag_id, g]), this._loading = !1, this._drag_event = {}, this._on_mouse_up(g), k;\n    }, t._on_dbl_click = function (l, f) {\n      if (f = f || l.target, this.config.readonly) return;\n      const g = t._getClassName(f).split(\" \")[0];\n      switch (g) {\n        case \"dhx_scale_holder\":\n        case \"dhx_scale_holder_now\":\n        case \"dhx_month_body\":\n        case \"dhx_wa_day_data\":\n          if (!t.config.dblclick_create) break;\n          this.addEventNow(this.getActionData(l).date, null, l);\n          break;\n        case \"dhx_cal_event\":\n        case \"dhx_wa_ev_body\":\n        case \"dhx_agenda_line\":\n        case \"dhx_cal_agenda_event_line\":\n        case \"dhx_grid_event\":\n        case \"dhx_cal_event_line\":\n        case \"dhx_cal_event_clear\":\n          {\n            const p = this._locate_event(f);\n            if (!this.callEvent(\"onDblClick\", [p, l])) return;\n            this.config.details_on_dblclick || this._table_view || !this.getEvent(p)._timed || !this.config.select ? this.showLightbox(p) : this.edit(p);\n            break;\n          }\n        case \"dhx_time_block\":\n        case \"dhx_cal_container\":\n          return;\n        default:\n          {\n            const p = this[\"dblclick_\" + g];\n            if (p) p.call(this, l);else if (f.parentNode && f != this) return t._on_dbl_click(l, f.parentNode);\n            break;\n          }\n      }\n    }, t._get_column_index = function (l) {\n      let f = 0;\n      if (this._cols) {\n        let g = 0,\n          p = 0;\n        for (; g + this._cols[p] < l && p < this._cols.length;) g += this._cols[p], p++;\n        if (f = p + (this._cols[p] ? (l - g) / this._cols[p] : 0), this._ignores && f >= this._cols.length) for (; f >= 1 && this._ignores[Math.floor(f)];) f--;\n      }\n      return f;\n    }, t._week_indexes_from_pos = function (l) {\n      if (this._cols) {\n        const f = this._get_column_index(l.x);\n        return l.x = Math.min(this._cols.length - 1, Math.max(0, Math.ceil(f) - 1)), l.y = Math.max(0, Math.ceil(60 * l.y / (this.config.time_step * this.config.hour_size_px)) - 1) + this.config.first_hour * (60 / this.config.time_step), l;\n      }\n      return l;\n    }, t._mouse_coords = function (l) {\n      let f;\n      const g = document.body,\n        p = document.documentElement;\n      f = this.$env.isIE || !l.pageX && !l.pageY ? {\n        x: l.clientX + (g.scrollLeft || p.scrollLeft || 0) - g.clientLeft,\n        y: l.clientY + (g.scrollTop || p.scrollTop || 0) - g.clientTop\n      } : {\n        x: l.pageX,\n        y: l.pageY\n      }, this.config.rtl && this._colsS ? (f.x = this.$container.querySelector(\".dhx_cal_data\").offsetWidth - f.x, f.x += this.$domHelpers.getAbsoluteLeft(this._obj), this._mode !== \"month\" && (f.x -= this.xy.scale_width)) : f.x -= this.$domHelpers.getAbsoluteLeft(this._obj) + (this._table_view ? 0 : this.xy.scale_width);\n      const y = this.$container.querySelector(\".dhx_cal_data\");\n      f.y -= this.$domHelpers.getAbsoluteTop(y) - this._els.dhx_cal_data[0].scrollTop, f.ev = l;\n      const w = this[\"mouse_\" + this._mode];\n      if (w) f = w.call(this, f);else if (this._table_view) {\n        const b = this._get_column_index(f.x);\n        if (!this._cols || !this._colsS) return f;\n        let k = 0;\n        for (k = 1; k < this._colsS.heights.length && !(this._colsS.heights[k] > f.y); k++);\n        f.y = Math.ceil(24 * (Math.max(0, b) + 7 * Math.max(0, k - 1)) * 60 / this.config.time_step), (t._drag_mode || this._mode == \"month\") && (f.y = 24 * (Math.max(0, Math.ceil(b) - 1) + 7 * Math.max(0, k - 1)) * 60 / this.config.time_step), this._drag_mode == \"move\" && t._ignores_detected && t.config.preserve_length && (f._ignores = !0, this._drag_event._event_length || (this._drag_event._event_length = this._get_real_event_length(this._drag_event.start_date, this._drag_event.end_date, {\n          x_step: 1,\n          x_unit: \"day\"\n        }))), f.x = 0;\n      } else f = this._week_indexes_from_pos(f);\n      return f.timestamp = + /* @__PURE__ */new Date(), f;\n    }, t._close_not_saved = function () {\n      if (( /* @__PURE__ */new Date()).valueOf() - (t._new_event || 0) > 500 && t._edit_id) {\n        const l = t.locale.labels.confirm_closing;\n        t._dhtmlx_confirm({\n          message: l,\n          title: t.locale.labels.title_confirm_closing,\n          callback: function () {\n            t.editStop(t.config.positive_closing);\n          }\n        }), l && (this._drag_id = this._drag_pos = this._drag_mode = null);\n      }\n    }, t._correct_shift = function (l, f) {\n      return l - 6e4 * (new Date(t._min_date).getTimezoneOffset() - new Date(l).getTimezoneOffset()) * (f ? -1 : 1);\n    }, t._is_pos_changed = function (l, f) {\n      function g(p, y, w) {\n        return Math.abs(p - y) > w;\n      }\n      return !l || !this._drag_pos || !!(this._drag_pos.has_moved || !this._drag_pos.timestamp || f.timestamp - this._drag_pos.timestamp > 100 || g(l.ev.clientX, f.ev.clientX, 5) || g(l.ev.clientY, f.ev.clientY, 5));\n    }, t._correct_drag_start_date = function (l) {\n      let f;\n      t.matrix && (f = t.matrix[t._mode]), f = f || {\n        x_step: 1,\n        x_unit: \"day\"\n      }, l = new Date(l);\n      let g = 1;\n      return (f._start_correction || f._end_correction) && (g = 60 * (f.last_hour || 0) - (60 * l.getHours() + l.getMinutes()) || 1), 1 * l + (t._get_fictional_event_length(l, g, f) - g);\n    }, t._correct_drag_end_date = function (l, f) {\n      let g;\n      t.matrix && (g = t.matrix[t._mode]), g = g || {\n        x_step: 1,\n        x_unit: \"day\"\n      };\n      const p = 1 * l + t._get_fictional_event_length(l, f, g);\n      return new Date(1 * p - (t._get_fictional_event_length(p, -1, g, -1) + 1));\n    }, t._on_mouse_move = function (l) {\n      if (this._drag_mode) {\n        var f = this._mouse_coords(l);\n        if (this._is_pos_changed(this._drag_pos, f)) {\n          var g, p;\n          if (this._edit_id != this._drag_id && this._close_not_saved(), !this._drag_mode) return;\n          var y = null;\n          if (this._drag_pos && !this._drag_pos.has_moved && ((y = this._drag_pos).has_moved = !0), this._drag_pos = f, this._drag_pos.has_moved = !0, this._drag_mode == \"create\") {\n            if (y && (f = y), this._close_not_saved(), this.unselect(this._select_id), this._loading = !0, g = this._get_date_from_pos(f).valueOf(), !this._drag_start) return this.callEvent(\"onBeforeEventCreated\", [l, this._drag_id]) ? (this._loading = !1, void (this._drag_start = g)) : void (this._loading = !1);\n            p = g, this._drag_start;\n            var w = new Date(this._drag_start),\n              b = new Date(p);\n            this._mode != \"day\" && this._mode != \"week\" || w.getHours() != b.getHours() || w.getMinutes() != b.getMinutes() || (b = new Date(this._drag_start + 1e3)), this._drag_id = this.uid(), this.addEvent(w, b, this.locale.labels.new_event, this._drag_id, f.fields), this.callEvent(\"onEventCreated\", [this._drag_id, l]), this._loading = !1, this._drag_mode = \"new-size\";\n          }\n          var k,\n            E = this.config.time_step,\n            D = this.getEvent(this._drag_id);\n          if (t.matrix && (k = t.matrix[t._mode]), k = k || {\n            x_step: 1,\n            x_unit: \"day\"\n          }, this._drag_mode == \"move\") g = this._min_date.valueOf() + 6e4 * (f.y * this.config.time_step + 24 * f.x * 60), !f.custom && this._table_view && (g += 1e3 * this.date.time_part(D.start_date)), !this._table_view && this._dragEventBody && this._drag_event._move_event_shift === void 0 && (this._drag_event._move_event_shift = g - D.start_date), this._drag_event._move_event_shift && (g -= this._drag_event._move_event_shift), g = this._correct_shift(g), f._ignores && this.config.preserve_length && this._table_view && k ? (g = t._correct_drag_start_date(g), p = t._correct_drag_end_date(g, this._drag_event._event_length)) : p = D.end_date.valueOf() - (D.start_date.valueOf() - g);else {\n            if (g = D.start_date.valueOf(), p = D.end_date.valueOf(), this._table_view) {\n              var x = this._min_date.valueOf() + f.y * this.config.time_step * 6e4 + (f.custom ? 0 : 864e5);\n              if (this._mode == \"month\") {\n                if (x = this._correct_shift(x, !1), this._drag_from_start) {\n                  var S = 864e5;\n                  x <= t.date.date_part(new Date(p + S - 1)).valueOf() && (g = x - S);\n                } else p = x;\n              } else this.config.preserve_length ? f.resize_from_start ? g = t._correct_drag_start_date(x) : p = t._correct_drag_end_date(x, 0) : f.resize_from_start ? g = x : p = x;\n            } else {\n              var N = this.date.date_part(new Date(D.end_date.valueOf() - 1)).valueOf(),\n                M = new Date(N),\n                A = this.config.first_hour,\n                C = 60 / E * (this.config.last_hour - A);\n              this.config.time_step = 1;\n              var T = this._mouse_coords(l);\n              this.config.time_step = E;\n              var O = f.y * E * 6e4,\n                L = Math.min(f.y + 1, C) * E * 6e4,\n                H = 6e4 * T.y;\n              p = Math.abs(O - H) > Math.abs(L - H) ? N + L : N + O, p += 6e4 * (new Date(p).getTimezoneOffset() - M.getTimezoneOffset()), this._els.dhx_cal_data[0].style.cursor = \"s-resize\", this._mode != \"week\" && this._mode != \"day\" || (p = this._correct_shift(p));\n            }\n            if (this._drag_mode == \"new-size\") {\n              if (p <= this._drag_start) {\n                var P = f.shift || (this._table_view && !f.custom ? 864e5 : 0);\n                g = p - (f.shift ? 0 : P), p = this._drag_start + (P || 6e4 * E);\n              } else g = this._drag_start;\n            } else p <= g && (p = g + 6e4 * E);\n          }\n          var z = new Date(p - 1),\n            $ = new Date(g);\n          if (this._drag_mode == \"move\" && t.config.limit_drag_out && (+$ < +t._min_date || +p > +t._max_date)) {\n            if (+D.start_date < +t._min_date || +D.end_date > +t._max_date) $ = new Date(D.start_date), p = new Date(D.end_date);else {\n              var j = p - $;\n              +$ < +t._min_date ? ($ = new Date(t._min_date), f._ignores && this.config.preserve_length && this._table_view ? ($ = new Date(t._correct_drag_start_date($)), k._start_correction && ($ = new Date($.valueOf() + k._start_correction)), p = new Date(1 * $ + this._get_fictional_event_length($, this._drag_event._event_length, k))) : p = new Date(+$ + j)) : (p = new Date(t._max_date), f._ignores && this.config.preserve_length && this._table_view ? (k._end_correction && (p = new Date(p.valueOf() - k._end_correction)), p = new Date(1 * p - this._get_fictional_event_length(p, 0, k, !0)), $ = new Date(1 * p - this._get_fictional_event_length(p, this._drag_event._event_length, k, !0)), this._ignores_detected && ($ = t.date.add($, k.x_step, k.x_unit), p = new Date(1 * p - this._get_fictional_event_length(p, 0, k, !0)), p = t.date.add(p, k.x_step, k.x_unit))) : $ = new Date(+p - j));\n            }\n            z = new Date(p - 1);\n          }\n          if (!this._table_view && this._dragEventBody && !t.config.all_timed && (!t._get_section_view() && f.x != this._get_event_sday({\n            start_date: new Date(g),\n            end_date: new Date(g)\n          }) || new Date(g).getHours() < this.config.first_hour) && (j = p - $, this._drag_mode == \"move\" && (S = this._min_date.valueOf() + 24 * f.x * 60 * 6e4, ($ = new Date(S)).setHours(this.config.first_hour), p = new Date($.valueOf() + j), z = new Date(p - 1))), this._table_view || t.config.all_timed || !(!t.getView() && f.x != this._get_event_sday({\n            start_date: new Date(p),\n            end_date: new Date(p)\n          }) || new Date(p).getHours() >= this.config.last_hour) || (j = p - $, S = this._min_date.valueOf() + 24 * f.x * 60 * 6e4, (p = t.date.date_part(new Date(S))).setHours(this.config.last_hour), z = new Date(p - 1), this._drag_mode == \"move\" && ($ = new Date(+p - j))), this._table_view || z.getDate() == $.getDate() && z.getHours() < this.config.last_hour || t._allow_dnd) if (D.start_date = $, D.end_date = new Date(p), this.config.update_render) {\n            var F = t._els.dhx_cal_data[0].scrollTop;\n            this.update_view(), t._els.dhx_cal_data[0].scrollTop = F;\n          } else this.updateEvent(this._drag_id);\n          this._table_view && this.for_rendered(this._drag_id, function (J) {\n            J.className += \" dhx_in_move dhx_cal_event_drag\";\n          }), this.callEvent(\"onEventDrag\", [this._drag_id, this._drag_mode, l]);\n        }\n      } else if (t.checkEvent(\"onMouseMove\")) {\n        var U = this._locate_event(l.target || l.srcElement);\n        this.callEvent(\"onMouseMove\", [U, l]);\n      }\n    }, t._on_mouse_down = function (l, f) {\n      if (l.button != 2 && !this.config.readonly && !this._drag_mode) {\n        f = f || l.target || l.srcElement;\n        var g = t._getClassName(f).split(\" \")[0];\n        switch (this.config.drag_event_body && g == \"dhx_body\" && f.parentNode && f.parentNode.className.indexOf(\"dhx_cal_select_menu\") === -1 && (g = \"dhx_event_move\", this._dragEventBody = !0), g) {\n          case \"dhx_cal_event_line\":\n          case \"dhx_cal_event_clear\":\n            this._table_view && (this._drag_mode = \"move\");\n            break;\n          case \"dhx_event_move\":\n          case \"dhx_wa_ev_body\":\n            this._drag_mode = \"move\";\n            break;\n          case \"dhx_event_resize\":\n            this._drag_mode = \"resize\", t._getClassName(f).indexOf(\"dhx_event_resize_end\") < 0 ? t._drag_from_start = !0 : t._drag_from_start = !1;\n            break;\n          case \"dhx_scale_holder\":\n          case \"dhx_scale_holder_now\":\n          case \"dhx_month_body\":\n          case \"dhx_matrix_cell\":\n          case \"dhx_marked_timespan\":\n            this._drag_mode = \"create\";\n            break;\n          case \"\":\n            if (f.parentNode) return t._on_mouse_down(l, f.parentNode);\n            break;\n          default:\n            if ((!t.checkEvent(\"onMouseDown\") || t.callEvent(\"onMouseDown\", [g, l])) && f.parentNode && f != this && g != \"dhx_body\") return t._on_mouse_down(l, f.parentNode);\n            this._drag_mode = null, this._drag_id = null;\n        }\n        if (this._drag_mode) {\n          var p = this._locate_event(f);\n          if (this.config[\"drag_\" + this._drag_mode] && this.callEvent(\"onBeforeDrag\", [p, this._drag_mode, l])) {\n            if (this._drag_id = p, (this._edit_id != this._drag_id || this._edit_id && this._drag_mode == \"create\") && this._close_not_saved(), !this._drag_mode) return;\n            this._drag_event = t._lame_clone(this.getEvent(this._drag_id) || {}), this._drag_pos = this._mouse_coords(l);\n          } else this._drag_mode = this._drag_id = 0;\n        }\n        this._drag_start = null;\n      }\n    }, t._get_private_properties = function (l) {\n      var f = {};\n      for (var g in l) g.indexOf(\"_\") === 0 && (f[g] = !0);\n      return f;\n    }, t._clear_temporary_properties = function (l, f) {\n      var g = this._get_private_properties(l),\n        p = this._get_private_properties(f);\n      for (var y in p) g[y] || delete f[y];\n    }, t._on_mouse_up = function (l) {\n      if (!l || l.button != 2 || !this._mobile) {\n        if (this._drag_mode && this._drag_id) {\n          this._els.dhx_cal_data[0].style.cursor = \"default\";\n          var f = this._drag_id,\n            g = this._drag_mode,\n            p = !this._drag_pos || this._drag_pos.has_moved;\n          delete this._drag_event._move_event_shift;\n          var y = this.getEvent(this._drag_id);\n          if (p && (this._drag_event._dhx_changed || !this._drag_event.start_date || y.start_date.valueOf() != this._drag_event.start_date.valueOf() || y.end_date.valueOf() != this._drag_event.end_date.valueOf())) {\n            var w = this._drag_mode == \"new-size\";\n            if (this.callEvent(\"onBeforeEventChanged\", [y, l, w, this._drag_event])) {\n              if (this._drag_id = this._drag_mode = null, w && this.config.edit_on_create) {\n                if (this.unselect(), this._new_event = /* @__PURE__ */new Date(), this._table_view || this.config.details_on_create || !this.config.select || !this.isOneDayEvent(this.getEvent(f))) return t.callEvent(\"onDragEnd\", [f, g, l]), this.showLightbox(f);\n                this._drag_pos = !0, this._select_id = this._edit_id = f;\n              } else this._new_event || this.callEvent(w ? \"onEventAdded\" : \"onEventChanged\", [f, this.getEvent(f)]);\n            } else w ? this.deleteEvent(y.id, !0) : (this._drag_event._dhx_changed = !1, this._clear_temporary_properties(y, this._drag_event), t._lame_copy(y, this._drag_event), this.updateEvent(y.id));\n          }\n          this._drag_pos && (this._drag_pos.has_moved || this._drag_pos === !0) && (this._drag_id = this._drag_mode = null, this.render_view_data()), t.callEvent(\"onDragEnd\", [f, g, l]);\n        }\n        this._drag_id = null, this._drag_mode = null, this._drag_pos = null, this._drag_event = null, this._drag_from_start = null;\n      }\n    }, t._trigger_dyn_loading = function () {\n      return !(!this._load_mode || !this._load() || (this._render_wait = !0, 0));\n    }, t.update_view = function () {\n      this._reset_ignores(), this._update_nav_bar(this.config.header, this.$container.querySelector(\".dhx_cal_navline\"));\n      var l = this[this._mode + \"_view\"];\n      if (l ? l.call(this, !0) : this._reset_scale(), this._trigger_dyn_loading()) return !0;\n      this.render_view_data();\n    }, t.isViewExists = function (l) {\n      return !!(t[l + \"_view\"] || t.date[l + \"_start\"] && t.templates[l + \"_date\"] && t.templates[l + \"_scale_date\"]);\n    }, t._set_aria_buttons_attrs = function () {\n      for (var l = [\"dhx_cal_next_button\", \"dhx_cal_prev_button\", \"dhx_cal_tab\", \"dhx_cal_today_button\"], f = 0; f < l.length; f++) for (var g = this._els[l[f]], p = 0; g && p < g.length; p++) {\n        var y = g[p].getAttribute(\"data-tab\") || g[p].getAttribute(\"name\"),\n          w = this.locale.labels[l[f]];\n        y && (w = this.locale.labels[y + \"_tab\"] || this.locale.labels[y] || w), l[f] == \"dhx_cal_next_button\" ? w = this.locale.labels.next : l[f] == \"dhx_cal_prev_button\" && (w = this.locale.labels.prev), this._waiAria.headerButtonsAttributes(g[p], w || \"\");\n      }\n    }, t.updateView = function (l, f) {\n      if (!this.$container) throw new Error(\"The scheduler is not initialized. \\n **scheduler.updateView** or **scheduler.setCurrentView** can be called only after **scheduler.init**\");\n      l = l || this._date, f = f || this._mode;\n      var g = \"dhx_cal_data\";\n      this.locale.labels.icon_form || (this.locale.labels.icon_form = this.locale.labels.icon_edit);\n      var p = this._obj,\n        y = \"dhx_scheduler_\" + this._mode,\n        w = \"dhx_scheduler_\" + f;\n      this._mode && p.className.indexOf(y) != -1 ? p.className = p.className.replace(y, w) : p.className += \" \" + w;\n      var b,\n        k = \"dhx_multi_day\",\n        E = !(this._mode != f || !this.config.preserve_scroll) && this._els[g][0].scrollTop;\n      this._els[k] && this._els[k][0] && (b = this._els[k][0].scrollTop), this[this._mode + \"_view\"] && f && this._mode != f && this[this._mode + \"_view\"](!1), this._close_not_saved(), this._els[k] && (this._els[k][0].parentNode.removeChild(this._els[k][0]), this._els[k] = null), this._mode = f, this._date = l, this._table_view = this._mode == \"month\", this._dy_shift = 0, this.update_view(), this._set_aria_buttons_attrs();\n      var D = this._els.dhx_cal_tab;\n      if (D) for (var x = 0; x < D.length; x++) {\n        var S = D[x];\n        S.getAttribute(\"data-tab\") == this._mode || S.getAttribute(\"name\") == this._mode + \"_tab\" ? (S.classList.add(\"active\"), this._waiAria.headerToggleState(S, !0)) : (S.classList.remove(\"active\"), this._waiAria.headerToggleState(S, !1));\n      }\n      typeof E == \"number\" && (this._els[g][0].scrollTop = E), typeof b == \"number\" && this._els[k] && this._els[k][0] && (this._els[k][0].scrollTop = b);\n    }, t.setCurrentView = function (l, f) {\n      this.callEvent(\"onBeforeViewChange\", [this._mode, this._date, f || this._mode, l || this._date]) && (this.updateView(l, f), this.callEvent(\"onViewChange\", [this._mode, this._date]));\n    }, t.render = function (l, f) {\n      t.setCurrentView(l, f);\n    }, t._render_x_header = function (l, f, g, p, y) {\n      y = y || 0;\n      var w = document.createElement(\"div\");\n      w.className = \"dhx_scale_bar\", this.templates[this._mode + \"_scalex_class\"] && (w.className += \" \" + this.templates[this._mode + \"_scalex_class\"](g));\n      var b = this._cols[l];\n      this._mode == \"month\" && l === 0 && this.config.left_border && (w.className += \" dhx_scale_bar_border\", f += 1), this.set_xy(w, b, this.xy.scale_height - 1, f, y);\n      var k = this.templates[this._mode + \"_scale_date\"](g, this._mode);\n      w.innerHTML = k, this._waiAria.dayHeaderAttr(w, k), p.appendChild(w);\n    }, t._get_columns_num = function (l, f) {\n      var g = 7;\n      if (!t._table_view) {\n        var p = t.date[\"get_\" + t._mode + \"_end\"];\n        p && (f = p(l)), g = Math.round((f.valueOf() - l.valueOf()) / 864e5);\n      }\n      return g;\n    }, t._get_timeunit_start = function () {\n      return this.date[this._mode + \"_start\"](new Date(this._date.valueOf()));\n    }, t._get_view_end = function () {\n      var l = this._get_timeunit_start(),\n        f = t.date.add(l, 1, this._mode);\n      if (!t._table_view) {\n        var g = t.date[\"get_\" + t._mode + \"_end\"];\n        g && (f = g(l));\n      }\n      return f;\n    }, t._calc_scale_sizes = function (l, f, g) {\n      var p = this.config.rtl,\n        y = l,\n        w = this._get_columns_num(f, g);\n      this._process_ignores(f, w, \"day\", 1);\n      for (var b = w - this._ignores_detected, k = 0; k < w; k++) this._ignores[k] ? (this._cols[k] = 0, b++) : this._cols[k] = Math.floor(y / (b - k)), y -= this._cols[k], this._colsS[k] = (this._cols[k - 1] || 0) + (this._colsS[k - 1] || (this._table_view ? 0 : p ? this.xy.scroll_width : this.xy.scale_width));\n      this._colsS.col_length = w, this._colsS[w] = this._cols[w - 1] + this._colsS[w - 1] || 0;\n    }, t._set_scale_col_size = function (l, f, g) {\n      var p = this.config;\n      this.set_xy(l, f, p.hour_size_px * (p.last_hour - p.first_hour), g + this.xy.scale_width + 1, 0);\n    }, t._render_scales = function (l, f) {\n      var g = new Date(t._min_date),\n        p = new Date(t._max_date),\n        y = this.date.date_part(t._currentDate()),\n        w = parseInt(l.style.width, 10) - 1,\n        b = new Date(this._min_date),\n        k = this._get_columns_num(g, p);\n      this._calc_scale_sizes(w, g, p);\n      var E = 0;\n      l.innerHTML = \"\";\n      for (var D = 0; D < k; D++) {\n        if (this._ignores[D] || this._render_x_header(D, E, b, l), !this._table_view) {\n          var x = document.createElement(\"div\"),\n            S = \"dhx_scale_holder\";\n          b.valueOf() == y.valueOf() && (S += \" dhx_scale_holder_now\"), x.setAttribute(\"data-column-index\", D), this._ignores_detected && this._ignores[D] && (S += \" dhx_scale_ignore\");\n          for (let N = 1 * this.config.first_hour; N < this.config.last_hour; N++) {\n            const M = document.createElement(\"div\");\n            M.className = \"dhx_scale_time_slot dhx_scale_time_slot_hour_start\", M.style.height = this.config.hour_size_px / 2 + \"px\";\n            let A = new Date(b.getFullYear(), b.getMonth(), b.getDate(), N, 0);\n            M.setAttribute(\"data-slot-date\", this.templates.format_date(A));\n            let C = this.templates.time_slot_text(A);\n            C && (M.innerHTML = C);\n            let T = this.templates.time_slot_class(A);\n            T && M.classList.add(T), x.appendChild(M);\n            const O = document.createElement(\"div\");\n            O.className = \"dhx_scale_time_slot\", A = new Date(b.getFullYear(), b.getMonth(), b.getDate(), N, 30), O.setAttribute(\"data-slot-date\", this.templates.format_date(A)), O.style.height = this.config.hour_size_px / 2 + \"px\", C = this.templates.time_slot_text(A), C && (O.innerHTML = C), T = this.templates.time_slot_class(A), T && O.classList.add(T), x.appendChild(O);\n          }\n          x.className = S + \" \" + this.templates.week_date_class(b, y), this._waiAria.dayColumnAttr(x, b), this._set_scale_col_size(x, this._cols[D], E), f.appendChild(x), this.callEvent(\"onScaleAdd\", [x, b]);\n        }\n        E += this._cols[D], b = this.date.add(b, 1, \"day\"), b = this.date.day_start(b);\n      }\n    }, t._getNavDateElement = function () {\n      return this.$container.querySelector(\".dhx_cal_date\");\n    }, t._reset_scale = function () {\n      if (this.templates[this._mode + \"_date\"]) {\n        var l = this._els.dhx_cal_header[0],\n          f = this._els.dhx_cal_data[0],\n          g = this.config;\n        l.innerHTML = \"\", f.innerHTML = \"\";\n        var p,\n          y,\n          w = (g.readonly || !g.drag_resize ? \" dhx_resize_denied\" : \"\") + (g.readonly || !g.drag_move ? \" dhx_move_denied\" : \"\");\n        f.className = \"dhx_cal_data\" + w, this._scales = {}, this._cols = [], this._colsS = {\n          height: 0\n        }, this._dy_shift = 0, this.set_sizes();\n        var b = this._get_timeunit_start(),\n          k = t._get_view_end();\n        p = y = this._table_view ? t.date.week_start(b) : b, this._min_date = p;\n        var E = this.templates[this._mode + \"_date\"](b, k, this._mode),\n          D = this._getNavDateElement();\n        if (D && (D.innerHTML = E, this._waiAria.navBarDateAttr(D, E)), this._max_date = k, t._render_scales(l, f), this._table_view) this._reset_month_scale(f, b, y);else if (this._reset_hours_scale(f, b, y), g.multi_day) {\n          var x = \"dhx_multi_day\";\n          this._els[x] && (this._els[x][0].parentNode.removeChild(this._els[x][0]), this._els[x] = null);\n          var S = document.createElement(\"div\");\n          S.className = x, S.style.visibility = \"hidden\", S.style.display = \"none\";\n          var N = this._colsS[this._colsS.col_length],\n            M = g.rtl ? this.xy.scale_width : this.xy.scroll_width,\n            A = Math.max(N + M, 0);\n          this.set_xy(S, A, 0, 0), f.parentNode.insertBefore(S, f);\n          var C = S.cloneNode(!0);\n          C.className = x + \"_icon\", C.style.visibility = \"hidden\", C.style.display = \"none\", this.set_xy(C, this.xy.scale_width + 1, 0, 0), S.appendChild(C), this._els[x] = [S, C], t.event(this._els[x][0], \"click\", this._click.dhx_cal_data);\n        }\n      }\n    }, t._reset_hours_scale = function (l, f, g) {\n      var p = document.createElement(\"div\");\n      p.className = \"dhx_scale_holder\";\n      for (var y = new Date(1980, 1, 1, this.config.first_hour, 0, 0), w = 1 * this.config.first_hour; w < this.config.last_hour; w++) {\n        var b = document.createElement(\"div\");\n        b.className = \"dhx_scale_hour\", b.style.height = this.config.hour_size_px + \"px\";\n        var k = this.xy.scale_width;\n        this.config.left_border && (b.className += \" dhx_scale_hour_border\"), b.style.width = k + \"px\";\n        var E = t.templates.hour_scale(y);\n        b.innerHTML = E, this._waiAria.hourScaleAttr(b, E), p.appendChild(b), y = this.date.add(y, 1, \"hour\");\n      }\n      l.appendChild(p), this.config.scroll_hour && (l.scrollTop = this.config.hour_size_px * (this.config.scroll_hour - this.config.first_hour));\n    }, t._currentDate = function () {\n      return t.config.now_date ? new Date(t.config.now_date) : /* @__PURE__ */new Date();\n    }, t._reset_ignores = function () {\n      this._ignores = {}, this._ignores_detected = 0;\n    }, t._process_ignores = function (l, f, g, p, y) {\n      this._reset_ignores();\n      var w = t[\"ignore_\" + this._mode];\n      if (w) for (var b = new Date(l), k = 0; k < f; k++) w(b) && (this._ignores_detected += 1, this._ignores[k] = !0, y && f++), b = t.date.add(b, p, g), t.date[g + \"_start\"] && (b = t.date[g + \"_start\"](b));\n    }, t._render_month_scale = function (l, f, g, p) {\n      var y = t.date.add(f, 1, \"month\"),\n        w = new Date(g),\n        b = t._currentDate();\n      this.date.date_part(b), this.date.date_part(g), p = p || Math.ceil(Math.round((y.valueOf() - g.valueOf()) / 864e5) / 7);\n      for (var k = [], E = 0; E <= 7; E++) {\n        var D = this._cols[E] || 0;\n        isNaN(Number(D)) || (D += \"px\"), k[E] = D;\n      }\n      function x($) {\n        var j = t._colsS.height;\n        return t._colsS.heights[$ + 1] !== void 0 && (j = t._colsS.heights[$ + 1] - (t._colsS.heights[$] || 0)), j;\n      }\n      var S = 0;\n      const N = document.createElement(\"div\");\n      for (N.classList.add(\"dhx_cal_month_table\"), E = 0; E < p; E++) {\n        var M = document.createElement(\"div\");\n        M.classList.add(\"dhx_cal_month_row\"), M.style.height = x(E) + \"px\", N.appendChild(M);\n        for (var A = 0; A < 7; A++) {\n          var C = document.createElement(\"div\");\n          M.appendChild(C);\n          var T = \"dhx_cal_month_cell\";\n          g < f ? T += \" dhx_before\" : g >= y ? T += \" dhx_after\" : g.valueOf() == b.valueOf() && (T += \" dhx_now\"), this._ignores_detected && this._ignores[A] && (T += \" dhx_scale_ignore\"), C.className = T + \" \" + this.templates.month_date_class(g, b), C.setAttribute(\"data-cell-date\", t.templates.format_date(g));\n          var O = \"dhx_month_body\",\n            L = \"dhx_month_head\";\n          if (A === 0 && this.config.left_border && (O += \" dhx_month_body_border\", L += \" dhx_month_head_border\"), this._ignores_detected && this._ignores[A]) C.appendChild(document.createElement(\"div\")), C.appendChild(document.createElement(\"div\"));else {\n            C.style.width = k[A], this._waiAria.monthCellAttr(C, g);\n            var H = document.createElement(\"div\");\n            H.style.height = t.xy.month_head_height + \"px\", H.className = L, H.innerHTML = this.templates.month_day(g), C.appendChild(H);\n            var P = document.createElement(\"div\");\n            P.className = O, C.appendChild(P);\n          }\n          var z = g.getDate();\n          (g = this.date.add(g, 1, \"day\")).getDate() - z > 1 && (g = new Date(g.getFullYear(), g.getMonth(), z + 1, 12, 0));\n        }\n        t._colsS.heights[E] = S, S += x(E);\n      }\n      return this._min_date = w, this._max_date = g, l.innerHTML = \"\", l.appendChild(N), this._scales = {}, l.querySelectorAll(\"[data-cell-date]\").forEach($ => {\n        const j = t.templates.parse_date($.getAttribute(\"data-cell-date\")),\n          F = $.querySelector(\".dhx_month_body\");\n        this._scales[+j] = F, this.callEvent(\"onScaleAdd\", [this._scales[+j], j]);\n      }), this._max_date;\n    }, t._reset_month_scale = function (l, f, g, p) {\n      var y = t.date.add(f, 1, \"month\"),\n        w = t._currentDate();\n      this.date.date_part(w), this.date.date_part(g), p = p || Math.ceil(Math.round((y.valueOf() - g.valueOf()) / 864e5) / 7);\n      var b = Math.floor(l.clientHeight / p) - this.xy.month_head_height;\n      return this._colsS.height = b + this.xy.month_head_height, this._colsS.heights = [], t._render_month_scale(l, f, g, p);\n    }, t.getView = function (l) {\n      return l || (l = t.getState().mode), t.matrix && t.matrix[l] ? t.matrix[l] : t._props && t._props[l] ? t._props[l] : null;\n    }, t.getLabel = function (l, f) {\n      for (var g = this.config.lightbox.sections, p = 0; p < g.length; p++) if (g[p].map_to == l) {\n        for (var y = g[p].options, w = 0; w < y.length; w++) if (y[w].key == f) return y[w].label;\n      }\n      return \"\";\n    }, t.updateCollection = function (l, f) {\n      var g = t.serverList(l);\n      return !!g && (g.splice(0, g.length), g.push.apply(g, f || []), t.callEvent(\"onOptionsLoad\", []), t.resetLightbox(), t.hideCover(), !0);\n    }, t._lame_clone = function (l, f) {\n      var g, p, y;\n      for (f = f || [], g = 0; g < f.length; g += 2) if (l === f[g]) return f[g + 1];\n      if (l && typeof l == \"object\") {\n        for (y = Object.create(l), p = [Array, Date, Number, String, Boolean], g = 0; g < p.length; g++) l instanceof p[g] && (y = g ? new p[g](l) : new p[g]());\n        for (g in f.push(l, y), l) Object.prototype.hasOwnProperty.apply(l, [g]) && (y[g] = t._lame_clone(l[g], f));\n      }\n      return y || l;\n    }, t._lame_copy = function (l, f) {\n      for (var g in f) f.hasOwnProperty(g) && (l[g] = f[g]);\n      return l;\n    }, t._get_date_from_pos = function (l) {\n      var f = this._min_date.valueOf() + 6e4 * (l.y * this.config.time_step + 24 * (this._table_view ? 0 : l.x) * 60);\n      return new Date(this._correct_shift(f));\n    }, t.getActionData = function (l) {\n      var f = this._mouse_coords(l);\n      return {\n        date: this._get_date_from_pos(f),\n        section: f.section\n      };\n    }, t._focus = function (l, f) {\n      if (l && l.focus) if (this._mobile) window.setTimeout(function () {\n        l.focus();\n      }, 10);else try {\n        f && l.select && l.offsetWidth && l.select(), l.focus();\n      } catch {}\n    }, t._get_real_event_length = function (l, f, g) {\n      var p,\n        y = f - l,\n        w = this[\"ignore_\" + this._mode],\n        b = 0;\n      g.render ? (b = this._get_date_index(g, l), p = this._get_date_index(g, f), l.valueOf() < t.getState().min_date.valueOf() && (b = -m(l, t.getState().min_date)), f.valueOf() > t.getState().max_date.valueOf() && (p += m(f, t.getState().max_date))) : p = Math.round(y / 60 / 60 / 1e3 / 24);\n      for (var k = !0; b < p;) {\n        var E = t.date.add(f, -g.x_step, g.x_unit);\n        if (w && w(f) && (!k || k && w(E))) y -= f - E;else {\n          let D = 0;\n          const x = new Date(Math.max(E.valueOf(), l.valueOf())),\n            S = f,\n            N = new Date(x.getFullYear(), x.getMonth(), x.getDate(), g.first_hour),\n            M = new Date(x.getFullYear(), x.getMonth(), x.getDate(), g.last_hour || 24),\n            A = new Date(f.getFullYear(), f.getMonth(), f.getDate(), g.first_hour),\n            C = new Date(f.getFullYear(), f.getMonth(), f.getDate(), g.last_hour || 24);\n          S.valueOf() > C.valueOf() && (D += S - C), S.valueOf() > A.valueOf() ? D += g._start_correction : D += 60 * S.getHours() * 60 * 1e3 + 60 * S.getMinutes() * 1e3, x.valueOf() < M.valueOf() && (D += g._end_correction), x.valueOf() < N.valueOf() && (D += N.valueOf() - x.valueOf()), y -= D, k = !1;\n        }\n        f = E, p--;\n      }\n      return y;\n    }, t._get_fictional_event_length = function (l, f, g, p) {\n      var y = new Date(l),\n        w = p ? -1 : 1;\n      if (g._start_correction || g._end_correction) {\n        var b;\n        b = p ? 60 * y.getHours() + y.getMinutes() - 60 * (g.first_hour || 0) : 60 * (g.last_hour || 0) - (60 * y.getHours() + y.getMinutes());\n        var k = 60 * (g.last_hour - g.first_hour),\n          E = Math.ceil((f / 6e4 - b) / k);\n        E < 0 && (E = 0), f += E * (1440 - k) * 60 * 1e3;\n      }\n      var D,\n        x = new Date(1 * l + f * w),\n        S = this[\"ignore_\" + this._mode],\n        N = 0;\n      for (g.render ? (N = this._get_date_index(g, y), D = this._get_date_index(g, x)) : D = Math.round(f / 60 / 60 / 1e3 / 24); N * w <= D * w;) {\n        var M = t.date.add(y, g.x_step * w, g.x_unit);\n        S && S(y) && (f += (M - y) * w, D += w), y = M, N += w;\n      }\n      return f;\n    }, t._get_section_view = function () {\n      return this.getView();\n    }, t._get_section_property = function () {\n      return this.matrix && this.matrix[this._mode] ? this.matrix[this._mode].y_property : this._props && this._props[this._mode] ? this._props[this._mode].map_to : null;\n    }, t._is_initialized = function () {\n      var l = this.getState();\n      return this._obj && l.date && l.mode;\n    }, t._is_lightbox_open = function () {\n      var l = this.getState();\n      return l.lightbox_id !== null && l.lightbox_id !== void 0;\n    };\n  }(h), function (t) {\n    (function () {\n      var n = new RegExp(\"<(?:.|\\n)*?>\", \"gm\"),\n        s = new RegExp(\" +\", \"gm\");\n      function c(l) {\n        return (l + \"\").replace(n, \" \").replace(s, \" \");\n      }\n      var u = new RegExp(\"'\", \"gm\");\n      function v(l) {\n        return (l + \"\").replace(u, \"&#39;\");\n      }\n      for (var m in t._waiAria = {\n        getAttributeString: function (l) {\n          var f = [\" \"];\n          for (var g in l) if (typeof l[g] != \"function\" && typeof l[g] != \"object\") {\n            var p = v(c(l[g]));\n            f.push(g + \"='\" + p + \"'\");\n          }\n          return f.push(\" \"), f.join(\" \");\n        },\n        setAttributes: function (l, f) {\n          for (var g in f) l.setAttribute(g, c(f[g]));\n          return l;\n        },\n        labelAttr: function (l, f) {\n          return this.setAttributes(l, {\n            \"aria-label\": f\n          });\n        },\n        label: function (l) {\n          return t._waiAria.getAttributeString({\n            \"aria-label\": l\n          });\n        },\n        hourScaleAttr: function (l, f) {\n          this.labelAttr(l, f);\n        },\n        monthCellAttr: function (l, f) {\n          this.labelAttr(l, t.templates.day_date(f));\n        },\n        navBarDateAttr: function (l, f) {\n          this.labelAttr(l, f);\n        },\n        dayHeaderAttr: function (l, f) {\n          this.labelAttr(l, f);\n        },\n        dayColumnAttr: function (l, f) {\n          this.dayHeaderAttr(l, t.templates.day_date(f));\n        },\n        headerButtonsAttributes: function (l, f) {\n          return this.setAttributes(l, {\n            role: \"button\",\n            \"aria-label\": f\n          });\n        },\n        headerToggleState: function (l, f) {\n          return this.setAttributes(l, {\n            \"aria-pressed\": f ? \"true\" : \"false\"\n          });\n        },\n        getHeaderCellAttr: function (l) {\n          return t._waiAria.getAttributeString({\n            \"aria-label\": l\n          });\n        },\n        eventAttr: function (l, f) {\n          this._eventCommonAttr(l, f);\n        },\n        _eventCommonAttr: function (l, f) {\n          f.setAttribute(\"aria-label\", c(t.templates.event_text(l.start_date, l.end_date, l))), t.config.readonly && f.setAttribute(\"aria-readonly\", !0), l.$dataprocessor_class && f.setAttribute(\"aria-busy\", !0), f.setAttribute(\"aria-selected\", t.getState().select_id == l.id ? \"true\" : \"false\");\n        },\n        setEventBarAttr: function (l, f) {\n          this._eventCommonAttr(l, f);\n        },\n        _getAttributes: function (l, f) {\n          var g = {\n            setAttribute: function (p, y) {\n              this[p] = y;\n            }\n          };\n          return l.apply(this, [f, g]), g;\n        },\n        eventBarAttrString: function (l) {\n          return this.getAttributeString(this._getAttributes(this.setEventBarAttr, l));\n        },\n        agendaHeadAttrString: function () {\n          return this.getAttributeString({\n            role: \"row\"\n          });\n        },\n        agendaHeadDateString: function (l) {\n          return this.getAttributeString({\n            role: \"columnheader\",\n            \"aria-label\": l\n          });\n        },\n        agendaHeadDescriptionString: function (l) {\n          return this.agendaHeadDateString(l);\n        },\n        agendaDataAttrString: function () {\n          return this.getAttributeString({\n            role: \"grid\"\n          });\n        },\n        agendaEventAttrString: function (l) {\n          var f = this._getAttributes(this._eventCommonAttr, l);\n          return f.role = \"row\", this.getAttributeString(f);\n        },\n        agendaDetailsBtnString: function () {\n          return this.getAttributeString({\n            role: \"button\",\n            \"aria-label\": t.locale.labels.icon_details\n          });\n        },\n        gridAttrString: function () {\n          return this.getAttributeString({\n            role: \"grid\"\n          });\n        },\n        gridRowAttrString: function (l) {\n          return this.agendaEventAttrString(l);\n        },\n        gridCellAttrString: function (l, f, g) {\n          return this.getAttributeString({\n            role: \"gridcell\",\n            \"aria-label\": [f.label === void 0 ? f.id : f.label, \": \", g]\n          });\n        },\n        mapAttrString: function () {\n          return this.gridAttrString();\n        },\n        mapRowAttrString: function (l) {\n          return this.gridRowAttrString(l);\n        },\n        mapDetailsBtnString: function () {\n          return this.agendaDetailsBtnString();\n        },\n        minicalHeader: function (l, f) {\n          this.setAttributes(l, {\n            id: f + \"\",\n            \"aria-live\": \"assertice\",\n            \"aria-atomic\": \"true\"\n          });\n        },\n        minicalGrid: function (l, f) {\n          this.setAttributes(l, {\n            \"aria-labelledby\": f + \"\",\n            role: \"grid\"\n          });\n        },\n        minicalRow: function (l) {\n          this.setAttributes(l, {\n            role: \"row\"\n          });\n        },\n        minicalDayCell: function (l, f) {\n          var g = f.valueOf() < t._max_date.valueOf() && f.valueOf() >= t._min_date.valueOf();\n          this.setAttributes(l, {\n            role: \"gridcell\",\n            \"aria-label\": t.templates.day_date(f),\n            \"aria-selected\": g ? \"true\" : \"false\"\n          });\n        },\n        minicalHeadCell: function (l) {\n          this.setAttributes(l, {\n            role: \"columnheader\"\n          });\n        },\n        weekAgendaDayCell: function (l, f) {\n          var g = l.querySelector(\".dhx_wa_scale_bar\"),\n            p = l.querySelector(\".dhx_wa_day_data\"),\n            y = t.uid() + \"\";\n          this.setAttributes(g, {\n            id: y\n          }), this.setAttributes(p, {\n            \"aria-labelledby\": y\n          });\n        },\n        weekAgendaEvent: function (l, f) {\n          this.eventAttr(f, l);\n        },\n        lightboxHiddenAttr: function (l) {\n          l.setAttribute(\"aria-hidden\", \"true\");\n        },\n        lightboxVisibleAttr: function (l) {\n          l.setAttribute(\"aria-hidden\", \"false\");\n        },\n        lightboxSectionButtonAttrString: function (l) {\n          return this.getAttributeString({\n            role: \"button\",\n            \"aria-label\": l,\n            tabindex: \"0\"\n          });\n        },\n        yearHeader: function (l, f) {\n          this.setAttributes(l, {\n            id: f + \"\"\n          });\n        },\n        yearGrid: function (l, f) {\n          this.minicalGrid(l, f);\n        },\n        yearHeadCell: function (l) {\n          return this.minicalHeadCell(l);\n        },\n        yearRow: function (l) {\n          return this.minicalRow(l);\n        },\n        yearDayCell: function (l) {\n          this.setAttributes(l, {\n            role: \"gridcell\"\n          });\n        },\n        lightboxAttr: function (l) {\n          l.setAttribute(\"role\", \"dialog\"), l.setAttribute(\"aria-hidden\", \"true\"), l.firstChild.setAttribute(\"role\", \"heading\");\n        },\n        lightboxButtonAttrString: function (l) {\n          return this.getAttributeString({\n            role: \"button\",\n            \"aria-label\": t.locale.labels[l],\n            tabindex: \"0\"\n          });\n        },\n        eventMenuAttrString: function (l) {\n          return this.getAttributeString({\n            role: \"button\",\n            \"aria-label\": t.locale.labels[l]\n          });\n        },\n        lightboxHeader: function (l, f) {\n          l.setAttribute(\"aria-label\", f);\n        },\n        lightboxSelectAttrString: function (l) {\n          var f = \"\";\n          switch (l) {\n            case \"%Y\":\n              f = t.locale.labels.year;\n              break;\n            case \"%m\":\n              f = t.locale.labels.month;\n              break;\n            case \"%d\":\n              f = t.locale.labels.day;\n              break;\n            case \"%H:%i\":\n              f = t.locale.labels.hour + \" \" + t.locale.labels.minute;\n          }\n          return t._waiAria.getAttributeString({\n            \"aria-label\": f\n          });\n        },\n        messageButtonAttrString: function (l) {\n          return \"tabindex='0' role='button' aria-label='\" + l + \"'\";\n        },\n        messageInfoAttr: function (l) {\n          l.setAttribute(\"role\", \"alert\");\n        },\n        messageModalAttr: function (l, f) {\n          l.setAttribute(\"role\", \"dialog\"), f && l.setAttribute(\"aria-labelledby\", f);\n        },\n        quickInfoAttr: function (l) {\n          l.setAttribute(\"role\", \"dialog\");\n        },\n        quickInfoHeaderAttrString: function () {\n          return \" role='heading' \";\n        },\n        quickInfoHeader: function (l, f) {\n          l.setAttribute(\"aria-label\", f);\n        },\n        quickInfoButtonAttrString: function (l) {\n          return t._waiAria.getAttributeString({\n            role: \"button\",\n            \"aria-label\": l,\n            tabindex: \"0\"\n          });\n        },\n        tooltipAttr: function (l) {\n          l.setAttribute(\"role\", \"tooltip\");\n        },\n        tooltipVisibleAttr: function (l) {\n          l.setAttribute(\"aria-hidden\", \"false\");\n        },\n        tooltipHiddenAttr: function (l) {\n          l.setAttribute(\"aria-hidden\", \"true\");\n        }\n      }, t._waiAria) t._waiAria[m] = function (l) {\n        return function () {\n          return t.config.wai_aria_attributes ? l.apply(this, arguments) : \" \";\n        };\n      }(t._waiAria[m]);\n    })();\n  }(h), h.utils = V, h.$domHelpers = q, h.utils.dom = q, h.uid = V.uid, h.mixin = V.mixin, h.defined = V.defined, h.assert = function (t) {\n    return function (n, s) {\n      n || t.config.show_errors && t.callEvent(\"onError\", [s]) !== !1 && (t.message ? t.message({\n        type: \"error\",\n        text: s,\n        expire: -1\n      }) : console.log(s));\n    };\n  }(h), h.copy = V.copy, h._createDatePicker = function (t, n) {\n    return new at(h, t, n);\n  }, h._getFocusableNodes = q.getFocusableNodes, h._getClassName = q.getClassName, h._locate_css = q.locateCss;\n  const a = De(h);\n  var r, d, i;\n  h.utils.mixin(h, a), h.env = h.$env = ye, h.Promise = window.Promise, function (t) {\n    t.destructor = function () {\n      for (var n in t.callEvent(\"onDestroy\", []), this.clearAll(), this.$container && (this.$container.innerHTML = \"\"), this._eventRemoveAll && this._eventRemoveAll(), this.resetLightbox && this.resetLightbox(), this._dp && this._dp.destructor && this._dp.destructor(), this.detachAllEvents(), this) n.indexOf(\"$\") === 0 && delete this[n];\n      t.$destroyed = !0;\n    };\n  }(h), function (t) {\n    function n(s, c) {\n      var u = {\n        method: s\n      };\n      if (c.length === 0) throw new Error(\"Arguments list of query is wrong.\");\n      if (c.length === 1) return typeof c[0] == \"string\" ? (u.url = c[0], u.async = !0) : (u.url = c[0].url, u.async = c[0].async || !0, u.callback = c[0].callback, u.headers = c[0].headers), c[0].data ? typeof c[0].data != \"string\" ? u.data = W(c[0].data) : u.data = c[0].data : u.data = \"\", u;\n      switch (u.url = c[0], s) {\n        case \"GET\":\n        case \"DELETE\":\n          u.callback = c[1], u.headers = c[2];\n          break;\n        case \"POST\":\n        case \"PUT\":\n          c[1] ? typeof c[1] != \"string\" ? u.data = W(c[1]) : u.data = c[1] : u.data = \"\", u.callback = c[2], u.headers = c[3];\n      }\n      return u;\n    }\n    t.Promise = window.Promise, t.ajax = {\n      cache: !0,\n      method: \"get\",\n      serializeRequestParams: W,\n      parse: function (s) {\n        return typeof s != \"string\" ? s : (s = s.replace(/^[\\s]+/, \"\"), typeof DOMParser > \"u\" || t.$env.isIE ? window.ActiveXObject !== void 0 && ((c = new window.ActiveXObject(\"Microsoft.XMLDOM\")).async = \"false\", c.loadXML(s)) : c = new DOMParser().parseFromString(s, \"text/xml\"), c);\n        var c;\n      },\n      xmltop: function (s, c, u) {\n        if (c.status === void 0 || c.status < 400) {\n          var v = c.responseXML ? c.responseXML || c : this.parse(c.responseText || c);\n          if (v && v.documentElement !== null && !v.getElementsByTagName(\"parsererror\").length) return v.getElementsByTagName(s)[0];\n        }\n        return u !== -1 && t.callEvent(\"onLoadXMLError\", [\"Incorrect XML\", arguments[1], u]), document.createElement(\"DIV\");\n      },\n      xpath: function (s, c) {\n        if (c.nodeName || (c = c.responseXML || c), t.$env.isIE) return c.selectNodes(s) || [];\n        for (var u, v = [], m = (c.ownerDocument || c).evaluate(s, c, null, XPathResult.ANY_TYPE, null); u = m.iterateNext();) v.push(u);\n        return v;\n      },\n      query: function (s) {\n        return this._call(s.method || \"GET\", s.url, s.data || \"\", s.async || !0, s.callback, s.headers);\n      },\n      get: function (s, c, u) {\n        var v = n(\"GET\", arguments);\n        return this.query(v);\n      },\n      getSync: function (s, c) {\n        var u = n(\"GET\", arguments);\n        return u.async = !1, this.query(u);\n      },\n      put: function (s, c, u, v) {\n        var m = n(\"PUT\", arguments);\n        return this.query(m);\n      },\n      del: function (s, c, u) {\n        var v = n(\"DELETE\", arguments);\n        return this.query(v);\n      },\n      post: function (s, c, u, v) {\n        arguments.length == 1 ? c = \"\" : arguments.length == 2 && typeof c == \"function\" && (u = c, c = \"\");\n        var m = n(\"POST\", arguments);\n        return this.query(m);\n      },\n      postSync: function (s, c, u) {\n        c = c === null ? \"\" : String(c);\n        var v = n(\"POST\", arguments);\n        return v.async = !1, this.query(v);\n      },\n      _call: function (s, c, u, v, m, l) {\n        return new t.Promise(function (f, g) {\n          var p = typeof XMLHttpRequest === void 0 || t.$env.isIE ? new window.ActiveXObject(\"Microsoft.XMLHTTP\") : new XMLHttpRequest(),\n            y = navigator.userAgent.match(/AppleWebKit/) !== null && navigator.userAgent.match(/Qt/) !== null && navigator.userAgent.match(/Safari/) !== null;\n          if (v && p.addEventListener(\"readystatechange\", function () {\n            if (p.readyState == 4 || y && p.readyState == 3) {\n              if ((p.status != 200 || p.responseText === \"\") && !t.callEvent(\"onAjaxError\", [p])) return;\n              setTimeout(function () {\n                typeof m == \"function\" && m.apply(window, [{\n                  xmlDoc: p,\n                  filePath: c\n                }]), f(p), typeof m == \"function\" && (m = null, p = null);\n              }, 0);\n            }\n          }), s != \"GET\" || this.cache || (c += (c.indexOf(\"?\") >= 0 ? \"&\" : \"?\") + \"dhxr\" + ( /* @__PURE__ */new Date()).getTime() + \"=1\"), p.open(s, c, v), l) for (var w in l) p.setRequestHeader(w, l[w]);else s.toUpperCase() == \"POST\" || s == \"PUT\" || s == \"DELETE\" ? p.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\") : s == \"GET\" && (u = null);\n          if (p.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\"), p.send(u), !v) return {\n            xmlDoc: p,\n            filePath: c\n          };\n        }.bind(this));\n      },\n      urlSeparator: function (s) {\n        return s.indexOf(\"?\") != -1 ? \"&\" : \"?\";\n      }\n    }, t.$ajax = t.ajax;\n  }(h), be(h), function (t) {\n    t.config = {\n      default_date: \"%j %M %Y\",\n      month_date: \"%F %Y\",\n      load_date: \"%Y-%m-%d\",\n      week_date: \"%l\",\n      day_date: \"%D %j\",\n      hour_date: \"%H:%i\",\n      month_day: \"%d\",\n      date_format: \"%Y-%m-%d %H:%i\",\n      api_date: \"%d-%m-%Y %H:%i\",\n      parse_exact_format: !1,\n      preserve_length: !0,\n      time_step: 5,\n      displayed_event_color: \"#ff4a4a\",\n      displayed_event_text_color: \"#ffef80\",\n      wide_form: 0,\n      day_column_padding: 8,\n      use_select_menu_space: !0,\n      fix_tab_position: !0,\n      start_on_monday: !0,\n      first_hour: 0,\n      last_hour: 24,\n      readonly: !1,\n      drag_resize: !0,\n      drag_move: !0,\n      drag_create: !0,\n      drag_event_body: !0,\n      dblclick_create: !0,\n      details_on_dblclick: !0,\n      edit_on_create: !0,\n      details_on_create: !0,\n      header: null,\n      hour_size_px: 44,\n      resize_month_events: !1,\n      resize_month_timed: !1,\n      responsive_lightbox: !1,\n      separate_short_events: !0,\n      rtl: !1,\n      cascade_event_display: !1,\n      cascade_event_count: 4,\n      cascade_event_margin: 30,\n      multi_day: !0,\n      multi_day_height_limit: 200,\n      drag_lightbox: !0,\n      preserve_scroll: !0,\n      select: !0,\n      server_utc: !1,\n      touch: !0,\n      touch_tip: !0,\n      touch_drag: 500,\n      touch_swipe_dates: !1,\n      quick_info_detached: !0,\n      positive_closing: !1,\n      drag_highlight: !0,\n      limit_drag_out: !1,\n      icons_edit: [\"icon_save\", \"icon_cancel\"],\n      icons_select: [\"icon_details\", \"icon_edit\", \"icon_delete\"],\n      buttons_left: [\"dhx_save_btn\", \"dhx_cancel_btn\"],\n      buttons_right: [\"dhx_delete_btn\"],\n      lightbox: {\n        sections: [{\n          name: \"description\",\n          map_to: \"text\",\n          type: \"textarea\",\n          focus: !0\n        }, {\n          name: \"time\",\n          height: 72,\n          type: \"time\",\n          map_to: \"auto\"\n        }]\n      },\n      highlight_displayed_event: !0,\n      left_border: !1,\n      ajax_error: \"alert\",\n      delay_render: 0,\n      timeline_swap_resize: !0,\n      wai_aria_attributes: !0,\n      wai_aria_application_role: !0,\n      csp: \"auto\",\n      event_attribute: \"data-event-id\",\n      show_errors: !0\n    }, t.config.buttons_left.$initial = t.config.buttons_left.join(), t.config.buttons_right.$initial = t.config.buttons_right.join(), t._helpers = {\n      parseDate: function (n) {\n        return (t.templates.xml_date || t.templates.parse_date)(n);\n      },\n      formatDate: function (n) {\n        return (t.templates.xml_format || t.templates.format_date)(n);\n      }\n    }, t.templates = {}, t.init_templates = function () {\n      var n = t.date.date_to_str,\n        s = t.config;\n      (function (c, u) {\n        for (var v in u) c[v] || (c[v] = u[v]);\n      })(t.templates, {\n        day_date: n(s.default_date),\n        month_date: n(s.month_date),\n        week_date: function (c, u) {\n          return s.rtl ? t.templates.day_date(t.date.add(u, -1, \"day\")) + \" &ndash; \" + t.templates.day_date(c) : t.templates.day_date(c) + \" &ndash; \" + t.templates.day_date(t.date.add(u, -1, \"day\"));\n        },\n        day_scale_date: n(s.default_date),\n        time_slot_text: function (c) {\n          return \"\";\n        },\n        time_slot_class: function (c) {\n          return \"\";\n        },\n        month_scale_date: n(s.week_date),\n        week_scale_date: n(s.day_date),\n        hour_scale: n(s.hour_date),\n        time_picker: n(s.hour_date),\n        event_date: n(s.hour_date),\n        month_day: n(s.month_day),\n        load_format: n(s.load_date),\n        format_date: n(s.date_format, s.server_utc),\n        parse_date: t.date.str_to_date(s.date_format, s.server_utc),\n        api_date: t.date.str_to_date(s.api_date, !1, !1),\n        event_header: function (c, u, v) {\n          return v._mode === \"small\" || v._mode === \"smallest\" ? t.templates.event_date(c) : t.templates.event_date(c) + \" - \" + t.templates.event_date(u);\n        },\n        event_text: function (c, u, v) {\n          return v.text;\n        },\n        event_class: function (c, u, v) {\n          return \"\";\n        },\n        month_date_class: function (c) {\n          return \"\";\n        },\n        week_date_class: function (c) {\n          return \"\";\n        },\n        event_bar_date: function (c, u, v) {\n          return t.templates.event_date(c);\n        },\n        event_bar_text: function (c, u, v) {\n          return v.text;\n        },\n        month_events_link: function (c, u) {\n          return \"<a>View more(\" + u + \" events)</a>\";\n        },\n        drag_marker_class: function (c, u, v) {\n          return \"\";\n        },\n        drag_marker_content: function (c, u, v) {\n          return \"\";\n        },\n        tooltip_date_format: t.date.date_to_str(\"%Y-%m-%d %H:%i\"),\n        tooltip_text: function (c, u, v) {\n          return \"<b>Event:</b> \" + v.text + \"<br/><b>Start date:</b> \" + t.templates.tooltip_date_format(c) + \"<br/><b>End date:</b> \" + t.templates.tooltip_date_format(u);\n        },\n        calendar_month: n(\"%F %Y\"),\n        calendar_scale_date: n(\"%D\"),\n        calendar_date: n(\"%d\"),\n        calendar_time: n(\"%d-%m-%Y\")\n      }), this.callEvent(\"onTemplatesReady\", []);\n    };\n  }(h), function (t) {\n    t._events = {}, t.clearAll = function () {\n      this._events = {}, this._loaded = {}, this._edit_id = null, this._select_id = null, this._drag_id = null, this._drag_mode = null, this._drag_pos = null, this._new_event = null, this.clear_view(), this.callEvent(\"onClearAll\", []);\n    }, t.addEvent = function (n, s, c, u, v) {\n      if (!arguments.length) return this.addEventNow();\n      var m = n;\n      arguments.length != 1 && ((m = v || {}).start_date = n, m.end_date = s, m.text = c, m.id = u), m.id = m.id || t.uid(), m.text = m.text || \"\", typeof m.start_date == \"string\" && (m.start_date = this.templates.api_date(m.start_date)), typeof m.end_date == \"string\" && (m.end_date = this.templates.api_date(m.end_date));\n      var l = 6e4 * (this.config.event_duration || this.config.time_step);\n      m.start_date.valueOf() == m.end_date.valueOf() && m.end_date.setTime(m.end_date.valueOf() + l), m.start_date.setMilliseconds(0), m.end_date.setMilliseconds(0), m._timed = this.isOneDayEvent(m);\n      var f = !this._events[m.id];\n      return this._events[m.id] = m, this.event_updated(m), this._loading || this.callEvent(f ? \"onEventAdded\" : \"onEventChanged\", [m.id, m]), m.id;\n    }, t.deleteEvent = function (n, s) {\n      var c = this._events[n];\n      (s || this.callEvent(\"onBeforeEventDelete\", [n, c]) && this.callEvent(\"onConfirmedBeforeEventDelete\", [n, c])) && (c && (t.getState().select_id == n && t.unselect(), delete this._events[n], this.event_updated(c), this._drag_id == c.id && (this._drag_id = null, this._drag_mode = null, this._drag_pos = null)), this.callEvent(\"onEventDeleted\", [n, c]));\n    }, t.getEvent = function (n) {\n      return this._events[n];\n    }, t.setEvent = function (n, s) {\n      s.id || (s.id = n), this._events[n] = s;\n    }, t.for_rendered = function (n, s) {\n      for (var c = this._rendered.length - 1; c >= 0; c--) this._rendered[c].getAttribute(this.config.event_attribute) == n && s(this._rendered[c], c);\n    }, t.changeEventId = function (n, s) {\n      if (n != s) {\n        var c = this._events[n];\n        c && (c.id = s, this._events[s] = c, delete this._events[n]), this.for_rendered(n, function (u) {\n          u.setAttribute(\"event_id\", s), u.setAttribute(t.config.event_attribute, s);\n        }), this._select_id == n && (this._select_id = s), this._edit_id == n && (this._edit_id = s), this.callEvent(\"onEventIdChange\", [n, s]);\n      }\n    }, function () {\n      for (var n = [\"text\", \"Text\", \"start_date\", \"StartDate\", \"end_date\", \"EndDate\"], s = function (v) {\n          return function (m) {\n            return t.getEvent(m)[v];\n          };\n        }, c = function (v) {\n          return function (m, l) {\n            var f = t.getEvent(m);\n            f[v] = l, f._changed = !0, f._timed = this.isOneDayEvent(f), t.event_updated(f, !0);\n          };\n        }, u = 0; u < n.length; u += 2) t[\"getEvent\" + n[u + 1]] = s(n[u]), t[\"setEvent\" + n[u + 1]] = c(n[u]);\n    }(), t.event_updated = function (n, s) {\n      this.is_visible_events(n) ? this.render_view_data() : this.clear_event(n.id);\n    }, t.is_visible_events = function (n) {\n      if (!this._min_date || !this._max_date) return !1;\n      if (n.start_date.valueOf() < this._max_date.valueOf() && this._min_date.valueOf() < n.end_date.valueOf()) {\n        var s = n.start_date.getHours(),\n          c = n.end_date.getHours() + n.end_date.getMinutes() / 60,\n          u = this.config.last_hour,\n          v = this.config.first_hour;\n        return !(!this._table_view && (c > u || c <= v) && (s >= u || s < v) && !((n.end_date.valueOf() - n.start_date.valueOf()) / 36e5 > 24 - (this.config.last_hour - this.config.first_hour) || s < u && c > v));\n      }\n      return !1;\n    }, t.isOneDayEvent = function (n) {\n      var s = new Date(n.end_date.valueOf() - 1);\n      return n.start_date.getFullYear() === s.getFullYear() && n.start_date.getMonth() === s.getMonth() && n.start_date.getDate() === s.getDate() && n.end_date.valueOf() - n.start_date.valueOf() < 864e5;\n    }, t.get_visible_events = function (n) {\n      var s = [];\n      for (var c in this._events) this.is_visible_events(this._events[c]) && (n && !this._events[c]._timed || this.filter_event(c, this._events[c]) && s.push(this._events[c]));\n      return s;\n    }, t.filter_event = function (n, s) {\n      var c = this[\"filter_\" + this._mode];\n      return !c || c(n, s);\n    }, t._is_main_area_event = function (n) {\n      return !!n._timed;\n    }, t.render_view_data = function (n, s) {\n      var c = !1;\n      if (!n) {\n        if (c = !0, this._not_render) return void (this._render_wait = !0);\n        this._render_wait = !1, this.clear_view(), n = this.get_visible_events(!(this._table_view || this.config.multi_day));\n      }\n      for (var u = 0, v = n.length; u < v; u++) this._recalculate_timed(n[u]);\n      if (this.config.multi_day && !this._table_view) {\n        var m = [],\n          l = [];\n        for (u = 0; u < n.length; u++) this._is_main_area_event(n[u]) ? m.push(n[u]) : l.push(n[u]);\n        if (!this._els.dhx_multi_day) {\n          var f = t._commonErrorMessages.unknownView(this._mode);\n          throw new Error(f);\n        }\n        this._rendered_location = this._els.dhx_multi_day[0], this._table_view = !0, this.render_data(l, s), this._table_view = !1, this._rendered_location = this._els.dhx_cal_data[0], this._table_view = !1, this.render_data(m, s);\n      } else {\n        var g = document.createDocumentFragment(),\n          p = this._els.dhx_cal_data[0];\n        this._rendered_location = g, this.render_data(n, s), p.appendChild(g), this._rendered_location = p;\n      }\n      c && this.callEvent(\"onDataRender\", []);\n    }, t._view_month_day = function (n) {\n      var s = t.getActionData(n).date;\n      t.callEvent(\"onViewMoreClick\", [s]) && t.setCurrentView(s, \"day\");\n    }, t._render_month_link = function (n) {\n      for (var s = this._rendered_location, c = this._lame_clone(n), u = n._sday; u < n._eday; u++) {\n        c._sday = u, c._eday = u + 1;\n        var v = t.date,\n          m = t._min_date;\n        m = v.add(m, c._sweek, \"week\"), m = v.add(m, c._sday, \"day\");\n        var l = t.getEvents(m, v.add(m, 1, \"day\")).length,\n          f = this._get_event_bar_pos(c),\n          g = f.x2 - f.x,\n          p = document.createElement(\"div\");\n        t.event(p, \"click\", function (y) {\n          t._view_month_day(y);\n        }), p.className = \"dhx_month_link\", p.style.top = f.y + \"px\", p.style.left = f.x + \"px\", p.style.width = g + \"px\", p.innerHTML = t.templates.month_events_link(m, l), this._rendered.push(p), s.appendChild(p);\n      }\n    }, t._recalculate_timed = function (n) {\n      var s;\n      n && (s = typeof n != \"object\" ? this._events[n] : n) && (s._timed = t.isOneDayEvent(s));\n    }, t.attachEvent(\"onEventChanged\", t._recalculate_timed), t.attachEvent(\"onEventAdded\", t._recalculate_timed), t.render_data = function (n, s) {\n      n = this._pre_render_events(n, s);\n      for (var c = {}, u = 0; u < n.length; u++) if (this._table_view) {\n        if (t._mode != \"month\") this.render_event_bar(n[u]);else {\n          var v = t.config.max_month_events;\n          v !== 1 * v || n[u]._sorder < v ? this.render_event_bar(n[u]) : v !== void 0 && n[u]._sorder == v && t._render_month_link(n[u]);\n        }\n      } else {\n        var m = n[u],\n          l = t.locate_holder(m._sday);\n        if (!l) continue;\n        c[m._sday] || (c[m._sday] = {\n          real: l,\n          buffer: document.createDocumentFragment(),\n          width: l.clientWidth\n        });\n        var f = c[m._sday];\n        this.render_event(m, f.buffer, f.width);\n      }\n      for (var u in c) (f = c[u]).real && f.buffer && f.real.appendChild(f.buffer);\n    }, t._get_first_visible_cell = function (n) {\n      for (var s = 0; s < n.length; s++) if ((n[s].className || \"\").indexOf(\"dhx_scale_ignore\") == -1) return n[s];\n      return n[0];\n    }, t._pre_render_events = function (n, s) {\n      var c = this.xy.bar_height,\n        u = this._colsS.heights,\n        v = this._colsS.heights = [0, 0, 0, 0, 0, 0, 0],\n        m = this._els.dhx_cal_data[0];\n      if (n = this._table_view ? this._pre_render_events_table(n, s) : this._pre_render_events_line(n, s), this._table_view) if (s) this._colsS.heights = u;else {\n        var l = m.querySelectorAll(\".dhx_cal_month_row\");\n        if (l.length) {\n          for (var f = 0; f < l.length; f++) {\n            v[f]++;\n            var g = l[f].querySelectorAll(\".dhx_cal_month_cell\"),\n              p = this._colsS.height - this.xy.month_head_height;\n            if (v[f] * c > p) {\n              var y = p;\n              1 * this.config.max_month_events !== this.config.max_month_events || v[f] <= this.config.max_month_events ? y = v[f] * c : (this.config.max_month_events + 1) * c > p && (y = (this.config.max_month_events + 1) * c), l[f].style.height = y + this.xy.month_head_height + \"px\";\n            }\n            v[f] = (v[f - 1] || 0) + t._get_first_visible_cell(g).offsetHeight;\n          }\n          v.unshift(0);\n          const M = this.$container.querySelector(\".dhx_cal_data\");\n          if (M.offsetHeight < M.scrollHeight && !t._colsS.scroll_fix && t.xy.scroll_width) {\n            var w = t._colsS,\n              b = w[w.col_length],\n              k = w.heights.slice();\n            b -= t.xy.scroll_width || 0, this._calc_scale_sizes(b, this._min_date, this._max_date), t._colsS.heights = k, this.set_xy(this._els.dhx_cal_header[0], b), t._render_scales(this._els.dhx_cal_header[0]), t._render_month_scale(this._els.dhx_cal_data[0], this._get_timeunit_start(), this._min_date), w.scroll_fix = !0;\n          }\n        } else if (n.length || this._els.dhx_multi_day[0].style.visibility != \"visible\" || (v[0] = -1), n.length || v[0] == -1) {\n          var E = (v[0] + 1) * c + 4,\n            D = E,\n            x = E + \"px\";\n          this.config.multi_day_height_limit && (x = (D = Math.min(E, this.config.multi_day_height_limit)) + \"px\");\n          var S = this._els.dhx_multi_day[0];\n          S.style.height = x, S.style.visibility = v[0] == -1 ? \"hidden\" : \"visible\", S.style.display = v[0] == -1 ? \"none\" : \"\";\n          var N = this._els.dhx_multi_day[1];\n          N.style.height = x, N.style.visibility = v[0] == -1 ? \"hidden\" : \"visible\", N.style.display = v[0] == -1 ? \"none\" : \"\", N.className = v[0] ? \"dhx_multi_day_icon\" : \"dhx_multi_day_icon_small\", this._dy_shift = (v[0] + 1) * c, this.config.multi_day_height_limit && (this._dy_shift = Math.min(this.config.multi_day_height_limit, this._dy_shift)), v[0] = 0, D != E && (S.style.overflowY = \"auto\", N.style.position = \"fixed\", N.style.top = \"\", N.style.left = \"\");\n        }\n      }\n      return n;\n    }, t._get_event_sday = function (n) {\n      var s = this.date.day_start(new Date(n.start_date));\n      return Math.round((s.valueOf() - this._min_date.valueOf()) / 864e5);\n    }, t._get_event_mapped_end_date = function (n) {\n      var s = n.end_date;\n      if (this.config.separate_short_events) {\n        var c = (n.end_date - n.start_date) / 6e4;\n        c < this._min_mapped_duration && (s = this.date.add(s, this._min_mapped_duration - c, \"minute\"));\n      }\n      return s;\n    }, t._pre_render_events_line = function (n, s) {\n      n.sort(function (N, M) {\n        return N.start_date.valueOf() == M.start_date.valueOf() ? N.id > M.id ? 1 : -1 : N.start_date > M.start_date ? 1 : -1;\n      });\n      var c = [],\n        u = [];\n      this._min_mapped_duration = Math.floor(60 * this.xy.min_event_height / this.config.hour_size_px);\n      for (var v = 0; v < n.length; v++) {\n        var m = n[v],\n          l = m.start_date,\n          f = m.end_date,\n          g = l.getHours(),\n          p = f.getHours();\n        if (m._sday = this._get_event_sday(m), this._ignores[m._sday]) n.splice(v, 1), v--;else {\n          if (c[m._sday] || (c[m._sday] = []), !s) {\n            m._inner = !1;\n            for (var y = c[m._sday]; y.length;) {\n              var w = y[y.length - 1];\n              if (!(this._get_event_mapped_end_date(w).valueOf() <= m.start_date.valueOf())) break;\n              y.splice(y.length - 1, 1);\n            }\n            for (var b = y.length, k = !1, E = 0; E < y.length; E++) if (w = y[E], this._get_event_mapped_end_date(w).valueOf() <= m.start_date.valueOf()) {\n              k = !0, m._sorder = w._sorder, b = E, m._inner = !0;\n              break;\n            }\n            if (y.length && (y[y.length - 1]._inner = !0), !k) if (y.length) {\n              if (y.length <= y[y.length - 1]._sorder) {\n                if (y[y.length - 1]._sorder) for (E = 0; E < y.length; E++) {\n                  for (var D = !1, x = 0; x < y.length; x++) if (y[x]._sorder == E) {\n                    D = !0;\n                    break;\n                  }\n                  if (!D) {\n                    m._sorder = E;\n                    break;\n                  }\n                } else m._sorder = 0;\n                m._inner = !0;\n              } else {\n                var S = y[0]._sorder;\n                for (E = 1; E < y.length; E++) y[E]._sorder > S && (S = y[E]._sorder);\n                m._sorder = S + 1, m._inner = !1;\n              }\n            } else m._sorder = 0;\n            y.splice(b, b == y.length ? 0 : 1, m), y.length > (y.max_count || 0) ? (y.max_count = y.length, m._count = y.length) : m._count = m._count ? m._count : 1;\n          }\n          (g < this.config.first_hour || p >= this.config.last_hour) && (u.push(m), n[v] = m = this._copy_event(m), g < this.config.first_hour && (m.start_date.setHours(this.config.first_hour), m.start_date.setMinutes(0)), p >= this.config.last_hour && (m.end_date.setMinutes(0), m.end_date.setHours(this.config.last_hour)), m.start_date > m.end_date || g == this.config.last_hour) && (n.splice(v, 1), v--);\n        }\n      }\n      if (!s) {\n        for (v = 0; v < n.length; v++) n[v]._count = c[n[v]._sday].max_count;\n        for (v = 0; v < u.length; v++) u[v]._count = c[u[v]._sday].max_count;\n      }\n      return n;\n    }, t._time_order = function (n) {\n      n.sort(function (s, c) {\n        return s.start_date.valueOf() == c.start_date.valueOf() ? s._timed && !c._timed ? 1 : !s._timed && c._timed ? -1 : s.id > c.id ? 1 : -1 : s.start_date > c.start_date ? 1 : -1;\n      });\n    }, t._is_any_multiday_cell_visible = function (n, s, c) {\n      var u = this._cols.length,\n        v = !1,\n        m = n,\n        l = !0,\n        f = new Date(s);\n      for (t.date.day_start(new Date(s)).valueOf() != s.valueOf() && (f = t.date.day_start(f), f = t.date.add(f, 1, \"day\")); m < f;) {\n        l = !1;\n        var g = this.locate_holder_day(m, !1, c) % u;\n        if (!this._ignores[g]) {\n          v = !0;\n          break;\n        }\n        m = t.date.add(m, 1, \"day\");\n      }\n      return l || v;\n    }, t._pre_render_events_table = function (n, s) {\n      this._time_order(n);\n      for (var c, u = [], v = [[], [], [], [], [], [], []], m = this._colsS.heights, l = this._cols.length, f = {}, g = 0; g < n.length; g++) {\n        var p = n[g],\n          y = p.id;\n        f[y] || (f[y] = {\n          first_chunk: !0,\n          last_chunk: !0\n        });\n        var w = f[y],\n          b = c || p.start_date,\n          k = p.end_date;\n        b < this._min_date && (w.first_chunk = !1, b = this._min_date), k > this._max_date && (w.last_chunk = !1, k = this._max_date);\n        var E = this.locate_holder_day(b, !1, p);\n        if (p._sday = E % l, !this._ignores[p._sday] || !p._timed) {\n          var D = this.locate_holder_day(k, !0, p) || l;\n          if (p._eday = D % l || l, p._length = D - E, p._sweek = Math.floor((this._correct_shift(b.valueOf(), 1) - this._min_date.valueOf()) / (864e5 * l)), t._is_any_multiday_cell_visible(b, k, p)) {\n            var x,\n              S = v[p._sweek];\n            for (x = 0; x < S.length && !(S[x]._eday <= p._sday); x++);\n            if (p._sorder && s || (p._sorder = x), p._sday + p._length <= l) c = null, u.push(p), S[x] = p, m[p._sweek] = S.length - 1, p._first_chunk = w.first_chunk, p._last_chunk = w.last_chunk;else {\n              var N = this._copy_event(p);\n              N.id = p.id, N._length = l - p._sday, N._eday = l, N._sday = p._sday, N._sweek = p._sweek, N._sorder = p._sorder, N.end_date = this.date.add(b, N._length, \"day\"), N._first_chunk = w.first_chunk, w.first_chunk && (w.first_chunk = !1), u.push(N), S[x] = N, c = N.end_date, m[p._sweek] = S.length - 1, g--;\n            }\n          } else c = null;\n        }\n      }\n      return u;\n    }, t._copy_dummy = function () {\n      var n = new Date(this.start_date),\n        s = new Date(this.end_date);\n      this.start_date = n, this.end_date = s;\n    }, t._copy_event = function (n) {\n      return this._copy_dummy.prototype = n, new this._copy_dummy();\n    }, t._rendered = [], t.clear_view = function () {\n      for (var n = 0; n < this._rendered.length; n++) {\n        var s = this._rendered[n];\n        s.parentNode && s.parentNode.removeChild(s);\n      }\n      this._rendered = [];\n    }, t.updateEvent = function (n) {\n      var s = this.getEvent(n);\n      this.clear_event(n), s && this.is_visible_events(s) && this.filter_event(n, s) && (this._table_view || this.config.multi_day || s._timed) && (this.config.update_render ? this.render_view_data() : this.getState().mode != \"month\" || this.getState().drag_id || this.isOneDayEvent(s) ? this.render_view_data([s], !0) : this.render_view_data());\n    }, t.clear_event = function (n) {\n      this.for_rendered(n, function (s, c) {\n        s.parentNode && s.parentNode.removeChild(s), t._rendered.splice(c, 1);\n      });\n    }, t._y_from_date = function (n) {\n      var s = 60 * n.getHours() + n.getMinutes();\n      return Math.round((60 * s * 1e3 - 60 * this.config.first_hour * 60 * 1e3) * this.config.hour_size_px / 36e5) % (24 * this.config.hour_size_px);\n    }, t._calc_event_y = function (n, s) {\n      s = s || 0;\n      var c = 60 * n.start_date.getHours() + n.start_date.getMinutes(),\n        u = 60 * n.end_date.getHours() + n.end_date.getMinutes() || 60 * t.config.last_hour;\n      return {\n        top: this._y_from_date(n.start_date),\n        height: Math.max(s, (u - c) * this.config.hour_size_px / 60)\n      };\n    }, t.render_event = function (n, s, c) {\n      var u = t.xy.menu_width,\n        v = this.config.use_select_menu_space ? 0 : u;\n      if (!(n._sday < 0)) {\n        var m = t.locate_holder(n._sday);\n        if (m) {\n          s = s || m;\n          var l = this._calc_event_y(n, t.xy.min_event_height),\n            f = l.top,\n            g = l.height,\n            p = n._count || 1,\n            y = n._sorder || 0;\n          c = c || m.clientWidth, this.config.day_column_padding && (c -= this.config.day_column_padding);\n          var w = Math.floor((c - v) / p),\n            b = y * w + 1;\n          if (n._inner || (w *= p - y), this.config.cascade_event_display) {\n            var k = this.config.cascade_event_count,\n              E = this.config.cascade_event_margin;\n            b = y % k * E;\n            var D = n._inner ? (p - y - 1) % k * E / 2 : 0;\n            w = Math.floor(c - v - b - D);\n          }\n          n._mode = g < 30 ? \"smallest\" : g < 42 ? \"small\" : null;\n          var x = this._render_v_bar(n, v + b, f, w, g, n._text_style, t.templates.event_header(n.start_date, n.end_date, n), t.templates.event_text(n.start_date, n.end_date, n));\n          if (n._mode === \"smallest\" ? x.classList.add(\"dhx_cal_event--xsmall\") : n._mode === \"small\" && x.classList.add(\"dhx_cal_event--small\"), this._waiAria.eventAttr(n, x), this._rendered.push(x), s.appendChild(x), b = b + parseInt(this.config.rtl ? m.style.right : m.style.left, 10) + v, this._edit_id == n.id) {\n            x.style.zIndex = 1, w = Math.max(w, t.xy.editor_width), (x = document.createElement(\"div\")).setAttribute(\"event_id\", n.id), x.setAttribute(this.config.event_attribute, n.id), this._waiAria.eventAttr(n, x), x.className = \"dhx_cal_event dhx_cal_editor\", this.config.rtl && b++, this.set_xy(x, w, g, b, f), n.color && x.style.setProperty(\"--dhx-scheduler-event-background\", n.color);\n            var S = t.templates.event_class(n.start_date, n.end_date, n);\n            S && (x.className += \" \" + S);\n            var N = document.createElement(\"div\");\n            N.style.cssText += \"overflow:hidden;height:100%\", x.appendChild(N), this._els.dhx_cal_data[0].appendChild(x), this._rendered.push(x), N.innerHTML = \"<textarea class='dhx_cal_editor'>\" + n.text + \"</textarea>\", this._editor = N.querySelector(\"textarea\"), t.event(this._editor, \"keydown\", function (L) {\n              if (L.shiftKey) return !0;\n              var H = L.keyCode;\n              H == t.keys.edit_save && t.editStop(!0), H == t.keys.edit_cancel && t.editStop(!1), H != t.keys.edit_save && H != t.keys.edit_cancel || L.preventDefault && L.preventDefault();\n            }), t.event(this._editor, \"selectstart\", function (L) {\n              return L.cancelBubble = !0, !0;\n            }), t._focus(this._editor, !0), this._els.dhx_cal_data[0].scrollLeft = 0;\n          }\n          if (this.xy.menu_width !== 0 && this._select_id == n.id) {\n            this.config.cascade_event_display && this._drag_mode && (x.style.zIndex = 1);\n            for (var M, A = this.config[\"icons_\" + (this._edit_id == n.id ? \"edit\" : \"select\")], C = \"\", T = 0; T < A.length; T++) {\n              const L = A[T];\n              M = this._waiAria.eventMenuAttrString(L), C += \"<div class='dhx_menu_icon \".concat(L, \"' title='\").concat(this.locale.labels[L], \"' \").concat(M, \"></div>\");\n            }\n            var O = this._render_v_bar(n, b - u - 1, f, u, null, \"\", \"<div class='dhx_menu_head'></div>\", C, !0);\n            n.color && O.style.setProperty(\"--dhx-scheduler-event-background\", n.color), n.textColor && O.style.setProperty(\"--dhx-scheduler-event-color\", n.textColor), this._els.dhx_cal_data[0].appendChild(O), this._rendered.push(O);\n          }\n          this.config.drag_highlight && this._drag_id == n.id && this.highlightEventPosition(n);\n        }\n      }\n    }, t._render_v_bar = function (n, s, c, u, v, m, l, f, g) {\n      var p = document.createElement(\"div\"),\n        y = n.id,\n        w = g ? \"dhx_cal_event dhx_cal_select_menu\" : \"dhx_cal_event\",\n        b = t.getState();\n      b.drag_id == n.id && (w += \" dhx_cal_event_drag\"), b.select_id == n.id && (w += \" dhx_cal_event_selected\");\n      var k = t.templates.event_class(n.start_date, n.end_date, n);\n      k && (w = w + \" \" + k), this.config.cascade_event_display && (w += \" dhx_cal_event_cascade\");\n      var E = u - 1,\n        D = '<div event_id=\"' + y + '\" ' + this.config.event_attribute + '=\"' + y + '\" class=\"' + w + '\" style=\"position:absolute; top:' + c + \"px; \" + (this.config.rtl ? \"right:\" : \"left:\") + s + \"px; width:\" + E + \"px; height:\" + v + \"px;\" + (m || \"\") + '\"></div>';\n      p.innerHTML = D;\n      var x = p.cloneNode(!0).firstChild;\n      if (!g && t.renderEvent(x, n, u, v, l, f)) return n.color && x.style.setProperty(\"--dhx-scheduler-event-background\", n.color), n.textColor && x.style.setProperty(\"--dhx-scheduler-event-color\", n.textColor), x;\n      x = p.firstChild, n.color && x.style.setProperty(\"--dhx-scheduler-event-background\", n.color), n.textColor && x.style.setProperty(\"--dhx-scheduler-event-color\", n.textColor);\n      var S = '<div class=\"dhx_event_move dhx_header\" >&nbsp;</div>';\n      S += '<div class=\"dhx_event_move dhx_title\">' + l + \"</div>\", S += '<div class=\"dhx_body\">' + f + \"</div>\";\n      var N = \"dhx_event_resize dhx_footer\";\n      return (g || n._drag_resize === !1) && (N = \"dhx_resize_denied \" + N), S += '<div class=\"' + N + '\" style=\" width:' + (g ? \" margin-top:-1px;\" : \"\") + '\" ></div>', x.innerHTML = S, x;\n    }, t.renderEvent = function () {\n      return !1;\n    }, t.locate_holder = function (n) {\n      return this._mode == \"day\" ? this._els.dhx_cal_data[0].firstChild : this._els.dhx_cal_data[0].childNodes[n];\n    }, t.locate_holder_day = function (n, s) {\n      var c = Math.floor((this._correct_shift(n, 1) - this._min_date) / 864e5);\n      return s && this.date.time_part(n) && c++, c;\n    }, t._get_dnd_order = function (n, s, c) {\n      if (!this._drag_event) return n;\n      this._drag_event._orig_sorder ? n = this._drag_event._orig_sorder : this._drag_event._orig_sorder = n;\n      for (var u = s * n; u + s > c;) n--, u -= s;\n      return Math.max(n, 0);\n    }, t._get_event_bar_pos = function (n) {\n      var s = this.config.rtl,\n        c = this._colsS,\n        u = c[n._sday],\n        v = c[n._eday];\n      s && (u = c[c.col_length] - c[n._eday] + c[0], v = c[c.col_length] - c[n._sday] + c[0]), v == u && (v = c[n._eday + 1]);\n      var m = this.xy.bar_height,\n        l = n._sorder;\n      if (n.id == this._drag_id) {\n        var f = c.heights[n._sweek + 1] - c.heights[n._sweek] - this.xy.month_head_height;\n        l = t._get_dnd_order(l, m, f);\n      }\n      var g = l * m;\n      return {\n        x: u,\n        x2: v,\n        y: c.heights[n._sweek] + (c.height ? this.xy.month_scale_height + 2 : 2) + g\n      };\n    }, t.render_event_bar = function (n) {\n      var s = this._rendered_location,\n        c = this._get_event_bar_pos(n),\n        u = c.y,\n        v = c.x,\n        m = c.x2,\n        l = \"\";\n      if (m) {\n        var f = t.config.resize_month_events && this._mode == \"month\" && (!n._timed || t.config.resize_month_timed),\n          g = document.createElement(\"div\"),\n          p = n.hasOwnProperty(\"_first_chunk\") && n._first_chunk,\n          y = n.hasOwnProperty(\"_last_chunk\") && n._last_chunk,\n          w = f && (n._timed || p),\n          b = f && (n._timed || y),\n          k = !0,\n          E = \"dhx_cal_event_clear\";\n        n._timed && !f || (k = !1, E = \"dhx_cal_event_line\"), p && (E += \" dhx_cal_event_line_start\"), y && (E += \" dhx_cal_event_line_end\"), w && (l += \"<div class='dhx_event_resize dhx_event_resize_start'></div>\"), b && (l += \"<div class='dhx_event_resize dhx_event_resize_end'></div>\");\n        var D = t.templates.event_class(n.start_date, n.end_date, n);\n        D && (E += \" \" + D);\n        var x = n.color ? \"--dhx-scheduler-event-background:\" + n.color + \";\" : \"\",\n          S = n.textColor ? \"--dhx-scheduler-event-color:\" + n.textColor + \";\" : \"\",\n          N = [\"position:absolute\", \"top:\" + u + \"px\", \"left:\" + v + \"px\", \"width:\" + (m - v - (k ? 1 : 0)) + \"px\", \"height:\" + (this.xy.bar_height - 2) + \"px\", S, x, n._text_style || \"\"].join(\";\"),\n          M = \"<div event_id='\" + n.id + \"' \" + this.config.event_attribute + \"='\" + n.id + \"' class='\" + E + \"' style='\" + N + \"'\" + this._waiAria.eventBarAttrString(n) + \">\";\n        f && (M += l), t.getState().mode == \"month\" && (n = t.getEvent(n.id)), n._timed && (M += \"<span class='dhx_cal_event_clear_date'>\".concat(t.templates.event_bar_date(n.start_date, n.end_date, n), \"</span>\")), M += \"<div class='dhx_cal_event_line_content'>\", M += t.templates.event_bar_text(n.start_date, n.end_date, n) + \"</div>\", M += \"</div>\", M += \"</div>\", g.innerHTML = M, this._rendered.push(g.firstChild), s.appendChild(g.firstChild);\n      }\n    }, t._locate_event = function (n) {\n      for (var s = null; n && !s && n.getAttribute;) s = n.getAttribute(this.config.event_attribute), n = n.parentNode;\n      return s;\n    }, t.edit = function (n) {\n      this._edit_id != n && (this.editStop(!1, n), this._edit_id = n, this.updateEvent(n));\n    }, t.editStop = function (n, s) {\n      if (!s || this._edit_id != s) {\n        var c = this.getEvent(this._edit_id);\n        c && (n && (c.text = this._editor.value), this._edit_id = null, this._editor = null, this.updateEvent(c.id), this._edit_stop_event(c, n));\n      }\n    }, t._edit_stop_event = function (n, s) {\n      this._new_event ? (s ? this.callEvent(\"onEventAdded\", [n.id, n]) : n && this.deleteEvent(n.id, !0), this._new_event = null) : s && this.callEvent(\"onEventChanged\", [n.id, n]);\n    }, t.getEvents = function (n, s) {\n      var c = [];\n      for (var u in this._events) {\n        var v = this._events[u];\n        v && (!n && !s || v.start_date < s && v.end_date > n) && c.push(v);\n      }\n      return c;\n    }, t.getRenderedEvent = function (n) {\n      if (n) {\n        for (var s = t._rendered, c = 0; c < s.length; c++) {\n          var u = s[c];\n          if (u.getAttribute(t.config.event_attribute) == n) return u;\n        }\n        return null;\n      }\n    }, t.showEvent = function (n, s) {\n      n && typeof n == \"object\" && (s = n.mode, y = n.section, n = n.section);\n      var c = typeof n == \"number\" || typeof n == \"string\" ? t.getEvent(n) : n;\n      if (s = s || t._mode, c && (!this.checkEvent(\"onBeforeEventDisplay\") || this.callEvent(\"onBeforeEventDisplay\", [c, s]))) {\n        var u = t.config.scroll_hour;\n        t.config.scroll_hour = c.start_date.getHours();\n        var v = t.config.preserve_scroll;\n        t.config.preserve_scroll = !1;\n        var m = c.color,\n          l = c.textColor;\n        if (t.config.highlight_displayed_event && (c.color = t.config.displayed_event_color, c.textColor = t.config.displayed_event_text_color), t.setCurrentView(new Date(c.start_date), s), t.config.scroll_hour = u, t.config.preserve_scroll = v, t.matrix && t.matrix[s]) {\n          var f = t.getView(),\n            g = f.y_property,\n            p = t.getEvent(c.id);\n          if (p) {\n            if (!y) {\n              var y = p[g];\n              Array.isArray(y) ? y = y[0] : typeof y == \"string\" && t.config.section_delimiter && y.indexOf(t.config.section_delimiter) > -1 && (y = y.split(t.config.section_delimiter)[0]);\n            }\n            var w = f.getSectionTop(y),\n              b = f.posFromDate(p.start_date),\n              k = t.$container.querySelector(\".dhx_timeline_data_wrapper\");\n            if (b -= (k.offsetWidth - f.dx) / 2, w = w - k.offsetHeight / 2 + f.dy / 2, f._smartRenderingEnabled()) var E = f.attachEvent(\"onScroll\", function () {\n              D(), f.detachEvent(E);\n            });\n            f.scrollTo({\n              left: b,\n              top: w\n            }), f._smartRenderingEnabled() || D();\n          }\n        } else D();\n        t.callEvent(\"onAfterEventDisplay\", [c, s]);\n      }\n      function D() {\n        c.color = m, c.textColor = l;\n      }\n    };\n  }(h), function (t) {\n    t._append_drag_marker = function (n) {\n      if (!n.parentNode) {\n        var s = t._els.dhx_cal_data[0].lastChild,\n          c = t._getClassName(s);\n        c.indexOf(\"dhx_scale_holder\") < 0 && s.previousSibling && (s = s.previousSibling), c = t._getClassName(s), s && c.indexOf(\"dhx_scale_holder\") === 0 && s.appendChild(n);\n      }\n    }, t._update_marker_position = function (n, s) {\n      var c = t._calc_event_y(s, 0);\n      n.style.top = c.top + \"px\", n.style.height = c.height + \"px\";\n    }, t.highlightEventPosition = function (n) {\n      var s = document.createElement(\"div\");\n      s.setAttribute(\"event_id\", n.id), s.setAttribute(this.config.event_attribute, n.id), this._rendered.push(s), this._update_marker_position(s, n);\n      var c = this.templates.drag_marker_class(n.start_date, n.end_date, n),\n        u = this.templates.drag_marker_content(n.start_date, n.end_date, n);\n      s.className = \"dhx_drag_marker\", c && (s.className += \" \" + c), u && (s.innerHTML = u), this._append_drag_marker(s);\n    };\n  }(h), xe(h), function (t) {\n    function n() {\n      const s = t.config.csp === !0,\n        c = !!window.Sfdc || !!window.$A || window.Aura || \"$shadowResolver$\" in document.body;\n      return s || c ? t.$root : document.body;\n    }\n    t._lightbox_controls = {}, t.formSection = function (s) {\n      for (var c = this.config.lightbox.sections, u = 0; u < c.length && c[u].name != s; u++);\n      if (u === c.length) return null;\n      var v = c[u];\n      t._lightbox || t.getLightbox();\n      var m = t._lightbox.querySelector(\"#\".concat(v.id)),\n        l = m.nextSibling,\n        f = {\n          section: v,\n          header: m,\n          node: l,\n          getValue: function (p) {\n            return t.form_blocks[v.type].get_value(l, p || {}, v);\n          },\n          setValue: function (p, y) {\n            return t.form_blocks[v.type].set_value(l, p, y || {}, v);\n          }\n        },\n        g = t._lightbox_controls[\"get_\" + v.type + \"_control\"];\n      return g ? g(f) : f;\n    }, t._lightbox_controls.get_template_control = function (s) {\n      return s.control = s.node, s;\n    }, t._lightbox_controls.get_select_control = function (s) {\n      return s.control = s.node.getElementsByTagName(\"select\")[0], s;\n    }, t._lightbox_controls.get_textarea_control = function (s) {\n      return s.control = s.node.getElementsByTagName(\"textarea\")[0], s;\n    }, t._lightbox_controls.get_time_control = function (s) {\n      return s.control = s.node.getElementsByTagName(\"select\"), s;\n    }, t._lightbox_controls.defaults = {\n      template: {\n        height: 30\n      },\n      textarea: {\n        height: 200\n      },\n      select: {\n        height: 23\n      },\n      time: {\n        height: 20\n      }\n    }, t.form_blocks = {\n      template: {\n        render: function (s) {\n          return \"<div class='dhx_cal_ltext dhx_cal_template' ></div>\";\n        },\n        set_value: function (s, c, u, v) {\n          s.innerHTML = c || \"\";\n        },\n        get_value: function (s, c, u) {\n          return s.innerHTML || \"\";\n        },\n        focus: function (s) {}\n      },\n      textarea: {\n        render: function (s) {\n          return \"<div class='dhx_cal_ltext'><textarea \".concat(s.placeholder ? \"placeholder='\".concat(s.placeholder, \"'\") : \"\", \"></textarea></div>\");\n        },\n        set_value: function (s, c, u) {\n          t.form_blocks.textarea._get_input(s).value = c || \"\";\n        },\n        get_value: function (s, c) {\n          return t.form_blocks.textarea._get_input(s).value;\n        },\n        focus: function (s) {\n          var c = t.form_blocks.textarea._get_input(s);\n          t._focus(c, !0);\n        },\n        _get_input: function (s) {\n          return s.getElementsByTagName(\"textarea\")[0];\n        }\n      },\n      select: {\n        render: function (s) {\n          for (var c = \"<div class='dhx_cal_ltext dhx_cal_select'><select style='width:100%;'>\", u = 0; u < s.options.length; u++) c += \"<option value='\" + s.options[u].key + \"'>\" + s.options[u].label + \"</option>\";\n          return c + \"</select></div>\";\n        },\n        set_value: function (s, c, u, v) {\n          var m = s.firstChild;\n          !m._dhx_onchange && v.onchange && (t.event(m, \"change\", v.onchange), m._dhx_onchange = !0), c === void 0 && (c = (m.options[0] || {}).value), m.value = c || \"\";\n        },\n        get_value: function (s, c) {\n          return s.firstChild.value;\n        },\n        focus: function (s) {\n          var c = s.firstChild;\n          t._focus(c, !0);\n        }\n      },\n      time: {\n        render: function (s) {\n          s.time_format || (s.time_format = [\"%H:%i\", \"%d\", \"%m\", \"%Y\"]), s._time_format_order = {};\n          var c = s.time_format,\n            u = t.config,\n            v = t.date.date_part(t._currentDate()),\n            m = 1440,\n            l = 0;\n          t.config.limit_time_select && (m = 60 * u.last_hour + 1, l = 60 * u.first_hour, v.setHours(u.first_hour));\n          for (var f = \"\", g = 0; g < c.length; g++) {\n            var p = c[g];\n            g > 0 && (f += \" \");\n            var y = \"\",\n              w = \"\";\n            switch (p) {\n              case \"%Y\":\n                var b, k, E;\n                y = \"dhx_lightbox_year_select\", s._time_format_order[3] = g, s.year_range && (isNaN(s.year_range) ? s.year_range.push && (k = s.year_range[0], E = s.year_range[1]) : b = s.year_range), b = b || 10;\n                var D = D || Math.floor(b / 2);\n                k = k || v.getFullYear() - D, E = E || k + b;\n                for (var x = k; x < E; x++) w += \"<option value='\" + x + \"'>\" + x + \"</option>\";\n                break;\n              case \"%m\":\n                for (y = \"dhx_lightbox_month_select\", s._time_format_order[2] = g, x = 0; x < 12; x++) w += \"<option value='\" + x + \"'>\" + this.locale.date.month_full[x] + \"</option>\";\n                break;\n              case \"%d\":\n                for (y = \"dhx_lightbox_day_select\", s._time_format_order[1] = g, x = 1; x < 32; x++) w += \"<option value='\" + x + \"'>\" + x + \"</option>\";\n                break;\n              case \"%H:%i\":\n                y = \"dhx_lightbox_time_select\", s._time_format_order[0] = g, x = l;\n                var S = v.getDate();\n                for (s._time_values = []; x < m;) w += \"<option value='\" + x + \"'>\" + this.templates.time_picker(v) + \"</option>\", s._time_values.push(x), v.setTime(v.valueOf() + 60 * this.config.time_step * 1e3), x = 24 * (v.getDate() != S ? 1 : 0) * 60 + 60 * v.getHours() + v.getMinutes();\n            }\n            if (w) {\n              var N = t._waiAria.lightboxSelectAttrString(p);\n              f += \"<select class='\" + y + \"' \" + (s.readonly ? \"disabled='disabled'\" : \"\") + N + \">\" + w + \"</select> \";\n            }\n          }\n          return \"<div class='dhx_section_time'>\" + f + \"<span style='font-weight:normal; font-size:10pt;' class='dhx_section_time_spacer'> &nbsp;&ndash;&nbsp; </span>\" + f + \"</div>\";\n        },\n        set_value: function (s, c, u, v) {\n          var m,\n            l,\n            f = t.config,\n            g = s.getElementsByTagName(\"select\"),\n            p = v._time_format_order;\n          if (f.full_day) {\n            if (!s._full_day) {\n              var y = \"<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> \" + t.locale.labels.full_day + \"&nbsp;</label></input>\";\n              t.config.wide_form || (y = s.previousSibling.innerHTML + y), s.previousSibling.innerHTML = y, s._full_day = !0;\n            }\n            var w = s.previousSibling.getElementsByTagName(\"input\")[0];\n            w.checked = t.date.time_part(u.start_date) === 0 && t.date.time_part(u.end_date) === 0, g[p[0]].disabled = w.checked, g[p[0] + g.length / 2].disabled = w.checked, w.$_eventAttached || (w.$_eventAttached = !0, t.event(w, \"click\", function () {\n              if (w.checked) {\n                var D = {};\n                t.form_blocks.time.get_value(s, D, v), m = t.date.date_part(D.start_date), (+(l = t.date.date_part(D.end_date)) == +m || +l >= +m && (u.end_date.getHours() !== 0 || u.end_date.getMinutes() !== 0)) && (l = t.date.add(l, 1, \"day\"));\n              } else m = null, l = null;\n              g[p[0]].disabled = w.checked, g[p[0] + g.length / 2].disabled = w.checked, E(g, 0, m || u.start_date), E(g, 4, l || u.end_date);\n            }));\n          }\n          if (f.auto_end_date && f.event_duration) for (var b = function () {\n              f.auto_end_date && f.event_duration && (m = new Date(g[p[3]].value, g[p[2]].value, g[p[1]].value, 0, g[p[0]].value), l = new Date(m.getTime() + 60 * t.config.event_duration * 1e3), E(g, 4, l));\n            }, k = 0; k < 4; k++) g[k].$_eventAttached || (g[k].$_eventAttached = !0, t.event(g[k], \"change\", b));\n          function E(D, x, S) {\n            for (var N = v._time_values, M = 60 * S.getHours() + S.getMinutes(), A = M, C = !1, T = 0; T < N.length; T++) {\n              var O = N[T];\n              if (O === M) {\n                C = !0;\n                break;\n              }\n              O < M && (A = O);\n            }\n            D[x + p[0]].value = C ? M : A, C || A || (D[x + p[0]].selectedIndex = -1), D[x + p[1]].value = S.getDate(), D[x + p[2]].value = S.getMonth(), D[x + p[3]].value = S.getFullYear();\n          }\n          E(g, 0, u.start_date), E(g, 4, u.end_date);\n        },\n        get_value: function (s, c, u) {\n          var v = s.getElementsByTagName(\"select\"),\n            m = u._time_format_order;\n          if (c.start_date = new Date(v[m[3]].value, v[m[2]].value, v[m[1]].value, 0, v[m[0]].value), c.end_date = new Date(v[m[3] + 4].value, v[m[2] + 4].value, v[m[1] + 4].value, 0, v[m[0] + 4].value), !v[m[3]].value || !v[m[3] + 4].value) {\n            var l = t.getEvent(t._lightbox_id);\n            l && (c.start_date = l.start_date, c.end_date = l.end_date);\n          }\n          return c.end_date <= c.start_date && (c.end_date = t.date.add(c.start_date, t.config.time_step, \"minute\")), {\n            start_date: new Date(c.start_date),\n            end_date: new Date(c.end_date)\n          };\n        },\n        focus: function (s) {\n          t._focus(s.getElementsByTagName(\"select\")[0]);\n        }\n      }\n    }, t._setLbPosition = function (s) {\n      s && (s.style.top = Math.max(n().offsetHeight / 2 - s.offsetHeight / 2, 0) + \"px\", s.style.left = Math.max(n().offsetWidth / 2 - s.offsetWidth / 2, 0) + \"px\");\n    }, t.showCover = function (s) {\n      s && (s.style.display = \"block\", this._setLbPosition(s)), t.config.responsive_lightbox && (document.documentElement.classList.add(\"dhx_cal_overflow_container\"), n().classList.add(\"dhx_cal_overflow_container\")), this.show_cover(), this._cover.style.display = \"\";\n    }, t.showLightbox = function (s) {\n      if (s) if (this.callEvent(\"onBeforeLightbox\", [s])) {\n        this.showCover(c);\n        var c = this.getLightbox();\n        this._setLbPosition(c), this._fill_lightbox(s, c), this._waiAria.lightboxVisibleAttr(c), this.callEvent(\"onLightbox\", [s]);\n      } else this._new_event && (this._new_event = null);\n    }, t._fill_lightbox = function (s, c) {\n      var u = this.getEvent(s),\n        v = c.getElementsByTagName(\"span\"),\n        m = [];\n      if (t.templates.lightbox_header) {\n        m.push(\"\");\n        var l = t.templates.lightbox_header(u.start_date, u.end_date, u);\n        m.push(l), v[1].innerHTML = \"\", v[2].innerHTML = l;\n      } else {\n        var f = this.templates.event_header(u.start_date, u.end_date, u),\n          g = (this.templates.event_bar_text(u.start_date, u.end_date, u) || \"\").substr(0, 70);\n        m.push(f), m.push(g), v[1].innerHTML = f, v[2].innerHTML = g;\n      }\n      this._waiAria.lightboxHeader(c, m.join(\" \"));\n      for (var p = this.config.lightbox.sections, y = 0; y < p.length; y++) {\n        var w = p[y],\n          b = t._get_lightbox_section_node(w),\n          k = this.form_blocks[w.type],\n          E = u[w.map_to] !== void 0 ? u[w.map_to] : w.default_value;\n        k.set_value.call(this, b, E, u, w), p[y].focus && k.focus.call(this, b);\n      }\n      t._lightbox_id = s;\n    }, t._get_lightbox_section_node = function (s) {\n      return t._lightbox.querySelector(\"#\".concat(s.id)).nextSibling;\n    }, t._lightbox_out = function (s) {\n      for (var c = this.config.lightbox.sections, u = 0; u < c.length; u++) {\n        var v = t._lightbox.querySelector(\"#\".concat(c[u].id));\n        v = v && v.nextSibling;\n        var m = this.form_blocks[c[u].type].get_value.call(this, v, s, c[u]);\n        c[u].map_to != \"auto\" && (s[c[u].map_to] = m);\n      }\n      return s;\n    }, t._empty_lightbox = function (s) {\n      var c = t._lightbox_id,\n        u = this.getEvent(c);\n      this._lame_copy(u, s), this.setEvent(u.id, u), this._edit_stop_event(u, !0), this.render_view_data();\n    }, t.hide_lightbox = function (s) {\n      t.endLightbox(!1, this.getLightbox());\n    }, t.hideCover = function (s) {\n      s && (s.style.display = \"none\"), this.hide_cover(), t.config.responsive_lightbox && (document.documentElement.classList.remove(\"dhx_cal_overflow_container\"), n().classList.remove(\"dhx_cal_overflow_container\"));\n    }, t.hide_cover = function () {\n      this._cover && this._cover.parentNode.removeChild(this._cover), this._cover = null;\n    }, t.show_cover = function () {\n      this._cover || (this._cover = document.createElement(\"div\"), this._cover.className = \"dhx_cal_cover\", this._cover.style.display = \"none\", t.event(this._cover, \"mousemove\", t._move_while_dnd), t.event(this._cover, \"mouseup\", t._finish_dnd), n().appendChild(this._cover));\n    }, t.save_lightbox = function () {\n      var s = this._lightbox_out({}, this._lame_copy(this.getEvent(this._lightbox_id)));\n      this.checkEvent(\"onEventSave\") && !this.callEvent(\"onEventSave\", [this._lightbox_id, s, this._new_event]) || (this._empty_lightbox(s), this.hide_lightbox());\n    }, t.startLightbox = function (s, c) {\n      this._lightbox_id = s, this._custom_lightbox = !0, this._temp_lightbox = this._lightbox, this._lightbox = c, this.showCover(c);\n    }, t.endLightbox = function (s, c) {\n      c = c || t.getLightbox();\n      var u = t.getEvent(this._lightbox_id);\n      u && this._edit_stop_event(u, s), s && t.render_view_data(), this.hideCover(c), this._custom_lightbox && (this._lightbox = this._temp_lightbox, this._custom_lightbox = !1), this._temp_lightbox = this._lightbox_id = null, this._waiAria.lightboxHiddenAttr(c), this.resetLightbox(), this.callEvent(\"onAfterLightbox\", []);\n    }, t.resetLightbox = function () {\n      t._lightbox && !t._custom_lightbox && t._lightbox.parentNode.removeChild(t._lightbox), t._lightbox = null;\n    }, t.cancel_lightbox = function () {\n      this._lightbox_id && this.callEvent(\"onEventCancel\", [this._lightbox_id, !!this._new_event]), this.hide_lightbox();\n    }, t.hideLightbox = t.cancel_lightbox, t._init_lightbox_events = function () {\n      if (this.getLightbox().$_eventAttached) return;\n      const s = this.getLightbox();\n      s.$_eventAttached = !0, t.event(s, \"click\", function (c) {\n        c.target.closest(\".dhx_cal_ltitle_close_btn\") && t.cancel_lightbox();\n        const u = t.$domHelpers.closest(c.target, \".dhx_btn_set\");\n        if (!u) {\n          const l = t.$domHelpers.closest(c.target, \".dhx_custom_button[data-section-index]\");\n          if (l) {\n            const f = Number(l.getAttribute(\"data-section-index\"));\n            t.form_blocks[t.config.lightbox.sections[f].type].button_click(t.$domHelpers.closest(l, \".dhx_cal_lsection\"), l, c);\n          }\n          return;\n        }\n        const v = u ? u.getAttribute(\"data-action\") : null;\n        switch (v) {\n          case \"dhx_save_btn\":\n          case \"save\":\n            if (t.config.readonly_active) return;\n            t.save_lightbox();\n            break;\n          case \"dhx_delete_btn\":\n          case \"delete\":\n            if (t.config.readonly_active) return;\n            var m = t.locale.labels.confirm_deleting;\n            t._dhtmlx_confirm({\n              message: m,\n              title: t.locale.labels.title_confirm_deleting,\n              callback: function () {\n                t.deleteEvent(t._lightbox_id), t._new_event = null, t.hide_lightbox();\n              },\n              config: {\n                ok: t.locale.labels.icon_delete\n              }\n            });\n            break;\n          case \"dhx_cancel_btn\":\n          case \"cancel\":\n            t.cancel_lightbox();\n            break;\n          default:\n            t.callEvent(\"onLightboxButton\", [v, u, c]);\n        }\n      }), t.event(s, \"keydown\", function (c) {\n        var u = c || window.event,\n          v = c.target || c.srcElement,\n          m = v.querySelector(\"[dhx_button]\");\n        switch (m || (m = v.parentNode.querySelector(\".dhx_custom_button, .dhx_readonly\")), (c || u).keyCode) {\n          case 32:\n            if ((c || u).shiftKey) return;\n            m && m.click && m.click();\n            break;\n          case t.keys.edit_save:\n            if ((c || u).shiftKey) return;\n            if (m && m.click) m.click();else {\n              if (t.config.readonly_active) return;\n              t.save_lightbox();\n            }\n            break;\n          case t.keys.edit_cancel:\n            t.cancel_lightbox();\n        }\n      });\n    }, t.setLightboxSize = function () {}, t._init_dnd_events = function () {\n      t.event(n(), \"mousemove\", t._move_while_dnd), t.event(n(), \"mouseup\", t._finish_dnd), t._init_dnd_events = function () {};\n    }, t._move_while_dnd = function (s) {\n      if (t._dnd_start_lb) {\n        document.dhx_unselectable || (n().classList.add(\"dhx_unselectable\"), document.dhx_unselectable = !0);\n        var c = t.getLightbox(),\n          u = [s.pageX, s.pageY];\n        c.style.top = t._lb_start[1] + u[1] - t._dnd_start_lb[1] + \"px\", c.style.left = t._lb_start[0] + u[0] - t._dnd_start_lb[0] + \"px\";\n      }\n    }, t._ready_to_dnd = function (s) {\n      var c = t.getLightbox();\n      t._lb_start = [c.offsetLeft, c.offsetTop], t._dnd_start_lb = [s.pageX, s.pageY];\n    }, t._finish_dnd = function () {\n      t._lb_start && (t._lb_start = t._dnd_start_lb = !1, n().classList.remove(\"dhx_unselectable\"), document.dhx_unselectable = !1);\n    }, t.getLightbox = function () {\n      if (!this._lightbox) {\n        var s = document.createElement(\"div\");\n        s.className = \"dhx_cal_light\", t.config.wide_form && (s.className += \" dhx_cal_light_wide\"), t.form_blocks.recurring && (s.className += \" dhx_cal_light_rec\"), t.config.rtl && (s.className += \" dhx_cal_light_rtl\"), t.config.responsive_lightbox && (s.className += \" dhx_cal_light_responsive\"), s.style.visibility = \"hidden\";\n        var c = this._lightbox_template,\n          u = this.config.buttons_left;\n        c += \"<div class='dhx_cal_lcontrols'>\";\n        for (var v = 0; v < u.length; v++) c += \"<div \" + this._waiAria.lightboxButtonAttrString(u[v]) + \" data-action='\" + u[v] + \"' class='dhx_btn_set dhx_\" + (t.config.rtl ? \"right\" : \"left\") + \"_btn_set \" + u[v] + \"_set'><div class='dhx_btn_inner \" + u[v] + \"'></div><div>\" + t.locale.labels[u[v]] + \"</div></div>\";\n        u = this.config.buttons_right;\n        var m = t.config.rtl;\n        for (v = 0; v < u.length; v++) c += \"<div class='dhx_cal_lcontrols_push_right'></div>\", c += \"<div \" + this._waiAria.lightboxButtonAttrString(u[v]) + \" data-action='\" + u[v] + \"' class='dhx_btn_set dhx_\" + (m ? \"left\" : \"right\") + \"_btn_set \" + u[v] + \"_set'><div class='dhx_btn_inner \" + u[v] + \"'></div><div>\" + t.locale.labels[u[v]] + \"</div></div>\";\n        c += \"</div>\", c += \"</div>\", s.innerHTML = c, t.config.drag_lightbox && (t.event(s.firstChild, \"mousedown\", t._ready_to_dnd), t.event(s.firstChild, \"selectstart\", function (b) {\n          return b.preventDefault(), !1;\n        }), s.firstChild.style.cursor = \"move\", t._init_dnd_events()), this._waiAria.lightboxAttr(s), this.show_cover(), this._cover.insertBefore(s, this._cover.firstChild), this._lightbox = s;\n        var l = this.config.lightbox.sections;\n        for (c = \"\", v = 0; v < l.length; v++) {\n          var f = this.form_blocks[l[v].type];\n          if (f) {\n            l[v].id = \"area_\" + this.uid();\n            var g = \"\";\n            l[v].button && (g = \"<div \" + t._waiAria.lightboxSectionButtonAttrString(this.locale.labels[\"button_\" + l[v].button]) + \" class='dhx_custom_button' data-section-index='\" + v + \"' index='\" + v + \"'><div class='dhx_custom_button_\" + l[v].button + \"'></div><div>\" + this.locale.labels[\"button_\" + l[v].button] + \"</div></div>\"), this.config.wide_form && (c += \"<div class='dhx_wrap_section'>\");\n            var p = this.locale.labels[\"section_\" + l[v].name];\n            typeof p != \"string\" && (p = l[v].name), c += \"<div id='\" + l[v].id + \"' class='dhx_cal_lsection'>\" + g + \"<label>\" + p + \"</label></div>\" + f.render.call(this, l[v]), c += \"</div>\";\n          }\n        }\n        var y = s.getElementsByTagName(\"div\");\n        for (v = 0; v < y.length; v++) {\n          var w = y[v];\n          if (t._getClassName(w) == \"dhx_cal_larea\") {\n            w.innerHTML = c;\n            break;\n          }\n        }\n        t._bindLightboxLabels(l), this.setLightboxSize(), this._init_lightbox_events(this), s.style.visibility = \"visible\";\n      }\n      return this._lightbox;\n    }, t._bindLightboxLabels = function (s) {\n      for (var c = 0; c < s.length; c++) {\n        var u = s[c];\n        if (u.id && t._lightbox.querySelector(\"#\".concat(u.id))) {\n          for (var v = t._lightbox.querySelector(\"#\".concat(u.id)).querySelector(\"label\"), m = t._get_lightbox_section_node(u); m && !m.querySelector;) m = m.nextSibling;\n          var l = !0;\n          if (m) {\n            var f = m.querySelector(\"input, select, textarea\");\n            f && (u.inputId = f.id || \"input_\" + t.uid(), f.id || (f.id = u.inputId), v.setAttribute(\"for\", u.inputId), l = !1);\n          }\n          l && t.form_blocks[u.type].focus && t.event(v, \"click\", function (g) {\n            return function () {\n              var p = t.form_blocks[g.type],\n                y = t._get_lightbox_section_node(g);\n              p && p.focus && p.focus.call(t, y);\n            };\n          }(u));\n        }\n      }\n    }, t.attachEvent(\"onEventIdChange\", function (s, c) {\n      this._lightbox_id == s && (this._lightbox_id = c);\n    }), t._lightbox_template = \"<div class='dhx_cal_ltitle'><div class=\\\"dhx_cal_ltitle_descr\\\"><span class='dhx_mark'>&nbsp;</span><span class='dhx_time'></span><span class='dhx_title'></span>\\n</div>\\n<div class=\\\"dhx_cal_ltitle_controls\\\">\\n<a class=\\\"dhx_cal_ltitle_close_btn scheduler_icon close\\\"></a>\\n</div></div><div class='dhx_cal_larea'></div>\";\n  }(h), we(h), function (t) {\n    t.getRootView = function () {\n      return {\n        view: {\n          render: function () {\n            return {\n              tag: \"div\",\n              type: 1,\n              attrs: {\n                style: \"width:100%;height:100%;\"\n              },\n              hooks: {\n                didInsert: function () {\n                  t.setCurrentView();\n                }\n              },\n              body: [{\n                el: this.el,\n                type: 1\n              }]\n            };\n          },\n          init: function () {\n            var n = document.createElement(\"DIV\");\n            n.id = \"scheduler_\" + t.uid(), n.style.width = \"100%\", n.style.height = \"100%\", n.classList.add(\"dhx_cal_container\"), n.cmp = \"grid\", n.innerHTML = '<div class=\"dhx_cal_navline\"><div class=\"dhx_cal_prev_button\"></div><div class=\"dhx_cal_next_button\"></div><div class=\"dhx_cal_today_button\"></div><div class=\"dhx_cal_date\"></div><div class=\"dhx_cal_tab\" data-tab=\"day\"></div><div class=\"dhx_cal_tab\" data-tab=\"week\"></div><div class=\"dhx_cal_tab\" data-tab=\"month\"></div></div><div class=\"dhx_cal_header\"></div><div class=\"dhx_cal_data\"></div>', t.init(n), this.el = n;\n          }\n        },\n        type: 4\n      };\n    };\n  }(h), ke(h), window.jQuery && (r = window.jQuery, d = 0, i = [], r.fn.dhx_scheduler = function (t) {\n    if (typeof t != \"string\") {\n      var n = [];\n      return this.each(function () {\n        if (this && this.getAttribute) if (this.getAttribute(\"dhxscheduler\")) n.push(window[this.getAttribute(\"dhxscheduler\")]);else {\n          var s = \"scheduler\";\n          d && (s = \"scheduler\" + (d + 1), window[s] = Scheduler.getSchedulerInstance());\n          var c = window[s];\n          for (var u in this.setAttribute(\"dhxscheduler\", s), t) u != \"data\" && (c.config[u] = t[u]);\n          this.getElementsByTagName(\"div\").length || (this.innerHTML = '<div class=\"dhx_cal_navline\"><div class=\"dhx_cal_prev_button\"></div><div class=\"dhx_cal_next_button\"></div><div class=\"dhx_cal_today_button\"></div><div class=\"dhx_cal_date\"></div><div class=\"dhx_cal_tab\" name=\"day_tab\" data-tab=\"day\" style=\"right:204px;\"></div><div class=\"dhx_cal_tab\" name=\"week_tab\" data-tab=\"week\" style=\"right:140px;\"></div><div class=\"dhx_cal_tab\" name=\"month_tab\" data-tab=\"month\" style=\"right:76px;\"></div></div><div class=\"dhx_cal_header\"></div><div class=\"dhx_cal_data\"></div>', this.className += \" dhx_cal_container\"), c.init(this, c.config.date, c.config.mode), t.data && c.parse(t.data), n.push(c), d++;\n        }\n      }), n.length === 1 ? n[0] : n;\n    }\n    if (i[t]) return i[t].apply(this, []);\n    r.error(\"Method \" + t + \" does not exist on jQuery.dhx_scheduler\");\n  }), function (t) {\n    (function () {\n      var n = t.setCurrentView,\n        s = t.updateView,\n        c = null,\n        u = null,\n        v = function (f, g) {\n          var p = this;\n          I.clearTimeout(u), I.clearTimeout(c);\n          var y = p._date,\n            w = p._mode;\n          l(this, f, g), u = setTimeout(function () {\n            t.$destroyed || (p.callEvent(\"onBeforeViewChange\", [w, y, g || p._mode, f || p._date]) ? (s.call(p, f, g), p.callEvent(\"onViewChange\", [p._mode, p._date]), I.clearTimeout(c), u = 0) : l(p, y, w));\n          }, t.config.delay_render);\n        },\n        m = function (f, g) {\n          var p = this,\n            y = arguments;\n          l(this, f, g), I.clearTimeout(c), c = setTimeout(function () {\n            t.$destroyed || u || s.apply(p, y);\n          }, t.config.delay_render);\n        };\n      function l(f, g, p) {\n        g && (f._date = g), p && (f._mode = p);\n      }\n      t.attachEvent(\"onSchedulerReady\", function () {\n        t.config.delay_render ? (t.setCurrentView = v, t.updateView = m) : (t.setCurrentView = n, t.updateView = s);\n      });\n    })();\n  }(h), function (t) {\n    t.createDataProcessor = function (n) {\n      var s, c;\n      n instanceof Function ? s = n : n.hasOwnProperty(\"router\") ? s = n.router : n.hasOwnProperty(\"event\") && (s = n), c = s ? \"CUSTOM\" : n.mode || \"REST-JSON\";\n      var u = new G(n.url);\n      return u.init(t), u.setTransactionMode({\n        mode: c,\n        router: s\n      }, n.batchUpdate), u;\n    }, t.DataProcessor = G;\n  }(h), function (t) {\n    t.attachEvent(\"onSchedulerReady\", function () {\n      typeof dhtmlxError < \"u\" && window.dhtmlxError.catchError(\"LoadXML\", function (n, s, c) {\n        var u = c[0].responseText;\n        switch (t.config.ajax_error) {\n          case \"alert\":\n            I.alert(u);\n            break;\n          case \"console\":\n            I.console.log(u);\n        }\n      });\n    });\n  }(h);\n  const _ = new qe({\n    en: He,\n    ar: Se,\n    be: Ne,\n    ca: Me,\n    cn: Ae,\n    cs: Ce,\n    da: Te,\n    de: Oe,\n    el: $e,\n    es: Le,\n    fi: ze,\n    fr: je,\n    he: Pe,\n    hu: Ve,\n    id: Ie,\n    it: Be,\n    jp: Re,\n    nb: Fe,\n    nl: Je,\n    no: Ue,\n    pl: Ye,\n    pt: We,\n    ro: Ke,\n    ru: Ge,\n    si: Xe,\n    sk: Ze,\n    sv: Qe,\n    tr: et,\n    ua: tt\n  });\n  h.i18n = {\n    addLocale: _.addLocale,\n    setLocale: function (t) {\n      if (typeof t == \"string\") {\n        var n = _.getLocale(t);\n        n || (n = _.getLocale(\"en\")), h.locale = n;\n      } else if (t) if (h.locale) for (var s in t) t[s] && typeof t[s] == \"object\" ? (h.locale[s] || (h.locale[s] = {}), h.mixin(h.locale[s], t[s], !0)) : h.locale[s] = t[s];else h.locale = t;\n      var c = h.locale.labels;\n      c.dhx_save_btn = c.icon_save, c.dhx_cancel_btn = c.icon_cancel, c.dhx_delete_btn = c.icon_delete, h.$container && h.get_elements();\n    },\n    getLocale: _.getLocale\n  }, h.i18n.setLocale(\"en\"), h.ext = {};\n  const o = {};\n  return h.plugins = function (t) {\n    (function (s, c, u) {\n      const v = [];\n      for (const m in s) if (s[m]) {\n        const l = m.toLowerCase();\n        c[l] && c[l].forEach(function (f) {\n          const g = f.toLowerCase();\n          s[g] || v.push(g);\n        }), v.push(l);\n      }\n      return v.sort(function (m, l) {\n        const f = u[m] || 0,\n          g = u[l] || 0;\n        return f > g ? 1 : f < g ? -1 : 0;\n      }), v;\n    })(t, {\n      treetimeline: [\"timeline\"],\n      daytimeline: [\"timeline\"],\n      outerdrag: [\"legacy\"]\n    }, {\n      legacy: 1,\n      limit: 1,\n      timeline: 2,\n      daytimeline: 3,\n      treetimeline: 3,\n      outerdrag: 6\n    }).forEach(function (s) {\n      if (!o[s]) {\n        const c = e.getExtension(s);\n        if (!c) throw new Error(\"unknown plugin \" + s);\n        c(h), o[s] = !0;\n      }\n    });\n  }, h;\n}\nclass it {\n  constructor(h) {\n    this._extensions = {};\n    for (const a in h) this._extensions[a] = h[a];\n  }\n  addExtension(h, a) {\n    this._extensions[h] = a;\n  }\n  getExtension(h) {\n    return this._extensions[h];\n  }\n}\ntypeof dhtmlx < \"u\" && dhtmlx.attaches && (dhtmlx.attaches.attachScheduler = function (e, h, a, r) {\n  a = a || '<div class=\"dhx_cal_tab\" name=\"day_tab\" data-tab=\"day\" style=\"right:204px;\"></div><div class=\"dhx_cal_tab\" name=\"week_tab\" data-tab=\"week\" style=\"right:140px;\"></div><div class=\"dhx_cal_tab\" name=\"month_tab\" data-tab=\"month\" style=\"right:76px;\"></div>';\n  var d = document.createElement(\"DIV\");\n  return d.id = \"dhxSchedObj_\" + this._genStr(12), d.innerHTML = '<div id=\"' + d.id + '\" class=\"dhx_cal_container\" style=\"width:100%; height:100%;\"><div class=\"dhx_cal_navline\"><div class=\"dhx_cal_prev_button\"></div><div class=\"dhx_cal_next_button\"></div><div class=\"dhx_cal_today_button\"></div><div class=\"dhx_cal_date\"></div>' + a + '</div><div class=\"dhx_cal_header\"></div><div class=\"dhx_cal_data\"></div></div>', document.body.appendChild(d.firstChild), this.attachObject(d.id, !1, !0), this.vs[this.av].sched = r, this.vs[this.av].schedId = d.id, r.setSizes = r.updateView, r.destructor = function () {}, r.init(d.id, e, h), this.vs[this._viewRestore()].sched;\n});\nconst R = (e, h) => {\n  h(!1, \"The \".concat(e, \" extension is not included in this version of dhtmlxScheduler.<br>\\n\\t\\tYou may need a <a href=\\\"https://docs.dhtmlx.com/scheduler/editions_comparison.html\\\" target=\\\"_blank\\\">Professional version of the component</a>.<br>\\n\\t\\tContact us at <a href=\\\"https://dhtmlx.com/docs/contact.shtml\\\" target=\\\"_blank\\\">https://dhtmlx.com/docs/contact.shtml</a> if you have any questions.\"));\n};\nfunction rt(e) {\n  (function () {\n    var h = [];\n    function a() {\n      return !!h.length;\n    }\n    function r(o) {\n      setTimeout(function () {\n        if (e.$destroyed) return !0;\n        a() || function (t, n) {\n          for (; t && t != n;) t = t.parentNode;\n          return t == n;\n        }(document.activeElement, e.$container) || e.focus();\n      }, 1);\n    }\n    function d(o) {\n      var t = (o = o || window.event).currentTarget;\n      t == h[h.length - 1] && e.$keyboardNavigation.trapFocus(t, o);\n    }\n    if (e.attachEvent(\"onLightbox\", function () {\n      var o;\n      o = e.getLightbox(), e.eventRemove(o, \"keydown\", d), e.event(o, \"keydown\", d), h.push(o);\n    }), e.attachEvent(\"onAfterLightbox\", function () {\n      var o = h.pop();\n      o && e.eventRemove(o, \"keydown\", d), r();\n    }), e.attachEvent(\"onAfterQuickInfo\", function () {\n      r();\n    }), !e._keyNavMessagePopup) {\n      e._keyNavMessagePopup = !0;\n      var i = null,\n        _ = null;\n      const o = [];\n      e.attachEvent(\"onMessagePopup\", function (t) {\n        for (i = document.activeElement, _ = i; _ && e._getClassName(_).indexOf(\"dhx_cal_data\") < 0;) _ = _.parentNode;\n        _ && (_ = _.parentNode), e.eventRemove(t, \"keydown\", d), e.event(t, \"keydown\", d), o.push(t);\n      }), e.attachEvent(\"onAfterMessagePopup\", function () {\n        var t = o.pop();\n        t && e.eventRemove(t, \"keydown\", d), setTimeout(function () {\n          if (e.$destroyed) return !0;\n          for (var n = document.activeElement; n && e._getClassName(n).indexOf(\"dhx_cal_light\") < 0;) n = n.parentNode;\n          n || (i && i.parentNode ? i.focus() : _ && _.parentNode && _.focus(), i = null, _ = null);\n        }, 1);\n      });\n    }\n    e.$keyboardNavigation.isModal = a;\n  })();\n}\nfunction ot(e) {\n  e._temp_key_scope = function () {\n    e.config.key_nav = !0, e.$keyboardNavigation._pasteDate = null, e.$keyboardNavigation._pasteSection = null;\n    var h = null,\n      a = {};\n    function r(_) {\n      _ = _ || window.event, a.x = _.clientX, a.y = _.clientY;\n    }\n    function d() {\n      for (var _, o, t = document.elementFromPoint(a.x, a.y); t && t != e._obj;) t = t.parentNode;\n      return _ = t == e._obj, o = e.$keyboardNavigation.dispatcher.isEnabled(), _ || o;\n    }\n    function i(_) {\n      return e._lame_copy({}, _);\n    }\n    document.body ? e.event(document.body, \"mousemove\", r) : e.event(window, \"load\", function () {\n      e.event(document.body, \"mousemove\", r);\n    }), e.attachEvent(\"onMouseMove\", function (_, o) {\n      var t = e.getState();\n      if (t.mode && t.min_date) {\n        var n = e.getActionData(o);\n        e.$keyboardNavigation._pasteDate = n.date, e.$keyboardNavigation._pasteSection = n.section;\n      }\n    }), e._make_pasted_event = function (_) {\n      var o = e.$keyboardNavigation._pasteDate,\n        t = e.$keyboardNavigation._pasteSection,\n        n = _.end_date - _.start_date,\n        s = i(_);\n      if (function (u) {\n        delete u.rec_type, delete u.rec_pattern, delete u.event_pid, delete u.event_length;\n      }(s), s.start_date = new Date(o), s.end_date = new Date(s.start_date.valueOf() + n), t) {\n        var c = e._get_section_property();\n        e.config.multisection ? s[c] = _[c] : s[c] = t;\n      }\n      return s;\n    }, e._do_paste = function (_, o, t) {\n      e.callEvent(\"onBeforeEventPasted\", [_, o, t]) !== !1 && (e.addEvent(o), e.callEvent(\"onEventPasted\", [_, o, t]));\n    }, e._is_key_nav_active = function () {\n      return !(!this._is_initialized() || this._is_lightbox_open() || !this.config.key_nav);\n    }, e.event(document, \"keydown\", function (_) {\n      (_.ctrlKey || _.metaKey) && _.keyCode == 86 && e._buffer_event && !e.$keyboardNavigation.dispatcher.isEnabled() && (e.$keyboardNavigation.dispatcher.isActive = d());\n    }), e._key_nav_copy_paste = function (_) {\n      if (!e._is_key_nav_active()) return !0;\n      if (_.keyCode == 37 || _.keyCode == 39) {\n        _.cancelBubble = !0;\n        var o = e.date.add(e._date, _.keyCode == 37 ? -1 : 1, e._mode);\n        return e.setCurrentView(o), !0;\n      }\n      var t,\n        n = (t = e.$keyboardNavigation.dispatcher.getActiveNode()) && t.eventId ? t.eventId : e._select_id;\n      if ((_.ctrlKey || _.metaKey) && _.keyCode == 67) return n && (e._buffer_event = i(e.getEvent(n)), h = !0, e.callEvent(\"onEventCopied\", [e.getEvent(n)])), !0;\n      if ((_.ctrlKey || _.metaKey) && _.keyCode == 88 && n) {\n        h = !1;\n        var s = e._buffer_event = i(e.getEvent(n));\n        e.updateEvent(s.id), e.callEvent(\"onEventCut\", [s]);\n      }\n      if ((_.ctrlKey || _.metaKey) && _.keyCode == 86 && d()) {\n        if (s = (s = e._buffer_event ? e.getEvent(e._buffer_event.id) : e._buffer_event) || e._buffer_event) {\n          var c = e._make_pasted_event(s);\n          h ? (c.id = e.uid(), e._do_paste(h, c, s)) : e.callEvent(\"onBeforeEventChanged\", [c, _, !1, s]) && (e._do_paste(h, c, s), h = !0);\n        }\n        return !0;\n      }\n    };\n  }, e._temp_key_scope();\n}\nfunction st(e) {\n  e.$keyboardNavigation.attachSchedulerHandlers = function () {\n    var h,\n      a = e.$keyboardNavigation.dispatcher,\n      r = function (t) {\n        if (e.config.key_nav) return a.keyDownHandler(t);\n      },\n      d = function () {\n        a.keepScrollPosition(function () {\n          a.focusGlobalNode();\n        });\n      };\n    e.attachEvent(\"onDataRender\", function () {\n      e.config.key_nav && a.isEnabled() && !e.getState().editor_id && (clearTimeout(h), h = setTimeout(function () {\n        if (e.$destroyed) return !0;\n        a.isEnabled() || a.enable(), i();\n      }));\n    });\n    var i = function () {\n      if (a.isEnabled()) {\n        var t = a.getActiveNode();\n        t && (t.isValid() || (t = t.fallback()), !t || t instanceof e.$keyboardNavigation.MinicalButton || t instanceof e.$keyboardNavigation.MinicalCell || a.keepScrollPosition(function () {\n          t.focus(!0);\n        }));\n      }\n    };\n    function _(t) {\n      if (!e.config.key_nav) return !0;\n      const n = e.getView();\n      let s = !1;\n      if (e.getState().mode === \"month\") s = e.$keyboardNavigation.isChildOf(t.target || t.srcElement, e.$container.querySelector(\".dhx_cal_month_table\"));else if (n && n.layout === \"timeline\") s = e.$keyboardNavigation.isChildOf(t.target || t.srcElement, e.$container.querySelector(\".dhx_timeline_data_col\"));else {\n        const v = e.$container.querySelectorAll(\".dhx_scale_holder\");\n        s = Array.from(v).some(m => m === t.target.parentNode);\n      }\n      var c,\n        u = e.getActionData(t);\n      e._locate_event(t.target || t.srcElement) ? c = new e.$keyboardNavigation.Event(e._locate_event(t.target || t.srcElement)) : s && (c = new e.$keyboardNavigation.TimeSlot(), u.date && s && (c = c.nextSlot(new e.$keyboardNavigation.TimeSlot(u.date, null, u.section)))), c && (a.isEnabled() ? u.date && s && a.delay(function () {\n        a.setActiveNode(c);\n      }) : a.activeNode = c);\n    }\n    e.attachEvent(\"onSchedulerReady\", function () {\n      var t = e.$container;\n      e.eventRemove(document, \"keydown\", r), e.eventRemove(t, \"mousedown\", _), e.eventRemove(t, \"focus\", d), e.config.key_nav ? (e.event(document, \"keydown\", r), e.event(t, \"mousedown\", _), e.event(t, \"focus\", d), t.setAttribute(\"tabindex\", \"0\")) : t.removeAttribute(\"tabindex\");\n    });\n    var o = e.updateEvent;\n    e.updateEvent = function (t) {\n      var n = o.apply(this, arguments);\n      if (e.config.key_nav && a.isEnabled() && e.getState().select_id == t) {\n        var s = new e.$keyboardNavigation.Event(t);\n        e.getState().lightbox_id || function (c) {\n          if (e.config.key_nav && a.isEnabled()) {\n            var u = c,\n              v = new e.$keyboardNavigation.Event(u.eventId);\n            if (!v.isValid()) {\n              var m = v.start || u.start,\n                l = v.end || u.end,\n                f = v.section || u.section;\n              (v = new e.$keyboardNavigation.TimeSlot(m, l, f)).isValid() || (v = new e.$keyboardNavigation.TimeSlot());\n            }\n            a.setActiveNode(v);\n            var g = a.getActiveNode();\n            g && g.getNode && document.activeElement != g.getNode() && a.focusNode(a.getActiveNode());\n          }\n        }(s);\n      }\n      return n;\n    }, e.attachEvent(\"onEventDeleted\", function (t) {\n      return e.config.key_nav && a.isEnabled() && a.getActiveNode().eventId == t && a.setActiveNode(new e.$keyboardNavigation.TimeSlot()), !0;\n    }), e.attachEvent(\"onClearAll\", function () {\n      if (!e.config.key_nav) return !0;\n      a.isEnabled() && a.getActiveNode() instanceof e.$keyboardNavigation.Event && a.setActiveNode(new e.$keyboardNavigation.TimeSlot());\n    });\n  };\n}\nclass dt {\n  constructor(h) {\n    this._scheduler = h;\n  }\n  getNode() {\n    const h = this._scheduler;\n    return this._tooltipNode || (this._tooltipNode = document.createElement(\"div\"), this._tooltipNode.className = \"dhtmlXTooltip scheduler_tooltip tooltip\", h._waiAria.tooltipAttr(this._tooltipNode)), h.config.rtl ? this._tooltipNode.classList.add(\"dhtmlXTooltip_rtl\") : this._tooltipNode.classList.remove(\"dhtmlXTooltip_rtl\"), this._tooltipNode;\n  }\n  setViewport(h) {\n    return this._root = h, this;\n  }\n  show(h, a) {\n    const r = this._scheduler,\n      d = r.$domHelpers,\n      i = document.body,\n      _ = this.getNode();\n    if (d.isChildOf(_, i) || (this.hide(), i.appendChild(_)), this._isLikeMouseEvent(h)) {\n      const o = this._calculateTooltipPosition(h);\n      a = o.top, h = o.left;\n    }\n    return _.style.top = a + \"px\", _.style.left = h + \"px\", r._waiAria.tooltipVisibleAttr(_), this;\n  }\n  hide() {\n    const h = this._scheduler,\n      a = this.getNode();\n    return a && a.parentNode && a.parentNode.removeChild(a), h._waiAria.tooltipHiddenAttr(a), this;\n  }\n  setContent(h) {\n    return this.getNode().innerHTML = h, this;\n  }\n  _isLikeMouseEvent(h) {\n    return !(!h || typeof h != \"object\") && \"clientX\" in h && \"clientY\" in h;\n  }\n  _getViewPort() {\n    return this._root || document.body;\n  }\n  _calculateTooltipPosition(h) {\n    const a = this._scheduler,\n      r = a.$domHelpers,\n      d = this._getViewPortSize(),\n      i = this.getNode(),\n      _ = {\n        top: 0,\n        left: 0,\n        width: i.offsetWidth,\n        height: i.offsetHeight,\n        bottom: 0,\n        right: 0\n      },\n      o = a.config.tooltip_offset_x,\n      t = a.config.tooltip_offset_y,\n      n = document.body,\n      s = r.getRelativeEventPosition(h, n),\n      c = r.getNodePosition(n);\n    s.y += c.y, _.top = s.y, _.left = s.x, _.top += t, _.left += o, _.bottom = _.top + _.height, _.right = _.left + _.width;\n    const u = window.scrollY + n.scrollTop;\n    return _.top < d.top - u ? (_.top = d.top, _.bottom = _.top + _.height) : _.bottom > d.bottom && (_.bottom = d.bottom, _.top = _.bottom - _.height), _.left < d.left ? (_.left = d.left, _.right = d.left + _.width) : _.right > d.right && (_.right = d.right, _.left = _.right - _.width), s.x >= _.left && s.x <= _.right && (_.left = s.x - _.width - o, _.right = _.left + _.width), s.y >= _.top && s.y <= _.bottom && (_.top = s.y - _.height - t, _.bottom = _.top + _.height), _;\n  }\n  _getViewPortSize() {\n    const h = this._scheduler,\n      a = h.$domHelpers,\n      r = this._getViewPort();\n    let d,\n      i = r,\n      _ = window.scrollY + document.body.scrollTop,\n      o = window.scrollX + document.body.scrollLeft;\n    return r === h.$event_data ? (i = h.$event, _ = 0, o = 0, d = a.getNodePosition(h.$event)) : d = a.getNodePosition(i), {\n      left: d.x + o,\n      top: d.y + _,\n      width: d.width,\n      height: d.height,\n      bottom: d.y + d.height + _,\n      right: d.x + d.width + o\n    };\n  }\n}\nclass _t {\n  constructor(h) {\n    this._listeners = {}, this.tooltip = new dt(h), this._scheduler = h, this._domEvents = h._createDomEventScope(), this._initDelayedFunctions();\n  }\n  destructor() {\n    this.tooltip.hide(), this._domEvents.detachAll();\n  }\n  hideTooltip() {\n    this.delayHide();\n  }\n  attach(h) {\n    let a = document.body;\n    const r = this._scheduler,\n      d = r.$domHelpers;\n    h.global || (a = r.$root);\n    let i = null;\n    const _ = o => {\n      const t = d.getTargetNode(o),\n        n = d.closest(t, h.selector);\n      if (d.isChildOf(t, this.tooltip.getNode())) return;\n      const s = () => {\n        i = n, h.onmouseenter(o, n);\n      };\n      i ? n && n === i ? h.onmousemove(o, n) : (h.onmouseleave(o, i), i = null, n && n !== i && s()) : n && s();\n    };\n    this.detach(h.selector), this._domEvents.attach(a, \"mousemove\", _), this._listeners[h.selector] = {\n      node: a,\n      handler: _\n    };\n  }\n  detach(h) {\n    const a = this._listeners[h];\n    a && this._domEvents.detach(a.node, \"mousemove\", a.handler);\n  }\n  tooltipFor(h) {\n    const a = r => {\n      let d = r;\n      return document.createEventObject && !document.createEvent && (d = document.createEventObject(r)), d;\n    };\n    this._initDelayedFunctions(), this.attach({\n      selector: h.selector,\n      global: h.global,\n      onmouseenter: (r, d) => {\n        const i = h.html(r, d);\n        i && this.delayShow(a(r), i);\n      },\n      onmousemove: (r, d) => {\n        const i = h.html(r, d);\n        i ? this.delayShow(a(r), i) : (this.delayShow.$cancelTimeout(), this.delayHide());\n      },\n      onmouseleave: () => {\n        this.delayShow.$cancelTimeout(), this.delayHide();\n      }\n    });\n  }\n  _initDelayedFunctions() {\n    const h = this._scheduler;\n    this.delayShow && this.delayShow.$cancelTimeout(), this.delayHide && this.delayHide.$cancelTimeout(), this.tooltip.hide(), this.delayShow = V.delay((a, r) => {\n      h.callEvent(\"onBeforeTooltip\", [a]) === !1 ? this.tooltip.hide() : (this.tooltip.setContent(r), this.tooltip.show(a));\n    }, h.config.tooltip_timeout || 1), this.delayHide = V.delay(() => {\n      this.delayShow.$cancelTimeout(), this.tooltip.hide();\n    }, h.config.tooltip_hide_timeout || 1);\n  }\n}\nconst lt = {\n    active_links: function (e) {\n      e.config.active_link_view = \"day\", e._active_link_click = function (h) {\n        var a = h.target.getAttribute(\"data-link-date\"),\n          r = e.date.str_to_date(e.config.api_date, !1, !0);\n        if (a) return e.setCurrentView(r(a), e.config.active_link_view), h && h.preventDefault && h.preventDefault(), !1;\n      }, e.attachEvent(\"onTemplatesReady\", function () {\n        var h = function (r, d) {\n          d = d || r + \"_scale_date\", e.templates[\"_active_links_old_\" + d] || (e.templates[\"_active_links_old_\" + d] = e.templates[d]);\n          var i = e.templates[\"_active_links_old_\" + d],\n            _ = e.date.date_to_str(e.config.api_date);\n          e.templates[d] = function (o) {\n            return \"<a data-link-date='\" + _(o) + \"' href='#'>\" + i(o) + \"</a>\";\n          };\n        };\n        if (h(\"week\"), h(\"\", \"month_day\"), this.matrix) for (var a in this.matrix) h(a);\n        this._detachDomEvent(this._obj, \"click\", e._active_link_click), e.event(this._obj, \"click\", e._active_link_click);\n      });\n    },\n    agenda_legacy: function (e) {\n      e.date.add_agenda_legacy = function (h) {\n        return e.date.add(h, 1, \"year\");\n      }, e.templates.agenda_legacy_time = function (h, a, r) {\n        return r._timed ? this.day_date(r.start_date, r.end_date, r) + \" \" + this.event_date(h) : e.templates.day_date(h) + \" &ndash; \" + e.templates.day_date(a);\n      }, e.templates.agenda_legacy_text = function (h, a, r) {\n        return r.text;\n      }, e.templates.agenda_legacy_date = function () {\n        return \"\";\n      }, e.date.agenda_legacy_start = function () {\n        return e.date.date_part(e._currentDate());\n      }, e.attachEvent(\"onTemplatesReady\", function () {\n        var h = e.dblclick_dhx_cal_data;\n        e.dblclick_dhx_cal_data = function () {\n          if (this._mode == \"agenda_legacy\") !this.config.readonly && this.config.dblclick_create && this.addEventNow();else if (h) return h.apply(this, arguments);\n        };\n        var a = e.render_data;\n        e.render_data = function (i) {\n          if (this._mode != \"agenda_legacy\") return a.apply(this, arguments);\n          d();\n        };\n        var r = e.render_view_data;\n        function d() {\n          var i = e.get_visible_events();\n          i.sort(function (g, p) {\n            return g.start_date > p.start_date ? 1 : -1;\n          });\n          for (var _, o = \"<div class='dhx_agenda_area' \" + e._waiAria.agendaDataAttrString() + \">\", t = 0; t < i.length; t++) {\n            var n = i[t],\n              s = n.color ? \"--dhx-scheduler-event-background:\" + n.color + \";\" : \"\",\n              c = n.textColor ? \"--dhx-scheduler-event-color:\" + n.textColor + \";\" : \"\",\n              u = e.templates.event_class(n.start_date, n.end_date, n);\n            _ = e._waiAria.agendaEventAttrString(n);\n            var v = e._waiAria.agendaDetailsBtnString();\n            o += \"<div \" + _ + \" class='dhx_agenda_line\" + (u ? \" \" + u : \"\") + \"' event_id='\" + n.id + \"' \" + e.config.event_attribute + \"='\" + n.id + \"' style='\" + c + s + (n._text_style || \"\") + \"'><div class='dhx_agenda_event_time'>\" + (e.config.rtl ? e.templates.agenda_time(n.end_date, n.start_date, n) : e.templates.agenda_time(n.start_date, n.end_date, n)) + \"</div>\", o += \"<div \".concat(v, \" class='dhx_event_icon icon_details'><svg width=\\\"20\\\" height=\\\"20\\\" viewBox=\\\"0 0 20 20\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n\\t\\t\\t<path d=\\\"M15.4444 16.4H4.55556V7.6H15.4444V16.4ZM13.1111 2V3.6H6.88889V2H5.33333V3.6H4.55556C3.69222 3.6 3 4.312 3 5.2V16.4C3 16.8243 3.16389 17.2313 3.45561 17.5314C3.74733 17.8314 4.143 18 4.55556 18H15.4444C15.857 18 16.2527 17.8314 16.5444 17.5314C16.8361 17.2313 17 16.8243 17 16.4V5.2C17 4.312 16.3 3.6 15.4444 3.6H14.6667V2H13.1111ZM13.8889 10.8H10V14.8H13.8889V10.8Z\\\" fill=\\\"#A1A4A6\\\"/>\\n\\t\\t\\t</svg></div>\"), o += \"<span>\" + e.templates.agenda_text(n.start_date, n.end_date, n) + \"</span></div>\";\n          }\n          o += \"<div class='dhx_v_border'></div></div>\", e._els.dhx_cal_data[0].innerHTML = o, e._els.dhx_cal_data[0].childNodes[0].scrollTop = e._agendaScrollTop || 0;\n          var m = e._els.dhx_cal_data[0].childNodes[0];\n          m.childNodes[m.childNodes.length - 1].style.height = m.offsetHeight < e._els.dhx_cal_data[0].offsetHeight ? \"100%\" : m.offsetHeight + \"px\";\n          var l = e._els.dhx_cal_data[0].firstChild.childNodes,\n            f = e._getNavDateElement();\n          for (f && (f.innerHTML = e.templates.agenda_date(e._min_date, e._max_date, e._mode)), e._rendered = [], t = 0; t < l.length - 1; t++) e._rendered[t] = l[t];\n        }\n        e.render_view_data = function () {\n          return this._mode == \"agenda_legacy\" && (e._agendaScrollTop = e._els.dhx_cal_data[0].childNodes[0].scrollTop, e._els.dhx_cal_data[0].childNodes[0].scrollTop = 0), r.apply(this, arguments);\n        }, e.agenda_legacy_view = function (i) {\n          e._min_date = e.config.agenda_start || e.date.agenda_legacy_start(e._date), e._max_date = e.config.agenda_end || e.date.add_agenda_legacy(e._min_date, 1), function (_) {\n            if (_) {\n              var o = e.locale.labels,\n                t = e._waiAria.agendaHeadAttrString(),\n                n = e._waiAria.agendaHeadDateString(o.date),\n                s = e._waiAria.agendaHeadDescriptionString(o.description);\n              e._els.dhx_cal_header[0].innerHTML = \"<div \" + t + \" class='dhx_agenda_line dhx_agenda_line_header'><div \" + n + \">\" + o.date + \"</div><span class = 'description_header' style='padding-left:25px' \" + s + \">\" + o.description + \"</span></div>\", e._table_view = !0, e.set_sizes();\n            }\n          }(i), i ? (e._cols = null, e._colsS = null, e._table_view = !0, d()) : e._table_view = !1;\n        };\n      });\n    },\n    agenda_view: function (e) {\n      e.date.add_agenda = function (d, i) {\n        return e.date.add(d, 1 * i, \"month\");\n      }, e.templates.agenda_time = function (d, i, _) {\n        return _._timed ? \"\".concat(this.event_date(d), \" - \").concat(this.event_date(i)) : e.locale.labels.full_day;\n      }, e.templates.agenda_text = function (d, i, _) {\n        return _.text;\n      };\n      const h = e.date.date_to_str(\"%F %j\"),\n        a = e.date.date_to_str(\"%l\");\n      e.templates.agenda_day = function (d) {\n        return \"<div class=\\\"dhx_agenda_day_date\\\">\".concat(h(d), \"</div>\\n\\t\\t<div class=\\\"dhx_agenda_day_dow\\\">\").concat(a(d), \"</div>\");\n      }, e.templates.agenda_date = function (d, i) {\n        return e.templates.month_date(e.getState().date);\n      }, e.date.agenda_start = function (d) {\n        return e.date.month_start(new Date(d));\n      };\n      let r = 0;\n      e.attachEvent(\"onTemplatesReady\", function () {\n        var d = e.dblclick_dhx_cal_data;\n        e.dblclick_dhx_cal_data = function () {\n          if (this._mode == \"agenda\") !this.config.readonly && this.config.dblclick_create && this.addEventNow();else if (d) return d.apply(this, arguments);\n        };\n        var i = e.render_data;\n        e.render_data = function (n) {\n          if (this._mode != \"agenda\") return i.apply(this, arguments);\n          o();\n        };\n        var _ = e.render_view_data;\n        function o() {\n          const n = e.get_visible_events();\n          n.sort(function (f, g) {\n            return f.start_date > g.start_date ? 1 : -1;\n          });\n          const s = {};\n          let c = e.getState().min_date;\n          const u = e.getState().max_date;\n          for (; c.valueOf() < u.valueOf();) s[c.valueOf()] = [], c = e.date.add(c, 1, \"day\");\n          let v = !1;\n          if (n.forEach(f => {\n            let g = e.date.day_start(new Date(f.start_date));\n            for (; g.valueOf() < f.end_date.valueOf();) s[g.valueOf()] && (s[g.valueOf()].push(f), v = !0), g = e.date.day_start(e.date.add(g, 1, \"day\"));\n          }), v) {\n            let f = \"\";\n            for (let g in s) f += t(new Date(1 * g), s[g]);\n            e._els.dhx_cal_data[0].innerHTML = f;\n          } else e._els.dhx_cal_data[0].innerHTML = \"<div class=\\\"dhx_cal_agenda_no_events\\\">\".concat(e.locale.labels.agenda_tab, \"</div>\");\n          e._els.dhx_cal_data[0].scrollTop = r;\n          let m = e._els.dhx_cal_data[0].querySelectorAll(\".dhx_cal_agenda_event_line\");\n          e._rendered = [];\n          for (var l = 0; l < m.length - 1; l++) e._rendered[l] = m[l];\n        }\n        function t(n, s) {\n          if (!s.length) return \"\";\n          let c = \"\\n<div class=\\\"dhx_cal_agenda_day\\\">\\n\\t<div class=\\\"dhx_cal_agenda_day_header\\\">\".concat(e.templates.agenda_day(n), \"</div>\\n\\t<div class=\\\"dhx_cal_agenda_day_events\\\">\\n\");\n          return s.forEach(u => {\n            c += function (v, m) {\n              const l = e.templates.agenda_time(m.start_date, m.end_date, m),\n                f = e.getState().select_id,\n                g = e.templates.event_class(m.start_date, m.end_date, m),\n                p = e.templates.agenda_text(m.start_date, m.end_date, m);\n              let y = \"\";\n              return (m.color || m.textColor) && (y = \" style=\\\"\".concat(m.color ? \"--dhx-scheduler-event-background:\" + m.color + \";\" : \"\").concat(m.textColor ? \"--dhx-scheduler-event-color:\" + m.textColor + \";\" : \"\", \"\\\" \")), \"<div class=\\\"dhx_cal_agenda_event_line \".concat(g || \"\", \" \").concat(m.id == f ? \"dhx_cal_agenda_event_line_selected\" : \"\", \"\\\" \").concat(y, \" \").concat(e.config.event_attribute, \"=\\\"\").concat(m.id, \"\\\">\\n\\t<div class=\\\"dhx_cal_agenda_event_line_marker\\\"></div>\\n\\t<div class=\\\"dhx_cal_agenda_event_line_time\\\">\").concat(l, \"</div>\\n\\t<div class=\\\"dhx_cal_agenda_event_line_text\\\">\").concat(p, \"</div>\\n</div>\");\n            }(0, u);\n          }), c += \"</div></div>\", c;\n        }\n        e.render_view_data = function () {\n          return this._mode == \"agenda\" && (r = e._els.dhx_cal_data[0].scrollTop, e._els.dhx_cal_data[0].scrollTop = 0), _.apply(this, arguments);\n        }, e.agenda_view = function (n) {\n          n ? (e._min_date = e.config.agenda_start || e.date.agenda_start(e._date), e._max_date = e.config.agenda_end || e.date.add_agenda(e._min_date, 1), e._cols = null, e._colsS = null, e._table_view = !0, e._getNavDateElement().innerHTML = e.templates.agenda_date(e._date), o()) : e._table_view = !1;\n        };\n      });\n    },\n    all_timed: function (e) {\n      e.config.all_timed = \"short\", e.config.all_timed_month = !1;\n      var h = function (o) {\n        return !((o.end_date - o.start_date) / 36e5 >= 24) || e._drag_mode == \"resize\" && e._drag_id == o.id;\n      };\n      e._safe_copy = function (o) {\n        var t = null,\n          n = e._copy_event(o);\n        return o.event_pid && (t = e.getEvent(o.event_pid)), t && t.isPrototypeOf(o) && (delete n.event_length, delete n.event_pid, delete n.rec_pattern, delete n.rec_type), n;\n      };\n      var a = e._pre_render_events_line,\n        r = e._pre_render_events_table,\n        d = function (o, t) {\n          return this._table_view ? r.call(this, o, t) : a.call(this, o, t);\n        };\n      e._pre_render_events_line = e._pre_render_events_table = function (o, t) {\n        if (!this.config.all_timed || this._table_view && this._mode != \"month\" || this._mode == \"month\" && !this.config.all_timed_month) return d.call(this, o, t);\n        for (var n = 0; n < o.length; n++) {\n          var s = o[n];\n          if (!s._timed) if (this.config.all_timed != \"short\" || h(s)) {\n            var c = this._safe_copy(s);\n            s._virtual ? c._first_chunk = !1 : c._first_chunk = !0, c._drag_resize = !1, c._virtual = !0, c.start_date = new Date(c.start_date), l(s) ? (c.end_date = f(c.start_date), this.config.last_hour != 24 && (c.end_date = g(c.start_date, this.config.last_hour))) : c.end_date = new Date(s.end_date);\n            var u = !1;\n            c.start_date < this._max_date && c.end_date > this._min_date && c.start_date < c.end_date && (o[n] = c, u = !0);\n            var v = this._safe_copy(s);\n            if (v._virtual = !0, v.end_date = new Date(v.end_date), v.start_date < this._min_date ? v.start_date = g(this._min_date, this.config.first_hour) : v.start_date = g(f(s.start_date), this.config.first_hour), v.start_date < this._max_date && v.start_date < v.end_date) {\n              if (!u) {\n                o[n--] = v;\n                continue;\n              }\n              o.splice(n + 1, 0, v), v._last_chunk = !1;\n            } else c._last_chunk = !0, c._drag_resize = !0;\n          } else this._mode != \"month\" && o.splice(n--, 1);\n        }\n        var m = this._drag_mode != \"move\" && t;\n        return d.call(this, o, m);\n        function l(p) {\n          var y = f(p.start_date);\n          return +p.end_date > +y;\n        }\n        function f(p) {\n          var y = e.date.add(p, 1, \"day\");\n          return y = e.date.date_part(y);\n        }\n        function g(p, y) {\n          var w = e.date.date_part(new Date(p));\n          return w.setHours(y), w;\n        }\n      };\n      var i = e.get_visible_events;\n      e.get_visible_events = function (o) {\n        return this.config.all_timed && this.config.multi_day ? i.call(this, !1) : i.call(this, o);\n      }, e.attachEvent(\"onBeforeViewChange\", function (o, t, n, s) {\n        return e._allow_dnd = n == \"day\" || n == \"week\" || e.getView(n), !0;\n      }), e._is_main_area_event = function (o) {\n        return !!(o._timed || this.config.all_timed === !0 || this.config.all_timed == \"short\" && h(o));\n      };\n      var _ = e.updateEvent;\n      e.updateEvent = function (o) {\n        var t,\n          n,\n          s = e.getEvent(o);\n        s && (t = e.config.all_timed && !(e.isOneDayEvent(e._events[o]) || e.getState().drag_id)) && (n = e.config.update_render, e.config.update_render = !0), _.apply(e, arguments), s && t && (e.config.update_render = n);\n      };\n    },\n    collision: function (e) {\n      var h, a;\n      function r(d) {\n        e._get_section_view() && d && (h = e.getEvent(d)[e._get_section_property()]);\n      }\n      e.config.collision_limit = 1, e.attachEvent(\"onBeforeDrag\", function (d) {\n        return r(d), !0;\n      }), e.attachEvent(\"onBeforeLightbox\", function (d) {\n        var i = e.getEvent(d);\n        return a = [i.start_date, i.end_date], r(d), !0;\n      }), e.attachEvent(\"onEventChanged\", function (d) {\n        if (!d || !e.getEvent(d)) return !0;\n        var i = e.getEvent(d);\n        if (!e.checkCollision(i)) {\n          if (!a) return !1;\n          i.start_date = a[0], i.end_date = a[1], i._timed = this.isOneDayEvent(i);\n        }\n        return !0;\n      }), e.attachEvent(\"onBeforeEventChanged\", function (d, i, _) {\n        return e.checkCollision(d);\n      }), e.attachEvent(\"onEventAdded\", function (d, i) {\n        e.checkCollision(i) || e.deleteEvent(d);\n      }), e.attachEvent(\"onEventSave\", function (d, i, _) {\n        if ((i = e._lame_clone(i)).id = d, !i.start_date || !i.end_date) {\n          var o = e.getEvent(d);\n          i.start_date = new Date(o.start_date), i.end_date = new Date(o.end_date);\n        }\n        return i.rec_type && e._roll_back_dates(i), e.checkCollision(i);\n      }), e._check_sections_collision = function (d, i) {\n        var _ = e._get_section_property();\n        return d[_] == i[_] && d.id != i.id;\n      }, e.checkCollision = function (d) {\n        var i = [],\n          _ = e.config.collision_limit;\n        if (d.rec_type) for (var o = e.getRecDates(d), t = 0; t < o.length; t++) for (var n = e.getEvents(o[t].start_date, o[t].end_date), s = 0; s < n.length; s++) (n[s].event_pid || n[s].id) != d.id && i.push(n[s]);else {\n          i = e.getEvents(d.start_date, d.end_date);\n          for (var c = 0; c < i.length; c++) {\n            var u = i[c];\n            if (u.id == d.id || u.event_length && [u.event_pid, u.event_length].join(\"#\") == d.id) {\n              i.splice(c, 1);\n              break;\n            }\n          }\n        }\n        var v = e._get_section_view(),\n          m = e._get_section_property(),\n          l = !0;\n        if (v) {\n          var f = 0;\n          for (c = 0; c < i.length; c++) i[c].id != d.id && this._check_sections_collision(i[c], d) && f++;\n          f >= _ && (l = !1);\n        } else i.length >= _ && (l = !1);\n        if (!l) {\n          var g = !e.callEvent(\"onEventCollision\", [d, i]);\n          return g || (d[m] = h || d[m]), g;\n        }\n        return l;\n      };\n    },\n    container_autoresize: function (e) {\n      e.config.container_autoresize = !0, e.config.month_day_min_height = 90, e.config.min_grid_size = 25, e.config.min_map_size = 400;\n      var h = e._pre_render_events,\n        a = !0,\n        r = 0,\n        d = 0;\n      e._pre_render_events = function (s, c) {\n        if (!e.config.container_autoresize || !a) return h.apply(this, arguments);\n        var u = this.xy.bar_height,\n          v = this._colsS.heights,\n          m = this._colsS.heights = [0, 0, 0, 0, 0, 0, 0],\n          l = this._els.dhx_cal_data[0];\n        if (s = this._table_view ? this._pre_render_events_table(s, c) : this._pre_render_events_line(s, c), this._table_view) if (c) this._colsS.heights = v;else {\n          var f = l.firstChild;\n          const E = f.querySelectorAll(\".dhx_cal_month_row\");\n          if (E) {\n            for (var g = 0; g < E.length; g++) {\n              if (m[g]++, m[g] * u > this._colsS.height - this.xy.month_head_height) {\n                var p = E[g].querySelectorAll(\".dhx_cal_month_cell\"),\n                  y = this._colsS.height - this.xy.month_head_height;\n                1 * this.config.max_month_events !== this.config.max_month_events || m[g] <= this.config.max_month_events ? y = m[g] * u : (this.config.max_month_events + 1) * u > this._colsS.height - this.xy.month_head_height && (y = (this.config.max_month_events + 1) * u), E[g].style.height = y + this.xy.month_head_height + \"px\";\n                for (var w = 0; w < p.length; w++) p[w].childNodes[1].style.height = y + \"px\";\n                m[g] = (m[g - 1] || 0) + p[0].offsetHeight;\n              }\n              m[g] = (m[g - 1] || 0) + E[g].querySelectorAll(\".dhx_cal_month_cell\")[0].offsetHeight;\n            }\n            m.unshift(0), f.parentNode.offsetHeight < f.parentNode.scrollHeight && f._h_fix;\n          } else if (s.length || this._els.dhx_multi_day[0].style.visibility != \"visible\" || (m[0] = -1), s.length || m[0] == -1) {\n            var b = (m[0] + 1) * u + 1;\n            d != b + 1 && (this._obj.style.height = r - d + b - 1 + \"px\"), b += \"px\";\n            const D = this._els.dhx_cal_navline[0].offsetHeight,\n              x = this._els.dhx_cal_header[0].offsetHeight;\n            l.style.height = this._obj.offsetHeight - D - x - (this.xy.margin_top || 0) + \"px\";\n            var k = this._els.dhx_multi_day[0];\n            k.style.height = b, k.style.visibility = m[0] == -1 ? \"hidden\" : \"visible\", (k = this._els.dhx_multi_day[1]).style.height = b, k.style.visibility = m[0] == -1 ? \"hidden\" : \"visible\", k.style.visibility == \"hidden\" ? k.style.display = \"none\" : k.style.display = \"\", k.className = m[0] ? \"dhx_multi_day_icon\" : \"dhx_multi_day_icon_small\", this._dy_shift = (m[0] + 1) * u, m[0] = 0;\n          }\n        }\n        return s;\n      };\n      var i = [\"dhx_cal_navline\", \"dhx_cal_header\", \"dhx_multi_day\", \"dhx_cal_data\"],\n        _ = function (s) {\n          r = 0;\n          for (var c = 0; c < i.length; c++) {\n            var u = i[c],\n              v = e._els[u] ? e._els[u][0] : null,\n              m = 0;\n            switch (u) {\n              case \"dhx_cal_navline\":\n              case \"dhx_cal_header\":\n                m = v.offsetHeight;\n                break;\n              case \"dhx_multi_day\":\n                m = v ? v.offsetHeight - 1 : 0, d = m;\n                break;\n              case \"dhx_cal_data\":\n                var l = e.getState().mode;\n                if (v.childNodes[1] && l != \"month\") {\n                  let M = 0;\n                  for (let A = 0; A < v.childNodes.length; A++) v.childNodes[A].offsetHeight > M && (M = v.childNodes[A].offsetHeight);\n                  m = M;\n                } else m = Math.max(v.offsetHeight - 1, v.scrollHeight);\n                if (l == \"month\") e.config.month_day_min_height && !s && (m = v.querySelectorAll(\".dhx_cal_month_row\").length * e.config.month_day_min_height), s && (v.style.height = m + \"px\");else if (l == \"year\") m = 190 * e.config.year_y;else if (l == \"agenda\") {\n                  if (m = 0, v.childNodes && v.childNodes.length) for (var f = 0; f < v.childNodes.length; f++) m += v.childNodes[f].offsetHeight;\n                  m + 2 < e.config.min_grid_size ? m = e.config.min_grid_size : m += 2;\n                } else if (l == \"week_agenda\") {\n                  for (var g, p, y = e.xy.week_agenda_scale_height + e.config.min_grid_size, w = 0; w < v.childNodes.length; w++) for (p = v.childNodes[w], f = 0; f < p.childNodes.length; f++) {\n                    for (var b = 0, k = p.childNodes[f].childNodes[1], E = 0; E < k.childNodes.length; E++) b += k.childNodes[E].offsetHeight;\n                    g = b + e.xy.week_agenda_scale_height, (g = w != 1 || f != 2 && f != 3 ? g : 2 * g) > y && (y = g);\n                  }\n                  m = 3 * y;\n                } else if (l == \"map\") {\n                  m = 0;\n                  var D = v.querySelectorAll(\".dhx_map_line\");\n                  for (f = 0; f < D.length; f++) m += D[f].offsetHeight;\n                  m + 2 < e.config.min_map_size ? m = e.config.min_map_size : m += 2;\n                } else if (e._gridView) if (m = 0, v.childNodes[1].childNodes[0].childNodes && v.childNodes[1].childNodes[0].childNodes.length) {\n                  for (D = v.childNodes[1].childNodes[0].childNodes[0].childNodes, f = 0; f < D.length; f++) m += D[f].offsetHeight;\n                  (m += 2) < e.config.min_grid_size && (m = e.config.min_grid_size);\n                } else m = e.config.min_grid_size;\n                if (e.matrix && e.matrix[l]) {\n                  if (s) m += 0, v.style.height = m + \"px\";else {\n                    m = 0;\n                    for (var x = e.matrix[l], S = x.y_unit, N = 0; N < S.length; N++) m += x.getSectionHeight(S[N].key);\n                    e.$container.clientWidth != e.$container.scrollWidth && (m += n());\n                  }\n                  m -= 1;\n                }\n                (l == \"day\" || l == \"week\" || e._props && e._props[l]) && (m += 2);\n            }\n            r += m += 1;\n          }\n          e._obj.style.height = r + \"px\", s || e.updateView();\n        };\n      function o() {\n        a = !1, e.callEvent(\"onAfterSchedulerResize\", []), a = !0;\n      }\n      var t = function () {\n        if (!e.config.container_autoresize || !a) return !0;\n        var s = e.getState().mode;\n        if (!s) return !0;\n        var c = window.requestAnimationFrame || window.setTimeout,\n          u = document.documentElement.scrollTop;\n        c(function () {\n          !e.$destroyed && e.$initialized && _();\n        }), e.matrix && e.matrix[s] || s == \"month\" ? c(function () {\n          !e.$destroyed && e.$initialized && (_(!0), document.documentElement.scrollTop = u, o());\n        }, 1) : o();\n      };\n      function n() {\n        var s = document.createElement(\"div\");\n        s.style.cssText = \"visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;\", document.body.appendChild(s);\n        var c = s.offsetWidth - s.clientWidth;\n        return document.body.removeChild(s), c;\n      }\n      e.attachEvent(\"onBeforeViewChange\", function () {\n        var s = e.config.container_autoresize;\n        if (e.xy.$original_scroll_width || (e.xy.$original_scroll_width = e.xy.scroll_width), e.xy.scroll_width = s ? 0 : e.xy.$original_scroll_width, e.matrix) for (var c in e.matrix) {\n          var u = e.matrix[c];\n          u.$original_section_autoheight || (u.$original_section_autoheight = u.section_autoheight), u.section_autoheight = !s && u.$original_section_autoheight;\n        }\n        return !0;\n      }), e.attachEvent(\"onViewChange\", t), e.attachEvent(\"onXLE\", t), e.attachEvent(\"onEventChanged\", t), e.attachEvent(\"onEventCreated\", t), e.attachEvent(\"onEventAdded\", t), e.attachEvent(\"onEventDeleted\", t), e.attachEvent(\"onAfterSchedulerResize\", t), e.attachEvent(\"onClearAll\", t), e.attachEvent(\"onBeforeExpand\", function () {\n        return a = !1, !0;\n      }), e.attachEvent(\"onBeforeCollapse\", function () {\n        return a = !0, !0;\n      });\n    },\n    cookie: function (e) {\n      function h(d) {\n        return (d._obj.id || \"scheduler\") + \"_settings\";\n      }\n      var a = !0;\n      e.attachEvent(\"onBeforeViewChange\", function (d, i, _, o) {\n        if (a && e._get_url_nav) {\n          var t = e._get_url_nav();\n          (t.date || t.mode || t.event) && (a = !1);\n        }\n        var n = h(e);\n        if (a) {\n          a = !1;\n          var s = function (u) {\n            var v = u + \"=\";\n            if (document.cookie.length > 0) {\n              var m = document.cookie.indexOf(v);\n              if (m != -1) {\n                m += v.length;\n                var l = document.cookie.indexOf(\";\", m);\n                return l == -1 && (l = document.cookie.length), document.cookie.substring(m, l);\n              }\n            }\n            return \"\";\n          }(n);\n          if (s) {\n            e._min_date || (e._min_date = o), (s = unescape(s).split(\"@\"))[0] = this._helpers.parseDate(s[0]);\n            var c = this.isViewExists(s[1]) ? s[1] : _;\n            return o = isNaN(+s[0]) ? o : s[0], window.setTimeout(function () {\n              e.$destroyed || e.setCurrentView(o, c);\n            }, 1), !1;\n          }\n        }\n        return !0;\n      }), e.attachEvent(\"onViewChange\", function (d, i) {\n        var _,\n          o,\n          t = h(e),\n          n = escape(this._helpers.formatDate(i) + \"@\" + d);\n        o = t + \"=\" + n + ((_ = \"expires=Sun, 31 Jan 9999 22:00:00 GMT\") ? \"; \" + _ : \"\"), document.cookie = o;\n      });\n      var r = e._load;\n      e._load = function () {\n        var d = arguments;\n        if (e._date) r.apply(this, d);else {\n          var i = this;\n          window.setTimeout(function () {\n            r.apply(i, d);\n          }, 1);\n        }\n      };\n    },\n    daytimeline: function (e) {\n      R(\"Day Timeline\", e.assert);\n    },\n    drag_between: function (e) {\n      R(\"Drag Between\", e.assert);\n    },\n    editors: function (e) {\n      e.form_blocks.combo = {\n        render: function (h) {\n          h.cached_options || (h.cached_options = {});\n          var a = \"\";\n          return a += \"<div class='\" + h.type + \"' ></div>\";\n        },\n        set_value: function (h, a, r, d) {\n          (function () {\n            v();\n            var u = e.attachEvent(\"onAfterLightbox\", function () {\n              v(), e.detachEvent(u);\n            });\n            function v() {\n              if (h._combo && h._combo.DOMParent) {\n                var m = h._combo;\n                m.unload ? m.unload() : m.destructor && m.destructor(), m.DOMParent = m.DOMelem = null;\n              }\n            }\n          })(), window.dhx_globalImgPath = d.image_path || \"/\", h._combo = new dhtmlXCombo(h, d.name, h.offsetWidth - 8), d.onchange && h._combo.attachEvent(\"onChange\", d.onchange), d.options_height && h._combo.setOptionHeight(d.options_height);\n          var i = h._combo;\n          if (i.enableFilteringMode(d.filtering, d.script_path || null, !!d.cache), d.script_path) {\n            var _ = r[d.map_to];\n            _ ? d.cached_options[_] ? (i.addOption(_, d.cached_options[_]), i.disable(1), i.selectOption(0), i.disable(0)) : e.ajax.get(d.script_path + \"?id=\" + _ + \"&uid=\" + e.uid(), function (u) {\n              var v,\n                m = u.xmlDoc.responseText;\n              try {\n                v = JSON.parse(m).options[0].text;\n              } catch {\n                v = e.ajax.xpath(\"//option\", u.xmlDoc)[0].childNodes[0].nodeValue;\n              }\n              d.cached_options[_] = v, i.addOption(_, v), i.disable(1), i.selectOption(0), i.disable(0);\n            }) : i.setComboValue(\"\");\n          } else {\n            for (var o = [], t = 0; t < d.options.length; t++) {\n              var n = d.options[t],\n                s = [n.key, n.label, n.css];\n              o.push(s);\n            }\n            if (i.addOption(o), r[d.map_to]) {\n              var c = i.getIndexByValue(r[d.map_to]);\n              i.selectOption(c);\n            }\n          }\n        },\n        get_value: function (h, a, r) {\n          var d = h._combo.getSelectedValue();\n          return r.script_path && (r.cached_options[d] = h._combo.getSelectedText()), d;\n        },\n        focus: function (h) {}\n      }, e.form_blocks.radio = {\n        render: function (h) {\n          var a = \"\";\n          a += \"<div class='dhx_cal_ltext dhx_cal_radio \".concat(h.vertical ? \"dhx_cal_radio_vertical\" : \"\", \"' style='max-height:\").concat(h.height, \"px;'>\");\n          for (var r = 0; r < h.options.length; r++) {\n            var d = e.uid();\n            a += \"<label class='dhx_cal_radio_item' for='\" + d + \"'><input id='\" + d + \"' type='radio' name='\" + h.name + \"' value='\" + h.options[r].key + \"'><span> \" + h.options[r].label + \"</span></label>\";\n          }\n          return a += \"</div>\";\n        },\n        set_value: function (h, a, r, d) {\n          for (var i = h.getElementsByTagName(\"input\"), _ = 0; _ < i.length; _++) {\n            i[_].checked = !1;\n            var o = r[d.map_to] || a;\n            i[_].value == o && (i[_].checked = !0);\n          }\n        },\n        get_value: function (h, a, r) {\n          for (var d = h.getElementsByTagName(\"input\"), i = 0; i < d.length; i++) if (d[i].checked) return d[i].value;\n        },\n        focus: function (h) {}\n      }, e.form_blocks.checkbox = {\n        render: function (h) {\n          return e.config.wide_form ? '<div class=\"dhx_cal_wide_checkbox\"></div>' : \"\";\n        },\n        set_value: function (h, a, r, d) {\n          h = e._lightbox.querySelector(\"#\".concat(d.id));\n          var i = e.uid(),\n            _ = d.checked_value !== void 0 ? a == d.checked_value : !!a;\n          h.className += \" dhx_cal_checkbox\";\n          var o = \"<input id='\" + i + \"' type='checkbox' value='true' name='\" + d.name + \"'\" + (_ ? \"checked='true'\" : \"\") + \"'>\",\n            t = \"<label for='\" + i + \"'>\" + (e.locale.labels[\"section_\" + d.name] || d.name) + \"</label>\";\n          if (e.config.wide_form ? (h.innerHTML = t, h.nextSibling.innerHTML = o) : h.innerHTML = o + t, d.handler) {\n            var n = h.getElementsByTagName(\"input\")[0];\n            if (n.$_eventAttached) return;\n            n.$_eventAttached = !0, e.event(n, \"click\", d.handler);\n          }\n        },\n        get_value: function (h, a, r) {\n          var d = (h = e._lightbox.querySelector(\"#\".concat(r.id))).getElementsByTagName(\"input\")[0];\n          return d || (d = h.nextSibling.getElementsByTagName(\"input\")[0]), d.checked ? r.checked_value || !0 : r.unchecked_value || !1;\n        },\n        focus: function (h) {}\n      };\n    },\n    expand: function (e) {\n      e.ext.fullscreen = {\n        toggleIcon: null\n      }, e.expand = function () {\n        if (e.callEvent(\"onBeforeExpand\", [])) {\n          var h = e._obj;\n          do h._position = h.style.position || \"\", h.style.position = \"static\"; while ((h = h.parentNode) && h.style);\n          (h = e._obj).style.position = \"absolute\", h._width = h.style.width, h._height = h.style.height, h.style.width = h.style.height = \"100%\", h.style.top = h.style.left = \"0px\";\n          var a = document.body;\n          a.scrollTop = 0, (a = a.parentNode) && (a.scrollTop = 0), document.body._overflow = document.body.style.overflow || \"\", document.body.style.overflow = \"hidden\", e._maximize(), e.callEvent(\"onExpand\", []);\n        }\n      }, e.collapse = function () {\n        if (e.callEvent(\"onBeforeCollapse\", [])) {\n          var h = e._obj;\n          do h.style.position = h._position; while ((h = h.parentNode) && h.style);\n          (h = e._obj).style.width = h._width, h.style.height = h._height, document.body.style.overflow = document.body._overflow, e._maximize(), e.callEvent(\"onCollapse\", []);\n        }\n      }, e.attachEvent(\"onTemplatesReady\", function () {\n        var h = document.createElement(\"div\");\n        h.className = \"dhx_expand_icon\", e.ext.fullscreen.toggleIcon = h, h.innerHTML = \"<svg width=\\\"16\\\" height=\\\"16\\\" viewBox=\\\"0 0 16 16\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n\\t<g>\\n\\t<line x1=\\\"0.5\\\" y1=\\\"5\\\" x2=\\\"0.5\\\" y2=\\\"3.0598e-08\\\" stroke=\\\"var(--dhx-scheduler-base-colors-icons)\\\"/>\\n\\t<line y1=\\\"0.5\\\" x2=\\\"5\\\" y2=\\\"0.5\\\" stroke=\\\"var(--dhx-scheduler-base-colors-icons)\\\"/>\\n\\t<line x1=\\\"0.5\\\" y1=\\\"11\\\" x2=\\\"0.5\\\" y2=\\\"16\\\" stroke=\\\"var(--dhx-scheduler-base-colors-icons)\\\"/>\\n\\t<line y1=\\\"15.5\\\" x2=\\\"5\\\" y2=\\\"15.5\\\" stroke=\\\"var(--dhx-scheduler-base-colors-icons)\\\"/>\\n\\t<line x1=\\\"11\\\" y1=\\\"0.5\\\" x2=\\\"16\\\" y2=\\\"0.5\\\" stroke=\\\"var(--dhx-scheduler-base-colors-icons)\\\"/>\\n\\t<line x1=\\\"15.5\\\" y1=\\\"2.18557e-08\\\" x2=\\\"15.5\\\" y2=\\\"5\\\" stroke=\\\"var(--dhx-scheduler-base-colors-icons)\\\"/>\\n\\t<line x1=\\\"11\\\" y1=\\\"15.5\\\" x2=\\\"16\\\" y2=\\\"15.5\\\" stroke=\\\"var(--dhx-scheduler-base-colors-icons)\\\"/>\\n\\t<line x1=\\\"15.5\\\" y1=\\\"16\\\" x2=\\\"15.5\\\" y2=\\\"11\\\" stroke=\\\"var(--dhx-scheduler-base-colors-icons)\\\"/>\\n\\t</g>\\n\\t</svg>\\n\\t\", e._obj.appendChild(h), e.event(h, \"click\", function () {\n          e.expanded ? e.collapse() : e.expand();\n        });\n      }), e._maximize = function () {\n        this.expanded = !this.expanded, this.expanded ? this.ext.fullscreen.toggleIcon.classList.add(\"dhx_expand_icon--expanded\") : this.ext.fullscreen.toggleIcon.classList.remove(\"dhx_expand_icon--expanded\");\n        for (var h = [\"left\", \"top\"], a = 0; a < h.length; a++) {\n          var r = e[\"_prev_margin_\" + h[a]];\n          e.xy[\"margin_\" + h[a]] ? (e[\"_prev_margin_\" + h[a]] = e.xy[\"margin_\" + h[a]], e.xy[\"margin_\" + h[a]] = 0) : r && (e.xy[\"margin_\" + h[a]] = e[\"_prev_margin_\" + h[a]], delete e[\"_prev_margin_\" + h[a]]);\n        }\n        e.setCurrentView();\n      };\n    },\n    export_api: function (e) {\n      (function () {\n        function h(r, d) {\n          for (var i in d) r[i] || (r[i] = d[i]);\n          return r;\n        }\n        function a(r, d) {\n          var i = {};\n          return (r = d._els[r]) && r[0] ? (i.x = r[0].scrollWidth, i.y = r[0].scrollHeight) : (i.x = 0, i.y = 0), i;\n        }\n        window.dhtmlxAjax || (window.dhtmlxAjax = {\n          post: function (r, d, i) {\n            return window.dhx4.ajax.post(r, d, i);\n          },\n          get: function (r, d) {\n            return window.ajax.get(r, d);\n          }\n        }), function (r) {\n          function d() {\n            var i = r.getState().mode;\n            return r.matrix && r.matrix[i] ? r.matrix[i] : null;\n          }\n          r.exportToPDF = function (i) {\n            (i = h(i || {}, {\n              name: \"calendar.pdf\",\n              format: \"A4\",\n              orientation: \"landscape\",\n              dpi: 96,\n              zoom: 1,\n              rtl: r.config.rtl\n            })).html = this._export_html(i), i.mode = this.getState().mode, this._send_to_export(i, \"pdf\");\n          }, r.exportToPNG = function (i) {\n            (i = h(i || {}, {\n              name: \"calendar.png\",\n              format: \"A4\",\n              orientation: \"landscape\",\n              dpi: 96,\n              zoom: 1,\n              rtl: r.config.rtl\n            })).html = this._export_html(i), i.mode = this.getState().mode, this._send_to_export(i, \"png\");\n          }, r.exportToICal = function (i) {\n            i = h(i || {}, {\n              name: \"calendar.ical\",\n              data: this._serialize_plain(null, i)\n            }), this._send_to_export(i, \"ical\");\n          }, r.exportToExcel = function (i) {\n            i = h(i || {}, {\n              name: \"calendar.xlsx\",\n              title: \"Events\",\n              data: this._serialize_plain(this.templates.xml_format, i),\n              columns: this._serialize_columns()\n            }), this._send_to_export(i, \"excel\");\n          }, r._ajax_to_export = function (i, _, o) {\n            delete i.callback;\n            var t = i.server || \"https://export.dhtmlx.com/scheduler\";\n            window.dhtmlxAjax.post(t, \"type=\" + _ + \"&store=1&data=\" + encodeURIComponent(JSON.stringify(i)), function (n) {\n              var s = null;\n              if (!(n.xmlDoc.status > 400)) try {\n                s = JSON.parse(n.xmlDoc.responseText);\n              } catch {}\n              o(s);\n            });\n          }, r._plain_export_copy = function (i, _) {\n            var o = {};\n            for (var t in i) o[t] = i[t];\n            return o.start_date = _(o.start_date), o.end_date = _(o.end_date), o.$text = this.templates.event_text(i.start_date, i.end_date, i), o;\n          }, r._serialize_plain = function (i, _) {\n            var o;\n            i = i || r.date.date_to_str(\"%Y%m%dT%H%i%s\", !0), o = _ && _.start && _.end ? r.getEvents(_.start, _.end) : r.getEvents();\n            for (var t = [], n = 0; n < o.length; n++) t[n] = this._plain_export_copy(o[n], i);\n            return t;\n          }, r._serialize_columns = function () {\n            return [{\n              id: \"start_date\",\n              header: \"Start Date\",\n              width: 30\n            }, {\n              id: \"end_date\",\n              header: \"End Date\",\n              width: 30\n            }, {\n              id: \"$text\",\n              header: \"Text\",\n              width: 100\n            }];\n          }, r._send_to_export = function (i, _) {\n            if (i.version || (i.version = r.version), i.skin || (i.skin = r.skin), i.callback) return r._ajax_to_export(i, _, i.callback);\n            var o = this._create_hidden_form();\n            o.firstChild.action = i.server || \"https://export.dhtmlx.com/scheduler\", o.firstChild.childNodes[0].value = JSON.stringify(i), o.firstChild.childNodes[1].value = _, o.firstChild.submit();\n          }, r._create_hidden_form = function () {\n            if (!this._hidden_export_form) {\n              var i = this._hidden_export_form = document.createElement(\"div\");\n              i.style.display = \"none\", i.innerHTML = \"<form method='POST' target='_blank'><input type='text' name='data'><input type='hidden' name='type' value=''></form>\", document.body.appendChild(i);\n            }\n            return this._hidden_export_form;\n          }, r._get_export_size = function (i, _, o, t, n, s, c) {\n            t = parseInt(t) / 25.4 || 4;\n            var u = {\n                A5: {\n                  x: 148,\n                  y: 210\n                },\n                A4: {\n                  x: 210,\n                  y: 297\n                },\n                A3: {\n                  x: 297,\n                  y: 420\n                },\n                A2: {\n                  x: 420,\n                  y: 594\n                },\n                A1: {\n                  x: 594,\n                  y: 841\n                },\n                A0: {\n                  x: 841,\n                  y: 1189\n                }\n              },\n              v = a(\"dhx_cal_data\", this).x,\n              m = {\n                y: a(\"dhx_cal_data\", this).y + a(\"dhx_cal_header\", this).y + a(\"dhx_multi_day\", this).y\n              };\n            return m.x = i === \"full\" ? v : Math.floor((_ === \"landscape\" ? u[i].y : u[i].x) * t), c && (m.x *= parseFloat(c.x) || 1, m.y *= parseFloat(c.y) || 1), m;\n          }, r._export_html = function (i) {\n            var _,\n              o,\n              t,\n              n = (_ = void 0, o = void 0, (t = d()) && (o = t.scrollable, _ = t.smart_rendering), {\n                nav_height: r.xy.nav_height,\n                scroll_width: r.xy.scroll_width,\n                style_width: r._obj.style.width,\n                style_height: r._obj.style.height,\n                timeline_scrollable: o,\n                timeline_smart_rendering: _\n              }),\n              s = r._get_export_size(i.format, i.orientation, i.zoom, i.dpi, i.header, i.footer, i.scales),\n              c = \"\";\n            try {\n              (function (u, v) {\n                r._obj.style.width = u.x + \"px\", r._obj.style.height = u.y + \"px\", r.xy.nav_height = 0, r.xy.scroll_width = 0;\n                var m = d();\n                (v.timeline_scrollable || v.timeline_smart_rendering) && (m.scrollable = !1, m.smart_rendering = !1);\n              })(s, n), r.setCurrentView(), c = r._obj.innerHTML;\n            } catch (u) {\n              console.error(u);\n            } finally {\n              (function (u) {\n                r.xy.scroll_width = u.scroll_width, r.xy.nav_height = u.nav_height, r._obj.style.width = u.style_width, r._obj.style.height = u.style_height;\n                var v = d();\n                (u.timeline_scrollable || u.timeline_smart_rendering) && (v.scrollable = u.timeline_scrollable, v.smart_rendering = u.timeline_smart_rendering);\n              })(n), r.setCurrentView();\n            }\n            return c;\n          };\n        }(e);\n      })();\n    },\n    grid_view: function (e) {\n      R(\"Grid\", e.assert);\n    },\n    html_templates: function (e) {\n      e.attachEvent(\"onTemplatesReady\", function () {\n        for (var h = document.body.getElementsByTagName(\"DIV\"), a = 0; a < h.length; a++) {\n          var r = h[a].className || \"\";\n          if ((r = r.split(\":\")).length == 2 && r[0] == \"template\") {\n            var d = 'return \"' + (h[a].innerHTML || \"\").replace(/\\\\/g, \"\\\\\\\\\").replace(/\"/g, '\\\\\"').replace(/[\\n\\r]+/g, \"\") + '\";';\n            d = unescape(d).replace(/\\{event\\.([a-z]+)\\}/g, function (i, _) {\n              return '\"+ev.' + _ + '+\"';\n            }), e.templates[r[1]] = Function(\"start\", \"end\", \"ev\", d), h[a].style.display = \"none\";\n          }\n        }\n      });\n    },\n    key_nav: function (e) {\n      function h(a) {\n        var r = {\n            minicalButton: e.$keyboardNavigation.MinicalButton,\n            minicalDate: e.$keyboardNavigation.MinicalCell,\n            scheduler: e.$keyboardNavigation.SchedulerNode,\n            dataArea: e.$keyboardNavigation.DataArea,\n            timeSlot: e.$keyboardNavigation.TimeSlot,\n            event: e.$keyboardNavigation.Event\n          },\n          d = {};\n        for (var i in r) d[i.toLowerCase()] = r[i];\n        return d[a = (a + \"\").toLowerCase()] || r.scheduler;\n      }\n      e.config.key_nav = !0, e.config.key_nav_step = 30, e.addShortcut = function (a, r, d) {\n        var i = h(d);\n        i && i.prototype.bind(a, r);\n      }, e.getShortcutHandler = function (a, r) {\n        var d = h(r);\n        if (d) {\n          var i = e.$keyboardNavigation.shortcuts.parse(a);\n          if (i.length) return d.prototype.findHandler(i[0]);\n        }\n      }, e.removeShortcut = function (a, r) {\n        var d = h(r);\n        d && d.prototype.unbind(a);\n      }, e.focus = function () {\n        if (e.config.key_nav) {\n          var a = e.$keyboardNavigation.dispatcher;\n          a.enable();\n          var r = a.getActiveNode();\n          !r || r instanceof e.$keyboardNavigation.MinicalButton || r instanceof e.$keyboardNavigation.MinicalCell ? a.setDefaultNode() : a.focusNode(a.getActiveNode());\n        }\n      }, e.$keyboardNavigation = {}, e._compose = function () {\n        for (var a = Array.prototype.slice.call(arguments, 0), r = {}, d = 0; d < a.length; d++) {\n          var i = a[d];\n          for (var _ in typeof i == \"function\" && (i = new i()), i) r[_] = i[_];\n        }\n        return r;\n      }, function (a) {\n        a.$keyboardNavigation.shortcuts = {\n          createCommand: function () {\n            return {\n              modifiers: {\n                shift: !1,\n                alt: !1,\n                ctrl: !1,\n                meta: !1\n              },\n              keyCode: null\n            };\n          },\n          parse: function (r) {\n            for (var d = [], i = this.getExpressions(this.trim(r)), _ = 0; _ < i.length; _++) {\n              for (var o = this.getWords(i[_]), t = this.createCommand(), n = 0; n < o.length; n++) this.commandKeys[o[n]] ? t.modifiers[o[n]] = !0 : this.specialKeys[o[n]] ? t.keyCode = this.specialKeys[o[n]] : t.keyCode = o[n].charCodeAt(0);\n              d.push(t);\n            }\n            return d;\n          },\n          getCommandFromEvent: function (r) {\n            var d = this.createCommand();\n            d.modifiers.shift = !!r.shiftKey, d.modifiers.alt = !!r.altKey, d.modifiers.ctrl = !!r.ctrlKey, d.modifiers.meta = !!r.metaKey, d.keyCode = r.which || r.keyCode, d.keyCode >= 96 && d.keyCode <= 105 && (d.keyCode -= 48);\n            var i = String.fromCharCode(d.keyCode);\n            return i && (d.keyCode = i.toLowerCase().charCodeAt(0)), d;\n          },\n          getHashFromEvent: function (r) {\n            return this.getHash(this.getCommandFromEvent(r));\n          },\n          getHash: function (r) {\n            var d = [];\n            for (var i in r.modifiers) r.modifiers[i] && d.push(i);\n            return d.push(r.keyCode), d.join(this.junctionChar);\n          },\n          getExpressions: function (r) {\n            return r.split(this.junctionChar);\n          },\n          getWords: function (r) {\n            return r.split(this.combinationChar);\n          },\n          trim: function (r) {\n            return r.replace(/\\s/g, \"\");\n          },\n          junctionChar: \",\",\n          combinationChar: \"+\",\n          commandKeys: {\n            shift: 16,\n            alt: 18,\n            ctrl: 17,\n            meta: !0\n          },\n          specialKeys: {\n            backspace: 8,\n            tab: 9,\n            enter: 13,\n            esc: 27,\n            space: 32,\n            up: 38,\n            down: 40,\n            left: 37,\n            right: 39,\n            home: 36,\n            end: 35,\n            pageup: 33,\n            pagedown: 34,\n            delete: 46,\n            insert: 45,\n            plus: 107,\n            f1: 112,\n            f2: 113,\n            f3: 114,\n            f4: 115,\n            f5: 116,\n            f6: 117,\n            f7: 118,\n            f8: 119,\n            f9: 120,\n            f10: 121,\n            f11: 122,\n            f12: 123\n          }\n        };\n      }(e), function (a) {\n        a.$keyboardNavigation.EventHandler = {\n          _handlers: null,\n          findHandler: function (r) {\n            this._handlers || (this._handlers = {});\n            var d = a.$keyboardNavigation.shortcuts.getHash(r);\n            return this._handlers[d];\n          },\n          doAction: function (r, d) {\n            var i = this.findHandler(r);\n            i && (i.call(this, d), d.preventDefault ? d.preventDefault() : d.returnValue = !1);\n          },\n          bind: function (r, d) {\n            this._handlers || (this._handlers = {});\n            for (var i = a.$keyboardNavigation.shortcuts, _ = i.parse(r), o = 0; o < _.length; o++) this._handlers[i.getHash(_[o])] = d;\n          },\n          unbind: function (r) {\n            for (var d = a.$keyboardNavigation.shortcuts, i = d.parse(r), _ = 0; _ < i.length; _++) this._handlers[d.getHash(i[_])] && delete this._handlers[d.getHash(i[_])];\n          },\n          bindAll: function (r) {\n            for (var d in r) this.bind(d, r[d]);\n          },\n          initKeys: function () {\n            this._handlers || (this._handlers = {}), this.keys && this.bindAll(this.keys);\n          }\n        };\n      }(e), function (a) {\n        a.$keyboardNavigation.getFocusableNodes = a._getFocusableNodes, a.$keyboardNavigation.trapFocus = function (r, d) {\n          if (d.keyCode != 9) return !1;\n          for (var i, _ = a.$keyboardNavigation.getFocusableNodes(r), o = document.activeElement, t = -1, n = 0; n < _.length; n++) if (_[n] == o) {\n            t = n;\n            break;\n          }\n          if (d.shiftKey) {\n            if (i = _[t <= 0 ? _.length - 1 : t - 1]) return i.focus(), d.preventDefault(), !0;\n          } else if (i = _[t >= _.length - 1 ? 0 : t + 1]) return i.focus(), d.preventDefault(), !0;\n          return !1;\n        };\n      }(e), function (a) {\n        a.$keyboardNavigation.marker = {\n          clear: function () {\n            for (var r = a.$container.querySelectorAll(\".dhx_focus_slot\"), d = 0; d < r.length; d++) r[d].parentNode.removeChild(r[d]);\n          },\n          createElement: function () {\n            var r = document.createElement(\"div\");\n            return r.setAttribute(\"tabindex\", -1), r.className = \"dhx_focus_slot\", r;\n          },\n          renderMultiple: function (r, d, i) {\n            for (var _ = [], o = new Date(r), t = new Date(Math.min(d.valueOf(), a.date.add(a.date.day_start(new Date(r)), 1, \"day\").valueOf())); o.valueOf() < d.valueOf();) _ = _.concat(i.call(this, o, new Date(Math.min(t.valueOf(), d.valueOf())))), o = a.date.day_start(a.date.add(o, 1, \"day\")), t = a.date.day_start(a.date.add(o, 1, \"day\")), t = new Date(Math.min(t.valueOf(), d.valueOf()));\n            return _;\n          },\n          render: function (r, d, i) {\n            this.clear();\n            var _ = [],\n              o = a.$keyboardNavigation.TimeSlot.prototype._modes;\n            switch (a.$keyboardNavigation.TimeSlot.prototype._getMode()) {\n              case o.units:\n                _ = this.renderVerticalMarker(r, d, i);\n                break;\n              case o.timeline:\n                _ = this.renderTimelineMarker(r, d, i);\n                break;\n              case o.year:\n                _ = _.concat(this.renderMultiple(r, d, this.renderYearMarker));\n                break;\n              case o.month:\n                _ = this.renderMonthMarker(r, d);\n                break;\n              case o.weekAgenda:\n                _ = _.concat(this.renderMultiple(r, d, this.renderWeekAgendaMarker));\n                break;\n              case o.list:\n                _ = this.renderAgendaMarker(r, d);\n                break;\n              case o.dayColumns:\n                _ = _.concat(this.renderMultiple(r, d, this.renderVerticalMarker));\n            }\n            this.addWaiAriaLabel(_, r, d, i), this.addDataAttributes(_, r, d, i);\n            for (var t = _.length - 1; t >= 0; t--) if (_[t].offsetWidth) return _[t];\n            return null;\n          },\n          addDataAttributes: function (r, d, i, _) {\n            for (var o = a.date.date_to_str(a.config.api_date), t = o(d), n = o(i), s = 0; s < r.length; s++) r[s].setAttribute(\"data-start-date\", t), r[s].setAttribute(\"data-end-date\", n), _ && r[s].setAttribute(\"data-section\", _);\n          },\n          addWaiAriaLabel: function (r, d, i, _) {\n            var o = \"\",\n              t = a.getState().mode,\n              n = !1;\n            if (o += a.templates.day_date(d), a.date.day_start(new Date(d)).valueOf() != d.valueOf() && (o += \" \" + a.templates.hour_scale(d), n = !0), a.date.day_start(new Date(d)).valueOf() != a.date.day_start(new Date(i)).valueOf() && (o += \" - \" + a.templates.day_date(i), (n || a.date.day_start(new Date(i)).valueOf() != i.valueOf()) && (o += \" \" + a.templates.hour_scale(i))), _) {\n              if (a.matrix && a.matrix[t]) {\n                const c = a.matrix[t],\n                  u = c.y_unit[c.order[_]];\n                o += \", \" + a.templates[t + \"_scale_label\"](u.key, u.label, u);\n              } else if (a._props && a._props[t]) {\n                const c = a._props[t],\n                  u = c.options[c.order[_]];\n                o += \", \" + a.templates[t + \"_scale_text\"](u.key, u.label, u);\n              }\n            }\n            for (var s = 0; s < r.length; s++) a._waiAria.setAttributes(r[s], {\n              \"aria-label\": o,\n              \"aria-live\": \"polite\"\n            });\n          },\n          renderWeekAgendaMarker: function (r, d) {\n            for (var i = a.$container.querySelectorAll(\".dhx_wa_day_cont .dhx_wa_scale_bar\"), _ = a.date.week_start(new Date(a.getState().min_date)), o = -1, t = a.date.day_start(new Date(r)), n = 0; n < i.length && (o++, a.date.day_start(new Date(_)).valueOf() != t.valueOf()); n++) _ = a.date.add(_, 1, \"day\");\n            return o != -1 ? this._wrapDiv(i[o]) : [];\n          },\n          _wrapDiv: function (r) {\n            var d = this.createElement();\n            return d.style.top = r.offsetTop + \"px\", d.style.left = r.offsetLeft + \"px\", d.style.width = r.offsetWidth + \"px\", d.style.height = r.offsetHeight + \"px\", r.appendChild(d), [d];\n          },\n          renderYearMarker: function (r, d) {\n            var i = a._get_year_cell(r);\n            i.style.position = \"relative\";\n            var _ = this.createElement();\n            return _.style.top = \"0px\", _.style.left = \"0px\", _.style.width = \"100%\", _.style.height = \"100%\", i.appendChild(_), [_];\n          },\n          renderAgendaMarker: function (r, d) {\n            var i = this.createElement();\n            return i.style.height = \"1px\", i.style.width = \"100%\", i.style.opacity = 1, i.style.top = \"0px\", i.style.left = \"0px\", a.$container.querySelector(\".dhx_cal_data\").appendChild(i), [i];\n          },\n          renderTimelineMarker: function (r, d, i) {\n            var _ = a._lame_copy({}, a.matrix[a._mode]),\n              o = _._scales;\n            _.round_position = !1;\n            var t = [],\n              n = r ? new Date(r) : a._min_date,\n              s = d ? new Date(d) : a._max_date;\n            if (n.valueOf() < a._min_date.valueOf() && (n = new Date(a._min_date)), s.valueOf() > a._max_date.valueOf() && (s = new Date(a._max_date)), !_._trace_x) return t;\n            for (var c = 0; c < _._trace_x.length && !a._is_column_visible(_._trace_x[c]); c++);\n            if (c == _._trace_x.length) return t;\n            var u = o[i];\n            if (!(n < d && s > r)) return t;\n            var v = this.createElement();\n            let m, l;\n            function f(b, k) {\n              k.setDate(1), k.setFullYear(b.getFullYear()), k.setMonth(b.getMonth()), k.setDate(b.getDate());\n            }\n            if (a.getView().days) {\n              const b = new Date(r);\n              f(a._min_date, b);\n              const k = new Date(d);\n              f(a._min_date, k), m = a._timeline_getX({\n                start_date: b\n              }, !1, _), l = a._timeline_getX({\n                start_date: k\n              }, !1, _);\n            } else m = a._timeline_getX({\n              start_date: r\n            }, !1, _), l = a._timeline_getX({\n              start_date: d\n            }, !1, _);\n            var g = _._section_height[i] - 1 || _.dy - 1,\n              p = 0;\n            a._isRender(\"cell\") && (p = u.offsetTop, m += _.dx, l += _.dx, u = a.$container.querySelector(\".dhx_cal_data\"));\n            var y = Math.max(1, l - m - 1);\n            let w = \"left\";\n            return a.config.rtl && (w = \"right\"), v.style.cssText = \"height:\".concat(g, \"px; \").concat(w, \":\").concat(m, \"px; width:\").concat(y, \"px; top:\").concat(p, \"px;\"), u && (u.appendChild(v), t.push(v)), t;\n          },\n          renderMonthCell: function (r) {\n            for (var d = a.$container.querySelectorAll(\".dhx_month_head\"), i = [], _ = 0; _ < d.length; _++) i.push(d[_].parentNode);\n            var o = -1,\n              t = 0,\n              n = -1,\n              s = a.date.week_start(new Date(a.getState().min_date)),\n              c = a.date.day_start(new Date(r));\n            for (_ = 0; _ < i.length && (o++, n == 6 ? (t++, n = 0) : n++, a.date.day_start(new Date(s)).valueOf() != c.valueOf()); _++) s = a.date.add(s, 1, \"day\");\n            if (o == -1) return [];\n            var u = a._colsS[n],\n              v = a._colsS.heights[t],\n              m = this.createElement();\n            m.style.top = v + \"px\", m.style.left = u + \"px\", m.style.width = a._cols[n] + \"px\", m.style.height = (a._colsS.heights[t + 1] - v || a._colsS.height) + \"px\";\n            var l = a.$container.querySelector(\".dhx_cal_data\"),\n              f = l.querySelector(\".dhx_cal_month_table\");\n            return f.nextSibling ? l.insertBefore(m, f.nextSibling) : l.appendChild(m), m;\n          },\n          renderMonthMarker: function (r, d) {\n            for (var i = [], _ = r; _.valueOf() < d.valueOf();) i.push(this.renderMonthCell(_)), _ = a.date.add(_, 1, \"day\");\n            return i;\n          },\n          renderVerticalMarker: function (r, d, i) {\n            var _ = a.locate_holder_day(r),\n              o = [],\n              t = null,\n              n = a.config;\n            if (a._ignores[_]) return o;\n            if (a._props && a._props[a._mode] && i) {\n              var s = a._props[a._mode];\n              _ = s.order[i];\n              var c = s.order[i];\n              s.days > 1 ? _ = a.locate_holder_day(r) + c : (_ = c, s.size && _ > s.position + s.size && (_ = 0));\n            }\n            if (!(t = a.locate_holder(_)) || t.querySelector(\".dhx_scale_hour\")) return document.createElement(\"div\");\n            var u = Math.max(60 * r.getHours() + r.getMinutes(), 60 * n.first_hour),\n              v = Math.min(60 * d.getHours() + d.getMinutes(), 60 * n.last_hour);\n            if (!v && a.date.day_start(new Date(d)).valueOf() > a.date.day_start(new Date(r)).valueOf() && (v = 60 * n.last_hour), v <= u) return [];\n            var m = this.createElement(),\n              l = a.config.hour_size_px * n.last_hour + 1,\n              f = 36e5;\n            return m.style.top = Math.round((60 * u * 1e3 - a.config.first_hour * f) * a.config.hour_size_px / f) % l + \"px\", m.style.lineHeight = m.style.height = Math.max(Math.round(60 * (v - u) * 1e3 * a.config.hour_size_px / f) % l, 1) + \"px\", m.style.width = \"100%\", t.appendChild(m), o.push(m), o[0];\n          }\n        };\n      }(e), function (a) {\n        a.$keyboardNavigation.SchedulerNode = function () {}, a.$keyboardNavigation.SchedulerNode.prototype = a._compose(a.$keyboardNavigation.EventHandler, {\n          getDefaultNode: function () {\n            var r = new a.$keyboardNavigation.TimeSlot();\n            return r.isValid() || (r = r.fallback()), r;\n          },\n          _modes: {\n            month: \"month\",\n            year: \"year\",\n            dayColumns: \"dayColumns\",\n            timeline: \"timeline\",\n            units: \"units\",\n            weekAgenda: \"weekAgenda\",\n            list: \"list\"\n          },\n          getMode: function () {\n            var r = a.getState().mode;\n            return a.matrix && a.matrix[r] ? this._modes.timeline : a._props && a._props[r] ? this._modes.units : r == \"month\" ? this._modes.month : r == \"year\" ? this._modes.year : r == \"week_agenda\" ? this._modes.weekAgenda : r == \"map\" || r == \"agenda\" || a._grid && a[\"grid_\" + r] ? this._modes.list : this._modes.dayColumns;\n          },\n          focus: function () {\n            a.focus();\n          },\n          blur: function () {},\n          disable: function () {\n            a.$container.setAttribute(\"tabindex\", \"0\");\n          },\n          enable: function () {\n            a.$container && a.$container.removeAttribute(\"tabindex\");\n          },\n          isEnabled: function () {\n            return a.$container.hasAttribute(\"tabindex\");\n          },\n          _compareEvents: function (r, d) {\n            return r.start_date.valueOf() == d.start_date.valueOf() ? r.id > d.id ? 1 : -1 : r.start_date.valueOf() > d.start_date.valueOf() ? 1 : -1;\n          },\n          _pickEvent: function (r, d, i, _) {\n            var o = a.getState();\n            r = new Date(Math.max(o.min_date.valueOf(), r.valueOf())), d = new Date(Math.min(o.max_date.valueOf(), d.valueOf()));\n            var t = a.getEvents(r, d);\n            t.sort(this._compareEvents), _ && (t = t.reverse());\n            for (var n = !!i, s = 0; s < t.length && n; s++) t[s].id == i && (n = !1), t.splice(s, 1), s--;\n            for (s = 0; s < t.length; s++) if (new a.$keyboardNavigation.Event(t[s].id).getNode()) return t[s];\n            return null;\n          },\n          nextEventHandler: function (r) {\n            var d = a.$keyboardNavigation.dispatcher.activeNode,\n              i = r || d && d.eventId,\n              _ = null;\n            if (i && a.getEvent(i)) {\n              var o = a.getEvent(i);\n              _ = a.$keyboardNavigation.SchedulerNode.prototype._pickEvent(o.start_date, a.date.add(o.start_date, 1, \"year\"), o.id, !1);\n            }\n            if (!_ && !r) {\n              var t = a.getState();\n              _ = a.$keyboardNavigation.SchedulerNode.prototype._pickEvent(t.min_date, a.date.add(t.min_date, 1, \"year\"), null, !1);\n            }\n            if (_) {\n              var n = new a.$keyboardNavigation.Event(_.id);\n              n.isValid() ? (d && d.blur(), a.$keyboardNavigation.dispatcher.setActiveNode(n)) : this.nextEventHandler(_.id);\n            }\n          },\n          prevEventHandler: function (r) {\n            var d = a.$keyboardNavigation.dispatcher.activeNode,\n              i = r || d && d.eventId,\n              _ = null;\n            if (i && a.getEvent(i)) {\n              var o = a.getEvent(i);\n              _ = a.$keyboardNavigation.SchedulerNode.prototype._pickEvent(a.date.add(o.end_date, -1, \"year\"), o.end_date, o.id, !0);\n            }\n            if (!_ && !r) {\n              var t = a.getState();\n              _ = a.$keyboardNavigation.SchedulerNode.prototype._pickEvent(a.date.add(t.max_date, -1, \"year\"), t.max_date, null, !0);\n            }\n            if (_) {\n              var n = new a.$keyboardNavigation.Event(_.id);\n              n.isValid() ? (d && d.blur(), a.$keyboardNavigation.dispatcher.setActiveNode(n)) : this.prevEventHandler(_.id);\n            }\n          },\n          keys: {\n            \"alt+1, alt+2, alt+3, alt+4, alt+5, alt+6, alt+7, alt+8, alt+9\": function (r) {\n              var d = a.$keyboardNavigation.HeaderCell.prototype.getNodes(\".dhx_cal_navline .dhx_cal_tab\"),\n                i = r.key;\n              i === void 0 && (i = r.keyCode - 48), d[1 * i - 1] && d[1 * i - 1].click();\n            },\n            \"ctrl+left,meta+left\": function (r) {\n              a._click.dhx_cal_prev_button();\n            },\n            \"ctrl+right,meta+right\": function (r) {\n              a._click.dhx_cal_next_button();\n            },\n            \"ctrl+up,meta+up\": function (r) {\n              a.$container.querySelector(\".dhx_cal_data\").scrollTop -= 20;\n            },\n            \"ctrl+down,meta+down\": function (r) {\n              a.$container.querySelector(\".dhx_cal_data\").scrollTop += 20;\n            },\n            e: function () {\n              this.nextEventHandler();\n            },\n            home: function () {\n              a.setCurrentView( /* @__PURE__ */new Date());\n            },\n            \"shift+e\": function () {\n              this.prevEventHandler();\n            },\n            \"ctrl+enter,meta+enter\": function () {\n              a.addEventNow({\n                start_date: new Date(a.getState().date)\n              });\n            },\n            \"ctrl+c,meta+c\": function (r) {\n              a._key_nav_copy_paste(r);\n            },\n            \"ctrl+v,meta+v\": function (r) {\n              a._key_nav_copy_paste(r);\n            },\n            \"ctrl+x,meta+x\": function (r) {\n              a._key_nav_copy_paste(r);\n            }\n          }\n        }), a.$keyboardNavigation.SchedulerNode.prototype.bindAll(a.$keyboardNavigation.SchedulerNode.prototype.keys);\n      }(e), function (a) {\n        a.$keyboardNavigation.KeyNavNode = function () {}, a.$keyboardNavigation.KeyNavNode.prototype = a._compose(a.$keyboardNavigation.EventHandler, {\n          isValid: function () {\n            return !0;\n          },\n          fallback: function () {\n            return null;\n          },\n          moveTo: function (r) {\n            a.$keyboardNavigation.dispatcher.setActiveNode(r);\n          },\n          compareTo: function (r) {\n            if (!r) return !1;\n            for (var d in this) {\n              if (!!this[d] != !!r[d]) return !1;\n              var i = !(!this[d] || !this[d].toString),\n                _ = !(!r[d] || !r[d].toString);\n              if (_ != i) return !1;\n              if (_ && i) {\n                if (r[d].toString() != this[d].toString()) return !1;\n              } else if (r[d] != this[d]) return !1;\n            }\n            return !0;\n          },\n          getNode: function () {},\n          focus: function () {\n            var r = this.getNode();\n            r && (r.setAttribute(\"tabindex\", \"-1\"), r.focus && r.focus());\n          },\n          blur: function () {\n            var r = this.getNode();\n            r && r.setAttribute(\"tabindex\", \"-1\");\n          }\n        });\n      }(e), function (a) {\n        a.$keyboardNavigation.HeaderCell = function (r) {\n          this.index = r || 0;\n        }, a.$keyboardNavigation.HeaderCell.prototype = a._compose(a.$keyboardNavigation.KeyNavNode, {\n          getNode: function (r) {\n            r = r || this.index || 0;\n            var d = this.getNodes();\n            if (d[r]) return d[r];\n          },\n          getNodes: function (r) {\n            r = r || [\".dhx_cal_navline .dhx_cal_prev_button\", \".dhx_cal_navline .dhx_cal_next_button\", \".dhx_cal_navline .dhx_cal_today_button\", \".dhx_cal_navline .dhx_cal_tab\"].join(\", \");\n            var d = Array.prototype.slice.call(a.$container.querySelectorAll(r));\n            return d.sort(function (i, _) {\n              return i.offsetLeft - _.offsetLeft;\n            }), d;\n          },\n          _handlers: null,\n          isValid: function () {\n            return !!this.getNode(this.index);\n          },\n          fallback: function () {\n            var r = this.getNode(0);\n            return r || (r = new a.$keyboardNavigation.TimeSlot()), r;\n          },\n          keys: {\n            left: function () {\n              var r = this.index - 1;\n              r < 0 && (r = this.getNodes().length - 1), this.moveTo(new a.$keyboardNavigation.HeaderCell(r));\n            },\n            right: function () {\n              var r = this.index + 1;\n              r >= this.getNodes().length && (r = 0), this.moveTo(new a.$keyboardNavigation.HeaderCell(r));\n            },\n            down: function () {\n              this.moveTo(new a.$keyboardNavigation.TimeSlot());\n            },\n            enter: function () {\n              var r = this.getNode();\n              r && r.click();\n            }\n          }\n        }), a.$keyboardNavigation.HeaderCell.prototype.bindAll(a.$keyboardNavigation.HeaderCell.prototype.keys);\n      }(e), function (a) {\n        a.$keyboardNavigation.Event = function (r) {\n          if (this.eventId = null, a.getEvent(r)) {\n            var d = a.getEvent(r);\n            this.start = new Date(d.start_date), this.end = new Date(d.end_date), this.section = this._getSection(d), this.eventId = r;\n          }\n        }, a.$keyboardNavigation.Event.prototype = a._compose(a.$keyboardNavigation.KeyNavNode, {\n          _getNodes: function () {\n            return Array.prototype.slice.call(a.$container.querySelectorAll(\"[\" + a.config.event_attribute + \"]\"));\n          },\n          _modes: a.$keyboardNavigation.SchedulerNode.prototype._modes,\n          getMode: a.$keyboardNavigation.SchedulerNode.prototype.getMode,\n          _handlers: null,\n          isValid: function () {\n            return !(!a.getEvent(this.eventId) || !this.getNode());\n          },\n          fallback: function () {\n            var r = this._getNodes()[0],\n              d = null;\n            if (r && a._locate_event(r)) {\n              var i = a._locate_event(r);\n              d = new a.$keyboardNavigation.Event(i);\n            } else d = new a.$keyboardNavigation.TimeSlot();\n            return d;\n          },\n          isScrolledIntoView: function (r) {\n            var d = r.getBoundingClientRect(),\n              i = a.$container.querySelector(\".dhx_cal_data\").getBoundingClientRect();\n            return !(d.bottom < i.top || d.top > i.bottom);\n          },\n          getNode: function () {\n            var r = \"[\" + a.config.event_attribute + \"='\" + this.eventId + \"']\",\n              d = a.$keyboardNavigation.dispatcher.getInlineEditor(this.eventId);\n            if (d) return d;\n            if (a.isMultisectionEvent && a.isMultisectionEvent(a.getEvent(this.eventId))) {\n              for (var i = a.$container.querySelectorAll(r), _ = 0; _ < i.length; _++) if (this.isScrolledIntoView(i[_])) return i[_];\n              return i[0];\n            }\n            return a.$container.querySelector(r);\n          },\n          focus: function () {\n            var r = a.getEvent(this.eventId),\n              d = a.getState();\n            (r.start_date.valueOf() > d.max_date.valueOf() || r.end_date.valueOf() <= d.min_date.valueOf()) && a.setCurrentView(r.start_date);\n            var i = this.getNode();\n            this.isScrolledIntoView(i) ? a.$keyboardNavigation.dispatcher.keepScrollPosition(function () {\n              a.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this);\n            }.bind(this)) : a.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this);\n          },\n          blur: function () {\n            a.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this);\n          },\n          _getSection: function (r) {\n            var d = null,\n              i = a.getState().mode;\n            return a.matrix && a.matrix[i] ? d = r[a.matrix[a.getState().mode].y_property] : a._props && a._props[i] && (d = r[a._props[i].map_to]), d;\n          },\n          _moveToSlot: function (r) {\n            var d = a.getEvent(this.eventId);\n            if (d) {\n              var i = this._getSection(d),\n                _ = new a.$keyboardNavigation.TimeSlot(d.start_date, null, i);\n              this.moveTo(_.nextSlot(_, r));\n            } else this.moveTo(new a.$keyboardNavigation.TimeSlot());\n          },\n          keys: {\n            left: function () {\n              this._moveToSlot(\"left\");\n            },\n            right: function () {\n              this._moveToSlot(\"right\");\n            },\n            down: function () {\n              this.getMode() == this._modes.list ? a.$keyboardNavigation.SchedulerNode.prototype.nextEventHandler() : this._moveToSlot(\"down\");\n            },\n            space: function () {\n              var r = this.getNode();\n              r && r.click ? r.click() : this.moveTo(new a.$keyboardNavigation.TimeSlot());\n            },\n            up: function () {\n              this.getMode() == this._modes.list ? a.$keyboardNavigation.SchedulerNode.prototype.prevEventHandler() : this._moveToSlot(\"up\");\n            },\n            delete: function () {\n              a.getEvent(this.eventId) ? a._click.buttons.delete(this.eventId) : this.moveTo(new a.$keyboardNavigation.TimeSlot());\n            },\n            enter: function () {\n              a.getEvent(this.eventId) ? a.showLightbox(this.eventId) : this.moveTo(new a.$keyboardNavigation.TimeSlot());\n            }\n          }\n        }), a.$keyboardNavigation.Event.prototype.bindAll(a.$keyboardNavigation.Event.prototype.keys);\n      }(e), function (a) {\n        a.$keyboardNavigation.TimeSlot = function (r, d, i, _) {\n          var o = a.getState(),\n            t = a.matrix && a.matrix[o.mode];\n          r || (r = this.getDefaultDate()), d || (d = t ? a.date.add(r, t.x_step, t.x_unit) : a.date.add(r, a.config.key_nav_step, \"minute\")), this.section = i || this._getDefaultSection(), this.start_date = new Date(r), this.end_date = new Date(d), this.movingDate = _ || null;\n        }, a.$keyboardNavigation.TimeSlot.prototype = a._compose(a.$keyboardNavigation.KeyNavNode, {\n          _handlers: null,\n          getDefaultDate: function () {\n            var r,\n              d = a.getState(),\n              i = new Date(d.date);\n            i.setSeconds(0), i.setMilliseconds(0);\n            var _ = /* @__PURE__ */new Date();\n            _.setSeconds(0), _.setMilliseconds(0);\n            var o = a.matrix && a.matrix[d.mode],\n              t = !1;\n            if (i.valueOf() === _.valueOf() && (t = !0), o) t ? (o.x_unit === \"day\" ? (_.setHours(0), _.setMinutes(0)) : o.x_unit === \"hour\" && _.setMinutes(0), r = _) : r = a.date[o.name + \"_start\"](new Date(d.date)), r = this.findVisibleColumn(r);else if (r = new Date(a.getState().min_date), t && (r = _), r = this.findVisibleColumn(r), t || r.setHours(a.config.first_hour), !a._table_view) {\n              var n = a.$container.querySelector(\".dhx_cal_data\");\n              n.scrollTop && r.setHours(a.config.first_hour + Math.ceil(n.scrollTop / a.config.hour_size_px));\n            }\n            return r;\n          },\n          clone: function (r) {\n            return new a.$keyboardNavigation.TimeSlot(r.start_date, r.end_date, r.section, r.movingDate);\n          },\n          _getMultisectionView: function () {\n            var r,\n              d = a.getState();\n            return a._props && a._props[d.mode] ? r = a._props[d.mode] : a.matrix && a.matrix[d.mode] && (r = a.matrix[d.mode]), r;\n          },\n          _getDefaultSection: function () {\n            var r = null;\n            return this._getMultisectionView() && !r && (r = this._getNextSection()), r;\n          },\n          _getNextSection: function (r, d) {\n            var i = this._getMultisectionView(),\n              _ = i.order[r],\n              o = _;\n            (o = _ !== void 0 ? _ + d : i.size && i.position ? i.position : 0) < 0 && (o = 0);\n            var t = i.options || i.y_unit;\n            return o >= t.length && (o = t.length - 1), t[o] ? t[o].key : null;\n          },\n          isValid: function () {\n            var r = a.getState();\n            if (this.start_date.valueOf() < r.min_date.valueOf() || this.start_date.valueOf() >= r.max_date.valueOf() || !this.isVisible(this.start_date, this.end_date)) return !1;\n            var d = this._getMultisectionView();\n            return !d || d.order[this.section] !== void 0;\n          },\n          fallback: function () {\n            var r = new a.$keyboardNavigation.TimeSlot();\n            return r.isValid() ? r : new a.$keyboardNavigation.DataArea();\n          },\n          getNodes: function () {\n            return Array.prototype.slice.call(a.$container.querySelectorAll(\".dhx_focus_slot\"));\n          },\n          getNode: function () {\n            return this.getNodes()[0];\n          },\n          focus: function () {\n            this.section && a.getView() && a.getView().smart_rendering && a.getView().scrollTo && !a.$container.querySelector(\"[data-section-id=\\\"\".concat(this.section, \"\\\"]\")) && a.getView().scrollTo({\n              section: this.section\n            }), a.$keyboardNavigation.marker.render(this.start_date, this.end_date, this.section), a.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this), a.$keyboardNavigation._pasteDate = this.start_date, a.$keyboardNavigation._pasteSection = this.section;\n          },\n          blur: function () {\n            a.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this), a.$keyboardNavigation.marker.clear();\n          },\n          _modes: a.$keyboardNavigation.SchedulerNode.prototype._modes,\n          _getMode: a.$keyboardNavigation.SchedulerNode.prototype.getMode,\n          addMonthDate: function (r, d, i) {\n            var _;\n            switch (d) {\n              case \"up\":\n                _ = a.date.add(r, -1, \"week\");\n                break;\n              case \"down\":\n                _ = a.date.add(r, 1, \"week\");\n                break;\n              case \"left\":\n                _ = a.date.day_start(a.date.add(r, -1, \"day\")), _ = this.findVisibleColumn(_, -1);\n                break;\n              case \"right\":\n                _ = a.date.day_start(a.date.add(r, 1, \"day\")), _ = this.findVisibleColumn(_, 1);\n                break;\n              default:\n                _ = a.date.day_start(new Date(r));\n            }\n            var o = a.getState();\n            return (r.valueOf() < o.min_date.valueOf() || !i && r.valueOf() >= o.max_date.valueOf()) && (_ = new Date(o.min_date)), _;\n          },\n          nextMonthSlot: function (r, d, i) {\n            var _, o;\n            return (_ = this.addMonthDate(r.start_date, d, i)).setHours(a.config.first_hour), (o = new Date(_)).setHours(a.config.last_hour), {\n              start_date: _,\n              end_date: o\n            };\n          },\n          _alignTimeSlot: function (r, d, i, _) {\n            for (var o = new Date(d); o.valueOf() < r.valueOf();) o = a.date.add(o, _, i);\n            return o.valueOf() > r.valueOf() && (o = a.date.add(o, -_, i)), o;\n          },\n          nextTimelineSlot: function (r, d, i) {\n            var _ = a.getState(),\n              o = a.matrix[_.mode],\n              t = this._alignTimeSlot(r.start_date, a.date[o.name + \"_start\"](new Date(r.start_date)), o.x_unit, o.x_step),\n              n = this._alignTimeSlot(r.end_date, a.date[o.name + \"_start\"](new Date(r.end_date)), o.x_unit, o.x_step);\n            n.valueOf() <= t.valueOf() && (n = a.date.add(t, o.x_step, o.x_unit));\n            var s = this.clone(r);\n            switch (s.start_date = t, s.end_date = n, s.section = r.section || this._getNextSection(), d) {\n              case \"up\":\n                s.section = this._getNextSection(r.section, -1);\n                break;\n              case \"down\":\n                s.section = this._getNextSection(r.section, 1);\n                break;\n              case \"left\":\n                s.start_date = this.findVisibleColumn(a.date.add(s.start_date, -o.x_step, o.x_unit), -1), s.end_date = a.date.add(s.start_date, o.x_step, o.x_unit);\n                break;\n              case \"right\":\n                s.start_date = this.findVisibleColumn(a.date.add(s.start_date, o.x_step, o.x_unit), 1), s.end_date = a.date.add(s.start_date, o.x_step, o.x_unit);\n            }\n            return (s.start_date.valueOf() < _.min_date.valueOf() || s.start_date.valueOf() >= _.max_date.valueOf()) && (i && s.start_date.valueOf() >= _.max_date.valueOf() ? s.start_date = new Date(_.max_date) : (s.start_date = a.date[_.mode + \"_start\"](a.date.add(_.date, d == \"left\" ? -1 : 1, _.mode)), s.end_date = a.date.add(s.start_date, o.x_step, o.x_unit))), s;\n          },\n          nextUnitsSlot: function (r, d, i) {\n            var _ = this.clone(r);\n            _.section = r.section || this._getNextSection();\n            var o = r.section || this._getNextSection(),\n              t = a.getState(),\n              n = a._props[t.mode];\n            switch (d) {\n              case \"left\":\n                o = this._getNextSection(r.section, -1);\n                var s = n.size ? n.size - 1 : n.options.length;\n                n.days > 1 && n.order[o] == s - 1 && a.date.add(r.start_date, -1, \"day\").valueOf() >= t.min_date.valueOf() && (_ = this.nextDaySlot(r, d, i));\n                break;\n              case \"right\":\n                o = this._getNextSection(r.section, 1), n.days > 1 && !n.order[o] && a.date.add(r.start_date, 1, \"day\").valueOf() < t.max_date.valueOf() && (_ = this.nextDaySlot(r, d, i));\n                break;\n              default:\n                _ = this.nextDaySlot(r, d, i), o = r.section;\n            }\n            return _.section = o, _;\n          },\n          _moveDate: function (r, d) {\n            var i = this.findVisibleColumn(a.date.add(r, d, \"day\"), d);\n            return i.setHours(r.getHours()), i.setMinutes(r.getMinutes()), i;\n          },\n          isBeforeLastHour: function (r, d) {\n            var i = r.getMinutes(),\n              _ = r.getHours(),\n              o = a.config.last_hour;\n            return _ < o || !d && (o == 24 || _ == o) && !i;\n          },\n          isAfterFirstHour: function (r, d) {\n            var i = r.getMinutes(),\n              _ = r.getHours(),\n              o = a.config.first_hour,\n              t = a.config.last_hour;\n            return _ >= o || !d && !i && (!_ && t == 24 || _ == t);\n          },\n          isInVisibleDayTime: function (r, d) {\n            return this.isBeforeLastHour(r, d) && this.isAfterFirstHour(r, d);\n          },\n          nextDaySlot: function (r, d, i) {\n            var _,\n              o,\n              t = a.config.key_nav_step,\n              n = this._alignTimeSlot(r.start_date, a.date.day_start(new Date(r.start_date)), \"minute\", t),\n              s = r.start_date;\n            switch (d) {\n              case \"up\":\n                if (_ = a.date.add(n, -t, \"minute\"), !this.isInVisibleDayTime(_, !0) && (!i || this.isInVisibleDayTime(s, !0))) {\n                  var c = !0;\n                  i && a.date.date_part(new Date(_)).valueOf() != a.date.date_part(new Date(s)).valueOf() && (c = !1), c && (_ = this.findVisibleColumn(a.date.add(r.start_date, -1, \"day\"), -1)), _.setHours(a.config.last_hour), _.setMinutes(0), _ = a.date.add(_, -t, \"minute\");\n                }\n                o = a.date.add(_, t, \"minute\");\n                break;\n              case \"down\":\n                _ = a.date.add(n, t, \"minute\");\n                var u = i ? _ : a.date.add(_, t, \"minute\");\n                this.isInVisibleDayTime(u, !1) || i && !this.isInVisibleDayTime(s, !1) || (i ? (c = !0, a.date.date_part(new Date(s)).valueOf() == s.valueOf() && (c = !1), c && (_ = this.findVisibleColumn(a.date.add(r.start_date, 1, \"day\"), 1)), _.setHours(a.config.first_hour), _.setMinutes(0), _ = a.date.add(_, t, \"minute\")) : ((_ = this.findVisibleColumn(a.date.add(r.start_date, 1, \"day\"), 1)).setHours(a.config.first_hour), _.setMinutes(0))), o = a.date.add(_, t, \"minute\");\n                break;\n              case \"left\":\n                _ = this._moveDate(r.start_date, -1), o = this._moveDate(r.end_date, -1);\n                break;\n              case \"right\":\n                _ = this._moveDate(r.start_date, 1), o = this._moveDate(r.end_date, 1);\n                break;\n              default:\n                _ = n, o = a.date.add(_, t, \"minute\");\n            }\n            return {\n              start_date: _,\n              end_date: o\n            };\n          },\n          nextWeekAgendaSlot: function (r, d) {\n            var i,\n              _,\n              o = a.getState();\n            switch (d) {\n              case \"down\":\n              case \"left\":\n                i = a.date.day_start(a.date.add(r.start_date, -1, \"day\")), i = this.findVisibleColumn(i, -1);\n                break;\n              case \"up\":\n              case \"right\":\n                i = a.date.day_start(a.date.add(r.start_date, 1, \"day\")), i = this.findVisibleColumn(i, 1);\n                break;\n              default:\n                i = a.date.day_start(r.start_date);\n            }\n            return (r.start_date.valueOf() < o.min_date.valueOf() || r.start_date.valueOf() >= o.max_date.valueOf()) && (i = new Date(o.min_date)), (_ = new Date(i)).setHours(a.config.last_hour), {\n              start_date: i,\n              end_date: _\n            };\n          },\n          nextAgendaSlot: function (r, d) {\n            return {\n              start_date: r.start_date,\n              end_date: r.end_date\n            };\n          },\n          isDateVisible: function (r) {\n            if (!a._ignores_detected) return !0;\n            var d,\n              i = a.matrix && a.matrix[a.getState().mode];\n            return d = i ? a._get_date_index(i, r) : a.locate_holder_day(r), !a._ignores[d];\n          },\n          findVisibleColumn: function (r, d) {\n            var i = r;\n            d = d || 1;\n            for (var _ = a.getState(); !this.isDateVisible(i) && (d > 0 && i.valueOf() <= _.max_date.valueOf() || d < 0 && i.valueOf() >= _.min_date.valueOf());) i = this.nextDateColumn(i, d);\n            return i;\n          },\n          nextDateColumn: function (r, d) {\n            d = d || 1;\n            var i = a.matrix && a.matrix[a.getState().mode];\n            return i ? a.date.add(r, d * i.x_step, i.x_unit) : a.date.day_start(a.date.add(r, d, \"day\"));\n          },\n          isVisible: function (r, d) {\n            if (!a._ignores_detected) return !0;\n            for (var i = new Date(r); i.valueOf() < d.valueOf();) {\n              if (this.isDateVisible(i)) return !0;\n              i = this.nextDateColumn(i);\n            }\n            return !1;\n          },\n          nextSlot: function (r, d, i, _) {\n            var o;\n            i = i || this._getMode();\n            var t = a.$keyboardNavigation.TimeSlot.prototype.clone(r);\n            switch (i) {\n              case this._modes.units:\n                o = this.nextUnitsSlot(t, d, _);\n                break;\n              case this._modes.timeline:\n                o = this.nextTimelineSlot(t, d, _);\n                break;\n              case this._modes.year:\n              case this._modes.month:\n                o = this.nextMonthSlot(t, d, _);\n                break;\n              case this._modes.weekAgenda:\n                o = this.nextWeekAgendaSlot(t, d, _);\n                break;\n              case this._modes.list:\n                o = this.nextAgendaSlot(t, d, _);\n                break;\n              case this._modes.dayColumns:\n                o = this.nextDaySlot(t, d, _);\n            }\n            return o.start_date.valueOf() >= o.end_date.valueOf() && (o = this.nextSlot(o, d, i)), a.$keyboardNavigation.TimeSlot.prototype.clone(o);\n          },\n          extendSlot: function (r, d) {\n            var i;\n            switch (this._getMode()) {\n              case this._modes.units:\n                i = d == \"left\" || d == \"right\" ? this.nextUnitsSlot(r, d) : this.extendUnitsSlot(r, d);\n                break;\n              case this._modes.timeline:\n                i = d == \"down\" || d == \"up\" ? this.nextTimelineSlot(r, d) : this.extendTimelineSlot(r, d);\n                break;\n              case this._modes.year:\n              case this._modes.month:\n                i = this.extendMonthSlot(r, d);\n                break;\n              case this._modes.dayColumns:\n                i = this.extendDaySlot(r, d);\n                break;\n              case this._modes.weekAgenda:\n                i = this.extendWeekAgendaSlot(r, d);\n                break;\n              default:\n                i = r;\n            }\n            var _ = a.getState();\n            return i.start_date.valueOf() < _.min_date.valueOf() && (i.start_date = this.findVisibleColumn(_.min_date), i.start_date.setHours(a.config.first_hour)), i.end_date.valueOf() > _.max_date.valueOf() && (i.end_date = this.findVisibleColumn(_.max_date, -1)), a.$keyboardNavigation.TimeSlot.prototype.clone(i);\n          },\n          extendTimelineSlot: function (r, d) {\n            return this.extendGenericSlot({\n              left: \"start_date\",\n              right: \"end_date\"\n            }, r, d, \"timeline\");\n          },\n          extendWeekAgendaSlot: function (r, d) {\n            return this.extendGenericSlot({\n              left: \"start_date\",\n              right: \"end_date\"\n            }, r, d, \"weekAgenda\");\n          },\n          extendGenericSlot: function (r, d, i, _) {\n            var o,\n              t = d.movingDate;\n            if (t || (t = r[i]), !t || !r[i]) return d;\n            if (!i) return a.$keyboardNavigation.TimeSlot.prototype.clone(d);\n            (o = this.nextSlot({\n              start_date: d[t],\n              section: d.section\n            }, i, _, !0)).start_date.valueOf() == d.start_date.valueOf() && (o = this.nextSlot({\n              start_date: o.start_date,\n              section: o.section\n            }, i, _, !0)), o.movingDate = t;\n            var n = this.extendSlotDates(d, o, o.movingDate);\n            return n.end_date.valueOf() <= n.start_date.valueOf() && (o.movingDate = o.movingDate == \"end_date\" ? \"start_date\" : \"end_date\"), n = this.extendSlotDates(d, o, o.movingDate), o.start_date = n.start_date, o.end_date = n.end_date, o;\n          },\n          extendSlotDates: function (r, d, i) {\n            var _ = {\n              start_date: null,\n              end_date: null\n            };\n            return i == \"start_date\" ? (_.start_date = d.start_date, _.end_date = r.end_date) : (_.start_date = r.start_date, _.end_date = d.start_date), _;\n          },\n          extendMonthSlot: function (r, d) {\n            return (r = this.extendGenericSlot({\n              up: \"start_date\",\n              down: \"end_date\",\n              left: \"start_date\",\n              right: \"end_date\"\n            }, r, d, \"month\")).start_date.setHours(a.config.first_hour), r.end_date = a.date.add(r.end_date, -1, \"day\"), r.end_date.setHours(a.config.last_hour), r;\n          },\n          extendUnitsSlot: function (r, d) {\n            var i;\n            switch (d) {\n              case \"down\":\n              case \"up\":\n                i = this.extendDaySlot(r, d);\n                break;\n              default:\n                i = r;\n            }\n            return i.section = r.section, i;\n          },\n          extendDaySlot: function (r, d) {\n            return this.extendGenericSlot({\n              up: \"start_date\",\n              down: \"end_date\",\n              left: \"start_date\",\n              right: \"end_date\"\n            }, r, d, \"dayColumns\");\n          },\n          scrollSlot: function (r) {\n            var d = a.getState(),\n              i = this.nextSlot(this, r);\n            (i.start_date.valueOf() < d.min_date.valueOf() || i.start_date.valueOf() >= d.max_date.valueOf()) && a.setCurrentView(new Date(i.start_date)), this.moveTo(i);\n          },\n          keys: {\n            left: function () {\n              this.scrollSlot(\"left\");\n            },\n            right: function () {\n              this.scrollSlot(\"right\");\n            },\n            down: function () {\n              this._getMode() == this._modes.list ? a.$keyboardNavigation.SchedulerNode.prototype.nextEventHandler() : this.scrollSlot(\"down\");\n            },\n            up: function () {\n              this._getMode() == this._modes.list ? a.$keyboardNavigation.SchedulerNode.prototype.prevEventHandler() : this.scrollSlot(\"up\");\n            },\n            \"shift+down\": function () {\n              this.moveTo(this.extendSlot(this, \"down\"));\n            },\n            \"shift+up\": function () {\n              this.moveTo(this.extendSlot(this, \"up\"));\n            },\n            \"shift+right\": function () {\n              this.moveTo(this.extendSlot(this, \"right\"));\n            },\n            \"shift+left\": function () {\n              this.moveTo(this.extendSlot(this, \"left\"));\n            },\n            enter: function () {\n              var r = {\n                  start_date: new Date(this.start_date),\n                  end_date: new Date(this.end_date)\n                },\n                d = a.getState().mode;\n              a.matrix && a.matrix[d] ? r[a.matrix[a.getState().mode].y_property] = this.section : a._props && a._props[d] && (r[a._props[d].map_to] = this.section), a.addEventNow(r);\n            }\n          }\n        }), a.$keyboardNavigation.TimeSlot.prototype.bindAll(a.$keyboardNavigation.TimeSlot.prototype.keys);\n      }(e), function (a) {\n        a.$keyboardNavigation.MinicalButton = function (r, d) {\n          this.container = r, this.index = d || 0;\n        }, a.$keyboardNavigation.MinicalButton.prototype = a._compose(a.$keyboardNavigation.KeyNavNode, {\n          isValid: function () {\n            return !!this.container.offsetWidth;\n          },\n          fallback: function () {\n            var r = new a.$keyboardNavigation.TimeSlot();\n            return r.isValid() ? r : new a.$keyboardNavigation.DataArea();\n          },\n          focus: function () {\n            a.$keyboardNavigation.dispatcher.globalNode.disable(), this.container.removeAttribute(\"tabindex\"), a.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this);\n          },\n          blur: function () {\n            this.container.setAttribute(\"tabindex\", \"0\"), a.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this);\n          },\n          getNode: function () {\n            return this.index ? this.container.querySelector(\".dhx_cal_next_button\") : this.container.querySelector(\".dhx_cal_prev_button\");\n          },\n          keys: {\n            right: function (r) {\n              this.moveTo(new a.$keyboardNavigation.MinicalButton(this.container, this.index ? 0 : 1));\n            },\n            left: function (r) {\n              this.moveTo(new a.$keyboardNavigation.MinicalButton(this.container, this.index ? 0 : 1));\n            },\n            down: function () {\n              var r = new a.$keyboardNavigation.MinicalCell(this.container, 0, 0);\n              r && !r.isValid() && (r = r.fallback()), this.moveTo(r);\n            },\n            enter: function (r) {\n              this.getNode().click();\n            }\n          }\n        }), a.$keyboardNavigation.MinicalButton.prototype.bindAll(a.$keyboardNavigation.MinicalButton.prototype.keys);\n      }(e), function (a) {\n        a.$keyboardNavigation.MinicalCell = function (r, d, i) {\n          this.container = r, this.row = d || 0, this.col = i || 0;\n        }, a.$keyboardNavigation.MinicalCell.prototype = a._compose(a.$keyboardNavigation.KeyNavNode, {\n          isValid: function () {\n            var r = this._getGrid();\n            return !(!r[this.row] || !r[this.row][this.col]);\n          },\n          fallback: function () {\n            var r = this.row,\n              d = this.col,\n              i = this._getGrid();\n            i[r] || (r = 0);\n            var _ = !0;\n            if (r > i.length / 2 && (_ = !1), !i[r]) {\n              var o = new a.$keyboardNavigation.TimeSlot();\n              return o.isValid() ? o : new a.$keyboardNavigation.DataArea();\n            }\n            if (_) {\n              for (var t = d; i[r] && t < i[r].length; t++) if (i[r][t] || t != i[r].length - 1 || (r++, d = 0), i[r][t]) return new a.$keyboardNavigation.MinicalCell(this.container, r, t);\n            } else for (t = d; i[r] && t < i[r].length; t--) if (i[r][t] || t || (d = i[--r].length - 1), i[r][t]) return new a.$keyboardNavigation.MinicalCell(this.container, r, t);\n            return new a.$keyboardNavigation.MinicalButton(this.container, 0);\n          },\n          focus: function () {\n            a.$keyboardNavigation.dispatcher.globalNode.disable(), this.container.removeAttribute(\"tabindex\"), a.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this);\n          },\n          blur: function () {\n            this.container.setAttribute(\"tabindex\", \"0\"), a.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this);\n          },\n          _getNode: function (r, d) {\n            return this.container.querySelector(\".dhx_year_body tr:nth-child(\" + (r + 1) + \") td:nth-child(\" + (d + 1) + \")\");\n          },\n          getNode: function () {\n            return this._getNode(this.row, this.col);\n          },\n          _getGrid: function () {\n            for (var r = this.container.querySelectorAll(\".dhx_year_body tr\"), d = [], i = 0; i < r.length; i++) {\n              d[i] = [];\n              for (var _ = r[i].querySelectorAll(\"td\"), o = 0; o < _.length; o++) {\n                var t = _[o],\n                  n = !0,\n                  s = a._getClassName(t);\n                (s.indexOf(\"dhx_after\") > -1 || s.indexOf(\"dhx_before\") > -1 || s.indexOf(\"dhx_scale_ignore\") > -1) && (n = !1), d[i][o] = n;\n              }\n            }\n            return d;\n          },\n          keys: {\n            right: function (r) {\n              var d = this._getGrid(),\n                i = this.row,\n                _ = this.col + 1;\n              d[i] && d[i][_] || (d[i + 1] ? (i += 1, _ = 0) : _ = this.col);\n              var o = new a.$keyboardNavigation.MinicalCell(this.container, i, _);\n              o.isValid() || (o = o.fallback()), this.moveTo(o);\n            },\n            left: function (r) {\n              var d = this._getGrid(),\n                i = this.row,\n                _ = this.col - 1;\n              d[i] && d[i][_] || (_ = d[i - 1] ? d[i -= 1].length - 1 : this.col);\n              var o = new a.$keyboardNavigation.MinicalCell(this.container, i, _);\n              o.isValid() || (o = o.fallback()), this.moveTo(o);\n            },\n            down: function () {\n              var r = this._getGrid(),\n                d = this.row + 1,\n                i = this.col;\n              r[d] && r[d][i] || (d = this.row);\n              var _ = new a.$keyboardNavigation.MinicalCell(this.container, d, i);\n              _.isValid() || (_ = _.fallback()), this.moveTo(_);\n            },\n            up: function () {\n              var r = this._getGrid(),\n                d = this.row - 1,\n                i = this.col;\n              if (r[d] && r[d][i]) {\n                var _ = new a.$keyboardNavigation.MinicalCell(this.container, d, i);\n                _.isValid() || (_ = _.fallback()), this.moveTo(_);\n              } else {\n                var o = 0;\n                this.col > r[this.row].length / 2 && (o = 1), this.moveTo(new a.$keyboardNavigation.MinicalButton(this.container, o));\n              }\n            },\n            enter: function (r) {\n              this.getNode().querySelector(\".dhx_month_head\").click();\n            }\n          }\n        }), a.$keyboardNavigation.MinicalCell.prototype.bindAll(a.$keyboardNavigation.MinicalCell.prototype.keys);\n      }(e), function (a) {\n        a.$keyboardNavigation.DataArea = function (r) {\n          this.index = r || 0;\n        }, a.$keyboardNavigation.DataArea.prototype = a._compose(a.$keyboardNavigation.KeyNavNode, {\n          getNode: function (r) {\n            return a.$container.querySelector(\".dhx_cal_data\");\n          },\n          _handlers: null,\n          isValid: function () {\n            return !0;\n          },\n          fallback: function () {\n            return this;\n          },\n          keys: {\n            \"up,down,right,left\": function () {\n              this.moveTo(new a.$keyboardNavigation.TimeSlot());\n            }\n          }\n        }), a.$keyboardNavigation.DataArea.prototype.bindAll(a.$keyboardNavigation.DataArea.prototype.keys);\n      }(e), rt(e), function (a) {\n        a.$keyboardNavigation.dispatcher = {\n          isActive: !1,\n          activeNode: null,\n          globalNode: new a.$keyboardNavigation.SchedulerNode(),\n          keepScrollPosition: function (r) {\n            var d,\n              i,\n              _ = a.$container.querySelector(\".dhx_timeline_scrollable_data\");\n            _ || (_ = a.$container.querySelector(\".dhx_cal_data\")), _ && (d = _.scrollTop, i = _.scrollLeft), r(), _ && (_.scrollTop = d, _.scrollLeft = i);\n          },\n          enable: function () {\n            if (a.$container) {\n              this.isActive = !0;\n              var r = this;\n              this.keepScrollPosition(function () {\n                r.globalNode.enable(), r.setActiveNode(r.getActiveNode());\n              });\n            }\n          },\n          disable: function () {\n            this.isActive = !1, this.globalNode.disable();\n          },\n          isEnabled: function () {\n            return !!this.isActive;\n          },\n          getDefaultNode: function () {\n            return this.globalNode.getDefaultNode();\n          },\n          setDefaultNode: function () {\n            this.setActiveNode(this.getDefaultNode());\n          },\n          getActiveNode: function () {\n            var r = this.activeNode;\n            return r && !r.isValid() && (r = r.fallback()), r;\n          },\n          focusGlobalNode: function () {\n            this.blurNode(this.globalNode), this.focusNode(this.globalNode);\n          },\n          setActiveNode: function (r) {\n            r && r.isValid() && (this.activeNode && this.activeNode.compareTo(r) || this.isEnabled() && (this.blurNode(this.activeNode), this.activeNode = r, this.focusNode(this.activeNode)));\n          },\n          focusNode: function (r) {\n            r && r.focus && (r.focus(), r.getNode && document.activeElement != r.getNode() && this.setActiveNode(new a.$keyboardNavigation.DataArea()));\n          },\n          blurNode: function (r) {\n            r && r.blur && r.blur();\n          },\n          getInlineEditor: function (r) {\n            var d = a.$container.querySelector(\".dhx_cal_editor[\" + a.config.event_attribute + \"='\" + r + \"'] textarea\");\n            return d && d.offsetWidth ? d : null;\n          },\n          keyDownHandler: function (r) {\n            if (!r.defaultPrevented) {\n              var d = this.getActiveNode();\n              if ((!a.$keyboardNavigation.isModal() || d && d.container && a.utils.dom.locateCss({\n                target: d.container\n              }, \"dhx_minical_popup\", !1)) && (!a.getState().editor_id || !this.getInlineEditor(a.getState().editor_id)) && this.isEnabled()) {\n                r = r || window.event;\n                var i = this.globalNode,\n                  _ = a.$keyboardNavigation.shortcuts.getCommandFromEvent(r);\n                d ? d.findHandler(_) ? d.doAction(_, r) : i.findHandler(_) && i.doAction(_, r) : this.setDefaultNode();\n              }\n            }\n          },\n          _timeout: null,\n          delay: function (r, d) {\n            clearTimeout(this._timeout), this._timeout = setTimeout(r, d || 1);\n          }\n        };\n      }(e), ot(e), function () {\n        st(e), function (o) {\n          o.$keyboardNavigation._minicalendars = [], o.$keyboardNavigation.isMinical = function (t) {\n            for (var n = o.$keyboardNavigation._minicalendars, s = 0; s < n.length; s++) if (this.isChildOf(t, n[s])) return !0;\n            return !1;\n          }, o.$keyboardNavigation.isChildOf = function (t, n) {\n            for (; t && t !== n;) t = t.parentNode;\n            return t === n;\n          }, o.$keyboardNavigation.patchMinicalendar = function () {\n            var t = o.$keyboardNavigation.dispatcher;\n            function n(v) {\n              var m = v.target;\n              t.enable(), t.setActiveNode(new o.$keyboardNavigation.MinicalButton(m, 0));\n            }\n            function s(v) {\n              var m = v.target || v.srcElement,\n                l = o.utils.dom.locateCss(v, \"dhx_cal_prev_button\", !1),\n                f = o.utils.dom.locateCss(v, \"dhx_cal_next_button\", !1),\n                g = o.utils.dom.locateCss(v, \"dhx_year_body\", !1),\n                p = 0,\n                y = 0;\n              if (g) {\n                for (var w, b, k = m; k && k.tagName.toLowerCase() != \"td\";) k = k.parentNode;\n                if (k && (w = (b = k).parentNode), w && b) {\n                  for (var E = w.parentNode.querySelectorAll(\"tr\"), D = 0; D < E.length; D++) if (E[D] == w) {\n                    p = D;\n                    break;\n                  }\n                  var x = w.querySelectorAll(\"td\");\n                  for (D = 0; D < x.length; D++) if (x[D] == b) {\n                    y = D;\n                    break;\n                  }\n                }\n              }\n              var S = v.currentTarget;\n              t.delay(function () {\n                var N;\n                (l || f || g) && (l ? (N = new o.$keyboardNavigation.MinicalButton(S, 0), t.setActiveNode(new o.$keyboardNavigation.MinicalButton(S, 0))) : f ? N = new o.$keyboardNavigation.MinicalButton(S, 1) : g && (N = new o.$keyboardNavigation.MinicalCell(S, p, y)), N && (t.enable(), N.isValid() && (t.activeNode = null, t.setActiveNode(N))));\n              });\n            }\n            if (o.renderCalendar) {\n              var c = o.renderCalendar;\n              o.renderCalendar = function () {\n                var v = c.apply(this, arguments),\n                  m = o.$keyboardNavigation._minicalendars;\n                o.eventRemove(v, \"click\", s), o.event(v, \"click\", s), o.eventRemove(v, \"focus\", n), o.event(v, \"focus\", n);\n                for (var l = !1, f = 0; f < m.length; f++) if (m[f] == v) {\n                  l = !0;\n                  break;\n                }\n                if (l || m.push(v), t.isEnabled()) {\n                  var g = t.getActiveNode();\n                  g && g.container == v ? t.focusNode(g) : v.setAttribute(\"tabindex\", \"0\");\n                } else v.setAttribute(\"tabindex\", \"0\");\n                return v;\n              };\n            }\n            if (o.destroyCalendar) {\n              var u = o.destroyCalendar;\n              o.destroyCalendar = function (v, m) {\n                v = v || (o._def_count ? o._def_count.firstChild : null);\n                var l = u.apply(this, arguments);\n                if (!v || !v.parentNode) for (var f = o.$keyboardNavigation._minicalendars, g = 0; g < f.length; g++) f[g] == v && (o.eventRemove(f[g], \"focus\", n), f.splice(g, 1), g--);\n                return l;\n              };\n            }\n          };\n        }(e);\n        var a = e.$keyboardNavigation.dispatcher;\n        if (e.$keyboardNavigation.attachSchedulerHandlers(), e.renderCalendar) e.$keyboardNavigation.patchMinicalendar();else var r = e.attachEvent(\"onSchedulerReady\", function () {\n          e.detachEvent(r), e.$keyboardNavigation.patchMinicalendar();\n        });\n        function d() {\n          if (e.config.key_nav) {\n            var o = document.activeElement;\n            return !(!o || e.utils.dom.locateCss(o, \"dhx_cal_quick_info\", !1)) && (e.$keyboardNavigation.isChildOf(o, e.$container) || e.$keyboardNavigation.isMinical(o));\n          }\n        }\n        function i(o) {\n          o && !a.isEnabled() ? a.enable() : !o && a.isEnabled() && a.disable();\n        }\n        const _ = setInterval(function () {\n          if (e.$container && e.$keyboardNavigation.isChildOf(e.$container, document.body)) {\n            var o = d();\n            o ? i(o) : !o && a.isEnabled() && setTimeout(function () {\n              e.$destroyed || (e.config.key_nav ? i(d()) : e.$container.removeAttribute(\"tabindex\"));\n            }, 100);\n          }\n        }, 500);\n        e.attachEvent(\"onDestroy\", function () {\n          clearInterval(_);\n        });\n      }();\n    },\n    layer: function (e) {\n      e.attachEvent(\"onTemplatesReady\", function () {\n        this.layers.sort(function (a, r) {\n          return a.zIndex - r.zIndex;\n        }), e._dp_init = function (a) {\n          a._methods = [\"_set_event_text_style\", \"\", \"changeEventId\", \"deleteEvent\"], this.attachEvent(\"onEventAdded\", function (r) {\n            !this._loading && this.validId(r) && this.getEvent(r) && this.getEvent(r).layer == a.layer && a.setUpdated(r, !0, \"inserted\");\n          }), this.attachEvent(\"onBeforeEventDelete\", function (r) {\n            if (this.getEvent(r) && this.getEvent(r).layer == a.layer) {\n              if (!this.validId(r)) return;\n              var d = a.getState(r);\n              return d == \"inserted\" || this._new_event ? (a.setUpdated(r, !1), !0) : d != \"deleted\" && (d == \"true_deleted\" || (a.setUpdated(r, !0, \"deleted\"), !1));\n            }\n            return !0;\n          }), this.attachEvent(\"onEventChanged\", function (r) {\n            !this._loading && this.validId(r) && this.getEvent(r) && this.getEvent(r).layer == a.layer && a.setUpdated(r, !0, \"updated\");\n          }), a._getRowData = function (r, d) {\n            var i = this.obj.getEvent(r),\n              _ = {};\n            for (var o in i) o.indexOf(\"_\") !== 0 && (i[o] && i[o].getUTCFullYear ? _[o] = this.obj._helpers.formatDate(i[o]) : _[o] = i[o]);\n            return _;\n          }, a._clearUpdateFlag = function () {}, a.attachEvent(\"insertCallback\", e._update_callback), a.attachEvent(\"updateCallback\", e._update_callback), a.attachEvent(\"deleteCallback\", function (r, d) {\n            this.obj.setUserData(d, this.action_param, \"true_deleted\"), this.obj.deleteEvent(d);\n          });\n        }, function () {\n          var a = function (i) {\n            if (i === null || typeof i != \"object\") return i;\n            var _ = new i.constructor();\n            for (var o in i) _[o] = a(i[o]);\n            return _;\n          };\n          e._dataprocessors = [], e._layers_zindex = {};\n          for (var r = 0; r < e.layers.length; r++) {\n            if (e.config[\"lightbox_\" + e.layers[r].name] = {}, e.config[\"lightbox_\" + e.layers[r].name].sections = a(e.config.lightbox.sections), e._layers_zindex[e.layers[r].name] = e.config.initial_layer_zindex || 5 + 3 * r, e.layers[r].url) {\n              var d = e.createDataProcessor({\n                url: e.layers[r].url\n              });\n              d.layer = e.layers[r].name, e._dataprocessors.push(d), e._dataprocessors[r].init(e);\n            }\n            e.layers[r].isDefault && (e.defaultLayer = e.layers[r].name);\n          }\n        }(), e.showLayer = function (a) {\n          this.toggleLayer(a, !0);\n        }, e.hideLayer = function (a) {\n          this.toggleLayer(a, !1);\n        }, e.toggleLayer = function (a, r) {\n          var d = this.getLayer(a);\n          d.visible = r !== void 0 ? !!r : !d.visible, this.setCurrentView(this._date, this._mode);\n        }, e.getLayer = function (a) {\n          var r, d;\n          typeof a == \"string\" && (d = a), typeof a == \"object\" && (d = a.layer);\n          for (var i = 0; i < e.layers.length; i++) e.layers[i].name == d && (r = e.layers[i]);\n          return r;\n        }, e.attachEvent(\"onBeforeLightbox\", function (a) {\n          var r = this.getEvent(a);\n          return this.config.lightbox.sections = this.config[\"lightbox_\" + r.layer].sections, e.resetLightbox(), !0;\n        }), e.attachEvent(\"onClick\", function (a, r) {\n          var d = e.getEvent(a);\n          return !e.getLayer(d.layer).noMenu;\n        }), e.attachEvent(\"onEventCollision\", function (a, r) {\n          var d = this.getLayer(a);\n          if (!d.checkCollision) return !1;\n          for (var i = 0, _ = 0; _ < r.length; _++) r[_].layer == d.name && r[_].id != a.id && i++;\n          return i >= e.config.collision_limit;\n        }), e.addEvent = function (a, r, d, i, _) {\n          var o = a;\n          arguments.length != 1 && ((o = _ || {}).start_date = a, o.end_date = r, o.text = d, o.id = i, o.layer = this.defaultLayer), o.id = o.id || e.uid(), o.text = o.text || \"\", typeof o.start_date == \"string\" && (o.start_date = this.templates.api_date(o.start_date)), typeof o.end_date == \"string\" && (o.end_date = this.templates.api_date(o.end_date)), o._timed = this.isOneDayEvent(o);\n          var t = !this._events[o.id];\n          this._events[o.id] = o, this.event_updated(o), this._loading || this.callEvent(t ? \"onEventAdded\" : \"onEventChanged\", [o.id, o]);\n        }, this._evs_layer = {};\n        for (var h = 0; h < this.layers.length; h++) this._evs_layer[this.layers[h].name] = [];\n        e.addEventNow = function (a, r, d) {\n          var i = {};\n          typeof a == \"object\" && (i = a, a = null);\n          var _ = 6e4 * (this.config.event_duration || this.config.time_step);\n          a || (a = Math.round(e._currentDate().valueOf() / _) * _);\n          var o = new Date(a);\n          if (!r) {\n            var t = this.config.first_hour;\n            t > o.getHours() && (o.setHours(t), a = o.valueOf()), r = a + _;\n          }\n          i.start_date = i.start_date || o, i.end_date = i.end_date || new Date(r), i.text = i.text || this.locale.labels.new_event, i.id = this._drag_id = this.uid(), i.layer = this.defaultLayer, this._drag_mode = \"new-size\", this._loading = !0, this.addEvent(i), this.callEvent(\"onEventCreated\", [this._drag_id, d]), this._loading = !1, this._drag_event = {}, this._on_mouse_up(d);\n        }, e._t_render_view_data = function (a) {\n          if (this.config.multi_day && !this._table_view) {\n            for (var r = [], d = [], i = 0; i < a.length; i++) a[i]._timed ? r.push(a[i]) : d.push(a[i]);\n            this._table_view = !0, this.render_data(d), this._table_view = !1, this.render_data(r);\n          } else this.render_data(a);\n        }, e.render_view_data = function () {\n          if (this._not_render) this._render_wait = !0;else {\n            this._render_wait = !1, this.clear_view(), this._evs_layer = {};\n            for (var a = 0; a < this.layers.length; a++) this._evs_layer[this.layers[a].name] = [];\n            var r = this.get_visible_events();\n            for (a = 0; a < r.length; a++) this._evs_layer[r[a].layer] && this._evs_layer[r[a].layer].push(r[a]);\n            if (this._mode == \"month\") {\n              var d = [];\n              for (a = 0; a < this.layers.length; a++) this.layers[a].visible && (d = d.concat(this._evs_layer[this.layers[a].name]));\n              this._t_render_view_data(d);\n            } else for (a = 0; a < this.layers.length; a++) if (this.layers[a].visible) {\n              var i = this._evs_layer[this.layers[a].name];\n              this._t_render_view_data(i);\n            }\n          }\n        }, e._render_v_bar = function (a, r, d, i, _, o, t, n, s) {\n          var c = a.id;\n          t.indexOf(\"<div class=\") == -1 && (t = e.templates[\"event_header_\" + a.layer] ? e.templates[\"event_header_\" + a.layer](a.start_date, a.end_date, a) : t), n.indexOf(\"<div class=\") == -1 && (n = e.templates[\"event_text_\" + a.layer] ? e.templates[\"event_text_\" + a.layer](a.start_date, a.end_date, a) : n);\n          var u = document.createElement(\"div\"),\n            v = \"dhx_cal_event\",\n            m = e.templates[\"event_class_\" + a.layer] ? e.templates[\"event_class_\" + a.layer](a.start_date, a.end_date, a) : e.templates.event_class(a.start_date, a.end_date, a);\n          m && (v = v + \" \" + m);\n          var l = e._border_box_events(),\n            f = i - 2,\n            g = l ? f : i - 4,\n            p = l ? f : i - 6,\n            y = l ? f : i - 14,\n            w = l ? f - 2 : i - 8,\n            b = l ? _ - this.xy.event_header_height : _ - 30 + 1,\n            k = '<div event_id=\"' + c + '\" ' + e.config.event_attribute + '=\"' + c + '\" class=\"' + v + '\" style=\"position:absolute; top:' + d + \"px; left:\" + r + \"px; width:\" + g + \"px; height:\" + _ + \"px;\" + (o || \"\") + '\">';\n          return k += '<div class=\"dhx_header\" style=\" width:' + p + 'px;\" >&nbsp;</div>', k += '<div class=\"dhx_title\">' + t + \"</div>\", k += '<div class=\"dhx_body\" style=\" width:' + y + \"px; height:\" + b + 'px;\">' + n + \"</div>\", k += '<div class=\"dhx_footer\" style=\" width:' + w + \"px;\" + (s ? \" margin-top:-1px;\" : \"\") + '\" ></div></div>', u.innerHTML = k, u.style.zIndex = 100, u.firstChild;\n        }, e.render_event_bar = function (a) {\n          var r = this._els.dhx_cal_data[0],\n            d = this._colsS[a._sday],\n            i = this._colsS[a._eday];\n          i == d && (i = this._colsS[a._eday + 1]);\n          var _ = this.xy.bar_height,\n            o = this._colsS.heights[a._sweek] + (this._colsS.height ? this.xy.month_scale_height + 2 : 2) + a._sorder * _,\n            t = document.createElement(\"div\"),\n            n = a._timed ? \"dhx_cal_event_clear\" : \"dhx_cal_event_line\",\n            s = e.templates[\"event_class_\" + a.layer] ? e.templates[\"event_class_\" + a.layer](a.start_date, a.end_date, a) : e.templates.event_class(a.start_date, a.end_date, a);\n          s && (n = n + \" \" + s);\n          var c = '<div event_id=\"' + a.id + '\" ' + this.config.event_attribute + '=\"' + a.id + '\" class=\"' + n + '\" style=\"position:absolute; top:' + o + \"px; left:\" + d + \"px; width:\" + (i - d - 15) + \"px;\" + (a._text_style || \"\") + '\">';\n          a._timed && (c += e.templates[\"event_bar_date_\" + a.layer] ? e.templates[\"event_bar_date_\" + a.layer](a.start_date, a.end_date, a) : e.templates.event_bar_date(a.start_date, a.end_date, a)), c += e.templates[\"event_bar_text_\" + a.layer] ? e.templates[\"event_bar_text_\" + a.layer](a.start_date, a.end_date, a) : e.templates.event_bar_text(a.start_date, a.end_date, a) + \"</div>)\", c += \"</div>\", t.innerHTML = c, this._rendered.push(t.firstChild), r.appendChild(t.firstChild);\n        }, e.render_event = function (a) {\n          var r = e.xy.menu_width;\n          if (e.getLayer(a.layer).noMenu && (r = 0), !(a._sday < 0)) {\n            var d = e.locate_holder(a._sday);\n            if (d) {\n              var i = 60 * a.start_date.getHours() + a.start_date.getMinutes(),\n                _ = 60 * a.end_date.getHours() + a.end_date.getMinutes() || 60 * e.config.last_hour,\n                o = Math.round((60 * i * 1e3 - 60 * this.config.first_hour * 60 * 1e3) * this.config.hour_size_px / 36e5) % (24 * this.config.hour_size_px) + 1,\n                t = Math.max(e.xy.min_event_height, (_ - i) * this.config.hour_size_px / 60) + 1,\n                n = Math.floor((d.clientWidth - r) / a._count),\n                s = a._sorder * n + 1;\n              a._inner || (n *= a._count - a._sorder);\n              var c = this._render_v_bar(a.id, r + s, o, n, t, a._text_style, e.templates.event_header(a.start_date, a.end_date, a), e.templates.event_text(a.start_date, a.end_date, a));\n              if (this._rendered.push(c), d.appendChild(c), s = s + parseInt(d.style.left, 10) + r, o += this._dy_shift, c.style.zIndex = this._layers_zindex[a.layer], this._edit_id == a.id) {\n                c.style.zIndex = parseInt(c.style.zIndex) + 1;\n                var u = c.style.zIndex;\n                n = Math.max(n - 4, e.xy.editor_width), (c = document.createElement(\"div\")).setAttribute(\"event_id\", a.id), c.setAttribute(this.config.event_attribute, a.id), this.set_xy(c, n, t - 20, s, o + 14), c.className = \"dhx_cal_editor\", c.style.zIndex = u;\n                var v = document.createElement(\"div\");\n                this.set_xy(v, n - 6, t - 26), v.style.cssText += \";margin:2px 2px 2px 2px;overflow:hidden;\", v.style.zIndex = u, c.appendChild(v), this._els.dhx_cal_data[0].appendChild(c), this._rendered.push(c), v.innerHTML = \"<textarea class='dhx_cal_editor'>\" + a.text + \"</textarea>\", this._editor = v.firstChild, this._editor.addEventListener(\"keypress\", function (p) {\n                  if (p.shiftKey) return !0;\n                  var y = p.keyCode;\n                  y == e.keys.edit_save && e.editStop(!0), y == e.keys.edit_cancel && e.editStop(!1);\n                }), this._editor.addEventListener(\"selectstart\", function (p) {\n                  return p.cancelBubble = !0, !0;\n                }), v.firstChild.focus(), this._els.dhx_cal_data[0].scrollLeft = 0, v.firstChild.select();\n              }\n              if (this._select_id == a.id) {\n                c.style.zIndex = parseInt(c.style.zIndex) + 1;\n                for (var m = this.config[\"icons_\" + (this._edit_id == a.id ? \"edit\" : \"select\")], l = \"\", f = 0; f < m.length; f++) l += \"<div class='dhx_menu_icon \" + m[f] + \"' title='\" + this.locale.labels[m[f]] + \"'></div>\";\n                var g = this._render_v_bar(a.id, s - r + 1, o, r, 20 * m.length + 26, \"\", \"<div class='dhx_menu_head'></div>\", l, !0);\n                g.style.left = s - r + 1, g.style.zIndex = c.style.zIndex, this._els.dhx_cal_data[0].appendChild(g), this._rendered.push(g);\n              }\n            }\n          }\n        }, e.filter_agenda = function (a, r) {\n          var d = e.getLayer(r.layer);\n          return d && d.visible;\n        };\n      });\n    },\n    limit: function (e) {\n      e.config.limit_start = null, e.config.limit_end = null, e.config.limit_view = !1, e.config.check_limits = !0, e.config.mark_now = !0, e.config.display_marked_timespans = !0, e.config.overwrite_marked_timespans = !0, e._temp_limit_scope = function () {\n        var h = null,\n          a = \"dhx_time_block\",\n          r = \"default\",\n          d = function (o, t, n) {\n            var s = typeof o == \"object\" ? o : {\n              days: o\n            };\n            return s.type = a, s.css = \"\", t && (n && (s.sections = n), s = function (c, u, v) {\n              return u instanceof Date && v instanceof Date ? (c.start_date = u, c.end_date = v) : (c.days = u, c.zones = v), c;\n            }(s, o, t)), s;\n          };\n        e.blockTime = function (o, t, n) {\n          var s = d(o, t, n);\n          return e.addMarkedTimespan(s);\n        }, e.unblockTime = function (o, t, n) {\n          var s = d(o, t = t || \"fullday\", n);\n          return e.deleteMarkedTimespan(s);\n        }, e.attachEvent(\"onBeforeViewChange\", function (o, t, n, s) {\n          function c(u, v) {\n            var m = e.config.limit_start,\n              l = e.config.limit_end,\n              f = e.date.add(u, 1, v);\n            return u.valueOf() > l.valueOf() || f <= m.valueOf();\n          }\n          return !e.config.limit_view || !c(s = s || t, n = n || o) || t.valueOf() == s.valueOf() || (setTimeout(function () {\n            if (e.$destroyed) return !0;\n            var u = c(t, n) ? e.config.limit_start : t;\n            e.setCurrentView(c(u, n) ? null : u, n);\n          }, 1), !1);\n        }), e.checkInMarkedTimespan = function (o, t, n) {\n          t = t || r;\n          for (var s = !0, c = new Date(o.start_date.valueOf()), u = e.date.add(c, 1, \"day\"), v = e._marked_timespans; c < o.end_date; c = e.date.date_part(u), u = e.date.add(c, 1, \"day\")) {\n            var m = +e.date.date_part(new Date(c)),\n              l = _(o, v, c.getDay(), m, t);\n            if (l) for (var f = 0; f < l.length; f += 2) {\n              var g = e._get_zone_minutes(c),\n                p = o.end_date > u || o.end_date.getDate() != c.getDate() ? 1440 : e._get_zone_minutes(o.end_date),\n                y = l[f],\n                w = l[f + 1];\n              if (y < p && w > g && !(s = typeof n == \"function\" && n(o, g, p, y, w))) break;\n            }\n          }\n          return !s;\n        };\n        var i = e.checkLimitViolation = function (o) {\n          if (!o || !e.config.check_limits) return !0;\n          var t = e,\n            n = t.config,\n            s = [];\n          if (o.rec_type) for (var c = e.getRecDates(o), u = 0; u < c.length; u++) {\n            var v = e._copy_event(o);\n            e._lame_copy(v, c[u]), s.push(v);\n          } else s = [o];\n          for (var m = !0, l = 0; l < s.length; l++) {\n            var f = !0;\n            (v = s[l])._timed = e.isOneDayEvent(v), (f = !n.limit_start || !n.limit_end || v.start_date.valueOf() >= n.limit_start.valueOf() && v.end_date.valueOf() <= n.limit_end.valueOf()) && (f = !e.checkInMarkedTimespan(v, a, function (g, p, y, w, b) {\n              var k = !0;\n              return p <= b && p >= w && ((b == 1440 || y <= b) && (k = !1), g._timed && t._drag_id && t._drag_mode == \"new-size\" ? (g.start_date.setHours(0), g.start_date.setMinutes(b)) : k = !1), (y >= w && y <= b || p < w && y > b) && (g._timed && t._drag_id && t._drag_mode == \"new-size\" ? (g.end_date.setHours(0), g.end_date.setMinutes(w)) : k = !1), k;\n            })), f || (f = t.checkEvent(\"onLimitViolation\") ? t.callEvent(\"onLimitViolation\", [v.id, v]) : f), m = m && f;\n          }\n          return m || (t._drag_id = null, t._drag_mode = null), m;\n        };\n        function _(o, t, n, s, c) {\n          var u = e,\n            v = [],\n            m = {\n              _props: \"map_to\",\n              matrix: \"y_property\"\n            };\n          for (var l in m) {\n            var f = m[l];\n            if (u[l]) for (var g in u[l]) {\n              var p = u[l][g][f];\n              o[p] && (v = u._add_timespan_zones(v, e._get_blocked_zones(t[g], o[p], n, s, c)));\n            }\n          }\n          return v = u._add_timespan_zones(v, e._get_blocked_zones(t, \"global\", n, s, c));\n        }\n        e._get_blocked_zones = function (o, t, n, s, c) {\n          var u = [];\n          if (o && o[t]) for (var v = o[t], m = this._get_relevant_blocked_zones(n, s, v, c), l = 0; l < m.length; l++) u = this._add_timespan_zones(u, m[l].zones);\n          return u;\n        }, e._get_relevant_blocked_zones = function (o, t, n, s) {\n          var c;\n          return e.config.overwrite_marked_timespans ? c = n[t] && n[t][s] ? n[t][s] : n[o] && n[o][s] ? n[o][s] : [] : (c = [], n[t] && n[t][s] && (c = c.concat(n[t][s])), n[o] && n[o][s] && (c = c.concat(n[o][s]))), c;\n        }, e.attachEvent(\"onMouseDown\", function (o) {\n          return o != a;\n        }), e.attachEvent(\"onBeforeDrag\", function (o) {\n          return !o || i(e.getEvent(o));\n        }), e.attachEvent(\"onClick\", function (o, t) {\n          return i(e.getEvent(o));\n        }), e.attachEvent(\"onBeforeLightbox\", function (o) {\n          var t = e.getEvent(o);\n          return h = [t.start_date, t.end_date], i(t);\n        }), e.attachEvent(\"onEventSave\", function (o, t, n) {\n          if (!t.start_date || !t.end_date) {\n            var s = e.getEvent(o);\n            t.start_date = new Date(s.start_date), t.end_date = new Date(s.end_date);\n          }\n          if (t.rec_type) {\n            var c = e._lame_clone(t);\n            return e._roll_back_dates(c), i(c);\n          }\n          return i(t);\n        }), e.attachEvent(\"onEventAdded\", function (o) {\n          if (!o) return !0;\n          var t = e.getEvent(o);\n          return !i(t) && e.config.limit_start && e.config.limit_end && (t.start_date < e.config.limit_start && (t.start_date = new Date(e.config.limit_start)), t.start_date.valueOf() >= e.config.limit_end.valueOf() && (t.start_date = this.date.add(e.config.limit_end, -1, \"day\")), t.end_date < e.config.limit_start && (t.end_date = new Date(e.config.limit_start)), t.end_date.valueOf() >= e.config.limit_end.valueOf() && (t.end_date = this.date.add(e.config.limit_end, -1, \"day\")), t.start_date.valueOf() >= t.end_date.valueOf() && (t.end_date = this.date.add(t.start_date, this.config.event_duration || this.config.time_step, \"minute\")), t._timed = this.isOneDayEvent(t)), !0;\n        }), e.attachEvent(\"onEventChanged\", function (o) {\n          if (!o) return !0;\n          var t = e.getEvent(o);\n          if (!i(t)) {\n            if (!h) return !1;\n            t.start_date = h[0], t.end_date = h[1], t._timed = this.isOneDayEvent(t);\n          }\n          return !0;\n        }), e.attachEvent(\"onBeforeEventChanged\", function (o, t, n) {\n          return i(o);\n        }), e.attachEvent(\"onBeforeEventCreated\", function (o) {\n          var t = e.getActionData(o).date,\n            n = {\n              _timed: !0,\n              start_date: t,\n              end_date: e.date.add(t, e.config.time_step, \"minute\")\n            };\n          return i(n);\n        }), e.attachEvent(\"onViewChange\", function () {\n          e._mark_now();\n        }), e.attachEvent(\"onAfterSchedulerResize\", function () {\n          return window.setTimeout(function () {\n            if (e.$destroyed) return !0;\n            e._mark_now();\n          }, 1), !0;\n        }), e.attachEvent(\"onTemplatesReady\", function () {\n          e._mark_now_timer = window.setInterval(function () {\n            e._is_initialized() && e._mark_now();\n          }, 6e4);\n        }), e.attachEvent(\"onDestroy\", function () {\n          clearInterval(e._mark_now_timer);\n        }), e._mark_now = function (o) {\n          var t = \"dhx_now_time\";\n          this._els[t] || (this._els[t] = []);\n          var n = e._currentDate(),\n            s = this.config;\n          if (e._remove_mark_now(), !o && s.mark_now && n < this._max_date && n > this._min_date && n.getHours() >= s.first_hour && n.getHours() < s.last_hour) {\n            var c = this.locate_holder_day(n);\n            this._els[t] = e._append_mark_now(c, n);\n          }\n        }, e._append_mark_now = function (o, t) {\n          var n = \"dhx_now_time\",\n            s = e._get_zone_minutes(t),\n            c = {\n              zones: [s, s + 1],\n              css: n,\n              type: n\n            };\n          if (!this._table_view) {\n            if (this._props && this._props[this._mode]) {\n              var u,\n                v,\n                m = this._props[this._mode],\n                l = m.size || m.options.length;\n              m.days > 1 ? (m.size && m.options.length && (o = (m.position + o) / m.options.length * m.size), u = o, v = o + l) : v = (u = 0) + l;\n              for (var f = [], g = u; g < v; g++) {\n                var p = g;\n                c.days = p;\n                var y = e._render_marked_timespan(c, null, p)[0];\n                f.push(y);\n              }\n              return f;\n            }\n            return c.days = o, e._render_marked_timespan(c, null, o);\n          }\n          if (this._mode == \"month\") return c.days = +e.date.date_part(t), e._render_marked_timespan(c, null, null);\n        }, e._remove_mark_now = function () {\n          for (var o = \"dhx_now_time\", t = this._els[o], n = 0; n < t.length; n++) {\n            var s = t[n],\n              c = s.parentNode;\n            c && c.removeChild(s);\n          }\n          this._els[o] = [];\n        }, e._marked_timespans = {\n          global: {}\n        }, e._get_zone_minutes = function (o) {\n          return 60 * o.getHours() + o.getMinutes();\n        }, e._prepare_timespan_options = function (o) {\n          var t = [],\n            n = [];\n          if (o.days == \"fullweek\" && (o.days = [0, 1, 2, 3, 4, 5, 6]), o.days instanceof Array) {\n            for (var s = o.days.slice(), c = 0; c < s.length; c++) {\n              var u = e._lame_clone(o);\n              u.days = s[c], t.push.apply(t, e._prepare_timespan_options(u));\n            }\n            return t;\n          }\n          if (!o || !(o.start_date && o.end_date && o.end_date > o.start_date || o.days !== void 0 && o.zones) && !o.type) return t;\n          o.zones == \"fullday\" && (o.zones = [0, 1440]), o.zones && o.invert_zones && (o.zones = e.invertZones(o.zones)), o.id = e.uid(), o.css = o.css || \"\", o.type = o.type || r;\n          var v = o.sections;\n          if (v) {\n            for (var m in v) if (v.hasOwnProperty(m)) {\n              var l = v[m];\n              for (l instanceof Array || (l = [l]), c = 0; c < l.length; c++) (k = e._lame_copy({}, o)).sections = {}, k.sections[m] = l[c], n.push(k);\n            }\n          } else n.push(o);\n          for (var f = 0; f < n.length; f++) {\n            var g = n[f],\n              p = g.start_date,\n              y = g.end_date;\n            if (p && y) for (var w = e.date.date_part(new Date(p)), b = e.date.add(w, 1, \"day\"); w < y;) {\n              var k;\n              delete (k = e._lame_copy({}, g)).start_date, delete k.end_date, k.days = w.valueOf();\n              var E = p > w ? e._get_zone_minutes(p) : 0,\n                D = y > b || y.getDate() != w.getDate() ? 1440 : e._get_zone_minutes(y);\n              k.zones = [E, D], t.push(k), w = b, b = e.date.add(b, 1, \"day\");\n            } else g.days instanceof Date && (g.days = e.date.date_part(g.days).valueOf()), g.zones = o.zones.slice(), t.push(g);\n          }\n          return t;\n        }, e._get_dates_by_index = function (o, t, n) {\n          var s = [];\n          t = e.date.date_part(new Date(t || e._min_date)), n = new Date(n || e._max_date);\n          for (var c = t.getDay(), u = o - c >= 0 ? o - c : 7 - t.getDay() + o, v = e.date.add(t, u, \"day\"); v < n; v = e.date.add(v, 1, \"week\")) s.push(v);\n          return s;\n        }, e._get_css_classes_by_config = function (o) {\n          var t = [];\n          return o.type == a && (t.push(a), o.css && t.push(a + \"_reset\")), t.push(\"dhx_marked_timespan\", o.css), t.join(\" \");\n        }, e._get_block_by_config = function (o) {\n          var t = document.createElement(\"div\");\n          return o.html && (typeof o.html == \"string\" ? t.innerHTML = o.html : t.appendChild(o.html)), t;\n        }, e._render_marked_timespan = function (o, t, n) {\n          var s = [],\n            c = e.config,\n            u = this._min_date,\n            v = this._max_date,\n            m = !1;\n          if (!c.display_marked_timespans) return s;\n          if (!n && n !== 0) {\n            if (o.days < 7) n = o.days;else {\n              var l = new Date(o.days);\n              if (m = +l, !(+v > +l && +u <= +l)) return s;\n              n = l.getDay();\n            }\n            var f = u.getDay();\n            f > n ? n = 7 - (f - n) : n -= f;\n          }\n          var g = o.zones,\n            p = e._get_css_classes_by_config(o);\n          if (e._table_view && e._mode == \"month\") {\n            var y = [],\n              w = [];\n            if (t) y.push(t), w.push(n);else {\n              w = m ? [m] : e._get_dates_by_index(n);\n              for (var b = 0; b < w.length; b++) y.push(this._scales[w[b]]);\n            }\n            for (b = 0; b < y.length; b++) {\n              t = y[b], n = w[b];\n              var k = this.locate_holder_day(n, !1) % this._cols.length;\n              if (!this._ignores[k]) {\n                var E = e._get_block_by_config(o);\n                E.className = p, E.style.top = \"0px\", E.style.height = \"100%\";\n                for (var D = 0; D < g.length; D += 2) {\n                  var x = g[b];\n                  if ((A = g[b + 1]) <= x) return [];\n                  (C = E.cloneNode(!0)).style.left = \"0px\", C.style.width = \"100%\", t.appendChild(C), s.push(C);\n                }\n              }\n            }\n          } else {\n            var S = n;\n            if (this._ignores[this.locate_holder_day(n, !1)]) return s;\n            if (this._props && this._props[this._mode] && o.sections && o.sections[this._mode]) {\n              var N = this._props[this._mode];\n              S = N.order[o.sections[this._mode]];\n              var M = N.order[o.sections[this._mode]];\n              N.days > 1 ? S = S * (N.size || N.options.length) + M : (S = M, N.size && S > N.position + N.size && (S = 0));\n            }\n            for (t = t || e.locate_holder(S), b = 0; b < g.length; b += 2) {\n              var A, C;\n              if (x = Math.max(g[b], 60 * c.first_hour), (A = Math.min(g[b + 1], 60 * c.last_hour)) <= x) {\n                if (b + 2 < g.length) continue;\n                return [];\n              }\n              (C = e._get_block_by_config(o)).className = p;\n              var T = 24 * this.config.hour_size_px + 1,\n                O = 36e5;\n              C.style.top = Math.round((60 * x * 1e3 - this.config.first_hour * O) * this.config.hour_size_px / O) % T + \"px\", C.style.height = Math.max(Math.round(60 * (A - x) * 1e3 * this.config.hour_size_px / O) % T, 1) + \"px\", t.appendChild(C), s.push(C);\n            }\n          }\n          return s;\n        }, e._mark_timespans = function () {\n          var o = this._els.dhx_cal_data[0],\n            t = [];\n          if (e._table_view && e._mode == \"month\") for (var n in this._scales) {\n            var s = /* @__PURE__ */new Date(+n);\n            t.push.apply(t, e._on_scale_add_marker(this._scales[n], s));\n          } else {\n            s = new Date(e._min_date);\n            for (var c = 0, u = o.childNodes.length; c < u; c++) {\n              var v = o.childNodes[c];\n              v.firstChild && e._getClassName(v.firstChild).indexOf(\"dhx_scale_hour\") > -1 || (t.push.apply(t, e._on_scale_add_marker(v, s)), s = e.date.add(s, 1, \"day\"));\n            }\n          }\n          return t;\n        }, e.markTimespan = function (o) {\n          if (!this._els) throw new Error(\"`scheduler.markTimespan` can't be used before scheduler initialization. Place `scheduler.markTimespan` call after `scheduler.init`.\");\n          var t = !1;\n          this._els.dhx_cal_data || (e.get_elements(), t = !0);\n          var n = e._marked_timespans_ids,\n            s = e._marked_timespans_types,\n            c = e._marked_timespans;\n          e.deleteMarkedTimespan(), e.addMarkedTimespan(o);\n          var u = e._mark_timespans();\n          return t && (e._els = []), e._marked_timespans_ids = n, e._marked_timespans_types = s, e._marked_timespans = c, u;\n        }, e.unmarkTimespan = function (o) {\n          if (o) for (var t = 0; t < o.length; t++) {\n            var n = o[t];\n            n.parentNode && n.parentNode.removeChild(n);\n          }\n        }, e._addMarkerTimespanConfig = function (o) {\n          var t = \"global\",\n            n = e._marked_timespans,\n            s = o.id,\n            c = e._marked_timespans_ids;\n          c[s] || (c[s] = []);\n          var u = o.days,\n            v = o.sections,\n            m = o.type;\n          if (o.id = s, v) {\n            for (var l in v) if (v.hasOwnProperty(l)) {\n              n[l] || (n[l] = {});\n              var f = v[l],\n                g = n[l];\n              g[f] || (g[f] = {}), g[f][u] || (g[f][u] = {}), g[f][u][m] || (g[f][u][m] = [], e._marked_timespans_types || (e._marked_timespans_types = {}), e._marked_timespans_types[m] || (e._marked_timespans_types[m] = !0));\n              var p = g[f][u][m];\n              o._array = p, p.push(o), c[s].push(o);\n            }\n          } else n[t][u] || (n[t][u] = {}), n[t][u][m] || (n[t][u][m] = []), e._marked_timespans_types || (e._marked_timespans_types = {}), e._marked_timespans_types[m] || (e._marked_timespans_types[m] = !0), p = n[t][u][m], o._array = p, p.push(o), c[s].push(o);\n        }, e._marked_timespans_ids = {}, e.addMarkedTimespan = function (o) {\n          var t = e._prepare_timespan_options(o);\n          if (t.length) {\n            for (var n = t[0].id, s = 0; s < t.length; s++) e._addMarkerTimespanConfig(t[s]);\n            return n;\n          }\n        }, e._add_timespan_zones = function (o, t) {\n          var n = o.slice();\n          if (t = t.slice(), !n.length) return t;\n          for (var s = 0; s < n.length; s += 2) for (var c = n[s], u = n[s + 1], v = s + 2 == n.length, m = 0; m < t.length; m += 2) {\n            var l = t[m],\n              f = t[m + 1];\n            if (f > u && l <= u || l < c && f >= c) n[s] = Math.min(c, l), n[s + 1] = Math.max(u, f), s -= 2;else {\n              if (!v) continue;\n              var g = c > l ? 0 : 2;\n              n.splice(s + g, 0, l, f);\n            }\n            t.splice(m--, 2);\n            break;\n          }\n          return n;\n        }, e._subtract_timespan_zones = function (o, t) {\n          for (var n = o.slice(), s = 0; s < n.length; s += 2) for (var c = n[s], u = n[s + 1], v = 0; v < t.length; v += 2) {\n            var m = t[v],\n              l = t[v + 1];\n            if (l > c && m < u) {\n              var f = !1;\n              c >= m && u <= l && n.splice(s, 2), c < m && (n.splice(s, 2, c, m), f = !0), u > l && n.splice(f ? s + 2 : s, f ? 0 : 2, l, u), s -= 2;\n              break;\n            }\n          }\n          return n;\n        }, e.invertZones = function (o) {\n          return e._subtract_timespan_zones([0, 1440], o.slice());\n        }, e._delete_marked_timespan_by_id = function (o) {\n          var t = e._marked_timespans_ids[o];\n          if (t) {\n            for (var n = 0; n < t.length; n++) for (var s = t[n], c = s._array, u = 0; u < c.length; u++) if (c[u] == s) {\n              c.splice(u, 1);\n              break;\n            }\n          }\n        }, e._delete_marked_timespan_by_config = function (o) {\n          var t,\n            n = e._marked_timespans,\n            s = o.sections,\n            c = o.days,\n            u = o.type || r;\n          if (s) {\n            for (var v in s) if (s.hasOwnProperty(v) && n[v]) {\n              var m = s[v];\n              n[v][m] && (t = n[v][m]);\n            }\n          } else t = n.global;\n          if (t) {\n            if (c !== void 0) t[c] && t[c][u] && (e._addMarkerTimespanConfig(o), e._delete_marked_timespans_list(t[c][u], o));else for (var l in t) if (t[l][u]) {\n              var f = e._lame_clone(o);\n              o.days = l, e._addMarkerTimespanConfig(f), e._delete_marked_timespans_list(t[l][u], o);\n            }\n          }\n        }, e._delete_marked_timespans_list = function (o, t) {\n          for (var n = 0; n < o.length; n++) {\n            var s = o[n],\n              c = e._subtract_timespan_zones(s.zones, t.zones);\n            if (c.length) s.zones = c;else {\n              o.splice(n, 1), n--;\n              for (var u = e._marked_timespans_ids[s.id], v = 0; v < u.length; v++) if (u[v] == s) {\n                u.splice(v, 1);\n                break;\n              }\n            }\n          }\n        }, e.deleteMarkedTimespan = function (o) {\n          if (arguments.length || (e._marked_timespans = {\n            global: {}\n          }, e._marked_timespans_ids = {}, e._marked_timespans_types = {}), typeof o != \"object\") e._delete_marked_timespan_by_id(o);else {\n            o.start_date && o.end_date || (o.days !== void 0 || o.type || (o.days = \"fullweek\"), o.zones || (o.zones = \"fullday\"));\n            var t = [];\n            if (o.type) t.push(o.type);else for (var n in e._marked_timespans_types) t.push(n);\n            for (var s = e._prepare_timespan_options(o), c = 0; c < s.length; c++) for (var u = s[c], v = 0; v < t.length; v++) {\n              var m = e._lame_clone(u);\n              m.type = t[v], e._delete_marked_timespan_by_config(m);\n            }\n          }\n        }, e._get_types_to_render = function (o, t) {\n          var n = o ? e._lame_copy({}, o) : {};\n          for (var s in t || {}) t.hasOwnProperty(s) && (n[s] = t[s]);\n          return n;\n        }, e._get_configs_to_render = function (o) {\n          var t = [];\n          for (var n in o) o.hasOwnProperty(n) && t.push.apply(t, o[n]);\n          return t;\n        }, e._on_scale_add_marker = function (o, t) {\n          if (!e._table_view || e._mode == \"month\") {\n            var n = t.getDay(),\n              s = t.valueOf(),\n              c = this._mode,\n              u = e._marked_timespans,\n              v = [],\n              m = [];\n            if (this._props && this._props[c]) {\n              var l = this._props[c],\n                f = l.options,\n                g = f[e._get_unit_index(l, t)];\n              if (l.days > 1) {\n                var p = Math.round((t - e._min_date) / 864e5),\n                  y = l.size || f.length;\n                t = e.date.add(e._min_date, Math.floor(p / y), \"day\"), t = e.date.date_part(t);\n              } else t = e.date.date_part(new Date(this._date));\n              if (n = t.getDay(), s = t.valueOf(), u[c] && u[c][g.key]) {\n                var w = u[c][g.key],\n                  b = e._get_types_to_render(w[n], w[s]);\n                v.push.apply(v, e._get_configs_to_render(b));\n              }\n            }\n            var k = u.global;\n            if (e.config.overwrite_marked_timespans) {\n              var E = k[s] || k[n];\n              v.push.apply(v, e._get_configs_to_render(E));\n            } else k[s] && v.push.apply(v, e._get_configs_to_render(k[s])), k[n] && v.push.apply(v, e._get_configs_to_render(k[n]));\n            for (var D = 0; D < v.length; D++) m.push.apply(m, e._render_marked_timespan(v[D], o, t));\n            return m;\n          }\n        }, e.attachEvent(\"onScaleAdd\", function () {\n          e._on_scale_add_marker.apply(e, arguments);\n        }), e.dblclick_dhx_marked_timespan = function (o, t) {\n          e.callEvent(\"onScaleDblClick\", [e.getActionData(o).date, t, o]), e.config.dblclick_create && e.addEventNow(e.getActionData(o).date, null, o);\n        };\n      }, e._temp_limit_scope();\n    },\n    map_view: function (e) {\n      e.ext || (e.ext = {}), e.ext.mapView = {\n        geocoder: null,\n        map: null,\n        points: null,\n        markers: null,\n        infoWindow: null,\n        createMarker: function (h) {\n          return new google.maps.Marker(h);\n        }\n      }, e.xy.map_date_width = 188, e.xy.map_icon_width = 25, e.xy.map_description_width = 400, e.config.map_resolve_event_location = !0, e.config.map_resolve_user_location = !0, e.config.map_initial_position = new google.maps.LatLng(48.724, 8.215), e.config.map_error_position = new google.maps.LatLng(15, 15), e.config.map_infowindow_max_width = 300, e.config.map_type = google.maps.MapTypeId.ROADMAP, e.config.map_zoom_after_resolve = 15, e.locale.labels.marker_geo_success = \"It seems you are here.\", e.locale.labels.marker_geo_fail = \"Sorry, could not get your current position using geolocation.\", e.templates.marker_date = e.date.date_to_str(\"%Y-%m-%d %H:%i\"), e.templates.marker_text = function (h, a, r) {\n        return \"<div><b>\" + r.text + \"</b><br/><br/>\" + (r.event_location || \"\") + \"<br/><br/>\" + e.templates.marker_date(h) + \" - \" + e.templates.marker_date(a) + \"</div>\";\n      }, e.dblclick_dhx_map_area = function () {\n        !this.config.readonly && this.config.dblclick_create && this.addEventNow({\n          start_date: e._date,\n          end_date: e.date.add(e._date, e.config.time_step, \"minute\")\n        });\n      }, e.templates.map_time = function (h, a, r) {\n        return e.config.rtl && !r._timed ? e.templates.day_date(a) + \" &ndash; \" + e.templates.day_date(h) : r._timed ? this.day_date(r.start_date, r.end_date, r) + \" \" + this.event_date(h) : e.templates.day_date(h) + \" &ndash; \" + e.templates.day_date(a);\n      }, e.templates.map_text = function (h, a, r) {\n        return r.text;\n      }, e.date.map_start = function (h) {\n        return h;\n      }, e.date.add_map = function (h, a, r) {\n        return new Date(h.valueOf());\n      }, e.templates.map_date = function (h, a, r) {\n        return \"\";\n      }, e._latLngUpdate = !1, e.attachEvent(\"onSchedulerReady\", function () {\n        e._isMapPositionSet = !1;\n        const h = document.createElement(\"div\");\n        h.className = \"dhx_map\", h.id = \"dhx_gmap\", h.style.display = \"none\", e._obj.appendChild(h), e._els.dhx_gmap = [], e._els.dhx_gmap.push(h), o(\"dhx_gmap\");\n        const a = {\n            zoom: e.config.map_initial_zoom || 10,\n            center: e.config.map_initial_position,\n            mapTypeId: e.config.map_type || google.maps.MapTypeId.ROADMAP\n          },\n          r = new google.maps.Map(document.getElementById(\"dhx_gmap\"), a);\n        r.disableDefaultUI = !1, r.disableDoubleClickZoom = !e.config.readonly, google.maps.event.addListener(r, \"dblclick\", function (u) {\n          const v = e.ext.mapView.geocoder;\n          if (!e.config.readonly && e.config.dblclick_create) {\n            var m = u.latLng;\n            v.geocode({\n              latLng: m\n            }, function (l, f) {\n              f == google.maps.GeocoderStatus.OK && (m = l[0].geometry.location, e.addEventNow({\n                lat: m.lat(),\n                lng: m.lng(),\n                event_location: l[0].formatted_address,\n                start_date: e._date,\n                end_date: e.date.add(e._date, e.config.time_step, \"minute\")\n              }));\n            });\n          }\n        });\n        var d = {\n          content: \"\"\n        };\n        e.config.map_infowindow_max_width && (d.maxWidth = e.config.map_infowindow_max_width), e.map = {\n          _points: [],\n          _markers: [],\n          _infowindow: new google.maps.InfoWindow(d),\n          _infowindows_content: [],\n          _initialization_count: -1,\n          _obj: r\n        }, e.ext.mapView.geocoder = new google.maps.Geocoder(), e.ext.mapView.map = r, e.ext.mapView.points = e.map._points, e.ext.mapView.markers = e.map._markers, e.ext.mapView.infoWindow = e.map._infowindow, e.config.map_resolve_user_location && navigator.geolocation && (e._isMapPositionSet || navigator.geolocation.getCurrentPosition(function (u) {\n          var v = new google.maps.LatLng(u.coords.latitude, u.coords.longitude);\n          r.setCenter(v), r.setZoom(e.config.map_zoom_after_resolve || 10), e.map._infowindow.setContent(e.locale.labels.marker_geo_success), e.map._infowindow.position = r.getCenter(), e.map._infowindow.open(r), e._isMapPositionSet = !0;\n        }, function () {\n          e.map._infowindow.setContent(e.locale.labels.marker_geo_fail), e.map._infowindow.setPosition(r.getCenter()), e.map._infowindow.open(r), e._isMapPositionSet = !0;\n        })), google.maps.event.addListener(r, \"resize\", function (u) {\n          h.style.zIndex = \"5\", r.setZoom(r.getZoom());\n        }), google.maps.event.addListener(r, \"tilesloaded\", function (u) {\n          h.style.zIndex = \"5\";\n        }), h.style.display = \"none\";\n        const i = e.render_data;\n        function _() {\n          var u = e.get_visible_events();\n          u.sort(function (E, D) {\n            return E.start_date.valueOf() == D.start_date.valueOf() ? E.id > D.id ? 1 : -1 : E.start_date > D.start_date ? 1 : -1;\n          });\n          for (var v = \"<div \" + (y = e._waiAria.mapAttrString()) + \" class='dhx_map_area'>\", m = 0; m < u.length; m++) {\n            var l = u[m],\n              f = l.id == e._selected_event_id ? \"dhx_map_line highlight\" : \"dhx_map_line\",\n              g = l.color ? \"--dhx-scheduler-event-background:\" + l.color + \";\" : \"\",\n              p = l.textColor ? \"--dhx-scheduler-event-color:\" + l.textColor + \";\" : \"\",\n              y = e._waiAria.mapRowAttrString(l),\n              w = e._waiAria.mapDetailsBtnString();\n            v += \"<div \" + y + \" class='\" + f + \"' event_id='\" + l.id + \"' \" + e.config.event_attribute + \"='\" + l.id + \"' style='\" + g + p + (l._text_style || \"\") + \" width: \" + (e.xy.map_date_width + e.xy.map_description_width + 2) + \"px;'><div class='dhx_map_event_time' style='width: \" + e.xy.map_date_width + \"px;' >\" + e.templates.map_time(l.start_date, l.end_date, l) + \"</div>\", v += \"<div \".concat(w, \" class='dhx_event_icon icon_details'><svg width=\\\"20\\\" height=\\\"20\\\" viewBox=\\\"0 0 20 20\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n\\t\\t\\t<path d=\\\"M15.4444 16.4H4.55556V7.6H15.4444V16.4ZM13.1111 2V3.6H6.88889V2H5.33333V3.6H4.55556C3.69222 3.6 3 4.312 3 5.2V16.4C3 16.8243 3.16389 17.2313 3.45561 17.5314C3.74733 17.8314 4.143 18 4.55556 18H15.4444C15.857 18 16.2527 17.8314 16.5444 17.5314C16.8361 17.2313 17 16.8243 17 16.4V5.2C17 4.312 16.3 3.6 15.4444 3.6H14.6667V2H13.1111ZM13.8889 10.8H10V14.8H13.8889V10.8Z\\\" fill=\\\"#A1A4A6\\\"/>\\n\\t\\t\\t</svg></div>\"), v += \"<div class='line_description' style='width:\" + (e.xy.map_description_width - e.xy.map_icon_width) + \"px;'>\" + e.templates.map_text(l.start_date, l.end_date, l) + \"</div></div>\";\n          }\n          v += \"<div class='dhx_v_border' style=\" + (e.config.rtl ? \"'right: \" : \"'left: \") + (e.xy.map_date_width - 1) + \"px;'></div><div class='dhx_v_border_description'></div></div>\", e._els.dhx_cal_data[0].scrollTop = 0, e._els.dhx_cal_data[0].innerHTML = v;\n          var b = e._els.dhx_cal_data[0].firstChild.childNodes,\n            k = e._getNavDateElement();\n          for (k && (k.innerHTML = e.templates[e._mode + \"_date\"](e._min_date, e._max_date, e._mode)), e._rendered = [], m = 0; m < b.length - 2; m++) e._rendered[m] = b[m];\n        }\n        function o(u) {\n          var v = document.getElementById(u);\n          const m = e.$container.querySelector(\".dhx_cal_navline\").offsetHeight;\n          var l = e._y - m;\n          l < 0 && (l = 0);\n          var f = e._x - e.xy.map_date_width - e.xy.map_description_width - 1;\n          f < 0 && (f = 0), v.style.height = l + \"px\", v.style.width = f + \"px\", v.style.position = \"absolute\", v.style.top = m + \"px\", e.config.rtl ? v.style.marginRight = e.xy.map_date_width + e.xy.map_description_width + 1 + \"px\" : v.style.marginLeft = e.xy.map_date_width + e.xy.map_description_width + 1 + \"px\", v.style.marginTop = e.xy.nav_height + 2 + \"px\";\n        }\n        e.render_data = function (u, v) {\n          if (this._mode != \"map\") return i.apply(this, arguments);\n          _();\n          for (var m = e.get_visible_events(), l = 0; l < m.length; l++) e.map._markers[m[l].id] || n(m[l], !1, !1);\n        }, e.map_view = function (u) {\n          e.map._initialization_count++;\n          var v,\n            m = e._els.dhx_gmap[0];\n          if (e._min_date = e.config.map_start || e._currentDate(), e._max_date = e.config.map_end || e.date.add(e._currentDate(), 1, \"year\"), e._table_view = !0, function (g) {\n            if (g) {\n              var p = e.locale.labels;\n              e._els.dhx_cal_header[0].innerHTML = \"<div class='dhx_map_head' style='width: \" + (e.xy.map_date_width + e.xy.map_description_width + 2) + \"px;' ><div class='headline_date' style='width: \" + e.xy.map_date_width + \"px;'>\" + p.date + \"</div><div class='headline_description' style='width: \" + e.xy.map_description_width + \"px;'>\" + p.description + \"</div></div>\", e._table_view = !0, e.set_sizes();\n            }\n          }(u), u) {\n            (function () {\n              e._selected_event_id = null, e.map._infowindow.close();\n              var g = e.map._markers;\n              for (var p in g) g.hasOwnProperty(p) && (g[p].setMap(null), delete e.map._markers[p], e.map._infowindows_content[p] && delete e.map._infowindows_content[p]);\n            })(), _(), m.style.display = \"block\", o(\"dhx_gmap\"), v = e.map._obj.getCenter();\n            for (var l = e.get_visible_events(), f = 0; f < l.length; f++) e.map._markers[l[f].id] || n(l[f]);\n          } else m.style.display = \"none\";\n          google.maps.event.trigger(e.map._obj, \"resize\"), e.map._initialization_count === 0 && v && e.map._obj.setCenter(v), e._selected_event_id && t(e._selected_event_id);\n        };\n        var t = function (u) {\n            e.map._obj.setCenter(e.map._points[u]), e.callEvent(\"onClick\", [u]);\n          },\n          n = function (u, v, m) {\n            var l = e.config.map_error_position;\n            u.lat && u.lng && (l = new google.maps.LatLng(u.lat, u.lng));\n            var f = e.templates.marker_text(u.start_date, u.end_date, u);\n            e._new_event || (e.map._infowindows_content[u.id] = f, e.map._markers[u.id] && e.map._markers[u.id].setMap(null), e.map._markers[u.id] = e.ext.mapView.createMarker({\n              position: l,\n              map: e.map._obj\n            }), google.maps.event.addListener(e.map._markers[u.id], \"click\", function () {\n              e.map._infowindow.setContent(e.map._infowindows_content[u.id]), e.map._infowindow.open(e.map._obj, e.map._markers[u.id]), e._selected_event_id = u.id, e.render_data();\n            }), e.map._points[u.id] = l, v && e.map._obj.setCenter(e.map._points[u.id]), m && e.callEvent(\"onClick\", [u.id]));\n          };\n        e.attachEvent(\"onClick\", function (u, v) {\n          if (this._mode == \"map\") {\n            e._selected_event_id = u;\n            for (var m = 0; m < e._rendered.length; m++) e._rendered[m].className = \"dhx_map_line\", e._rendered[m].getAttribute(e.config.event_attribute) == u && (e._rendered[m].className += \" highlight\");\n            e.map._points[u] && e.map._markers[u] && (e.map._obj.setCenter(e.map._points[u]), google.maps.event.trigger(e.map._markers[u], \"click\"));\n          }\n          return !0;\n        });\n        var s = function (u) {\n            const v = e.ext.mapView.geocoder;\n            u.event_location && v ? v.geocode({\n              address: u.event_location,\n              language: e.uid().toString()\n            }, function (m, l) {\n              var f = {};\n              l != google.maps.GeocoderStatus.OK ? (f = e.callEvent(\"onLocationError\", [u.id])) && f !== !0 || (f = e.config.map_error_position) : f = m[0].geometry.location, u.lat = f.lat(), u.lng = f.lng(), e._selected_event_id = u.id, e._latLngUpdate = !0, e.callEvent(\"onEventChanged\", [u.id, u]), n(u, !0, !0);\n            }) : n(u, !0, !0);\n          },\n          c = function (u) {\n            const v = e.ext.mapView.geocoder;\n            u.event_location && v && v.geocode({\n              address: u.event_location,\n              language: e.uid().toString()\n            }, function (m, l) {\n              var f = {};\n              l != google.maps.GeocoderStatus.OK ? (f = e.callEvent(\"onLocationError\", [u.id])) && f !== !0 || (f = e.config.map_error_position) : f = m[0].geometry.location, u.lat = f.lat(), u.lng = f.lng(), e._latLngUpdate = !0, e.callEvent(\"onEventChanged\", [u.id, u]);\n            });\n          };\n        e.attachEvent(\"onEventChanged\", function (u, v) {\n          return this._latLngUpdate ? this._latLngUpdate = !1 : (v = e.getEvent(u)).start_date < e._min_date && v.end_date > e._min_date || v.start_date < e._max_date && v.end_date > e._max_date || v.start_date.valueOf() >= e._min_date && v.end_date.valueOf() <= e._max_date ? (e.map._markers[u] && e.map._markers[u].setMap(null), s(v)) : (e._selected_event_id = null, e.map._infowindow.close(), e.map._markers[u] && e.map._markers[u].setMap(null)), !0;\n        }), e.attachEvent(\"onEventIdChange\", function (u, v) {\n          var m = e.getEvent(v);\n          return (m.start_date < e._min_date && m.end_date > e._min_date || m.start_date < e._max_date && m.end_date > e._max_date || m.start_date.valueOf() >= e._min_date && m.end_date.valueOf() <= e._max_date) && (e.map._markers[u] && (e.map._markers[u].setMap(null), delete e.map._markers[u]), e.map._infowindows_content[u] && delete e.map._infowindows_content[u], s(m)), !0;\n        }), e.attachEvent(\"onEventAdded\", function (u, v) {\n          return e._dataprocessor || (v.start_date < e._min_date && v.end_date > e._min_date || v.start_date < e._max_date && v.end_date > e._max_date || v.start_date.valueOf() >= e._min_date && v.end_date.valueOf() <= e._max_date) && (e.map._markers[u] && e.map._markers[u].setMap(null), s(v)), !0;\n        }), e.attachEvent(\"onBeforeEventDelete\", function (u, v) {\n          return e.map._markers[u] && e.map._markers[u].setMap(null), e._selected_event_id = null, e.map._infowindow.close(), !0;\n        }), e._event_resolve_delay = 1500, e.attachEvent(\"onEventLoading\", function (u) {\n          return e.config.map_resolve_event_location && u.event_location && !u.lat && !u.lng && (e._event_resolve_delay += 1500, function (v, m, l, f) {\n            setTimeout(function () {\n              if (e.$destroyed) return !0;\n              var g = v.apply(m, l);\n              return v = m = l = null, g;\n            }, f || 1);\n          }(c, this, [u], e._event_resolve_delay)), !0;\n        }), e.attachEvent(\"onEventCancel\", function (u, v) {\n          return v && (e.map._markers[u] && e.map._markers[u].setMap(null), e.map._infowindow.close()), !0;\n        });\n      });\n    },\n    minical: function (e) {\n      const h = e._createDomEventScope();\n      e.config.minicalendar = {\n        mark_events: !0\n      }, e._synced_minicalendars = [], e.renderCalendar = function (a, r, d) {\n        var i = null,\n          _ = a.date || e._currentDate();\n        if (typeof _ == \"string\" && (_ = this.templates.api_date(_)), r) i = this._render_calendar(r.parentNode, _, a, r), e.unmarkCalendar(i);else {\n          var o = a.container,\n            t = a.position;\n          if (typeof o == \"string\" && (o = document.getElementById(o)), typeof t == \"string\" && (t = document.getElementById(t)), t && t.left === void 0 && t.right === void 0) {\n            var n = e.$domHelpers.getOffset(t);\n            t = {\n              top: n.top + t.offsetHeight,\n              left: n.left\n            };\n          }\n          o || (o = e._get_def_cont(t)), (i = this._render_calendar(o, _, a)).$_eventAttached || (i.$_eventAttached = !0, h.attach(i, \"click\", function (p) {\n            var y = p.target || p.srcElement,\n              w = e.$domHelpers;\n            if (w.closest(y, \".dhx_month_head\") && !w.closest(y, \".dhx_after\") && !w.closest(y, \".dhx_before\")) {\n              var b = w.closest(y, \"[data-cell-date]\").getAttribute(\"data-cell-date\"),\n                k = e.templates.parse_date(b);\n              e.unmarkCalendar(this), e.markCalendar(this, k, \"dhx_calendar_click\"), this._last_date = k, this.conf.handler && this.conf.handler.call(e, k, this);\n            }\n          }.bind(i)));\n        }\n        if (e.config.minicalendar.mark_events) for (var s = e.date.month_start(_), c = e.date.add(s, 1, \"month\"), u = this.getEvents(s, c), v = this[\"filter_\" + this._mode], m = {}, l = 0; l < u.length; l++) {\n          var f = u[l];\n          if (!v || v(f.id, f)) {\n            var g = f.start_date;\n            for (g.valueOf() < s.valueOf() && (g = s), g = e.date.date_part(new Date(g.valueOf())); g < f.end_date && (m[+g] || (m[+g] = !0, this.markCalendar(i, g, \"dhx_year_event\")), !((g = this.date.add(g, 1, \"day\")).valueOf() >= c.valueOf())););\n          }\n        }\n        return this._markCalendarCurrentDate(i), i.conf = a, a.sync && !d && this._synced_minicalendars.push(i), i.conf._on_xle_handler || (i.conf._on_xle_handler = e.attachEvent(\"onXLE\", function () {\n          e.updateCalendar(i, i.conf.date);\n        })), this.config.wai_aria_attributes && this.config.wai_aria_application_role && i.setAttribute(\"role\", \"application\"), i;\n      }, e._get_def_cont = function (a) {\n        return this._def_count || (this._def_count = document.createElement(\"div\"), this._def_count.className = \"dhx_minical_popup\", e.event(this._def_count, \"click\", function (r) {\n          r.cancelBubble = !0;\n        }), document.body.appendChild(this._def_count)), a.left && (this._def_count.style.left = a.left + \"px\"), a.right && (this._def_count.style.right = a.right + \"px\"), a.top && (this._def_count.style.top = a.top + \"px\"), a.bottom && (this._def_count.style.bottom = a.bottom + \"px\"), this._def_count._created = /* @__PURE__ */new Date(), this._def_count;\n      }, e._locateCalendar = function (a, r) {\n        if (typeof r == \"string\" && (r = e.templates.api_date(r)), +r > +a._max_date || +r < +a._min_date) return null;\n        for (var d = a.querySelector(\".dhx_year_body\").childNodes[0], i = 0, _ = new Date(a._min_date); +this.date.add(_, 1, \"week\") <= +r;) _ = this.date.add(_, 1, \"week\"), i++;\n        var o = e.config.start_on_monday,\n          t = (r.getDay() || (o ? 7 : 0)) - (o ? 1 : 0);\n        const n = d.querySelector(\".dhx_cal_month_row:nth-child(\".concat(i + 1, \") .dhx_cal_month_cell:nth-child(\").concat(t + 1, \")\"));\n        return n ? n.firstChild : null;\n      }, e.markCalendar = function (a, r, d) {\n        var i = this._locateCalendar(a, r);\n        i && (i.className += \" \" + d);\n      }, e.unmarkCalendar = function (a, r, d) {\n        if (d = d || \"dhx_calendar_click\", r = r || a._last_date) {\n          var i = this._locateCalendar(a, r);\n          i && (i.className = (i.className || \"\").replace(RegExp(d, \"g\")));\n        }\n      }, e._week_template = function (a) {\n        for (var r = a || 250, d = 0, i = document.createElement(\"div\"), _ = this.date.week_start(e._currentDate()), o = 0; o < 7; o++) this._cols[o] = Math.floor(r / (7 - o)), this._render_x_header(o, d, _, i), _ = this.date.add(_, 1, \"day\"), r -= this._cols[o], d += this._cols[o];\n        return i.lastChild.className += \" dhx_scale_bar_last\", i;\n      }, e.updateCalendar = function (a, r) {\n        a.conf.date = r, this.renderCalendar(a.conf, a, !0);\n      }, e._mini_cal_arrows = [\"&nbsp;\", \"&nbsp;\"], e._render_calendar = function (a, r, d, i) {\n        var _ = e.templates,\n          o = this._cols;\n        this._cols = [];\n        var t = this._mode;\n        this._mode = \"calendar\";\n        var n = this._colsS;\n        this._colsS = {\n          height: 0\n        };\n        var s = new Date(this._min_date),\n          c = new Date(this._max_date),\n          u = new Date(e._date),\n          v = _.month_day,\n          m = this._ignores_detected;\n        this._ignores_detected = 0, _.month_day = _.calendar_date, r = this.date.month_start(r);\n        var l,\n          f = this._week_template(a.offsetWidth - 1 - this.config.minicalendar.padding);\n        i ? l = i : (l = document.createElement(\"div\")).className = \"dhx_cal_container dhx_mini_calendar\", l.setAttribute(\"date\", this._helpers.formatDate(r)), l.innerHTML = \"<div class='dhx_year_month'></div><div class='dhx_year_grid\" + (e.config.rtl ? \" dhx_grid_rtl'>\" : \"'>\") + \"<div class='dhx_year_week'>\" + (f ? f.innerHTML : \"\") + \"</div><div class='dhx_year_body'></div></div>\";\n        var g = l.querySelector(\".dhx_year_month\"),\n          p = l.querySelector(\".dhx_year_week\"),\n          y = l.querySelector(\".dhx_year_body\");\n        if (g.innerHTML = this.templates.calendar_month(r), d.navigation) for (var w = function (H, P) {\n            var z = e.date.add(H._date, P, \"month\");\n            e.updateCalendar(H, z), e._date.getMonth() == H._date.getMonth() && e._date.getFullYear() == H._date.getFullYear() && e._markCalendarCurrentDate(H);\n          }, b = [\"dhx_cal_prev_button\", \"dhx_cal_next_button\"], k = [\"left:1px;top:4px;position:absolute;\", \"left:auto; right:1px;top:4px;position:absolute;\"], E = [-1, 1], D = function (H) {\n            return function () {\n              if (d.sync) for (var P = e._synced_minicalendars, z = 0; z < P.length; z++) w(P[z], H);else e.config.rtl && (H = -H), w(l, H);\n            };\n          }, x = [e.locale.labels.prev, e.locale.labels.next], S = 0; S < 2; S++) {\n          var N = document.createElement(\"div\");\n          N.className = b[S], e._waiAria.headerButtonsAttributes(N, x[S]), N.style.cssText = k[S], N.innerHTML = this._mini_cal_arrows[S], g.appendChild(N), h.attach(N, \"click\", D(E[S]));\n        }\n        l._date = new Date(r), l.week_start = (r.getDay() - (this.config.start_on_monday ? 1 : 0) + 7) % 7;\n        var M = l._min_date = this.date.week_start(r);\n        l._max_date = this.date.add(l._min_date, 6, \"week\"), this._reset_month_scale(y, r, M, 6), i || a.appendChild(l), p.style.height = p.childNodes[0].offsetHeight - 1 + \"px\";\n        var A = e.uid();\n        e._waiAria.minicalHeader(g, A), e._waiAria.minicalGrid(l.querySelector(\".dhx_year_grid\"), A), e._waiAria.minicalRow(p);\n        for (var C = p.querySelectorAll(\".dhx_scale_bar\"), T = 0; T < C.length; T++) e._waiAria.minicalHeadCell(C[T]);\n        var O = y.querySelectorAll(\".dhx_cal_month_cell\"),\n          L = new Date(M);\n        for (T = 0; T < O.length; T++) e._waiAria.minicalDayCell(O[T], new Date(L)), L = e.date.add(L, 1, \"day\");\n        return e._waiAria.minicalHeader(g, A), this._cols = o, this._mode = t, this._colsS = n, this._min_date = s, this._max_date = c, e._date = u, _.month_day = v, this._ignores_detected = m, l;\n      }, e.destroyCalendar = function (a, r) {\n        !a && this._def_count && this._def_count.firstChild && (r || ( /* @__PURE__ */new Date()).valueOf() - this._def_count._created.valueOf() > 500) && (a = this._def_count.firstChild), a && (h.detachAll(), a.innerHTML = \"\", a.parentNode && a.parentNode.removeChild(a), this._def_count && (this._def_count.style.top = \"-1000px\"), a.conf && a.conf._on_xle_handler && e.detachEvent(a.conf._on_xle_handler));\n      }, e.isCalendarVisible = function () {\n        return !!(this._def_count && parseInt(this._def_count.style.top, 10) > 0) && this._def_count;\n      }, e.attachEvent(\"onTemplatesReady\", function () {\n        e.event(document.body, \"click\", function () {\n          e.destroyCalendar();\n        });\n      }, {\n        once: !0\n      }), e.form_blocks.calendar_time = {\n        render: function (a) {\n          var r = \"<span class='dhx_minical_input_wrapper'><input class='dhx_readonly dhx_minical_input' type='text' readonly='true'></span>\",\n            d = e.config,\n            i = this.date.date_part(e._currentDate()),\n            _ = 1440,\n            o = 0;\n          d.limit_time_select && (o = 60 * d.first_hour, _ = 60 * d.last_hour + 1), i.setHours(o / 60), a._time_values = [], r += \" <select class='dhx_lightbox_time_select'>\";\n          for (var t = o; t < _; t += 1 * this.config.time_step) r += \"<option value='\" + t + \"'>\" + this.templates.time_picker(i) + \"</option>\", a._time_values.push(t), i = this.date.add(i, this.config.time_step, \"minute\");\n          return \"<div class='dhx_section_time dhx_lightbox_minical'>\" + (r += \"</select>\") + \"<span class='dhx_lightbox_minical_spacer'> &nbsp;&ndash;&nbsp; </span>\" + r + \"</div>\";\n        },\n        set_value: function (a, r, d, i) {\n          var _,\n            o,\n            t = a.getElementsByTagName(\"input\"),\n            n = a.getElementsByTagName(\"select\"),\n            s = function (g, p, y) {\n              e.event(g, \"click\", function () {\n                e.destroyCalendar(null, !0), e.renderCalendar({\n                  position: g,\n                  date: new Date(this._date),\n                  navigation: !0,\n                  handler: function (w) {\n                    g.value = e.templates.calendar_time(w), g._date = new Date(w), e.destroyCalendar(), e.config.event_duration && e.config.auto_end_date && y === 0 && m();\n                  }\n                });\n              });\n            };\n          if (e.config.full_day) {\n            if (!a._full_day) {\n              var c = \"<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> \" + e.locale.labels.full_day + \"&nbsp;</label></input>\";\n              e.config.wide_form || (c = a.previousSibling.innerHTML + c), a.previousSibling.innerHTML = c, a._full_day = !0;\n            }\n            var u = a.previousSibling.getElementsByTagName(\"input\")[0],\n              v = e.date.time_part(d.start_date) === 0 && e.date.time_part(d.end_date) === 0;\n            u.checked = v, n[0].disabled = u.checked, n[1].disabled = u.checked, u.$_eventAttached || (u.$_eventAttached = !0, e.event(u, \"click\", function () {\n              if (u.checked === !0) {\n                var g = {};\n                e.form_blocks.calendar_time.get_value(a, g), _ = e.date.date_part(g.start_date), (+(o = e.date.date_part(g.end_date)) == +_ || +o >= +_ && (d.end_date.getHours() !== 0 || d.end_date.getMinutes() !== 0)) && (o = e.date.add(o, 1, \"day\"));\n              }\n              var p = _ || d.start_date,\n                y = o || d.end_date;\n              l(t[0], p), l(t[1], y), n[0].value = 60 * p.getHours() + p.getMinutes(), n[1].value = 60 * y.getHours() + y.getMinutes(), n[0].disabled = u.checked, n[1].disabled = u.checked;\n            }));\n          }\n          if (e.config.event_duration && e.config.auto_end_date) {\n            var m = function () {\n              e.config.auto_end_date && e.config.event_duration && (_ = e.date.add(t[0]._date, n[0].value, \"minute\"), o = new Date(_.getTime() + 60 * e.config.event_duration * 1e3), t[1].value = e.templates.calendar_time(o), t[1]._date = e.date.date_part(new Date(o)), n[1].value = 60 * o.getHours() + o.getMinutes());\n            };\n            n[0].$_eventAttached || n[0].addEventListener(\"change\", m);\n          }\n          function l(g, p, y) {\n            s(g, p, y), g.value = e.templates.calendar_time(p), g._date = e.date.date_part(new Date(p));\n          }\n          function f(g) {\n            for (var p = i._time_values, y = 60 * g.getHours() + g.getMinutes(), w = y, b = !1, k = 0; k < p.length; k++) {\n              var E = p[k];\n              if (E === y) {\n                b = !0;\n                break;\n              }\n              E < y && (w = E);\n            }\n            return b || w ? b ? y : w : -1;\n          }\n          l(t[0], d.start_date, 0), l(t[1], d.end_date, 1), s = function () {}, n[0].value = f(d.start_date), n[1].value = f(d.end_date);\n        },\n        get_value: function (a, r) {\n          var d = a.getElementsByTagName(\"input\"),\n            i = a.getElementsByTagName(\"select\");\n          return r.start_date = e.date.add(d[0]._date, i[0].value, \"minute\"), r.end_date = e.date.add(d[1]._date, i[1].value, \"minute\"), r.end_date <= r.start_date && (r.end_date = e.date.add(r.start_date, e.config.time_step, \"minute\")), {\n            start_date: new Date(r.start_date),\n            end_date: new Date(r.end_date)\n          };\n        },\n        focus: function (a) {}\n      }, e.linkCalendar = function (a, r) {\n        var d = function () {\n          var i = e._date,\n            _ = new Date(i.valueOf());\n          return r && (_ = r(_)), _.setDate(1), e.updateCalendar(a, _), !0;\n        };\n        e.attachEvent(\"onViewChange\", d), e.attachEvent(\"onXLE\", d), e.attachEvent(\"onEventAdded\", d), e.attachEvent(\"onEventChanged\", d), e.attachEvent(\"onEventDeleted\", d), d();\n      }, e._markCalendarCurrentDate = function (a) {\n        var r = e.getState(),\n          d = r.min_date,\n          i = r.max_date,\n          _ = r.mode,\n          o = e.date.month_start(new Date(a._date)),\n          t = e.date.add(o, 1, \"month\");\n        if (!({\n          month: !0,\n          year: !0,\n          agenda: !0,\n          grid: !0\n        }[_] || d.valueOf() <= o.valueOf() && i.valueOf() >= t.valueOf())) for (var n = d; n.valueOf() < i.valueOf();) o.valueOf() <= n.valueOf() && t > n && e.markCalendar(a, n, \"dhx_calendar_click\"), n = e.date.add(n, 1, \"day\");\n      }, e.attachEvent(\"onEventCancel\", function () {\n        e.destroyCalendar(null, !0);\n      }), e.attachEvent(\"onDestroy\", function () {\n        e.destroyCalendar();\n      });\n    },\n    monthheight: function (e) {\n      e.attachEvent(\"onTemplatesReady\", function () {\n        e.xy.scroll_width = 0;\n        var h = e.render_view_data;\n        e.render_view_data = function () {\n          var r = this._els.dhx_cal_data[0];\n          r.firstChild._h_fix = !0, h.apply(e, arguments);\n          var d = parseInt(r.style.height);\n          r.style.height = \"1px\", r.style.height = r.scrollHeight + \"px\", this._obj.style.height = this._obj.clientHeight + r.scrollHeight - d + \"px\";\n        };\n        var a = e._reset_month_scale;\n        e._reset_month_scale = function (r, d, i, _) {\n          var o = {\n            clientHeight: 100\n          };\n          a.apply(e, [o, d, i, _]), r.innerHTML = o.innerHTML;\n        };\n      });\n    },\n    multisection: function (e) {\n      R(\"Multisection\", e.assert);\n    },\n    multiselect: function (e) {\n      e.form_blocks.multiselect = {\n        render: function (h) {\n          var a = \"dhx_multi_select_control dhx_multi_select_\" + h.name;\n          h.vertical && (a += \" dhx_multi_select_control_vertical\");\n          for (var r = \"<div class='\" + a + \"' style='overflow: auto; max-height: \" + h.height + \"px; position: relative;' >\", d = 0; d < h.options.length; d++) r += \"<label><input type='checkbox' value='\" + h.options[d].key + \"'/>\" + h.options[d].label + \"</label>\";\n          return r += \"</div>\";\n        },\n        set_value: function (h, a, r, d) {\n          for (var i = h.getElementsByTagName(\"input\"), _ = 0; _ < i.length; _++) i[_].checked = !1;\n          function o(u) {\n            for (var v = h.getElementsByTagName(\"input\"), m = 0; m < v.length; m++) v[m].checked = !!u[v[m].value];\n          }\n          var t = {};\n          if (r[d.map_to]) {\n            var n = (r[d.map_to] + \"\").split(d.delimiter || e.config.section_delimiter || \",\");\n            for (_ = 0; _ < n.length; _++) t[n[_]] = !0;\n            o(t);\n          } else {\n            if (e._new_event || !d.script_url) return;\n            var s = document.createElement(\"div\");\n            s.className = \"dhx_loading\", s.style.cssText = \"position: absolute; top: 40%; left: 40%;\", h.appendChild(s);\n            var c = [d.script_url, d.script_url.indexOf(\"?\") == -1 ? \"?\" : \"&\", \"dhx_crosslink_\" + d.map_to + \"=\" + r.id + \"&uid=\" + e.uid()].join(\"\");\n            e.ajax.get(c, function (u) {\n              var v = function (m, l) {\n                try {\n                  for (var f = JSON.parse(m.xmlDoc.responseText), g = {}, p = 0; p < f.length; p++) {\n                    var y = f[p];\n                    g[y.value || y.key || y.id] = !0;\n                  }\n                  return g;\n                } catch {\n                  return null;\n                }\n              }(u);\n              v || (v = function (m, l) {\n                for (var f = e.ajax.xpath(\"//data/item\", m.xmlDoc), g = {}, p = 0; p < f.length; p++) g[f[p].getAttribute(l.map_to)] = !0;\n                return g;\n              }(u, d)), o(v), h.removeChild(s);\n            });\n          }\n        },\n        get_value: function (h, a, r) {\n          for (var d = [], i = h.getElementsByTagName(\"input\"), _ = 0; _ < i.length; _++) i[_].checked && d.push(i[_].value);\n          return d.join(r.delimiter || e.config.section_delimiter || \",\");\n        },\n        focus: function (h) {}\n      };\n    },\n    multisource: function (e) {\n      var h = e._load;\n      e._load = function (a, r) {\n        if (typeof (a = a || this._load_url) == \"object\") for (var d = function (_) {\n            var o = function () {};\n            return o.prototype = _, o;\n          }(this._loaded), i = 0; i < a.length; i++) this._loaded = new d(), h.call(this, a[i], r);else h.apply(this, arguments);\n      };\n    },\n    mvc: function (e) {\n      var h,\n        a = {\n          use_id: !1\n        };\n      function r(_) {\n        var o = {};\n        for (var t in _) t.indexOf(\"_\") !== 0 && (o[t] = _[t]);\n        return a.use_id || delete o.id, o;\n      }\n      function d(_) {\n        _._not_render = !1, _._render_wait && _.render_view_data(), _._loading = !1, _.callEvent(\"onXLE\", []);\n      }\n      function i(_) {\n        return a.use_id ? _.id : _.cid;\n      }\n      e.backbone = function (_, o) {\n        o && (a = o), _.bind(\"change\", function (s, c) {\n          var u = i(s),\n            v = e._events[u] = s.toJSON();\n          v.id = u, e._init_event(v), clearTimeout(h), h = setTimeout(function () {\n            if (e.$destroyed) return !0;\n            e.updateView();\n          }, 1);\n        }), _.bind(\"remove\", function (s, c) {\n          var u = i(s);\n          e._events[u] && e.deleteEvent(u);\n        });\n        var t = [];\n        function n() {\n          if (e.$destroyed) return !0;\n          t.length && (e.parse(t, \"json\"), t = []);\n        }\n        _.bind(\"add\", function (s, c) {\n          var u = i(s);\n          if (!e._events[u]) {\n            var v = s.toJSON();\n            v.id = u, e._init_event(v), t.push(v), t.length == 1 && setTimeout(n, 1);\n          }\n        }), _.bind(\"request\", function (s) {\n          var c;\n          s instanceof Backbone.Collection && ((c = e)._loading = !0, c._not_render = !0, c.callEvent(\"onXLS\", []));\n        }), _.bind(\"sync\", function (s) {\n          s instanceof Backbone.Collection && d(e);\n        }), _.bind(\"error\", function (s) {\n          s instanceof Backbone.Collection && d(e);\n        }), e.attachEvent(\"onEventCreated\", function (s) {\n          var c = new _.model(e.getEvent(s));\n          return e._events[s] = c.toJSON(), e._events[s].id = s, !0;\n        }), e.attachEvent(\"onEventAdded\", function (s) {\n          if (!_.get(s)) {\n            var c = r(e.getEvent(s)),\n              u = new _.model(c),\n              v = i(u);\n            v != s && this.changeEventId(s, v), _.add(u), _.trigger(\"scheduler:add\", u);\n          }\n          return !0;\n        }), e.attachEvent(\"onEventChanged\", function (s) {\n          var c = _.get(s),\n            u = r(e.getEvent(s));\n          return c.set(u), _.trigger(\"scheduler:change\", c), !0;\n        }), e.attachEvent(\"onEventDeleted\", function (s) {\n          var c = _.get(s);\n          return c && (_.trigger(\"scheduler:remove\", c), _.remove(s)), !0;\n        });\n      };\n    },\n    outerdrag: function (e) {\n      e.attachEvent(\"onTemplatesReady\", function () {\n        var h,\n          a = new dhtmlDragAndDropObject(),\n          r = a.stopDrag;\n        function d(i, _, o, t) {\n          if (!e.checkEvent(\"onBeforeExternalDragIn\") || e.callEvent(\"onBeforeExternalDragIn\", [i, _, o, t, h])) {\n            var n = e.attachEvent(\"onEventCreated\", function (m) {\n                e.callEvent(\"onExternalDragIn\", [m, i, h]) || (this._drag_mode = this._drag_id = null, this.deleteEvent(m));\n              }),\n              s = e.getActionData(h),\n              c = {\n                start_date: new Date(s.date)\n              };\n            if (e.matrix && e.matrix[e._mode]) {\n              var u = e.matrix[e._mode];\n              c[u.y_property] = s.section;\n              var v = e._locate_cell_timeline(h);\n              c.start_date = u._trace_x[v.x], c.end_date = e.date.add(c.start_date, u.x_step, u.x_unit);\n            }\n            e._props && e._props[e._mode] && (c[e._props[e._mode].map_to] = s.section), e.addEventNow(c), e.detachEvent(n);\n          }\n        }\n        a.stopDrag = function (i) {\n          return h = i, r.apply(this, arguments);\n        }, a.addDragLanding(e._els.dhx_cal_data[0], {\n          _drag: function (i, _, o, t) {\n            d(i, _, o, t);\n          },\n          _dragIn: function (i, _) {\n            return i;\n          },\n          _dragOut: function (i) {\n            return this;\n          }\n        }), dhtmlx.DragControl && dhtmlx.DragControl.addDrop(e._els.dhx_cal_data[0], {\n          onDrop: function (i, _, o, t) {\n            var n = dhtmlx.DragControl.getMaster(i);\n            h = t, d(i, n, _, t.target || t.srcElement);\n          },\n          onDragIn: function (i, _, o) {\n            return _;\n          }\n        }, !0);\n      });\n    },\n    pdf: function (e) {\n      var h,\n        a,\n        r = new RegExp(\"<[^>]*>\", \"g\"),\n        d = new RegExp(\"<br[^>]*>\", \"g\");\n      function i(b) {\n        return b.replace(d, \"\\n\").replace(r, \"\");\n      }\n      function _(b, k) {\n        b = parseFloat(b), k = parseFloat(k), isNaN(k) || (b -= k);\n        var E = t(b);\n        return b = b - E.width + E.cols * h, isNaN(b) ? \"auto\" : 100 * b / h;\n      }\n      function o(b, k, E) {\n        b = parseFloat(b), k = parseFloat(k), !isNaN(k) && E && (b -= k);\n        var D = t(b);\n        return b = b - D.width + D.cols * h, isNaN(b) ? \"auto\" : 100 * b / (h - (isNaN(k) ? 0 : k));\n      }\n      function t(b) {\n        for (var k = 0, E = e._els.dhx_cal_header[0].childNodes, D = E[1] ? E[1].childNodes : E[0].childNodes, x = 0; x < D.length; x++) {\n          var S = D[x].style ? D[x] : D[x].parentNode,\n            N = parseFloat(S.style.width);\n          if (!(b > N)) break;\n          b -= N + 1, k += N + 1;\n        }\n        return {\n          width: k,\n          cols: x\n        };\n      }\n      function n(b) {\n        return b = parseFloat(b), isNaN(b) ? \"auto\" : 100 * b / a;\n      }\n      function s(b, k) {\n        return (window.getComputedStyle ? window.getComputedStyle(b, null)[k] : b.currentStyle ? b.currentStyle[k] : null) || \"\";\n      }\n      function c(b, k) {\n        for (var E = parseInt(b.style.left, 10), D = 0; D < e._cols.length; D++) if ((E -= e._cols[D]) < 0) return D;\n        return k;\n      }\n      function u(b, k) {\n        for (var E = parseInt(b.style.top, 10), D = 0; D < e._colsS.heights.length; D++) if (e._colsS.heights[D] > E) return D;\n        return k;\n      }\n      function v(b) {\n        return b ? \"</\" + b + \">\" : \"\";\n      }\n      function m(b, k, E, D) {\n        var x = \"<\" + b + \" profile='\" + k + \"'\";\n        return E && (x += \" header='\" + E + \"'\"), D && (x += \" footer='\" + D + \"'\"), x += \">\";\n      }\n      function l() {\n        var b = \"\",\n          k = e._mode;\n        if (e.matrix && e.matrix[e._mode] && (k = e.matrix[e._mode].render == \"cell\" ? \"matrix\" : \"timeline\"), b += \"<scale mode='\" + k + \"' today='\" + e._els.dhx_cal_date[0].innerHTML + \"'>\", e._mode == \"week_agenda\") for (var E = e._els.dhx_cal_data[0].getElementsByTagName(\"DIV\"), D = 0; D < E.length; D++) E[D].className == \"dhx_wa_scale_bar\" && (b += \"<column>\" + i(E[D].innerHTML) + \"</column>\");else if (e._mode == \"agenda\" || e._mode == \"map\") b += \"<column>\" + i((E = e._els.dhx_cal_header[0].childNodes[0].childNodes)[0].innerHTML) + \"</column><column>\" + i(E[1].innerHTML) + \"</column>\";else if (e._mode == \"year\") for (E = e._els.dhx_cal_data[0].childNodes, D = 0; D < E.length; D++) b += \"<month label='\" + i(E[D].querySelector(\".dhx_year_month\").innerHTML) + \"'>\", b += g(E[D].querySelector(\".dhx_year_week\").childNodes), b += f(E[D].querySelector(\".dhx_year_body\")), b += \"</month>\";else {\n          b += \"<x>\", b += g(E = e._els.dhx_cal_header[0].childNodes), b += \"</x>\";\n          var x = e._els.dhx_cal_data[0];\n          if (e.matrix && e.matrix[e._mode]) {\n            for (b += \"<y>\", D = 0; D < x.firstChild.rows.length; D++) b += \"<row><![CDATA[\" + i(x.firstChild.rows[D].cells[0].innerHTML) + \"]]></row>\";\n            b += \"</y>\", a = x.firstChild.rows[0].cells[0].offsetHeight;\n          } else if (x.firstChild.tagName == \"TABLE\") b += f(x);else {\n            for (x = x.childNodes[x.childNodes.length - 1]; x.className.indexOf(\"dhx_scale_holder\") == -1;) x = x.previousSibling;\n            for (x = x.childNodes, b += \"<y>\", D = 0; D < x.length; D++) b += \"\\n<row><![CDATA[\" + i(x[D].innerHTML) + \"]]></row>\";\n            b += \"</y>\", a = x[0].offsetHeight;\n          }\n        }\n        return b += \"</scale>\";\n      }\n      function f(b) {\n        for (var k = \"\", E = b.querySelectorAll(\"tr\"), D = 0; D < E.length; D++) {\n          for (var x = [], S = E[D].querySelectorAll(\"td\"), N = 0; N < S.length; N++) x.push(S[N].querySelector(\".dhx_month_head\").innerHTML);\n          k += \"\\n<row height='\" + S[0].offsetHeight + \"'><![CDATA[\" + i(x.join(\"|\")) + \"]]></row>\", a = S[0].offsetHeight;\n        }\n        return k;\n      }\n      function g(b) {\n        var k,\n          E = \"\";\n        e.matrix && e.matrix[e._mode] && (e.matrix[e._mode].second_scale && (k = b[1].childNodes), b = b[0].childNodes);\n        for (var D = 0; D < b.length; D++) E += \"\\n<column><![CDATA[\" + i(b[D].innerHTML) + \"]]></column>\";\n        if (h = b[0].offsetWidth, k) {\n          var x = 0,\n            S = b[0].offsetWidth,\n            N = 1;\n          for (D = 0; D < k.length; D++) E += \"\\n<column second_scale='\" + N + \"'><![CDATA[\" + i(k[D].innerHTML) + \"]]></column>\", (x += k[D].offsetWidth) >= S && (S += b[N] ? b[N].offsetWidth : 0, N++), h = k[0].offsetWidth;\n        }\n        return E;\n      }\n      function p(b) {\n        var k = \"\",\n          E = e._rendered,\n          D = e.matrix && e.matrix[e._mode];\n        if (e._mode == \"agenda\" || e._mode == \"map\") for (var x = 0; x < E.length; x++) k += \"<event><head><![CDATA[\" + i(E[x].childNodes[0].innerHTML) + \"]]></head><body><![CDATA[\" + i(E[x].childNodes[2].innerHTML) + \"]]></body></event>\";else if (e._mode == \"week_agenda\") for (x = 0; x < E.length; x++) k += \"<event day='\" + E[x].parentNode.getAttribute(\"day\") + \"'><body>\" + i(E[x].innerHTML) + \"</body></event>\";else if (e._mode == \"year\") for (E = e.get_visible_events(), x = 0; x < E.length; x++) {\n          var S = E[x].start_date;\n          for (S.valueOf() < e._min_date.valueOf() && (S = e._min_date); S < E[x].end_date;) {\n            var N = S.getMonth() + 12 * (S.getFullYear() - e._min_date.getFullYear()) - e.week_starts._month,\n              M = e.week_starts[N] + S.getDate() - 1,\n              A = b ? s(e._get_year_cell(S), \"color\") : \"\",\n              C = b ? s(e._get_year_cell(S), \"backgroundColor\") : \"\";\n            if (k += \"<event day='\" + M % 7 + \"' week='\" + Math.floor(M / 7) + \"' month='\" + N + \"' backgroundColor='\" + C + \"' color='\" + A + \"'></event>\", (S = e.date.add(S, 1, \"day\")).valueOf() >= e._max_date.valueOf()) break;\n          }\n        } else if (D && D.render == \"cell\") for (E = e._els.dhx_cal_data[0].getElementsByTagName(\"TD\"), x = 0; x < E.length; x++) A = b ? s(E[x], \"color\") : \"\", k += \"\\n<event><body backgroundColor='\" + (C = b ? s(E[x], \"backgroundColor\") : \"\") + \"' color='\" + A + \"'><![CDATA[\" + i(E[x].innerHTML) + \"]]></body></event>\";else for (x = 0; x < E.length; x++) {\n          var T, O;\n          if (e.matrix && e.matrix[e._mode]) T = _(E[x].style.left), O = _(E[x].offsetWidth) - 1;else {\n            var L = e.config.use_select_menu_space ? 0 : 26;\n            T = o(E[x].style.left, L, !0), O = o(E[x].style.width, L) - 1;\n          }\n          if (!isNaN(1 * O)) {\n            var H = n(E[x].style.top),\n              P = n(E[x].style.height),\n              z = E[x].className.split(\" \")[0].replace(\"dhx_cal_\", \"\");\n            if (z !== \"dhx_tooltip_line\") {\n              var $ = e.getEvent(E[x].getAttribute(e.config.event_attribute));\n              if ($) {\n                M = $._sday;\n                var j = $._sweek,\n                  F = $._length || 0;\n                if (e._mode == \"month\") P = parseInt(E[x].offsetHeight, 10), H = parseInt(E[x].style.top, 10) - e.xy.month_head_height, M = c(E[x], M), j = u(E[x], j);else if (e.matrix && e.matrix[e._mode]) {\n                  M = 0, j = E[x].parentNode.parentNode.parentNode.rowIndex;\n                  var U = a;\n                  a = E[x].parentNode.offsetHeight, H = n(E[x].style.top), H -= 0.2 * H, a = U;\n                } else {\n                  if (E[x].parentNode == e._els.dhx_cal_data[0]) continue;\n                  var J = e._els.dhx_cal_data[0].childNodes[0],\n                    se = parseFloat(J.className.indexOf(\"dhx_scale_holder\") != -1 ? J.style.left : 0);\n                  T += _(E[x].parentNode.style.left, se);\n                }\n                k += \"\\n<event week='\" + j + \"' day='\" + M + \"' type='\" + z + \"' x='\" + T + \"' y='\" + H + \"' width='\" + O + \"' height='\" + P + \"' len='\" + F + \"'>\", z == \"event\" ? (k += \"<header><![CDATA[\" + i(E[x].childNodes[1].innerHTML) + \"]]></header>\", A = b ? s(E[x].childNodes[2], \"color\") : \"\", k += \"<body backgroundColor='\" + (C = b ? s(E[x].childNodes[2], \"backgroundColor\") : \"\") + \"' color='\" + A + \"'><![CDATA[\" + i(E[x].childNodes[2].innerHTML) + \"]]></body>\") : (A = b ? s(E[x], \"color\") : \"\", k += \"<body backgroundColor='\" + (C = b ? s(E[x], \"backgroundColor\") : \"\") + \"' color='\" + A + \"'><![CDATA[\" + i(E[x].innerHTML) + \"]]></body>\"), k += \"</event>\";\n              }\n            }\n          }\n        }\n        return k;\n      }\n      function y(b, k, E, D, x, S) {\n        var N = !1;\n        D == \"fullcolor\" && (N = !0, D = \"color\"), D = D || \"color\";\n        var M,\n          A = \"\";\n        if (b) {\n          var C = e._date,\n            T = e._mode;\n          k = e.date[E + \"_start\"](k), k = e.date[\"get_\" + E + \"_end\"] ? e.date[\"get_\" + E + \"_end\"](k) : e.date.add(k, 1, E), A = m(\"pages\", D, x, S);\n          for (var O = new Date(b); +O < +k; O = this.date.add(O, 1, E)) this.setCurrentView(O, E), A += ((M = \"page\") ? \"<\" + M + \">\" : \"\") + l().replace(\"–\", \"-\") + p(N) + v(\"page\");\n          A += v(\"pages\"), this.setCurrentView(C, T);\n        } else A = m(\"data\", D, x, S) + l().replace(\"–\", \"-\") + p(N) + v(\"data\");\n        return A;\n      }\n      function w(b, k, E, D, x, S, N) {\n        (function (M, A) {\n          var C = e.uid(),\n            T = document.createElement(\"div\");\n          T.style.display = \"none\", document.body.appendChild(T), T.innerHTML = '<form id=\"' + C + '\" method=\"post\" target=\"_blank\" action=\"' + A + '\" accept-charset=\"utf-8\" enctype=\"application/x-www-form-urlencoded\"><input type=\"hidden\" name=\"mycoolxmlbody\"/> </form>', document.getElementById(C).firstChild.value = encodeURIComponent(M), document.getElementById(C).submit(), T.parentNode.removeChild(T);\n        })(typeof x == \"object\" ? function (M) {\n          for (var A = \"<data>\", C = 0; C < M.length; C++) A += M[C].source.getPDFData(M[C].start, M[C].end, M[C].view, M[C].mode, M[C].header, M[C].footer);\n          return A += \"</data>\", A;\n        }(x) : y.apply(this, [b, k, E, x, S, N]), D);\n      }\n      e.getPDFData = y, e.toPDF = function (b, k, E, D) {\n        return w.apply(this, [null, null, null, b, k, E, D]);\n      }, e.toPDFRange = function (b, k, E, D, x, S, N) {\n        return typeof b == \"string\" && (b = e.templates.api_date(b), k = e.templates.api_date(k)), w.apply(this, arguments);\n      };\n    },\n    quick_info: function (e) {\n      e.config.icons_select = [\"icon_form\", \"icon_delete\"], e.config.details_on_create = !0, e.config.show_quick_info = !0, e.xy.menu_width = 0, e.attachEvent(\"onClick\", function (h) {\n        if (e.config.show_quick_info) return e.showQuickInfo(h), !0;\n      }), function () {\n        for (var h = [\"onEmptyClick\", \"onViewChange\", \"onLightbox\", \"onBeforeEventDelete\", \"onBeforeDrag\"], a = function () {\n            return e.hideQuickInfo(!0), !0;\n          }, r = 0; r < h.length; r++) e.attachEvent(h[r], a);\n      }(), e.templates.quick_info_title = function (h, a, r) {\n        return r.text.substr(0, 50);\n      }, e.templates.quick_info_content = function (h, a, r) {\n        return r.details || \"\";\n      }, e.templates.quick_info_date = function (h, a, r) {\n        return e.isOneDayEvent(r) && e.config.rtl ? e.templates.day_date(h, a, r) + \" \" + e.templates.event_header(a, h, r) : e.isOneDayEvent(r) ? e.templates.day_date(h, a, r) + \" \" + e.templates.event_header(h, a, r) : e.config.rtl ? e.templates.week_date(a, h, r) : e.templates.week_date(h, a, r);\n      }, e.showQuickInfo = function (h) {\n        if (h != this._quick_info_box_id && (this.hideQuickInfo(!0), this.callEvent(\"onBeforeQuickInfo\", [h]) !== !1)) {\n          var a = this._get_event_counter_part(h);\n          a && (this._quick_info_box = this._init_quick_info(a), this._fill_quick_data(h), this._show_quick_info(a), this.callEvent(\"onQuickInfo\", [h]));\n        }\n      }, function () {\n        function h(a) {\n          a = a || \"\";\n          var r,\n            d = parseFloat(a),\n            i = a.match(/m?s/);\n          switch (i && (i = i[0]), i) {\n            case \"s\":\n              r = 1e3 * d;\n              break;\n            case \"ms\":\n              r = d;\n              break;\n            default:\n              r = 0;\n          }\n          return r;\n        }\n        e.hideQuickInfo = function (a) {\n          var r = this._quick_info_box,\n            d = this._quick_info_box_id;\n          if (this._quick_info_box_id = 0, r && r.parentNode) {\n            var i = r.offsetWidth;\n            if (e.config.quick_info_detached) return this.callEvent(\"onAfterQuickInfo\", [d]), r.parentNode.removeChild(r);\n            if (r.style.right == \"auto\" ? r.style.left = -i + \"px\" : r.style.right = -i + \"px\", a) r.parentNode.removeChild(r);else {\n              var _;\n              window.getComputedStyle ? _ = window.getComputedStyle(r, null) : r.currentStyle && (_ = r.currentStyle);\n              var o = h(_[\"transition-delay\"]) + h(_[\"transition-duration\"]);\n              setTimeout(function () {\n                r.parentNode && r.parentNode.removeChild(r);\n              }, o);\n            }\n            this.callEvent(\"onAfterQuickInfo\", [d]);\n          }\n        };\n      }(), e.event(window, \"keydown\", function (h) {\n        h.keyCode == 27 && e.hideQuickInfo();\n      }), e._show_quick_info = function (h) {\n        var a = e._quick_info_box;\n        e._obj.appendChild(a);\n        var r = a.offsetWidth,\n          d = a.offsetHeight;\n        if (e.config.quick_info_detached) {\n          var i = h.left - h.dx * (r - h.width);\n          e.getView() && e.getView()._x_scroll && (e.config.rtl ? i += e.getView()._x_scroll : i -= e.getView()._x_scroll), i + r > window.innerWidth && (i = window.innerWidth - r), i = Math.max(0, i), a.style.left = i + \"px\", a.style.top = h.top - (h.dy ? d : -h.height) + \"px\";\n        } else {\n          const _ = e.$container.querySelector(\".dhx_cal_data\").offsetTop;\n          a.style.top = _ + 20 + \"px\", h.dx == 1 ? (a.style.right = \"auto\", a.style.left = -r + \"px\", setTimeout(function () {\n            a.style.left = \"-10px\";\n          }, 1)) : (a.style.left = \"auto\", a.style.right = -r + \"px\", setTimeout(function () {\n            a.style.right = \"-10px\";\n          }, 1)), a.className = a.className.replace(\" dhx_qi_left\", \"\").replace(\" dhx_qi_right\", \"\") + \" dhx_qi_\" + (h.dx == 1 ? \"left\" : \"right\");\n        }\n      }, e.attachEvent(\"onTemplatesReady\", function () {\n        if (e.hideQuickInfo(), this._quick_info_box) {\n          var h = this._quick_info_box;\n          h.parentNode && h.parentNode.removeChild(h), this._quick_info_box = null;\n        }\n      }), e._quick_info_onscroll_handler = function (h) {\n        e.hideQuickInfo();\n      }, e._init_quick_info = function () {\n        if (!this._quick_info_box) {\n          var h = this._quick_info_box = document.createElement(\"div\");\n          this._waiAria.quickInfoAttr(h), h.className = \"dhx_cal_quick_info\", e.$testmode && (h.className += \" dhx_no_animate\"), e.config.rtl && (h.className += \" dhx_quick_info_rtl\");\n          var a = \"\\n\\t\\t<div class=\\\"dhx_cal_qi_tcontrols\\\">\\n\\t\\t\\t<a class=\\\"dhx_cal_qi_close_btn scheduler_icon close\\\"></a>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"dhx_cal_qi_title\\\" \".concat(this._waiAria.quickInfoHeaderAttrString(), \">\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t<div class=\\\"dhx_cal_qi_tcontent\\\"></div>\\n\\t\\t\\t\\t<div class=\\\"dhx_cal_qi_tdate\\\"></div>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\\"dhx_cal_qi_content\\\"></div>\");\n          a += '<div class=\"dhx_cal_qi_controls\">';\n          for (var r = e.config.icons_select, d = 0; d < r.length; d++) a += \"<div \".concat(this._waiAria.quickInfoButtonAttrString(this.locale.labels[r[d]]), \" class=\\\"dhx_qi_big_icon \").concat(r[d], \"\\\" title=\\\"\").concat(e.locale.labels[r[d]], \"\\\">\\n\\t\\t\\t\\t<div class='dhx_menu_icon \").concat(r[d], \"'></div><div>\").concat(e.locale.labels[r[d]], \"</div></div>\");\n          a += \"</div>\", h.innerHTML = a, e.event(h, \"click\", function (i) {\n            e._qi_button_click(i.target || i.srcElement);\n          }), e.config.quick_info_detached && (e._detachDomEvent(e._els.dhx_cal_data[0], \"scroll\", e._quick_info_onscroll_handler), e.event(e._els.dhx_cal_data[0], \"scroll\", e._quick_info_onscroll_handler));\n        }\n        return this._quick_info_box;\n      }, e._qi_button_click = function (h) {\n        var a = e._quick_info_box;\n        if (h && h != a) if (h.closest(\".dhx_cal_qi_close_btn\")) e.hideQuickInfo();else {\n          var r = e._getClassName(h);\n          if (r.indexOf(\"_icon\") != -1) {\n            var d = e._quick_info_box_id;\n            e._click.buttons[r.split(\" \")[1].replace(\"icon_\", \"\")](d);\n          } else e._qi_button_click(h.parentNode);\n        }\n      }, e._get_event_counter_part = function (h) {\n        for (var a = e.getRenderedEvent(h), r = 0, d = 0, i = a; i && i != e._obj;) r += i.offsetLeft, d += i.offsetTop - i.scrollTop, i = i.offsetParent;\n        return i ? {\n          left: r,\n          top: d,\n          dx: r + a.offsetWidth / 2 > e._x / 2 ? 1 : 0,\n          dy: d + a.offsetHeight / 2 > e._y / 2 ? 1 : 0,\n          width: a.offsetWidth,\n          height: a.offsetHeight\n        } : 0;\n      }, e._fill_quick_data = function (h) {\n        var a = e.getEvent(h),\n          r = e._quick_info_box;\n        e._quick_info_box_id = h;\n        var d = {\n          content: e.templates.quick_info_title(a.start_date, a.end_date, a),\n          date: e.templates.quick_info_date(a.start_date, a.end_date, a)\n        };\n        r.querySelector(\".dhx_cal_qi_tcontent\").innerHTML = \"<span>\".concat(d.content, \"</span>\"), r.querySelector(\".dhx_cal_qi_tdate\").innerHTML = d.date, e._waiAria.quickInfoHeader(r, [d.content, d.date].join(\" \"));\n        var i = r.querySelector(\".dhx_cal_qi_content\");\n        const _ = e.templates.quick_info_content(a.start_date, a.end_date, a);\n        _ ? (i.classList.remove(\"dhx_hidden\"), i.innerHTML = _) : i.classList.add(\"dhx_hidden\");\n      };\n    },\n    readonly: function (e) {\n      e.attachEvent(\"onTemplatesReady\", function () {\n        var h;\n        e.form_blocks.recurring && (h = e.form_blocks.recurring.set_value);\n        var a = e.config.buttons_left.slice(),\n          r = e.config.buttons_right.slice();\n        function d(o, t, n, s) {\n          for (var c = t.getElementsByTagName(o), u = n.getElementsByTagName(o), v = u.length - 1; v >= 0; v--) if (n = u[v], s) {\n            var m = document.createElement(\"span\");\n            m.className = \"dhx_text_disabled\", m.innerHTML = s(c[v]), n.parentNode.insertBefore(m, n), n.parentNode.removeChild(n);\n          } else n.disabled = !0, t.checked && (n.checked = !0);\n        }\n        e.attachEvent(\"onBeforeLightbox\", function (o) {\n          this.config.readonly_form || this.getEvent(o).readonly ? this.config.readonly_active = !0 : (this.config.readonly_active = !1, e.config.buttons_left = a.slice(), e.config.buttons_right = r.slice(), e.form_blocks.recurring && (e.form_blocks.recurring.set_value = h));\n          var t = this.config.lightbox.sections;\n          if (this.config.readonly_active) {\n            for (var n = 0; n < t.length; n++) t[n].type == \"recurring\" && this.config.readonly_active && e.form_blocks.recurring && (e.form_blocks.recurring.set_value = function (g, p, y) {\n              var w = e.$domHelpers.closest(g, \".dhx_wrap_section\"),\n                b = \"none\";\n              w.querySelector(\".dhx_cal_lsection\").display = b, w.querySelector(\".dhx_form_repeat\").display = b, w.style.display = b, e.setLightboxSize();\n            });\n            var s = [\"dhx_delete_btn\", \"dhx_save_btn\"],\n              c = [e.config.buttons_left, e.config.buttons_right];\n            for (n = 0; n < s.length; n++) for (var u = s[n], v = 0; v < c.length; v++) {\n              for (var m = c[v], l = -1, f = 0; f < m.length; f++) if (m[f] == u) {\n                l = f;\n                break;\n              }\n              l != -1 && m.splice(l, 1);\n            }\n          }\n          return this.resetLightbox(), !0;\n        });\n        var i = e._fill_lightbox;\n        e._fill_lightbox = function () {\n          var o = this.getLightbox();\n          this.config.readonly_active && (o.style.visibility = \"hidden\", o.style.display = \"block\");\n          var t = i.apply(this, arguments);\n          if (this.config.readonly_active && (o.style.visibility = \"\", o.style.display = \"none\"), this.config.readonly_active) {\n            var n = this.getLightbox(),\n              s = this._lightbox_r = n.cloneNode(!0);\n            s.id = e.uid(), s.className += \" dhx_cal_light_readonly\", d(\"textarea\", n, s, function (c) {\n              return c.value;\n            }), d(\"input\", n, s, !1), d(\"select\", n, s, function (c) {\n              return c.options.length ? c.options[Math.max(c.selectedIndex || 0, 0)].text : \"\";\n            }), n.parentNode.insertBefore(s, n), this.showCover(s), e._lightbox && e._lightbox.parentNode.removeChild(e._lightbox), this._lightbox = s, e.config.drag_lightbox && e.event(s.firstChild, \"mousedown\", e._ready_to_dnd), e._init_lightbox_events(), this.setLightboxSize();\n          }\n          return t;\n        };\n        var _ = e.hide_lightbox;\n        e.hide_lightbox = function () {\n          return this._lightbox_r && (this._lightbox_r.parentNode.removeChild(this._lightbox_r), this._lightbox_r = this._lightbox = null), _.apply(this, arguments);\n        };\n      });\n    },\n    recurring: function (e) {\n      function h() {\n        var i = e.formSection(\"recurring\");\n        if (i || (i = a(\"recurring\")), !i) throw new Error([\"Can't locate the Recurring form section.\", \"Make sure that you have the recurring control on the lightbox configuration https://docs.dhtmlx.com/scheduler/recurring_events.html#recurringlightbox \", 'and that the recurring control has name \"recurring\":', \"\", \"scheduler.config.lightbox.sections = [\", '\t{name:\"recurring\", ... }', \"];\"].join(\"\\n\"));\n        return i;\n      }\n      function a(i) {\n        for (var _ = 0; _ < e.config.lightbox.sections.length; _++) {\n          var o = e.config.lightbox.sections[_];\n          if (o.type === i) return e.formSection(o.name);\n        }\n        return null;\n      }\n      function r(i) {\n        return new Date(i.getFullYear(), i.getMonth(), i.getDate(), i.getHours(), i.getMinutes(), i.getSeconds(), 0);\n      }\n      var d;\n      e.config.occurrence_timestamp_in_utc = !1, e.config.recurring_workdays = [1, 2, 3, 4, 5], e.form_blocks.recurring = {\n        _get_node: function (i) {\n          if (typeof i == \"string\") {\n            let _ = e._lightbox.querySelector(\"#\".concat(i));\n            _ || (_ = document.getElementById(i)), i = _;\n          }\n          return i.style.display == \"none\" && (i.style.display = \"\"), i;\n        },\n        _outer_html: function (i) {\n          return i.outerHTML || (_ = i, (t = document.createElement(\"div\")).appendChild(_.cloneNode(!0)), o = t.innerHTML, t = null, o);\n          var _, o, t;\n        },\n        render: function (i) {\n          if (i.form) {\n            var _ = e.form_blocks.recurring,\n              o = _._get_node(i.form),\n              t = _._outer_html(o);\n            return o.style.display = \"none\", t;\n          }\n          var n = e.locale.labels;\n          return '<div class=\"dhx_form_repeat\"> <form> <div class=\"dhx_repeat_left\"> <div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"repeat\" value=\"day\" />' + n.repeat_radio_day + '</label></div> <div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"repeat\" value=\"week\"/>' + n.repeat_radio_week + '</label></div> <div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"repeat\" value=\"month\" checked />' + n.repeat_radio_month + '</label></div> <div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"repeat\" value=\"year\" />' + n.repeat_radio_year + '</label></div> </div> <div class=\"dhx_repeat_divider\"></div> <div class=\"dhx_repeat_center\"> <div style=\"display:none;\" id=\"dhx_repeat_day\"> <div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"day_type\" value=\"d\"/>' + n.repeat_radio_day_type + '</label><label><input class=\"dhx_repeat_text\" type=\"text\" name=\"day_count\" value=\"1\" />' + n.repeat_text_day_count + '</label></div> <div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"day_type\" checked value=\"w\"/>' + n.repeat_radio_day_type2 + '</label></div> </div> <div style=\"display:none;\" id=\"dhx_repeat_week\"><div><label>' + n.repeat_week + '<input class=\"dhx_repeat_text\" type=\"text\" name=\"week_count\" value=\"1\" /></label><span>' + n.repeat_text_week_count + '</span></div>  <table class=\"dhx_repeat_days\"> <tr> <td><div><label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"1\" />' + n.day_for_recurring[1] + '</label></div> <div><label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"4\" />' + n.day_for_recurring[4] + '</label></div></td> <td><div><label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"2\" />' + n.day_for_recurring[2] + '</label></div> <div><label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"5\" />' + n.day_for_recurring[5] + '</label></div></td> <td><div><label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"3\" />' + n.day_for_recurring[3] + '</label></div> <div><label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"6\" />' + n.day_for_recurring[6] + '</label></div></td> <td><div><label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"0\" />' + n.day_for_recurring[0] + '</label></div> </td> </tr> </table> </div> <div id=\"dhx_repeat_month\"> <div><label class = \"dhx_repeat_month_label\"><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"month_type\" value=\"d\"/>' + n.repeat_radio_month_type + '</label><label><input class=\"dhx_repeat_text\" type=\"text\" name=\"month_day\" value=\"1\" />' + n.repeat_text_month_day + '</label><label><input class=\"dhx_repeat_text\" type=\"text\" name=\"month_count\" value=\"1\" />' + n.repeat_text_month_count + '</label></div> <div><label class = \"dhx_repeat_month_label\"><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"month_type\" checked value=\"w\"/>' + n.repeat_radio_month_start + '</label><input class=\"dhx_repeat_text\" type=\"text\" name=\"month_week2\" value=\"1\" /><label><select name=\"month_day2\">\t<option value=\"1\" selected >' + e.locale.date.day_full[1] + '<option value=\"2\">' + e.locale.date.day_full[2] + '<option value=\"3\">' + e.locale.date.day_full[3] + '<option value=\"4\">' + e.locale.date.day_full[4] + '<option value=\"5\">' + e.locale.date.day_full[5] + '<option value=\"6\">' + e.locale.date.day_full[6] + '<option value=\"0\">' + e.locale.date.day_full[0] + \"</select>\" + n.repeat_text_month_count2_before + '</label><label><input class=\"dhx_repeat_text\" type=\"text\" name=\"month_count2\" value=\"1\" />' + n.repeat_text_month_count2_after + '</label></div> </div> <div style=\"display:none;\" id=\"dhx_repeat_year\"> <div><label class = \"dhx_repeat_year_label\"><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"year_type\" value=\"d\"/>' + n.repeat_radio_day_type + '</label><label><input class=\"dhx_repeat_text\" type=\"text\" name=\"year_day\" value=\"1\" />' + n.repeat_text_year_day + '</label><label><select name=\"year_month\"><option value=\"0\" selected >' + n.month_for_recurring[0] + '<option value=\"1\">' + n.month_for_recurring[1] + '<option value=\"2\">' + n.month_for_recurring[2] + '<option value=\"3\">' + n.month_for_recurring[3] + '<option value=\"4\">' + n.month_for_recurring[4] + '<option value=\"5\">' + n.month_for_recurring[5] + '<option value=\"6\">' + n.month_for_recurring[6] + '<option value=\"7\">' + n.month_for_recurring[7] + '<option value=\"8\">' + n.month_for_recurring[8] + '<option value=\"9\">' + n.month_for_recurring[9] + '<option value=\"10\">' + n.month_for_recurring[10] + '<option value=\"11\">' + n.month_for_recurring[11] + \"</select>\" + n.select_year_month + '</label></div> <div><label class = \"dhx_repeat_year_label\"><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"year_type\" checked value=\"w\"/>' + n.repeat_year_label + '</label><input class=\"dhx_repeat_text\" type=\"text\" name=\"year_week2\" value=\"1\" /><select name=\"year_day2\"><option value=\"1\" selected >' + e.locale.date.day_full[1] + '<option value=\"2\">' + e.locale.date.day_full[2] + '<option value=\"3\">' + e.locale.date.day_full[3] + '<option value=\"4\">' + e.locale.date.day_full[4] + '<option value=\"5\">' + e.locale.date.day_full[5] + '<option value=\"6\">' + e.locale.date.day_full[6] + '<option value=\"7\">' + e.locale.date.day_full[0] + \"</select>\" + n.select_year_day2 + '<select name=\"year_month2\"><option value=\"0\" selected >' + n.month_for_recurring[0] + '<option value=\"1\">' + n.month_for_recurring[1] + '<option value=\"2\">' + n.month_for_recurring[2] + '<option value=\"3\">' + n.month_for_recurring[3] + '<option value=\"4\">' + n.month_for_recurring[4] + '<option value=\"5\">' + n.month_for_recurring[5] + '<option value=\"6\">' + n.month_for_recurring[6] + '<option value=\"7\">' + n.month_for_recurring[7] + '<option value=\"8\">' + n.month_for_recurring[8] + '<option value=\"9\">' + n.month_for_recurring[9] + '<option value=\"10\">' + n.month_for_recurring[10] + '<option value=\"11\">' + n.month_for_recurring[11] + '</select></div> </div> </div> <div class=\"dhx_repeat_divider\"></div> <div class=\"dhx_repeat_right\"> <div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"end\" checked/>' + n.repeat_radio_end + '</label></div> <div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"end\" />' + n.repeat_radio_end2 + '</label><input class=\"dhx_repeat_text\" type=\"text\" name=\"occurences_count\" value=\"1\" />' + n.repeat_text_occurences_count + '</div> <div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"end\" />' + n.repeat_radio_end3 + '</label><input class=\"dhx_repeat_date\" type=\"text\" name=\"date_of_end\" value=\"' + e.config.repeat_date_of_end + '\" /></div> </div> </form> </div> </div>';\n        },\n        _ds: {},\n        _get_form_node: function (i, _, o) {\n          var t = i[_];\n          if (!t) return null;\n          if (t.nodeName) return t;\n          if (t.length) {\n            for (var n = 0; n < t.length; n++) if (t[n].value == o) return t[n];\n          }\n        },\n        _get_node_value: function (i, _, o) {\n          var t = i[_];\n          if (!t) return \"\";\n          if (t.length) {\n            if (o) {\n              for (var n = [], s = 0; s < t.length; s++) t[s].checked && n.push(t[s].value);\n              return n;\n            }\n            for (s = 0; s < t.length; s++) if (t[s].checked) return t[s].value;\n          }\n          return t.value ? o ? [t.value] : t.value : void 0;\n        },\n        _get_node_numeric_value: function (i, _) {\n          return 1 * e.form_blocks.recurring._get_node_value(i, _) || 0;\n        },\n        _set_node_value: function (i, _, o) {\n          var t = i[_];\n          if (t) {\n            if (t.name == _) t.value = o;else if (t.length) for (var n = typeof o == \"object\", s = 0; s < t.length; s++) (n || t[s].value == o) && (t[s].checked = n ? !!o[t[s].value] : !!o);\n          }\n        },\n        _init_set_value: function (i, _, o) {\n          var t = e.form_blocks.recurring,\n            n = t._get_node_value,\n            s = t._set_node_value;\n          e.form_blocks.recurring._ds = {\n            start: o.start_date,\n            end: o._end_date\n          };\n          var c = e.date.str_to_date(e.config.repeat_date, !1, !0),\n            u = e.date.date_to_str(e.config.repeat_date),\n            v = i.getElementsByTagName(\"FORM\")[0],\n            m = {};\n          function l(D) {\n            for (var x = 0; x < D.length; x++) {\n              var S = D[x];\n              if (S.name) if (m[S.name]) {\n                if (m[S.name].nodeType) {\n                  var N = m[S.name];\n                  m[S.name] = [N, S];\n                } else m[S.name].push(S);\n              } else m[S.name] = S;\n            }\n          }\n          if (l(v.getElementsByTagName(\"INPUT\")), l(v.getElementsByTagName(\"SELECT\")), !e.config.repeat_date_of_end) {\n            var f = e.date.date_to_str(e.config.repeat_date);\n            e.config.repeat_date_of_end = f(e.date.add(e._currentDate(), 30, \"day\"));\n          }\n          s(m, \"date_of_end\", e.config.repeat_date_of_end);\n          var g = function (D) {\n            return e._lightbox.querySelector(\"#\".concat(D)) || {\n              style: {}\n            };\n          };\n          function p() {\n            g(\"dhx_repeat_day\").style.display = \"none\", g(\"dhx_repeat_week\").style.display = \"none\", g(\"dhx_repeat_month\").style.display = \"none\", g(\"dhx_repeat_year\").style.display = \"none\", g(\"dhx_repeat_\" + this.value).style.display = \"\", e.setLightboxSize();\n          }\n          function y(D, x) {\n            var S = D.end;\n            if (S.length) {\n              if (S[0].value && S[0].value != \"on\") for (var N = 0; N < S.length; N++) S[N].value == x && (S[N].checked = !0);else {\n                var M = 0;\n                switch (x) {\n                  case \"no\":\n                    M = 0;\n                    break;\n                  case \"date_of_end\":\n                    M = 2;\n                    break;\n                  default:\n                    M = 1;\n                }\n                S[M].checked = !0;\n              }\n            } else S.value = x;\n          }\n          e.form_blocks.recurring._get_repeat_code = function (D) {\n            var x = [n(m, \"repeat\")];\n            for (w[x[0]](x, D); x.length < 5;) x.push(\"\");\n            var S = \"\",\n              N = function (M) {\n                var A = M.end;\n                if (A.length) {\n                  for (var C = 0; C < A.length; C++) if (A[C].checked) return A[C].value && A[C].value != \"on\" ? A[C].value : C ? C == 2 ? \"date_of_end\" : \"occurences_count\" : \"no\";\n                } else if (A.value) return A.value;\n                return \"no\";\n              }(m);\n            return N == \"no\" ? (D.end = new Date(9999, 1, 1), S = \"no\") : N == \"date_of_end\" ? D.end = function (M) {\n              var A = c(M);\n              return e.config.include_end_by && (A = e.date.add(A, 1, \"day\")), A;\n            }(n(m, \"date_of_end\")) : (e.transpose_type(x.join(\"_\")), S = Math.max(1, n(m, \"occurences_count\")), D.end = e.date[\"add_\" + x.join(\"_\")](new Date(D.start), S + 0, {\n              start_date: D.start\n            }) || D.start), x.join(\"_\") + \"#\" + S;\n          };\n          var w = {\n              month: function (D, x) {\n                var S = e.form_blocks.recurring._get_node_value,\n                  N = e.form_blocks.recurring._get_node_numeric_value;\n                S(m, \"month_type\") == \"d\" ? (D.push(Math.max(1, N(m, \"month_count\"))), x.start.setDate(S(m, \"month_day\"))) : (D.push(Math.max(1, N(m, \"month_count2\"))), D.push(S(m, \"month_day2\")), D.push(Math.max(1, N(m, \"month_week2\"))), e.config.repeat_precise || x.start.setDate(1)), x._start = !0;\n              },\n              week: function (D, x) {\n                var S = e.form_blocks.recurring._get_node_value,\n                  N = e.form_blocks.recurring._get_node_numeric_value;\n                D.push(Math.max(1, N(m, \"week_count\"))), D.push(\"\"), D.push(\"\");\n                for (var M = [], A = S(m, \"week_day\", !0), C = x.start.getDay(), T = !1, O = 0; O < A.length; O++) M.push(A[O]), T = T || A[O] == C;\n                M.length || (M.push(C), T = !0), M.sort(), e.config.repeat_precise ? T || (e.transpose_day_week(x.start, M, 1, 7), x._start = !0) : (x.start = e.date.week_start(x.start), x._start = !0), D.push(M.join(\",\"));\n              },\n              day: function (D) {\n                var x = e.form_blocks.recurring._get_node_value,\n                  S = e.form_blocks.recurring._get_node_numeric_value;\n                x(m, \"day_type\") == \"d\" ? D.push(Math.max(1, S(m, \"day_count\"))) : (D.push(\"week\"), D.push(1), D.push(\"\"), D.push(\"\"), D.push(e.config.recurring_workdays.join(\",\")), D.splice(0, 1));\n              },\n              year: function (D, x) {\n                var S = e.form_blocks.recurring._get_node_value;\n                S(m, \"year_type\") == \"d\" ? (D.push(\"1\"), x.start.setMonth(0), x.start.setDate(S(m, \"year_day\")), x.start.setMonth(S(m, \"year_month\"))) : (D.push(\"1\"), D.push(S(m, \"year_day2\")), D.push(S(m, \"year_week2\")), x.start.setDate(1), x.start.setMonth(S(m, \"year_month2\"))), x._start = !0;\n              }\n            },\n            b = {\n              week: function (D, x) {\n                var S = e.form_blocks.recurring._set_node_value;\n                S(m, \"week_count\", D[1]);\n                for (var N = D[4].split(\",\"), M = {}, A = 0; A < N.length; A++) M[N[A]] = !0;\n                S(m, \"week_day\", M);\n              },\n              month: function (D, x) {\n                var S = e.form_blocks.recurring._set_node_value;\n                D[2] === \"\" ? (S(m, \"month_type\", \"d\"), S(m, \"month_count\", D[1]), S(m, \"month_day\", x.start.getDate())) : (S(m, \"month_type\", \"w\"), S(m, \"month_count2\", D[1]), S(m, \"month_week2\", D[3]), S(m, \"month_day2\", D[2]));\n              },\n              day: function (D, x) {\n                var S = e.form_blocks.recurring._set_node_value;\n                S(m, \"day_type\", \"d\"), S(m, \"day_count\", D[1]);\n              },\n              year: function (D, x) {\n                var S = e.form_blocks.recurring._set_node_value;\n                D[2] === \"\" ? (S(m, \"year_type\", \"d\"), S(m, \"year_day\", x.start.getDate()), S(m, \"year_month\", x.start.getMonth())) : (S(m, \"year_type\", \"w\"), S(m, \"year_week2\", D[3]), S(m, \"year_day2\", D[2]), S(m, \"year_month2\", x.start.getMonth()));\n              }\n            };\n          e.form_blocks.recurring._set_repeat_code = function (D, x) {\n            var S = e.form_blocks.recurring._set_node_value,\n              N = D.split(\"#\");\n            switch (D = N[0].split(\"_\"), b[D[0]](D, x), N[1]) {\n              case \"no\":\n                y(m, \"no\");\n                break;\n              case \"\":\n                y(m, \"date_of_end\");\n                var M = x.end;\n                e.config.include_end_by && (M = e.date.add(M, -1, \"day\")), S(m, \"date_of_end\", u(M));\n                break;\n              default:\n                y(m, \"occurences_count\"), S(m, \"occurences_count\", N[1]);\n            }\n            S(m, \"repeat\", D[0]);\n            var A = e.form_blocks.recurring._get_form_node(m, \"repeat\", D[0]);\n            A.nodeName == \"SELECT\" ? (A.dispatchEvent(new Event(\"change\")), A.dispatchEvent(new MouseEvent(\"click\"))) : A.dispatchEvent(new MouseEvent(\"click\"));\n          };\n          for (var k = 0; k < v.elements.length; k++) {\n            var E = v.elements[k];\n            E.name === \"repeat\" && (E.nodeName != \"SELECT\" || E.$_eventAttached ? E.$_eventAttached || (E.$_eventAttached = !0, E.addEventListener(\"click\", p)) : (E.$_eventAttached = !0, E.addEventListener(\"change\", p)));\n          }\n          e._lightbox._rec_init_done = !0;\n        },\n        set_value: function (i, _, o) {\n          var t = e.form_blocks.recurring;\n          e._lightbox._rec_init_done || t._init_set_value(i, _, o), i.open = !o.rec_type, i.blocked = this._is_modified_occurence(o);\n          var n = t._ds;\n          n.start = o.start_date, n.end = o._end_date, t._toggle_block(), _ && t._set_repeat_code(_, n);\n        },\n        get_value: function (i, _) {\n          if (i.open) {\n            var o = e.form_blocks.recurring._ds,\n              t = {};\n            (function () {\n              var n = e.formSection(\"time\");\n              if (n || (n = a(\"time\")), n || (n = a(\"calendar_time\")), !n) throw new Error([\"Can't calculate the recurring rule, the Recurring form block can't find the Time control. Make sure you have the time control in 'scheduler.config.lightbox.sections' config.\", \"You can use either the default time control https://docs.dhtmlx.com/scheduler/time.html, or the datepicker https://docs.dhtmlx.com/scheduler/minicalendar.html, or a custom control. \", 'In the latter case, make sure the control is named \"time\":', \"\", \"scheduler.config.lightbox.sections = [\", '{name:\"time\", height:72, type:\"YOU CONTROL\", map_to:\"auto\" }];'].join(\"\\n\"));\n              return n;\n            })().getValue(t), o.start = t.start_date, _.rec_type = e.form_blocks.recurring._get_repeat_code(o), o._start ? (_.start_date = new Date(o.start), _._start_date = new Date(o.start), o._start = !1) : _._start_date = null, _._end_date = o.end, _.rec_pattern = _.rec_type.split(\"#\")[0];\n          } else _.rec_type = _.rec_pattern = \"\", _._end_date = _.end_date;\n          return _.rec_type;\n        },\n        _get_button: function () {\n          return h().header.firstChild.firstChild;\n        },\n        _get_form: function () {\n          return h().node;\n        },\n        open: function () {\n          var i = e.form_blocks.recurring;\n          i._get_form().open || i._toggle_block();\n        },\n        close: function () {\n          var i = e.form_blocks.recurring;\n          i._get_form().open && i._toggle_block();\n        },\n        _toggle_block: function () {\n          var i = e.form_blocks.recurring,\n            _ = i._get_form(),\n            o = i._get_button();\n          _.open || _.blocked ? (_.style.height = \"0px\", o && (o.style.backgroundPosition = \"-5px 20px\", o.nextSibling.innerHTML = e.locale.labels.button_recurring)) : (_.style.height = \"auto\", o && (o.style.backgroundPosition = \"-5px 0px\", o.nextSibling.innerHTML = e.locale.labels.button_recurring_open)), _.open = !_.open, e.setLightboxSize();\n        },\n        focus: function (i) {},\n        button_click: function (i, _, o) {\n          e.form_blocks.recurring._get_form().blocked || e.form_blocks.recurring._toggle_block();\n        }\n      }, e._rec_markers = {}, e._rec_markers_pull = {}, e._add_rec_marker = function (i, _) {\n        i._pid_time = _, this._rec_markers[i.id] = i, this._rec_markers_pull[i.event_pid] || (this._rec_markers_pull[i.event_pid] = {}), this._rec_markers_pull[i.event_pid][_] = i;\n      }, e._get_rec_marker = function (i, _) {\n        var o = this._rec_markers_pull[_];\n        return o ? o[i] : null;\n      }, e._get_rec_markers = function (i) {\n        return this._rec_markers_pull[i] || [];\n      }, e._rec_temp = [], d = e.addEvent, e.addEvent = function (i, _, o, t, n) {\n        var s = d.apply(this, arguments);\n        if (s && e.getEvent(s)) {\n          var c = e.getEvent(s);\n          c.start_date && (c.start_date = r(c.start_date)), c.end_date && (c.end_date = r(c.end_date)), this._is_modified_occurence(c) && e._add_rec_marker(c, 1e3 * c.event_length), c.rec_type && (c.rec_pattern = c.rec_type.split(\"#\")[0]);\n        }\n        return s;\n      }, e.attachEvent(\"onEventIdChange\", function (i, _) {\n        if (!this._ignore_call) {\n          this._ignore_call = !0, e._rec_markers[i] && (e._rec_markers[_] = e._rec_markers[i], delete e._rec_markers[i]), e._rec_markers_pull[i] && (e._rec_markers_pull[_] = e._rec_markers_pull[i], delete e._rec_markers_pull[i]);\n          for (var o = 0; o < this._rec_temp.length; o++) (t = this._rec_temp[o]).event_pid == i && (t.event_pid = _, this.changeEventId(t.id, _ + \"#\" + t.id.split(\"#\")[1]));\n          for (var o in this._rec_markers) {\n            var t;\n            (t = this._rec_markers[o]).event_pid == i && (t.event_pid = _, t._pid_changed = !0);\n          }\n          var n = e._rec_markers[_];\n          n && n._pid_changed && (delete n._pid_changed, setTimeout(function () {\n            if (e.$destroyed) return !0;\n            e.callEvent(\"onEventChanged\", [_, e.getEvent(_)]);\n          }, 1)), delete this._ignore_call;\n        }\n      }), e.attachEvent(\"onConfirmedBeforeEventDelete\", function (i) {\n        var _ = this.getEvent(i);\n        if (this._is_virtual_event(i) || this._is_modified_occurence(_) && _.rec_type && _.rec_type != \"none\") {\n          i = i.split(\"#\");\n          var o = this.uid(),\n            t = i[1] ? i[1] : Math.round(_._pid_time / 1e3),\n            n = this._copy_event(_);\n          n.id = o, n.event_pid = _.event_pid || i[0];\n          var s = t;\n          n.event_length = s, n.rec_type = n.rec_pattern = \"none\", this.addEvent(n), this._add_rec_marker(n, 1e3 * s);\n        } else {\n          _.rec_type && this._lightbox_id && this._roll_back_dates(_);\n          var c = this._get_rec_markers(i);\n          for (var u in c) c.hasOwnProperty(u) && (i = c[u].id, this.getEvent(i) && this.deleteEvent(i, !0));\n        }\n        return !0;\n      }), e.attachEvent(\"onEventDeleted\", function (i, _) {\n        !this._is_virtual_event(i) && this._is_modified_occurence(_) && (e._events[i] || (_.rec_type = _.rec_pattern = \"none\", this.setEvent(i, _)));\n      }), e.attachEvent(\"onEventChanged\", function (i, _) {\n        if (this._loading) return !0;\n        var o = this.getEvent(i);\n        if (this._is_virtual_event(i)) {\n          i = i.split(\"#\");\n          var t = this.uid();\n          this._not_render = !0;\n          var n = this._copy_event(_);\n          n.id = t, n.event_pid = i[0];\n          var s = i[1];\n          n.event_length = s, n.rec_type = n.rec_pattern = \"\", this._add_rec_marker(n, 1e3 * s), this.addEvent(n), this._not_render = !1;\n        } else {\n          o.start_date && (o.start_date = r(o.start_date)), o.end_date && (o.end_date = r(o.end_date)), o.rec_type && this._lightbox_id && this._roll_back_dates(o);\n          var c = this._get_rec_markers(i);\n          for (var u in c) c.hasOwnProperty(u) && (delete this._rec_markers[c[u].id], this.deleteEvent(c[u].id, !0));\n          delete this._rec_markers_pull[i];\n          for (var v = !1, m = 0; m < this._rendered.length; m++) this._rendered[m].getAttribute(this.config.event_attribute) == i && (v = !0);\n          v || (this._select_id = null);\n        }\n        return !0;\n      }), e.attachEvent(\"onEventAdded\", function (i) {\n        if (!this._loading) {\n          var _ = this.getEvent(i);\n          _.rec_type && !_.event_length && this._roll_back_dates(_);\n        }\n        return !0;\n      }), e.attachEvent(\"onEventSave\", function (i, _, o) {\n        return this.getEvent(i).rec_type || !_.rec_type || this._is_virtual_event(i) || (this._select_id = null), !0;\n      }), e.attachEvent(\"onEventCreated\", function (i) {\n        var _ = this.getEvent(i);\n        return _.rec_type || (_.rec_type = _.rec_pattern = _.event_length = _.event_pid = \"\"), !0;\n      }), e.attachEvent(\"onEventCancel\", function (i) {\n        var _ = this.getEvent(i);\n        _.rec_type && (this._roll_back_dates(_), this.render_view_data());\n      }), e._roll_back_dates = function (i) {\n        i.start_date && (i.start_date = r(i.start_date)), i.end_date && (i.end_date = r(i.end_date)), i.event_length = Math.round((i.end_date.valueOf() - i.start_date.valueOf()) / 1e3), i.end_date = i._end_date, i._start_date && (i.start_date.setMonth(0), i.start_date.setDate(i._start_date.getDate()), i.start_date.setMonth(i._start_date.getMonth()), i.start_date.setFullYear(i._start_date.getFullYear()));\n      }, e._is_virtual_event = function (i) {\n        return i.toString().indexOf(\"#\") != -1;\n      }, e._is_modified_occurence = function (i) {\n        return i.event_pid && i.event_pid != \"0\";\n      }, e.showLightbox_rec = e.showLightbox, e.showLightbox = function (i) {\n        var _ = this.locale,\n          o = e.config.lightbox_recurring,\n          t = this.getEvent(i),\n          n = t.event_pid,\n          s = this._is_virtual_event(i);\n        s && (n = i.split(\"#\")[0]);\n        var c = function (v) {\n          var m = e.getEvent(v);\n          return m._end_date = m.end_date, m.end_date = new Date(m.start_date.valueOf() + 1e3 * m.event_length), e.showLightbox_rec(v);\n        };\n        if ((n || 1 * n == 0) && t.rec_type) return c(i);\n        if (!n || n === \"0\" || !_.labels.confirm_recurring || o == \"instance\" || o == \"series\" && !s) return this.showLightbox_rec(i);\n        if (o == \"ask\") {\n          var u = this;\n          e.modalbox({\n            text: _.labels.confirm_recurring,\n            title: _.labels.title_confirm_recurring,\n            width: \"500px\",\n            position: \"middle\",\n            buttons: [_.labels.button_edit_series, _.labels.button_edit_occurrence, _.labels.icon_cancel],\n            callback: function (v) {\n              switch (+v) {\n                case 0:\n                  return c(n);\n                case 1:\n                  return u.showLightbox_rec(i);\n                case 2:\n                  return;\n              }\n            }\n          });\n        } else c(n);\n      }, e.get_visible_events_rec = e.get_visible_events, e.get_visible_events = function (i) {\n        for (var _ = 0; _ < this._rec_temp.length; _++) delete this._events[this._rec_temp[_].id];\n        this._rec_temp = [];\n        var o = this.get_visible_events_rec(i),\n          t = [];\n        for (_ = 0; _ < o.length; _++) o[_].rec_type ? o[_].rec_pattern != \"none\" && this.repeat_date(o[_], t) : t.push(o[_]);\n        return t;\n      }, function () {\n        var i = e.isOneDayEvent;\n        e.isOneDayEvent = function (o) {\n          return !!o.rec_type || i.call(this, o);\n        };\n        var _ = e.updateEvent;\n        e.updateEvent = function (o) {\n          var t = e.getEvent(o);\n          t && t.rec_type && (t.rec_pattern = (t.rec_type || \"\").split(\"#\")[0]), t && t.rec_type && !this._is_virtual_event(o) ? e.update_view() : _.call(this, o);\n        };\n      }(), e.transponse_size = {\n        day: 1,\n        week: 7,\n        month: 1,\n        year: 12\n      }, e.date.day_week = function (i, _, o) {\n        i.setDate(1);\n        var t = e.date.month_start(new Date(i)),\n          n = 1 * _ + (o = 7 * (o - 1)) - i.getDay() + 1;\n        i.setDate(n <= o ? n + 7 : n);\n        var s = e.date.month_start(new Date(i));\n        return t.valueOf() === s.valueOf();\n      }, e.transpose_day_week = function (i, _, o, t, n) {\n        for (var s = (i.getDay() || (e.config.start_on_monday ? 7 : 0)) - o, c = 0; c < _.length; c++) if (_[c] > s) return i.setDate(i.getDate() + 1 * _[c] - s - (t ? o : n));\n        this.transpose_day_week(i, _, o + t, null, o);\n      }, e.transpose_type = function (i) {\n        var _ = \"transpose_\" + i;\n        if (!this.date[_]) {\n          var o = i.split(\"_\"),\n            t = \"add_\" + i,\n            n = this.transponse_size[o[0]] * o[1];\n          if (o[0] == \"day\" || o[0] == \"week\") {\n            var s = null;\n            if (o[4] && (s = o[4].split(\",\"), e.config.start_on_monday)) {\n              for (var c = 0; c < s.length; c++) s[c] = 1 * s[c] || 7;\n              s.sort();\n            }\n            this.date[_] = function (u, v) {\n              var m = Math.floor((v.valueOf() - u.valueOf()) / (864e5 * n));\n              return m > 0 && u.setDate(u.getDate() + m * n), s && e.transpose_day_week(u, s, 1, n), u;\n            }, this.date[t] = function (u, v) {\n              var m = new Date(u.valueOf());\n              if (s) for (var l = 0; l < v; l++) e.transpose_day_week(m, s, 0, n);else m.setDate(m.getDate() + v * n);\n              return m;\n            };\n          } else o[0] != \"month\" && o[0] != \"year\" || (this.date[_] = function (u, v, m) {\n            var l = Math.ceil((12 * v.getFullYear() + 1 * v.getMonth() + 1 - (12 * u.getFullYear() + 1 * u.getMonth() + 1)) / n - 1);\n            return l >= 0 && (u.setDate(1), u.setMonth(u.getMonth() + l * n)), e.date[t](u, 0, m);\n          }, this.date[t] = function (u, v, m, l) {\n            if (l ? l++ : l = 1, l > 12) return null;\n            var f = new Date(u.valueOf());\n            f.setDate(1), f.setMonth(f.getMonth() + v * n);\n            var g = f.getMonth(),\n              p = f.getFullYear();\n            f.setDate(m.start_date.getDate()), o[3] && e.date.day_week(f, o[2], o[3]);\n            var y = e.config.recurring_overflow_instances;\n            return f.getMonth() != g && y != \"none\" && (f = y === \"lastDay\" ? new Date(p, g + 1, 0, f.getHours(), f.getMinutes(), f.getSeconds(), f.getMilliseconds()) : e.date[t](new Date(p, g + 1, 0), v || 1, m, l)), f;\n          });\n        }\n      }, e.repeat_date = function (i, _, o, t, n, s) {\n        t = t || this._min_date, n = n || this._max_date;\n        var c = s || -1,\n          u = new Date(i.start_date.valueOf()),\n          v = u.getHours(),\n          m = 0;\n        for (!i.rec_pattern && i.rec_type && (i.rec_pattern = i.rec_type.split(\"#\")[0]), this.transpose_type(i.rec_pattern), u = e.date[\"transpose_\" + i.rec_pattern](u, t, i); u && (u < i.start_date || e._fix_daylight_saving_date(u, t, i, u, new Date(u.valueOf() + 1e3 * i.event_length)).valueOf() <= t.valueOf() || u.valueOf() + 1e3 * i.event_length <= t.valueOf());) u = this.date[\"add_\" + i.rec_pattern](u, 1, i);\n        for (; u && u < n && u < i.end_date && (c < 0 || m < c);) {\n          u.setHours(v);\n          var l = e.config.occurrence_timestamp_in_utc ? Date.UTC(u.getFullYear(), u.getMonth(), u.getDate(), u.getHours(), u.getMinutes(), u.getSeconds()) : u.valueOf(),\n            f = this._get_rec_marker(l, i.id);\n          if (f) o && (f.rec_type != \"none\" && m++, _.push(f));else {\n            var g = new Date(u.valueOf() + 1e3 * i.event_length),\n              p = this._copy_event(i);\n            if (p.text = i.text, p.start_date = u, p.event_pid = i.id, p.id = i.id + \"#\" + Math.round(l / 1e3), p.end_date = g, p.end_date = e._fix_daylight_saving_date(p.start_date, p.end_date, i, u, p.end_date), p._timed = this.isOneDayEvent(p), !p._timed && !this._table_view && !this.config.multi_day) return;\n            _.push(p), o || (this._events[p.id] = p, this._rec_temp.push(p)), m++;\n          }\n          u = this.date[\"add_\" + i.rec_pattern](u, 1, i);\n        }\n      }, e._fix_daylight_saving_date = function (i, _, o, t, n) {\n        var s = i.getTimezoneOffset() - _.getTimezoneOffset();\n        return s ? s > 0 ? new Date(t.valueOf() + 1e3 * o.event_length - 60 * s * 1e3) : new Date(_.valueOf() - 60 * s * 1e3) : new Date(n.valueOf());\n      }, e.getRecDates = function (i, _) {\n        var o = typeof i == \"object\" ? i : e.getEvent(i),\n          t = [];\n        if (_ = _ || 100, !o.rec_type) return [{\n          start_date: o.start_date,\n          end_date: o.end_date\n        }];\n        if (o.rec_type == \"none\") return [];\n        e.repeat_date(o, t, !0, o.start_date, o.end_date, _);\n        for (var n = [], s = 0; s < t.length; s++) t[s].rec_type != \"none\" && n.push({\n          start_date: t[s].start_date,\n          end_date: t[s].end_date\n        });\n        return n;\n      }, e.getEvents = function (i, _) {\n        var o = [];\n        for (var t in this._events) {\n          var n = this._events[t];\n          if (n && n.start_date < _ && n.end_date > i) if (n.rec_pattern) {\n            if (n.rec_pattern == \"none\") continue;\n            var s = [];\n            this.repeat_date(n, s, !0, i, _);\n            for (var c = 0; c < s.length; c++) !s[c].rec_pattern && s[c].start_date < _ && s[c].end_date > i && !this._rec_markers[s[c].id] && o.push(s[c]);\n          } else this._is_virtual_event(n.id) || o.push(n);\n        }\n        return o;\n      }, e.config.repeat_date = \"%m.%d.%Y\", e.config.lightbox.sections = [{\n        name: \"description\",\n        map_to: \"text\",\n        type: \"textarea\",\n        focus: !0\n      }, {\n        name: \"recurring\",\n        type: \"recurring\",\n        map_to: \"rec_type\",\n        button: \"recurring\"\n      }, {\n        name: \"time\",\n        height: 72,\n        type: \"time\",\n        map_to: \"auto\"\n      }], e._copy_dummy = function (i) {\n        var _ = new Date(this.start_date),\n          o = new Date(this.end_date);\n        this.start_date = _, this.end_date = o, this.event_length = this.event_pid = this.rec_pattern = this.rec_type = null;\n      }, e.config.include_end_by = !1, e.config.lightbox_recurring = \"ask\", e.attachEvent(\"onClearAll\", function () {\n        e._rec_markers = {}, e._rec_markers_pull = {}, e._rec_temp = [];\n      });\n    },\n    serialize: function (e) {\n      const h = oe(e);\n      e.data_attributes = function () {\n        var a = [],\n          r = e._helpers.formatDate,\n          d = h();\n        for (var i in d) {\n          var _ = d[i];\n          for (var o in _) o.substr(0, 1) != \"_\" && a.push([o, o == \"start_date\" || o == \"end_date\" ? r : null]);\n          break;\n        }\n        return a;\n      }, e.toXML = function (a) {\n        var r = [],\n          d = this.data_attributes(),\n          i = h();\n        for (var _ in i) {\n          var o = i[_];\n          r.push(\"<event>\");\n          for (var t = 0; t < d.length; t++) r.push(\"<\" + d[t][0] + \"><![CDATA[\" + (d[t][1] ? d[t][1](o[d[t][0]]) : o[d[t][0]]) + \"]]></\" + d[t][0] + \">\");\n          r.push(\"</event>\");\n        }\n        return (a || \"\") + \"<data>\" + r.join(\"\\n\") + \"</data>\";\n      }, e._serialize_json_value = function (a) {\n        return a === null || typeof a == \"boolean\" ? a = \"\" + a : (a || a === 0 || (a = \"\"), a = '\"' + a.toString().replace(/\\n/g, \"\").replace(/\\\\/g, \"\\\\\\\\\").replace(/\"/g, '\\\\\"') + '\"'), a;\n      }, e.toJSON = function () {\n        return JSON.stringify(this.serialize());\n      }, e.toICal = function (a) {\n        var r = e.date.date_to_str(\"%Y%m%dT%H%i%s\"),\n          d = e.date.date_to_str(\"%Y%m%d\"),\n          i = [],\n          _ = h();\n        for (var o in _) {\n          var t = _[o];\n          i.push(\"BEGIN:VEVENT\"), t._timed && (t.start_date.getHours() || t.start_date.getMinutes()) ? i.push(\"DTSTART:\" + r(t.start_date)) : i.push(\"DTSTART:\" + d(t.start_date)), t._timed && (t.end_date.getHours() || t.end_date.getMinutes()) ? i.push(\"DTEND:\" + r(t.end_date)) : i.push(\"DTEND:\" + d(t.end_date)), i.push(\"SUMMARY:\" + t.text), i.push(\"END:VEVENT\");\n        }\n        return \"BEGIN:VCALENDAR\\nVERSION:2.0\\nPRODID:-//dhtmlXScheduler//NONSGML v2.2//EN\\nDESCRIPTION:\" + (a || \"\") + \"\\n\" + i.join(\"\\n\") + \"\\nEND:VCALENDAR\";\n      };\n    },\n    timeline: function (e) {\n      R(\"Timeline\", e.assert);\n    },\n    tooltip: function (e) {\n      e.config.tooltip_timeout = 30, e.config.tooltip_offset_y = 20, e.config.tooltip_offset_x = 10, e.config.tooltip_hide_timeout = 30;\n      const h = new _t(e);\n      e.ext.tooltips = h, e.attachEvent(\"onSchedulerReady\", function () {\n        h.tooltipFor({\n          selector: \"[\" + e.config.event_attribute + \"]\",\n          html: a => {\n            if (e._mobile && !e.config.touch_tooltip) return;\n            const r = e._locate_event(a.target);\n            if (e.getEvent(r)) {\n              const d = e.getEvent(r);\n              return e.templates.tooltip_text(d.start_date, d.end_date, d);\n            }\n            return null;\n          },\n          global: !1\n        });\n      }), e.attachEvent(\"onDestroy\", function () {\n        h.destructor();\n      }), e.attachEvent(\"onLightbox\", function () {\n        h.hideTooltip();\n      }), e.attachEvent(\"onBeforeDrag\", function () {\n        return h.hideTooltip(), !0;\n      }), e.attachEvent(\"onEventDeleted\", function () {\n        return h.hideTooltip(), !0;\n      });\n    },\n    treetimeline: function (e) {\n      R(\"Tree Timeline\", e.assert);\n    },\n    units: function (e) {\n      R(\"Units\", e.assert);\n    },\n    url: function (e) {\n      e._get_url_nav = function () {\n        for (var h = {}, a = (document.location.hash || \"\").replace(\"#\", \"\").split(\",\"), r = 0; r < a.length; r++) {\n          var d = a[r].split(\"=\");\n          d.length == 2 && (h[d[0]] = d[1]);\n        }\n        return h;\n      }, e.attachEvent(\"onTemplatesReady\", function () {\n        var h = !0,\n          a = e.date.str_to_date(\"%Y-%m-%d\"),\n          r = e.date.date_to_str(\"%Y-%m-%d\"),\n          d = e._get_url_nav().event || null;\n        function i(_) {\n          if (e.$destroyed) return !0;\n          d = _, e.getEvent(_) && e.showEvent(_);\n        }\n        e.attachEvent(\"onAfterEventDisplay\", function (_) {\n          return d = null, !0;\n        }), e.attachEvent(\"onBeforeViewChange\", function (_, o, t, n) {\n          if (h) {\n            h = !1;\n            var s = e._get_url_nav();\n            if (s.event) try {\n              if (e.getEvent(s.event)) return setTimeout(function () {\n                i(s.event);\n              }), !1;\n              var c = e.attachEvent(\"onXLE\", function () {\n                setTimeout(function () {\n                  i(s.event);\n                }), e.detachEvent(c);\n              });\n            } catch {}\n            if (s.date || s.mode) {\n              try {\n                this.setCurrentView(s.date ? a(s.date) : null, s.mode || null);\n              } catch {\n                this.setCurrentView(s.date ? a(s.date) : null, t);\n              }\n              return !1;\n            }\n          }\n          var u = [\"date=\" + r(n || o), \"mode=\" + (t || _)];\n          d && u.push(\"event=\" + d);\n          var v = \"#\" + u.join(\",\");\n          return document.location.hash = v, !0;\n        });\n      });\n    },\n    week_agenda: function (e) {\n      R(\"Week Agenda\", e.assert);\n    },\n    wp: function (e) {\n      e.attachEvent(\"onLightBox\", function () {\n        if (this._cover) try {\n          this._cover.style.height = this.expanded ? \"100%\" : (document.body.parentNode || document.body).scrollHeight + \"px\";\n        } catch {}\n      }), e.form_blocks.select.set_value = function (h, a, r) {\n        a !== void 0 && a !== \"\" || (a = (h.firstChild.options[0] || {}).value), h.firstChild.value = a || \"\";\n      };\n    },\n    year_view: function (e) {\n      e.templates.year_date = function (o) {\n        return e.date.date_to_str(e.locale.labels.year_tab + \" %Y\")(o);\n      }, e.templates.year_month = e.date.date_to_str(\"%F\"), e.templates.year_scale_date = e.date.date_to_str(\"%D\"), e.templates.year_tooltip = function (o, t, n) {\n        return n.text;\n      };\n      const h = function () {\n          return e._mode == \"year\";\n        },\n        a = function (o) {\n          var t = e.$domHelpers.closest(o, \"[data-cell-date]\");\n          return t && t.hasAttribute(\"data-cell-date\") ? e.templates.parse_date(t.getAttribute(\"data-cell-date\")) : null;\n        };\n      e.dblclick_dhx_month_head = function (o) {\n        if (h()) {\n          const t = o.target;\n          if (e.$domHelpers.closest(t, \".dhx_before\") || e.$domHelpers.closest(t, \".dhx_after\")) return !1;\n          const n = a(t);\n          if (n) {\n            const s = n,\n              c = this.date.add(s, 1, \"day\");\n            !this.config.readonly && this.config.dblclick_create && this.addEventNow(s.valueOf(), c.valueOf(), o);\n          }\n        }\n      }, e.attachEvent(\"onEventIdChange\", function () {\n        h() && this.year_view(!0);\n      });\n      var r = e.render_data;\n      e.render_data = function (o) {\n        if (!h()) return r.apply(this, arguments);\n        for (var t = 0; t < o.length; t++) this._year_render_event(o[t]);\n      };\n      var d = e.clear_view;\n      e.clear_view = function () {\n        if (!h()) return d.apply(this, arguments);\n        var o = e._year_marked_cells;\n        for (var t in o) o.hasOwnProperty(t) && o[t].classList.remove(\"dhx_year_event\", \"dhx_cal_datepicker_event\");\n        e._year_marked_cells = {};\n      }, e._hideToolTip = function () {\n        this._tooltip && (this._tooltip.style.display = \"none\", this._tooltip.date = new Date(9999, 1, 1));\n      }, e._showToolTip = function (o, t, n, s) {\n        if (this._tooltip) {\n          if (this._tooltip.date.valueOf() == o.valueOf()) return;\n          this._tooltip.innerHTML = \"\";\n        } else {\n          var c = this._tooltip = document.createElement(\"div\");\n          c.className = \"dhx_year_tooltip\", this.config.rtl && (c.className += \" dhx_tooltip_rtl\"), document.body.appendChild(c), c.addEventListener(\"click\", e._click.dhx_cal_data), c.addEventListener(\"click\", function (p) {\n            if (p.target.closest(\"[\".concat(e.config.event_attribute, \"]\"))) {\n              const y = p.target.closest(\"[\".concat(e.config.event_attribute, \"]\")).getAttribute(e.config.event_attribute);\n              e.showLightbox(y);\n            }\n          });\n        }\n        for (var u = this.getEvents(o, this.date.add(o, 1, \"day\")), v = \"\", m = 0; m < u.length; m++) {\n          var l = u[m];\n          if (this.filter_event(l.id, l)) {\n            var f = l.color ? \"--dhx-scheduler-event-background:\" + l.color + \";\" : \"\",\n              g = l.textColor ? \"--dhx-scheduler-event-color:\" + l.textColor + \";\" : \"\";\n            v += \"<div class='dhx_tooltip_line' style='\" + f + g + \"' event_id='\" + u[m].id + \"' \" + this.config.event_attribute + \"='\" + u[m].id + \"'>\", v += \"<div class='dhx_tooltip_date' style='\" + f + g + \"'>\" + (u[m]._timed ? this.templates.event_date(u[m].start_date) : \"\") + \"</div>\", v += \"<div class='dhx_event_icon icon_details'>&nbsp;</div>\", v += this.templates.year_tooltip(u[m].start_date, u[m].end_date, u[m]) + \"</div>\";\n          }\n        }\n        this._tooltip.style.display = \"\", this._tooltip.style.top = \"0px\", document.body.offsetWidth - t.left - this._tooltip.offsetWidth < 0 ? this._tooltip.style.left = t.left - this._tooltip.offsetWidth + \"px\" : this._tooltip.style.left = t.left + s.offsetWidth + \"px\", this._tooltip.date = o, this._tooltip.innerHTML = v, document.body.offsetHeight - t.top - this._tooltip.offsetHeight < 0 ? this._tooltip.style.top = t.top - this._tooltip.offsetHeight + s.offsetHeight + \"px\" : this._tooltip.style.top = t.top + \"px\";\n      }, e._year_view_tooltip_handler = function (o) {\n        if (h()) {\n          var t = o.target || o.srcElement;\n          t.tagName.toLowerCase() == \"a\" && (t = t.parentNode), e._getClassName(t).indexOf(\"dhx_year_event\") != -1 ? e._showToolTip(e.templates.parse_date(t.getAttribute(\"data-year-date\")), e.$domHelpers.getOffset(t), o, t) : e._hideToolTip();\n        }\n      }, e._init_year_tooltip = function () {\n        e._detachDomEvent(e._els.dhx_cal_data[0], \"mouseover\", e._year_view_tooltip_handler), e.event(e._els.dhx_cal_data[0], \"mouseover\", e._year_view_tooltip_handler);\n      }, e._get_year_cell = function (o) {\n        for (var t = e.templates.format_date(o), n = this.$root.querySelectorAll(\".dhx_cal_data .dhx_cal_datepicker_date[data-cell-date=\\\"\".concat(t, \"\\\"]\")), s = 0; s < n.length; s++) if (!e.$domHelpers.closest(n[s], \".dhx_after, .dhx_before\")) return n[s];\n        return null;\n      }, e._year_marked_cells = {}, e._mark_year_date = function (o, t) {\n        var n = e.templates.format_date(o),\n          s = this._get_year_cell(o);\n        if (s) {\n          var c = this.templates.event_class(t.start_date, t.end_date, t);\n          e._year_marked_cells[n] || (s.classList.add(\"dhx_year_event\", \"dhx_cal_datepicker_event\"), s.setAttribute(\"data-year-date\", n), s.setAttribute(\"date\", n), e._year_marked_cells[n] = s), c && s.classList.add(c);\n        }\n      }, e._unmark_year_date = function (o) {\n        var t = this._get_year_cell(o);\n        t && t.classList.remove(\"dhx_year_event\", \"dhx_cal_datepicker_event\");\n      }, e._year_render_event = function (o) {\n        var t = o.start_date;\n        for (t = t.valueOf() < this._min_date.valueOf() ? this._min_date : this.date.date_part(new Date(t)); t < o.end_date;) if (this._mark_year_date(t, o), (t = this.date.add(t, 1, \"day\")).valueOf() >= this._max_date.valueOf()) return;\n      }, e.year_view = function (o) {\n        if (e.set_sizes(), e._table_view = o, !this._load_mode || !this._load()) if (o) {\n          if (e._init_year_tooltip(), e._reset_year_scale(), e._load_mode && e._load()) return void (e._render_wait = !0);\n          e.render_view_data();\n        } else e._hideToolTip();\n      }, e._reset_year_scale = function () {\n        this._cols = [], this._colsS = {};\n        var o = [],\n          t = this._els.dhx_cal_data[0],\n          n = this.config;\n        t.scrollTop = 0, t.innerHTML = \"\", Math.floor((parseInt(t.style.height) - e.xy.year_top) / n.year_y);\n        var s = document.createElement(\"div\"),\n          c = this.date.week_start(e._currentDate());\n        this._process_ignores(c, 7, \"day\", 1);\n        for (var u = 0; u < 7; u++) this._ignores && this._ignores[u] || (this._cols[u] = \"var(--dhx-scheduler-datepicker-cell-size)\", this._render_x_header(u, 0, c, s)), c = this.date.add(c, 1, \"day\");\n        for (s.lastChild.className += \" dhx_scale_bar_last\", u = 0; u < s.childNodes.length; u++) this._waiAria.yearHeadCell(s.childNodes[u]);\n        var v = this.date[this._mode + \"_start\"](this.date.copy(this._date)),\n          m = v,\n          l = null;\n        const f = document.createElement(\"div\");\n        for (f.classList.add(\"dhx_year_wrapper\"), u = 0; u < n.year_y; u++) for (var g = 0; g < n.year_x; g++) {\n          (l = document.createElement(\"div\")).className = \"dhx_year_box\", l.setAttribute(\"date\", this._helpers.formatDate(v)), l.setAttribute(\"data-month-date\", this._helpers.formatDate(v)), l.innerHTML = \"<div class='dhx_year_month'></div><div class='dhx_year_grid'><div class='dhx_year_week'>\" + s.innerHTML + \"</div><div class='dhx_year_body'></div></div>\";\n          var p = l.querySelector(\".dhx_year_month\"),\n            y = l.querySelector(\".dhx_year_grid\"),\n            w = l.querySelector(\".dhx_year_body\"),\n            b = e.uid();\n          this._waiAria.yearHeader(p, b), this._waiAria.yearGrid(y, b), p.innerHTML = this.templates.year_month(v);\n          var k = this.date.week_start(v);\n          this._reset_month_scale(w, v, k, 6);\n          for (var E = w.querySelectorAll(\"td\"), D = 0; D < E.length; D++) this._waiAria.yearDayCell(E[D]);\n          f.appendChild(l), o[u * n.year_x + g] = (v.getDay() - (this.config.start_on_monday ? 1 : 0) + 7) % 7, v = this.date.add(v, 1, \"month\");\n        }\n        t.appendChild(f);\n        var x = this._getNavDateElement();\n        x && (x.innerHTML = this.templates[this._mode + \"_date\"](m, v, this._mode)), this.week_starts = o, o._month = m.getMonth(), this._min_date = m, this._max_date = v;\n      }, e._reset_year_scale = function () {\n        var o = this._els.dhx_cal_data[0];\n        o.scrollTop = 0, o.innerHTML = \"\";\n        let t = this.date.year_start(new Date(this._date));\n        this._min_date = this.date.week_start(new Date(t));\n        const n = document.createElement(\"div\");\n        n.classList.add(\"dhx_year_wrapper\");\n        let s = t;\n        for (let v = 0; v < 12; v++) {\n          let m = document.createElement(\"div\");\n          m.className = \"dhx_year_box\", m.setAttribute(\"date\", this._helpers.formatDate(s)), m.setAttribute(\"data-month-date\", this._helpers.formatDate(s)), m.innerHTML = \"<div class='dhx_year_month'>\".concat(this.templates.year_month(s), \"</div>\\n\\t\\t\\t<div class='dhx_year_grid'></div>\");\n          const l = m.querySelector(\".dhx_year_grid\"),\n            f = e._createDatePicker(null, {\n              date: s,\n              minWeeks: 6\n            });\n          f._renderDayGrid(l), f.destructor(), n.appendChild(m), s = this.date.add(s, 1, \"month\");\n        }\n        o.appendChild(n);\n        let c = this.date.add(t, 1, \"year\");\n        c.valueOf() != this.date.week_start(new Date(c)).valueOf() && (c = this.date.week_start(new Date(c)), c = this.date.add(c, 1, \"week\")), this._max_date = c;\n        var u = this._getNavDateElement();\n        u && (u.innerHTML = this.templates[this._mode + \"_date\"](t, c, this._mode));\n      };\n      var i = e.getActionData;\n      e.getActionData = function (o) {\n        return h() ? {\n          date: a(o.target),\n          section: null\n        } : i.apply(e, arguments);\n      };\n      var _ = e._locate_event;\n      e._locate_event = function (o) {\n        var t = _.apply(e, arguments);\n        if (!t) {\n          var n = a(o);\n          if (!n) return null;\n          var s = e.getEvents(n, e.date.add(n, 1, \"day\"));\n          if (!s.length) return null;\n          t = s[0].id;\n        }\n        return t;\n      }, e.attachEvent(\"onDestroy\", function () {\n        e._hideToolTip();\n      });\n    }\n  },\n  X = new class {\n    constructor(e) {\n      this._seed = 0, this._schedulerPlugins = [], this._bundledExtensions = e, this._extensionsManager = new it(e);\n    }\n    plugin(e) {\n      this._schedulerPlugins.push(e), I.scheduler && e(I.scheduler);\n    }\n    getSchedulerInstance(e) {\n      for (var h = nt(this._extensionsManager), a = 0; a < this._schedulerPlugins.length; a++) this._schedulerPlugins[a](h);\n      return h._internal_id = this._seed++, this.$syncFactory && this.$syncFactory(h), e && this._initFromConfig(h, e), h;\n    }\n    _initFromConfig(e, h) {\n      if (h.plugins && e.plugins(h.plugins), h.config && e.mixin(e.config, h.config, !0), h.templates && e.attachEvent(\"onTemplatesReady\", function () {\n        e.mixin(e.templates, h.templates, !0);\n      }, {\n        once: !0\n      }), h.events) for (const a in h.events) e.attachEvent(a, h.events[a]);\n      h.locale && e.i18n.setLocale(h.locale), Array.isArray(h.calendars) && h.calendars.forEach(function (a) {\n        e.addCalendar(a);\n      }), h.container ? e.init(h.container) : e.init(), h.data && (typeof h.data == \"string\" ? e.load(h.data) : e.parse(h.data));\n    }\n  }(lt),\n  Z = X.getSchedulerInstance(),\n  ae = {\n    plugin: Z.bind(X.plugin, X)\n  };\nwindow.scheduler = Z, window.Scheduler = ae, window.$dhx || (window.$dhx = {}), window.$dhx.scheduler = Z, window.$dhx.Scheduler = ae;\nexport { ae as Scheduler, Z as default, Z as scheduler };","map":{"version":3,"names":["I","window","global","de","e","h","o","t","document","createElement","split","forEach","n","classList","add","a","rows_container","row","view","setAttribute","config","fix_tab_position","$firstTab","$lastTab","$segmentedTab","date","button","builtInButton","spacer","minicalendarButton","click","$_eventAttached","event","isCalendarVisible","destroyCalendar","renderCalendar","position","getState","navigation","handler","s","setCurrentView","html_element","r","c","u","rows","cols","css","width","style","height","html","innerHTML","align","justifyContent","d","i","createDocumentFragment","Array","isArray","length","v","appendChild","_init_nav_bar","$container","querySelector","className","_update_nav_bar","_","xy","nav_height","unset_actions","_els","get_elements","set_actions","display","_e","body","parentNode","w","innerWidth","documentElement","clientWidth","innerHeight","clientHeight","clearTimeout","setTimeout","$destroyed","$root","callEvent","updateView","getComputedStyle","getPropertyValue","tabIndex","wai_aria_attributes","Sfdc","$A","Aura","offsetHeight","offsetWidth","contentWindow","removeChild","le","constructor","_silent_mode","listeners","_silentStart","_silentEnd","ce","createEventStorage","eventStorage","apply","arguments","addEvent","id","once","removeEvent","clear","Q","attachEvent","toLowerCase","thisObject","bind","attachAll","ev_listen_all","concat","checkEvent","detachEvent","detachAllEvents","ee","addEventListener","eventRemove","removeEventListener","he","domEvents","attach","push","element","callback","capture","detach","splice","detachAll","slice","extend","_eventRemoveAll","_createDomEventScope","_trim","String","prototype","trim","replace","_isDate","getFullYear","getMonth","getDate","_isObject","ue","Date","now","Y","V","uid","mixin","copy","pop","Function","toString","call","Number","Boolean","Object","hasOwnProperty","defined","isDate","delay","result","$cancelTimeout","$pending","$execute","ne","baseVal","indexOf","ie","target","srcElement","charAt","fe","visibility","currentStyle","ve","isNaN","getAttribute","ge","area","nodeName","loLowerCase","me","input","select","textarea","object","hasAttribute","re","head","createShadowRoot","attachShadow","te","ShadowRoot","host","q","getAbsoluteLeft","getOffset","left","getAbsoluteTop","top","getOffsetSum","parseInt","offsetTop","offsetLeft","offsetParent","getOffsetRect","getBoundingClientRect","test","navigator","userAgent","pageYOffset","scrollTop","pageXOffset","scrollLeft","clientTop","clientLeft","Math","round","closest","K","insertAfter","nextSibling","insertBefore","remove","isChildOf","contains","getFocusableNodes","querySelectorAll","join","$position","sort","getClassName","locateCss","getRootNode","hasShadowParent","isShadowDomSupported","getActiveElement","activeElement","shadowRoot","getSelection","focusNode","getRelativeEventPosition","m","l","right","bottom","y","x","clientX","clientY","getTargetNode","tagName","composedPath","getNodePosition","Element","pe","matches","msMatchesSelector","webkitMatchesSelector","parentElement","nodeType","B","ye","isIE","isOpera","isChrome","isKHTML","isFF","isIPad","search","isEdge","isNode","W","encodeURIComponent","JSON","stringify","be","generateStringToDate","match","csp_str_to_date","locale","month_short_hash","month_full_hash","UTC","csp","init","month_short","month_full","date_part","setHours","setMinutes","setSeconds","setMilliseconds","getHours","setTime","getTime","time_part","valueOf","getTimezoneOffset","week_start","getDay","start_on_monday","month_start","setDate","year_start","setMonth","day_start","_add_days","setYear","to_fixed","date_to_str","getUTCDate","getUTCMonth","getUTCFullYear","day_short","getUTCDay","day_full","getUTCHours","getUTCMinutes","getMinutes","getUTCSeconds","getSeconds","getUTCISOWeek","getISOWeek","str_to_date","f","g","parse_exact_format","p","floor","convert_to_utc","oe","_events","xe","_loaded","_load","_load_url","prevent_cache","_date","_load_mode","templates","load_format","_min_date","_max_date","ajax","get","on_load","_parsers","xml","canParse","responseXML","firstChild","parse","responseText","xmltop","xmlDoc","dhtmlx","security_key","xpath","serverList","attributes","key","label","nodeValue","_xmlNodeToJSON","_userdata","name","text","_init_event","json","events","data","dhx_security","collections","value","ical","RegExp","c_start","c_end","e_start","e_end","exec","parse_param","substr","parse_date","server_utc","_process","status","_process_loading","_loading","_not_render","_render_wait","render_view_data","_after_call","_tagvalue","start_date","_init_date","end_date","_helpers","parseDate","serialize","utils","xml_format","format_date","load","setLoadMode","childNodes","show_loading","_x","_y","_obj","we","_init_touch_events","touch","MSStream","platform","maxTouchPoints","scroll_width","_mobile","createEvent","_touch_events","touches","pageX","pageY","PointerEvent","pointerEnabled","pointerType","msPointerEnabled","MSPOINTER_TYPE_MOUSE","_is_lightbox_open","passive","_hide_global_tip","_on_mouse_up","_temp_touch_block","_drag_id","_drag_mode","_drag_pos","_pointerDragId","drag_mode","matrix","_mode","drag_id","getEvent","b","y_property","k","getEvents","E","_sorder","_count","render_data","mode","_on_mouse_move","preventDefault","cancelBubble","_update_global_tip","abs","dhx_cal_data","pointerId","_click","_on_dbl_click","_block_next_stop","touch_drag","_locate_event","_ignore_next_click","_getClassName","previousSibling","_on_mouse_down","for_rendered","_rendered","touch_tip","_show_global_tip","updateEvent","touch_swipe_dates","scrollable","dhx_cal_next_button","dhx_cal_prev_button","_global_tip","_timed","event_header","day_date","labels","drag_to_create","drag_to_move","ke","_is_material_skin","_border_box_events","_addThemeClass","skin","_skin_settings","use_select_menu_space","wide_form","hour_size_px","displayed_event_color","displayed_event_text_color","_skin_xy","lightbox_additional_height","bar_height","_build_skin_info","clearInterval","setInterval","setSkin","getElementsByTagName","href","_theme_info","theme","cssVarTheme","oldMaterialTheme","values","_configure","_skin_init","render","hour_scale","hour_date","_old_month_day","month_day","_currentDate","dhx_cal_today_button","dhx_cal_navline","header","from","map","find","filter","reverse","Ee","$scheduler","$dp","_dataProcessorHandlers","_validId","setUpdated","_new_event","_in_progress","_invalid","updatedRows","_waitMode","_update_callback","setUserData","action_param","deleteEvent","_add_rec_marker","G","serverProcessor","autoUpdate","updateMode","_tMode","_headers","_payload","post_delim","messages","styles","updated","inserted","deleted","invalid","invalid_cell","error","enableUTFencoding","De","hide","box","which","keyCode","keyboard","cover","_waiAria","messageButtonAttrString","D","S","N","messageModalAttr","type","M","title","content","ok","message_ok","cancel","message_cancel","buttons","A","C","T","getElementById","O","L","H","hidden","focus","expire","modalBox","messageBox","messageInfoAttr","timers","pull","seed","hideAll","alert","confirm","message","modalbox","setTransactionMode","headers","payload","_tSend","_endnm","_serializeAsJson","_router","router","escape","_utf","setDataColumns","_columns","getSyncState","enableDataNames","enablePartialDataSend","_changed","setUpdateMode","dnd","ignore","findRow","getUserData","set_invalid","is_invalid","markRow","sendData","_methods","details","getActionByState","checkBeforeUpdate","editStop","sendAllData","_beforeSendData","_getRowData","_sendData","_serializeAsJSON","serialize_one","_applyPayload","urlSeparator","afterUpdate","_user","_cleanupArgumentsBeforeSend","url","method","_cleanupItemBeforeSend","action","query","_onResolvedCreateUpdate","setRequestHeader","sid","tid","afterUpdateCallback","create","delete","update","then","Error","catch","_forEachUpdatedRow","_getAllData","defineAction","_uActions","_errorResponse","cleanUpdate","_setDefaultTransactionMode","_serverProcessor","finalizeUpdate","_initialized","_dp_init","_is_virtual_event","_set_event_text_style","cssText","_text_style","event_updated","rec_type","rec_pattern","_dp_change_event_id","changeEventId","_dp_hook_delete","setDp","_dp","_dataprocessor","setOnAfterUpdate","setOnBeforeUpdateHandler","setAutoUpdate","_need_update","_update_busy","afterAutoUpdate","fullSync","loadUpdate","getUpdates","_getXmlNodeValue","destructor","_prepareDataItem","formatDate","Se","day_tab","week_tab","month_tab","new_event","icon_save","icon_cancel","icon_details","icon_edit","icon_delete","confirm_closing","confirm_deleting","section_description","section_time","full_day","confirm_recurring","section_recurring","button_recurring","button_recurring_open","button_edit_series","button_edit_occurrence","grid_tab","next","prev","year","month","day","hour","minute","Ne","agenda_tab","description","year_tab","week_agenda_tab","repeat_radio_day","repeat_radio_week","repeat_radio_month","repeat_radio_year","repeat_radio_day_type","repeat_text_day_count","repeat_radio_day_type2","repeat_week","repeat_text_week_count","repeat_radio_month_type","repeat_radio_month_start","repeat_text_month_day","repeat_text_month_count","repeat_text_month_count2_before","repeat_text_month_count2_after","repeat_year_label","select_year_day2","repeat_text_year_day","select_year_month","repeat_radio_end","repeat_text_occurences_count","repeat_radio_end2","repeat_radio_end3","month_for_recurring","day_for_recurring","Me","Ae","Ce","Te","Oe","$e","He","Le","ze","je","Pe","Ve","Ie","Be","Re","qe","_locales","addLocale","getLocale","Fe","Je","Ue","Ye","We","Ke","Ge","Xe","Ze","Qe","et","tt","at","undefined","state","modes","currentRange","eventDates","currentModeIndex","container","onStateChangeHandlers","scheduler","_domEvents","onStateChange","setState","_notifyStateChange","_adjustDate","setFullYear","_toggleMode","_renderCalendarHeader","innerText","toLocaleString","_renderDayGrid","_renderMonthGrid","_renderYearGrid","_renderDayGridHeader","_weeksBetween","minWeeks","reduce","nt","version","agenda","grid","unit","timeline","week_agenda","anythingElse","limit","_commonErrorMessages","unknownView","collapsedContainer","createTimelineView","createUnitsView","createGridView","addMarkedTimespan","exportToPNG","exportToPDF","_detachDomEvent","_init_once","console","wai_aria_application_role","_props","_grid","names","log","rtl","_scroll","init_templates","set_sizes","$initialized","min_event_height","scale_width","scale_height","month_scale_height","menu_width","margin_top","margin_left","editor_width","month_head_height","event_header_height","keys","edit_save","edit_cancel","_table_view","dhx_cal_header","set_xy","_lightbox","_setLbPosition","_data_width","max","labelAttr","_select_id","_close_not_saved","unselect","min_date","max_date","editor_id","_edit_id","lightbox_id","_lightbox_id","select_id","expanded","readonly","getActionData","dhx_cal_tab","substring","_dhtmlx_confirm","title_confirm_deleting","edit","save","showLightbox","form","_ref","addEventNow","event_duration","time_step","first_hour","_drag_event","dblclick_create","details_on_dblclick","_get_column_index","_cols","_ignores","_week_indexes_from_pos","min","ceil","_mouse_coords","$env","_colsS","$domHelpers","ev","heights","_ignores_detected","preserve_length","_event_length","_get_real_event_length","x_step","x_unit","timestamp","title_confirm_closing","positive_closing","_correct_shift","_is_pos_changed","has_moved","_correct_drag_start_date","_start_correction","_end_correction","last_hour","_get_fictional_event_length","_correct_drag_end_date","_get_date_from_pos","_drag_start","fields","custom","_dragEventBody","_move_event_shift","_drag_from_start","resize_from_start","cursor","P","shift","z","$","limit_drag_out","j","all_timed","_get_section_view","_get_event_sday","getView","_allow_dnd","update_render","F","update_view","J","U","drag_event_body","_lame_clone","_get_private_properties","_clear_temporary_properties","_dhx_changed","edit_on_create","details_on_create","isOneDayEvent","_lame_copy","_trigger_dyn_loading","_reset_ignores","_reset_scale","isViewExists","_set_aria_buttons_attrs","headerButtonsAttributes","icon_form","preserve_scroll","_dy_shift","headerToggleState","_render_x_header","left_border","dayHeaderAttr","_get_columns_num","_get_timeunit_start","_get_view_end","_calc_scale_sizes","_process_ignores","col_length","_set_scale_col_size","_render_scales","time_slot_text","time_slot_class","week_date_class","dayColumnAttr","_getNavDateElement","drag_resize","drag_move","_scales","navBarDateAttr","_reset_month_scale","_reset_hours_scale","multi_day","cloneNode","hourScaleAttr","scroll_hour","now_date","_render_month_scale","month_date_class","monthCellAttr","getLabel","lightbox","sections","map_to","options","updateCollection","resetLightbox","hideCover","section","_focus","_get_date_index","_get_section_property","_is_initialized","getAttributeString","setAttributes","role","getHeaderCellAttr","eventAttr","_eventCommonAttr","event_text","$dataprocessor_class","setEventBarAttr","_getAttributes","eventBarAttrString","agendaHeadAttrString","agendaHeadDateString","agendaHeadDescriptionString","agendaDataAttrString","agendaEventAttrString","agendaDetailsBtnString","gridAttrString","gridRowAttrString","gridCellAttrString","mapAttrString","mapRowAttrString","mapDetailsBtnString","minicalHeader","minicalGrid","minicalRow","minicalDayCell","minicalHeadCell","weekAgendaDayCell","weekAgendaEvent","lightboxHiddenAttr","lightboxVisibleAttr","lightboxSectionButtonAttrString","tabindex","yearHeader","yearGrid","yearHeadCell","yearRow","yearDayCell","lightboxAttr","lightboxButtonAttrString","eventMenuAttrString","lightboxHeader","lightboxSelectAttrString","quickInfoAttr","quickInfoHeaderAttrString","quickInfoHeader","quickInfoButtonAttrString","tooltipAttr","tooltipVisibleAttr","tooltipHiddenAttr","dom","assert","show_errors","_createDatePicker","_getFocusableNodes","_locate_css","env","Promise","clearAll","async","cache","serializeRequestParams","DOMParser","ActiveXObject","loadXML","parseFromString","selectNodes","ownerDocument","evaluate","XPathResult","ANY_TYPE","iterateNext","_call","getSync","put","del","post","postSync","XMLHttpRequest","readyState","filePath","open","toUpperCase","send","$ajax","default_date","month_date","load_date","week_date","date_format","api_date","day_column_padding","drag_create","resize_month_events","resize_month_timed","responsive_lightbox","separate_short_events","cascade_event_display","cascade_event_count","cascade_event_margin","multi_day_height_limit","drag_lightbox","quick_info_detached","drag_highlight","icons_edit","icons_select","buttons_left","buttons_right","highlight_displayed_event","ajax_error","delay_render","timeline_swap_resize","event_attribute","$initial","xml_date","day_scale_date","month_scale_date","week_scale_date","time_picker","event_date","event_class","event_bar_date","event_bar_text","month_events_link","drag_marker_class","drag_marker_content","tooltip_date_format","tooltip_text","calendar_month","calendar_scale_date","calendar_date","calendar_time","clear_view","setEvent","create_getter","create_setter","is_visible_events","clear_event","get_visible_events","filter_event","_is_main_area_event","_recalculate_timed","dhx_multi_day","_rendered_location","_view_month_day","_render_month_link","_sday","_eday","_sweek","_get_event_bar_pos","x2","_pre_render_events","render_event_bar","max_month_events","locate_holder","real","buffer","render_event","_get_first_visible_cell","_pre_render_events_table","_pre_render_events_line","unshift","scrollHeight","scroll_fix","overflowY","_get_event_mapped_end_date","_min_mapped_duration","_inner","max_count","_copy_event","_time_order","_is_any_multiday_cell_visible","locate_holder_day","first_chunk","last_chunk","_length","_first_chunk","_last_chunk","_copy_dummy","_y_from_date","_calc_event_y","_render_v_bar","zIndex","color","setProperty","_editor","shiftKey","textColor","highlightEventPosition","renderEvent","_drag_resize","_get_dnd_order","_orig_sorder","_edit_stop_event","getRenderedEvent","showEvent","section_delimiter","getSectionTop","posFromDate","dx","dy","_smartRenderingEnabled","scrollTo","_append_drag_marker","lastChild","_update_marker_position","_lightbox_controls","formSection","getLightbox","node","getValue","form_blocks","get_value","setValue","set_value","get_template_control","control","get_select_control","get_textarea_control","get_time_control","defaults","template","time","placeholder","_get_input","_dhx_onchange","onchange","time_format","_time_format_order","limit_time_select","year_range","_time_values","_full_day","checked","disabled","auto_end_date","_update_lightbox_select","selectedIndex","showCover","show_cover","_cover","_fill_lightbox","lightbox_header","_get_lightbox_section_node","default_value","_lightbox_out","_empty_lightbox","hide_lightbox","endLightbox","hide_cover","_move_while_dnd","_finish_dnd","save_lightbox","startLightbox","_custom_lightbox","_temp_lightbox","cancel_lightbox","hideLightbox","_init_lightbox_events","button_click","readonly_active","setLightboxSize","_init_dnd_events","_dnd_start_lb","dhx_unselectable","_lb_start","_ready_to_dnd","recurring","_lightbox_template","_bindLightboxLabels","inputId","getRootView","tag","attrs","hooks","didInsert","el","cmp","jQuery","fn","dhx_scheduler","each","Scheduler","getSchedulerInstance","lazy_setCurrentView","lazy_updateView","createDataProcessor","batchUpdate","DataProcessor","dhtmlxError","catchError","en","ar","ca","cn","cs","da","es","fi","fr","hu","it","jp","nb","nl","no","pl","pt","ro","ru","si","sk","sv","tr","ua","i18n","setLocale","dhx_save_btn","dhx_cancel_btn","dhx_delete_btn","ext","plugins","treetimeline","daytimeline","outerdrag","legacy","getExtension","_extensions","addExtension","attaches","attachScheduler","_genStr","attachObject","vs","av","sched","schedId","setSizes","_viewRestore","R","notImplemented","rt","currentTarget","$keyboardNavigation","trapFocus","_keyNavMessagePopup","isModal","ot","_temp_key_scope","key_nav","_pasteDate","_pasteSection","elementFromPoint","dispatcher","isEnabled","_make_pasted_event","event_pid","event_length","multisection","_do_paste","_is_key_nav_active","ctrlKey","metaKey","_buffer_event","isActive","_key_nav_copy_paste","getActiveNode","eventId","st","attachSchedulerHandlers","keyDownHandler","focusHandler","keepScrollPosition","focusGlobalNode","enable","reFocusActiveNode","isValid","fallback","MinicalButton","MinicalCell","layout","some","Event","TimeSlot","nextSlot","setActiveNode","activeNode","removeAttribute","start","end","getNode","dt","_scheduler","_tooltipNode","setViewport","_root","show","_isLikeMouseEvent","_calculateTooltipPosition","setContent","_getViewPort","_getViewPortSize","tooltip_offset_x","tooltip_offset_y","scrollY","scrollX","$event_data","$event","_t","_listeners","tooltip","_initDelayedFunctions","hideTooltip","delayHide","selector","doOnMouseEnter","onmouseenter","onmousemove","onmouseleave","tooltipFor","createEventObject","delayShow","tooltip_timeout","tooltip_hide_timeout","lt","active_links","active_link_view","_active_link_click","do_wrapper","agenda_legacy","add_agenda_legacy","agenda_legacy_time","agenda_legacy_text","agenda_legacy_date","agenda_legacy_start","dblclick_dhx_cal_data","agenda_time","agenda_text","_agendaScrollTop","agenda_date","agenda_legacy_view","agenda_start","agenda_end","agenda_view","add_agenda","agenda_day","all_timed_month","is_event_short","_safe_copy","isPrototypeOf","prerender_events","_virtual","collision","collision_limit","checkCollision","_roll_back_dates","_check_sections_collision","getRecDates","container_autoresize","month_day_min_height","min_grid_size","min_map_size","_h_fix","updateContainterHeight","year_y","week_agenda_scale_height","_gridView","y_unit","getSectionHeight","scrollWidth","conditionalUpdateContainerHeight","requestAnimationFrame","$original_scroll_width","$original_section_autoheight","section_autoheight","cookie","_get_url_nav","unescape","drag_between","editors","combo","cached_options","_combo","DOMParent","unload","DOMelem","dhx_globalImgPath","image_path","dhtmlXCombo","options_height","setOptionHeight","enableFilteringMode","filtering","script_path","addOption","disable","selectOption","setComboValue","getIndexByValue","getSelectedValue","getSelectedText","radio","vertical","checkbox","checked_value","unchecked_value","expand","fullscreen","toggleIcon","_position","_width","_height","_overflow","overflow","_maximize","collapse","export_api","dhtmlxAjax","dhx4","format","orientation","dpi","zoom","_export_html","_send_to_export","exportToICal","_serialize_plain","exportToExcel","columns","_serialize_columns","_ajax_to_export","server","_plain_export_copy","$text","_create_hidden_form","submit","_hidden_export_form","_get_export_size","A5","A4","A3","A2","A1","A0","parseFloat","smart_rendering","style_width","style_height","timeline_scrollable","timeline_smart_rendering","footer","scales","grid_view","html_templates","minicalButton","minicalDate","SchedulerNode","dataArea","DataArea","timeSlot","key_nav_step","addShortcut","getShortcutHandler","shortcuts","findHandler","removeShortcut","unbind","setDefaultNode","_compose","createCommand","modifiers","alt","ctrl","meta","getExpressions","getWords","commandKeys","specialKeys","charCodeAt","getCommandFromEvent","altKey","fromCharCode","getHashFromEvent","getHash","junctionChar","combinationChar","backspace","tab","enter","esc","space","up","down","home","pageup","pagedown","insert","plus","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","EventHandler","_handlers","doAction","returnValue","bindAll","initKeys","marker","renderMultiple","_modes","_getMode","units","renderVerticalMarker","renderTimelineMarker","renderYearMarker","renderMonthMarker","weekAgenda","renderWeekAgendaMarker","list","renderAgendaMarker","dayColumns","addWaiAriaLabel","addDataAttributes","order","_wrapDiv","_get_year_cell","opacity","round_position","_trace_x","_is_column_visible","days","_timeline_getX","_section_height","_isRender","renderMonthCell","size","lineHeight","getDefaultNode","getMode","blur","_compareEvents","_pickEvent","nextEventHandler","prevEventHandler","alt+1, alt+2, alt+3, alt+4, alt+5, alt+6, alt+7, alt+8, alt+9","HeaderCell","getNodes","ctrl+left,meta+left","ctrl+right,meta+right","ctrl+up,meta+up","ctrl+down,meta+down","shift+e","ctrl+enter,meta+enter","ctrl+c,meta+c","ctrl+v,meta+v","ctrl+x,meta+x","KeyNavNode","moveTo","compareTo","index","_getSection","_getNodes","isScrolledIntoView","getInlineEditor","isMultisectionEvent","_moveToSlot","getDefaultDate","_getDefaultSection","movingDate","findVisibleColumn","clone","_getMultisectionView","_getNextSection","isVisible","addMonthDate","nextMonthSlot","_alignTimeSlot","nextTimelineSlot","nextUnitsSlot","nextDaySlot","_moveDate","isBeforeLastHour","isAfterFirstHour","isInVisibleDayTime","nextWeekAgendaSlot","nextAgendaSlot","isDateVisible","nextDateColumn","extendSlot","extendUnitsSlot","extendTimelineSlot","extendMonthSlot","extendDaySlot","extendWeekAgendaSlot","extendGenericSlot","extendSlotDates","scrollSlot","shift+down","shift+up","shift+right","shift+left","globalNode","col","_getGrid","_getNode","up,down,right,left","blurNode","defaultPrevented","_timeout","_minicalendars","isMinical","patchMinicalendar","_def_count","layer","layers","validId","obj","_clearUpdateFlag","_cloneObj","_dataprocessors","_layers_zindex","initial_layer_zindex","isDefault","defaultLayer","showLayer","toggleLayer","hideLayer","getLayer","visible","noMenu","_evs_layer","_t_render_view_data","filter_agenda","limit_start","limit_end","limit_view","check_limits","mark_now","display_marked_timespans","overwrite_marked_timespans","_temp_limit_scope","get_resulting_options","zones","blockTime","unblockTime","deleteMarkedTimespan","checkInMarkedTimespan","_marked_timespans","_get_zone_minutes","checkLimitViolation","_add_timespan_zones","_get_blocked_zones","_get_relevant_blocked_zones","_mark_now","_mark_now_timer","_remove_mark_now","_append_mark_now","_render_marked_timespan","_prepare_timespan_options","invert_zones","invertZones","_get_dates_by_index","_get_css_classes_by_config","_get_block_by_config","_mark_timespans","_on_scale_add_marker","markTimespan","_marked_timespans_ids","_marked_timespans_types","unmarkTimespan","_addMarkerTimespanConfig","_array","_subtract_timespan_zones","_delete_marked_timespan_by_id","_delete_marked_timespan_by_config","_delete_marked_timespans_list","_get_types_to_render","_get_configs_to_render","_get_unit_index","dblclick_dhx_marked_timespan","map_view","mapView","geocoder","points","markers","infoWindow","createMarker","google","maps","Marker","map_date_width","map_icon_width","map_description_width","map_resolve_event_location","map_resolve_user_location","map_initial_position","LatLng","map_error_position","map_infowindow_max_width","map_type","MapTypeId","ROADMAP","map_zoom_after_resolve","marker_geo_success","marker_geo_fail","marker_date","marker_text","event_location","dblclick_dhx_map_area","map_time","map_text","map_start","add_map","map_date","_latLngUpdate","_isMapPositionSet","dhx_gmap","map_initial_zoom","center","mapTypeId","Map","disableDefaultUI","disableDoubleClickZoom","addListener","latLng","geocode","GeocoderStatus","OK","geometry","location","lat","lng","formatted_address","maxWidth","_points","_markers","_infowindow","InfoWindow","_infowindows_content","_initialization_count","Geocoder","geolocation","getCurrentPosition","coords","latitude","longitude","setCenter","setZoom","getCenter","setPosition","getZoom","_selected_event_id","marginRight","marginLeft","marginTop","map_end","close","setMap","trigger","selectEvent","showAddress","_displayEventOnMap","address","language","_updateEventLocation","_event_resolve_delay","minical","minicalendar","mark_events","_synced_minicalendars","_render_calendar","unmarkCalendar","_get_def_cont","markCalendar","_last_date","conf","_markCalendarCurrentDate","sync","_on_xle_handler","updateCalendar","_created","_locateCalendar","_week_template","_mini_cal_arrows","padding","move_minicalendar_date","_update_minical_select","linkCalendar","monthheight","multiselect","delimiter","script_url","multisource","mvc","use_id","cid","backbone","toJSON","Backbone","Collection","model","set","dhtmlDragAndDropObject","stopDrag","_locate_cell_timeline","addDragLanding","_drag","_dragIn","_dragOut","DragControl","addDrop","onDrop","getMaster","onDragIn","pdf","dhx_cal_date","cells","second_scale","week_starts","_month","rowIndex","se","source","getPDFData","toPDF","toPDFRange","quick_info","show_quick_info","showQuickInfo","hiding_function","hideQuickInfo","quick_info_title","quick_info_content","quick_info_date","_quick_info_box_id","_get_event_counter_part","_quick_info_box","_init_quick_info","_fill_quick_data","_show_quick_info","_x_scroll","_quick_info_onscroll_handler","$testmode","_qi_button_click","readonly_form","_lightbox_r","occurrence_timestamp_in_utc","recurring_workdays","_get_node","_outer_html","outerHTML","repeat_date_of_end","_ds","_get_form_node","_get_node_value","_get_node_numeric_value","_set_node_value","_init_set_value","_end_date","repeat_date","_get_repeat_code","include_end_by","transpose_type","repeat_precise","_start","week","transpose_day_week","_set_repeat_code","dispatchEvent","MouseEvent","elements","_rec_init_done","blocked","_is_modified_occurence","_toggle_block","_start_date","_get_button","_get_form","backgroundPosition","_rec_markers","_rec_markers_pull","_pid_time","_get_rec_marker","_get_rec_markers","_rec_temp","_ignore_call","_pid_changed","showLightbox_rec","lightbox_recurring","showSeries","title_confirm_recurring","get_visible_events_rec","transponse_size","day_week","recurring_overflow_instances","getMilliseconds","_fix_daylight_saving_date","data_attributes","toXML","_serialize_json_value","toICal","tooltips","touch_tooltip","hash","wp","year_view","year_date","year_month","year_scale_date","year_tooltip","isYearMode","getCellDate","dblclick_dhx_month_head","_year_render_event","_year_marked_cells","_hideToolTip","_tooltip","_showToolTip","_year_view_tooltip_handler","_init_year_tooltip","_mark_year_date","_unmark_year_date","_reset_year_scale","year_top","year_x","X","_seed","_schedulerPlugins","_bundledExtensions","_extensionsManager","plugin","_internal_id","$syncFactory","_initFromConfig","calendars","addCalendar","Z","ae","$dhx"],"sources":["C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\global.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\nav_bar.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\scheduler_resize_listener.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\utils\\eventable.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\utils\\event.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\common.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\utils\\scoped_event.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\utils\\utils.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\utils\\dom_helpers.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\utils\\env.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\common\\url_serialize.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\base.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\common\\get_serializable_events.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\load.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\loaders\\xml.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\loaders\\json.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\loaders\\ical.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\touch.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\skins.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\dataprocessor\\dataprocessor_hooks.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\dataprocessor\\dataprocessor.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\message.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_ar.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_be.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_ca.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_cn.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_cs.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_da.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_de.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_el.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_en.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_es.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_fi.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_fr.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_he.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_hu.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_id.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_it.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_jp.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_manager.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_nb.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_nl.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_no.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_pl.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_pt.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_ro.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_ru.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_si.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_sk.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_sv.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_tr.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\locale_ua.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\datepicker.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\scheduler_factory_method.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\common_errors.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\scheduler.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\wai_aria.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\common\\assert.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\jquery.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\destructor.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\utils\\ajax.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\config.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\event.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\event_highlight.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\lightbox.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\dhtmlx\\dhtmlx_suite_hooks.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\delay_render.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\core\\connector.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\locale\\index.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\extension_manager.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\dhtmlx_hook.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\restricted_extensions\\not_implemented_extension.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\keyboard_navigation\\modals.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\keyboard_navigation\\key_nav_legacy.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\keyboard_navigation\\scheduler_handlers.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\tooltip\\tooltip.ts","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\tooltip\\tooltipManager.ts","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\extensions_gpl.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\active_links.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\agenda_legacy_view.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\agenda.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\all_timed.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\collision.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\container_autoresize.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\cookie.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\restricted_extensions\\daytimeline.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\restricted_extensions\\drag_between.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\editors.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\expand.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\export_api\\index.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\restricted_extensions\\grid_view.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\html_templates.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\key_nav.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\keyboard_navigation\\common\\keyboard_shortcuts.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\keyboard_navigation\\common\\eventhandler.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\keyboard_navigation\\common\\trap_modal_focus.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\keyboard_navigation\\marker.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\keyboard_navigation\\elements\\scheduler_node.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\keyboard_navigation\\elements\\nav_node.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\keyboard_navigation\\elements\\header_cell.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\keyboard_navigation\\elements\\event.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\keyboard_navigation\\elements\\time_slot.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\keyboard_navigation\\elements\\minical_button.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\keyboard_navigation\\elements\\minical_cell.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\keyboard_navigation\\elements\\data_area.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\keyboard_navigation\\core.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\keyboard_navigation\\minical_handlers.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\layer.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\limit.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\map_view.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\minical.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\monthheight.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\restricted_extensions\\multisection.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\multiselect.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\multisource.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\mvc.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\outerdrag.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\pdf.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\quick_info.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\readonly.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\recurring.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\serialize.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\restricted_extensions\\timeline.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\tooltip\\index.ts","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\restricted_extensions\\treetimeline.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\restricted_extensions\\units.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\url.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\restricted_extensions\\week_agenda.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\wp.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\ext\\year_view.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\dhtmlxscheduler.gpl.js","C:\\Users\\sasan\\react-scheduler\\node_modules\\dhtmlx-scheduler\\sources\\scheduler_factory.js"],"sourcesContent":["\r\n/* eslint-disable no-restricted-globals */\r\nvar globalScope;\r\nif(typeof window !== \"undefined\"){\r\n\tglobalScope = window;\r\n}else{\r\n\tglobalScope = global;\r\n}\r\n/* eslint-enable no-restricted-globals */\r\n\r\nexport default globalScope;","export default function extend(scheduler) {\r\n\r\nfunction div(className){\r\n\tvar element = document.createElement(\"div\");\r\n\tvar classes = (className || \"\").split(\" \");\r\n\tclasses.forEach(function(cssClass){\r\n\t\telement.classList.add(cssClass);\r\n\t});\r\n\treturn element;\r\n}\r\nvar itemTypes = {\r\n\trows_container: function(){\r\n\t\treturn div(\"dhx_cal_navbar_rows_container\");\r\n\t},\r\n\trow: function(){\r\n\t\treturn div(\"dhx_cal_navbar_row\");\r\n\t},\r\n\tview: function (config) {\r\n\t\tvar element = div(\"dhx_cal_tab\");\r\n\t\telement.setAttribute(\"name\", config.view + \"_tab\");\r\n\t\telement.setAttribute(\"data-tab\", config.view);\r\n\t\t// element.setAttribute(\"data-viewname\", config.view); // FIXME: need to remove? not used anywhere\r\n\t\tif(scheduler.config.fix_tab_position){\r\n\t\t\tif(config.$firstTab) {\r\n\t\t\t\telement.classList.add(\"dhx_cal_tab_first\");\r\n\t\t\t}else if(config.$lastTab) {\r\n\t\t\t\telement.classList.add(\"dhx_cal_tab_last\");\r\n\t\t\t} else if(config.view !== \"week\") {\r\n\t\t\t\telement.classList.add(\"dhx_cal_tab_standalone\");\r\n\t\t\t}\r\n\r\n\t\t\tif(config.$segmentedTab) {\r\n\t\t\t\telement.classList.add(\"dhx_cal_tab_segmented\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn element;\r\n\t},\r\n\tdate: function () {\r\n\t\treturn div(\"dhx_cal_date\");\r\n\t},\r\n\tbutton: function (config) {\r\n\t\treturn div(\"dhx_cal_nav_button dhx_cal_nav_button_custom dhx_cal_tab\");\r\n\t},\r\n\tbuiltInButton: function (config){\r\n\t\treturn div(\"dhx_cal_\" + config.view + \"_button dhx_cal_nav_button\");\r\n\t},\r\n\tspacer: function () {\r\n\t\treturn div(\"dhx_cal_line_spacer\");\r\n\t},\r\n\tminicalendarButton: function(config){\r\n\t\tvar minicalendarDiv = div('dhx_minical_icon');\r\n\t\tif(!config.click && !minicalendarDiv.$_eventAttached){\r\n\t\t\t\r\n\t\t\tscheduler.event(minicalendarDiv, \"click\", function () {\r\n\t\t\t\tif (scheduler.isCalendarVisible()) {\r\n\t\t\t\t\tscheduler.destroyCalendar();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tscheduler.renderCalendar({\r\n\t\t\t\t\t\tposition: this,\r\n\t\t\t\t\t\tdate: scheduler.getState().date,\r\n\t\t\t\t\t\tnavigation: true,\r\n\t\t\t\t\t\thandler: function (date, calendar) {\r\n\t\t\t\t\t\t\tscheduler.setCurrentView(date);\r\n\t\t\t\t\t\t\tscheduler.destroyCalendar();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn minicalendarDiv;\r\n\t},\r\n\thtml_element: function (config) {\r\n\t\treturn div(\"dhx_cal_nav_content\");\r\n\t}\r\n};\r\n\r\nfunction findRenderer(config) {\r\n\tvar renderer;\r\n\tif (config.view) {\r\n\t\tswitch (config.view){\r\n\t\t\tcase \"today\":\r\n\t\t\tcase \"next\":\r\n\t\t\tcase \"prev\":\r\n\t\t\t\trenderer = itemTypes.builtInButton;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"date\":\r\n\t\t\t\trenderer = itemTypes.date;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"spacer\":\r\n\t\t\t\trenderer = itemTypes.spacer;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"button\":\r\n\t\t\t\trenderer = itemTypes.button;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"minicalendar\":\r\n\t\t\t\trenderer = itemTypes.minicalendarButton;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\trenderer = itemTypes.view;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t} else if(config.rows) {\r\n\t\trenderer = itemTypes.rows_container;\r\n\t} else if(config.cols) {\r\n\t\trenderer = itemTypes.row;\r\n\t}\r\n\treturn renderer;\r\n}\r\n\r\nfunction renderElement(config){\r\n\tvar renderer = findRenderer(config);\r\n\tif(!renderer){\r\n\t\treturn;\r\n\t}\r\n\tvar element = renderer(config);\r\n\tif(config.css){\r\n\t\telement.classList.add(config.css);\r\n\t}\r\n\tif(config.width){\r\n\t\tvar value = config.width;\r\n\t\tif(value === value * 1){\r\n\t\t\tvalue += \"px\";\r\n\t\t}\r\n\t\telement.style.width = value;\r\n\t}\r\n\tif(config.height){\r\n\t\tvar value = config.height;\r\n\t\tif(value === value * 1){\r\n\t\t\tvalue += \"px\";\r\n\t\t}\r\n\t\telement.style.height = value;\r\n\t}\r\n\tif (config.click) {\r\n\t\tscheduler.event(element, \"click\", config.click);\r\n\t}\r\n\tif (config.html) {\r\n\t\telement.innerHTML = config.html;\r\n\t}\r\n\r\n\tif (config.align) {\r\n\t\tvar value = \"\";\r\n\t\tif (config.align == \"right\") {\r\n\t\t\tvalue = \"flex-end\";\r\n\t\t} else if(config.align == \"left\") {\r\n\t\t\tvalue = \"flex-start\";\r\n\t\t}\r\n\t\telement.style.justifyContent = value;\r\n\t}\r\n\treturn element;\r\n}\r\n\r\nfunction prepareConfig(config) {\r\n\tif (typeof config === \"string\") {\r\n\t\tconfig = {\r\n\t\t\tview: config\r\n\t\t};\r\n\t}\r\n\tif (!config.view && !config.rows && !config.cols) {\r\n\t\tconfig.view = \"button\";\r\n\t}\r\n\treturn config;\r\n}\r\n\r\nfunction renderLayout(config) {\r\n\tvar fragment = document.createDocumentFragment();\r\n\tvar items;\r\n\tif(Array.isArray(config)){\r\n\t\titems = config;\r\n\t}else{\r\n\t\titems = [config];\r\n\t}\r\n\r\n\tfor (var i = 0; i < items.length; i++) {\r\n\t\tvar view = prepareConfig(items[i]);\r\n\r\n\t\tif(view.view === \"day\" && items[i + 1]){\r\n\t\t\tvar next = prepareConfig(items[i + 1]);\r\n\t\t\tif(next.view === \"week\" || next.view === \"month\"){\r\n\t\t\t\tview.$firstTab = true;\r\n\t\t\t\tview.$segmentedTab = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(view.view === \"week\" && items[i - 1]){\r\n\t\t\tvar next = prepareConfig(items[i + 1]);\r\n\t\t\tif(next.view === \"week\" || next.view === \"month\"){\r\n\t\t\t\tview.$segmentedTab = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(view.view === \"month\" && items[i - 1]){\r\n\t\t\tvar next = prepareConfig(items[i - 1]);\r\n\t\t\tif(next.view === \"week\" || next.view === \"day\"){\r\n\t\t\t\tview.$lastTab = true;\r\n\t\t\t\tview.$segmentedTab = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar element = renderElement(view);\r\n\r\n\t\tfragment.appendChild(element);\r\n\t\tif(view.cols || view.rows){\r\n\t\t\telement.appendChild(renderLayout(view.cols || view.rows));\r\n\t\t}\r\n\t}\r\n\treturn fragment;\r\n}\r\n\r\nscheduler._init_nav_bar = function (items) {\r\n\tvar navBar = this.$container.querySelector(\".dhx_cal_navline\");\r\n\tif (!navBar){\r\n\t\tnavBar = document.createElement(\"div\");\r\n\t\tnavBar.className = \"dhx_cal_navline dhx_cal_navline_flex\";\r\n\t\tscheduler._update_nav_bar(items, navBar);\r\n\t\treturn navBar;\r\n\t}\r\n\treturn navBar;\r\n};\r\n\r\nvar previousNavbar = null;\r\nvar previousHeight = null;\r\nscheduler._update_nav_bar = function (config, container) {\r\n\r\n\tif(!config){\r\n\t\treturn;\r\n\t}\r\n\tvar heightChanged = false;\r\n\tvar configChanged = false;\r\n\r\n\tvar newHeight = config.height || scheduler.xy.nav_height;\r\n\r\n\tif(previousHeight === null ||\r\n\t\t\t(previousHeight !== newHeight)){\r\n\t\theightChanged = true;\r\n\t}\r\n\tif(!previousNavbar || JSON.stringify(config) !== previousNavbar){\r\n\t\tconfigChanged = true;\r\n\t}\r\n\r\n\tif(heightChanged){\r\n\t\tscheduler.xy.nav_height = newHeight;\r\n\t}\r\n\tif(configChanged){\r\n\t\tcontainer.innerHTML = \"\";\r\n\t\tcontainer.appendChild(renderLayout(config));\r\n\t}\r\n\r\n\tif(heightChanged || configChanged){\r\n\t\tscheduler.unset_actions();\r\n\t\tscheduler._els = [];\r\n\t\tscheduler.get_elements();\r\n\t\tscheduler.set_actions();\r\n\t}\r\n\r\n\tif(newHeight === 0){\r\n\t\tcontainer.style.display = \"none\";\r\n\t}else{\r\n\t\tcontainer.style.display = \"\";\r\n\t}\r\n\r\n\tpreviousHeight = newHeight;\r\n};\r\n\r\n}","export default function extend(scheduler) {\r\n\r\n\tfunction isAttachedNode(container){\r\n\t\tvar root = document.body;\r\n\t\r\n\t\twhile(container && container != root){\r\n\t\t\tcontainer = container.parentNode;\r\n\t\t}\r\n\t\r\n\t\treturn !!(root == container);\r\n\t}\r\n\t\r\n\tfunction getWindowSize(window){\r\n\t\treturn {\r\n\t\t\tw : window.innerWidth || document.documentElement.clientWidth,\r\n\t\t\th : window.innerHeight || document.documentElement.clientHeight\r\n\t\t};\r\n\t}\r\n\tfunction equals(a,b){\r\n\t\treturn a.w == b.w && a.h == b.h;\r\n\t}\r\n\t\r\n\tfunction listenWindowResize(scheduler, window){\r\n\t\tvar oldSize = getWindowSize(window);\r\n\t\tvar resizeDelay;\r\n\t\tscheduler.event(window, \"resize\", function(){\r\n\t\t\tclearTimeout(resizeDelay);\r\n\t\t\tresizeDelay = setTimeout(function(){\r\n\r\n\t\t\t\tif (!isAttachedNode(scheduler.$container) || scheduler.$destroyed){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar newSize = getWindowSize(window);\r\n\t\t\t\t// element may be resized by container-autoresize exteinsion\r\n\t\t\t\t// check if the size is actually changed in order to not to get endless loop\r\n\t\t\t\tif (!equals(oldSize, newSize)) {\r\n\t\t\t\t\toldSize = newSize;\r\n\t\t\t\t\ttriggerSchedulerResize(scheduler);\r\n\t\t\t\t}\r\n\t\t\t}, 150);\r\n\t\t});\r\n\t}\r\n\t\r\n\tfunction triggerSchedulerResize(scheduler){\r\n\t\tif(scheduler.$destroyed || !scheduler.$root || !isAttachedNode(scheduler.$root)){\r\n\t\t\treturn;\t\r\n\t\t}\r\n\t\tif (scheduler.callEvent(\"onSchedulerResize\", [])) {\r\n\t\t\tscheduler.updateView();\r\n\t\t\tscheduler.callEvent(\"onAfterSchedulerResize\", []);\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction watchNodeResize(scheduler){\r\n\t\tvar previousHeight = scheduler.$root.offsetHeight;\r\n\t\tvar previousWidth = scheduler.$root.offsetWidth;\r\n\t\t\r\n\t\tfunction lowlevelResizeWatcher(){\r\n\t\t\tif(scheduler.$destroyed){\r\n\t\t\t\treturn;\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(scheduler.$root){\r\n\t\t\t\tif (scheduler.$root.offsetHeight != previousHeight ||\r\n\t\t\t\t\tscheduler.$root.offsetWidth != previousWidth){\r\n\t\t\t\t\ttriggerSchedulerResize(scheduler);\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tpreviousHeight = scheduler.$root.offsetHeight;\r\n\t\t\t\tpreviousWidth = scheduler.$root.offsetWidth;\r\n\t\t\t}\r\n\t\r\n\t\t\tsetTimeout(lowlevelResizeWatcher, 200);\r\n\t\t}\r\n\t\t\r\n\t\tlowlevelResizeWatcher();\r\n\t}\r\n\t\r\n\tfunction addResizeListener(scheduler){\r\n\t\tvar root = scheduler.$container;\r\n\t\tvar containerStyles = window.getComputedStyle(root);\r\n\t\tif(containerStyles.getPropertyValue(\"position\") == \"static\"){\r\n\t\t\troot.style.position = \"relative\";\r\n\t\t}\r\n\t\r\n\t\tvar resizeWatcher = document.createElement('iframe');\r\n\t\tresizeWatcher.className = \"scheduler_container_resize_watcher\";\r\n\t\tresizeWatcher.tabIndex = -1;\r\n\t\tif(scheduler.config.wai_aria_attributes){\r\n\t\t\tresizeWatcher.setAttribute(\"role\", \"none\");\r\n\t\t\tresizeWatcher.setAttribute(\"aria-hidden\", true);\r\n\t\t}\r\n\t\r\n\t\t// in some environments (namely, in SalesForce) iframe.contentWindow is not available\r\n\t\tvar salesforce_environment = !!window[\"Sfdc\"] || !!window[\"$A\"] || window[\"Aura\"];\r\n\t\tif(salesforce_environment){\r\n\t\t\twatchNodeResize(scheduler);\r\n\t\t} else {\r\n\t\t\troot.appendChild(resizeWatcher);\r\n\t\t\tif (resizeWatcher.contentWindow) {\r\n\t\t\t\tlistenWindowResize(scheduler, resizeWatcher.contentWindow);\r\n\t\t\t} else {\r\n\t\t\t\t// if so - ditch the iframe and fallback to listening the main window resize\r\n\t\t\t\troot.removeChild(resizeWatcher);\r\n\t\t\t\tlistenWindowResize(scheduler, window);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\taddResizeListener(scheduler);\r\n\r\n}","class EventHost {\r\n\tconstructor(){\r\n\t\tthis._silent_mode = false;\r\n\t\tthis.listeners = {};\r\n\t}\r\n\t_silentStart(){\r\n\t\tthis._silent_mode = true;\r\n\t}\r\n\t_silentEnd() {\r\n\t\tthis._silent_mode = false;\r\n\t}\r\n}\r\n\r\nconst createEventStorage = function(obj) {\r\n\tlet handlers = {};\r\n\tlet index = 0;\r\n\tconst eventStorage = function(){\r\n\t\tlet combinedResult = true;\r\n\t\tfor(const i in handlers){\r\n\t\t\tconst handlerResult = handlers[i].apply(obj, arguments);\r\n\t\t\tcombinedResult=combinedResult && handlerResult;\r\n\t\t}\r\n\t\treturn combinedResult;\r\n\t};\r\n\teventStorage.addEvent=function(handler, settings){\r\n\t\tif (typeof (handler) == \"function\"){\r\n\t\t\tlet handlerId;\r\n\t\t\tif(settings && settings.id){\r\n\t\t\t\thandlerId = settings.id;\r\n\t\t\t}else{\r\n\t\t\t\thandlerId = index;\r\n\t\t\t\tindex++;\r\n\t\t\t}\r\n\r\n\t\t\tif(settings && settings.once){\r\n\t\t\t\tconst originalHandler = handler;\r\n\t\t\t\thandler = function(){\r\n\t\t\t\t\toriginalHandler();\r\n\t\t\t\t\teventStorage.removeEvent(handlerId);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\thandlers[handlerId] = handler;\r\n\t\t\treturn handlerId;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\teventStorage.removeEvent=function(id){\r\n\t\tdelete handlers[id];\r\n\t};\r\n\r\n\teventStorage.clear = function(){\r\n\t\thandlers = {};\r\n\t};\r\n\r\n\treturn eventStorage;\r\n};\r\n\r\nfunction makeEventable(obj){\r\n\r\n\tconst eventHost = new EventHost();\r\n\tobj.attachEvent=function(eventName, handler, settings){\r\n\t\teventName = 'ev_'+eventName.toLowerCase();\r\n\t\tif (!eventHost.listeners[eventName]){\r\n\t\t\teventHost.listeners[eventName] = createEventStorage(this);\r\n\t\t}\r\n\r\n\t\tif(settings && settings.thisObject){\r\n\t\t\thandler = handler.bind(settings.thisObject);\r\n\t\t}\r\n\r\n\t\tconst innerId = eventHost.listeners[eventName].addEvent(handler, settings);\r\n\r\n\t\tlet handlerId = (eventName+':'+innerId); //return ID (ev_eventname:1)\r\n\t\tif(settings && settings.id){\r\n\t\t\thandlerId = settings.id;\r\n\t\t}\r\n\t\treturn handlerId;\r\n\t};\r\n\r\n\tobj.attachAll = function(callback){\r\n\t\tthis.attachEvent('listen_all', callback);\r\n\t};\r\n\r\n\tobj.callEvent=function(name, eventArguments){\r\n\t\tif (eventHost._silent_mode) return true;\r\n\r\n\t\tconst handlerName = 'ev_'+name.toLowerCase();\r\n\r\n\t\tconst listeners = eventHost.listeners;\r\n\t\tif (listeners['ev_listen_all']){\r\n\t\t\tlisteners['ev_listen_all'].apply(this, [name].concat(eventArguments));\r\n\t\t}\r\n\r\n\t\tif (listeners[handlerName])\r\n\t\t\treturn listeners[handlerName].apply(this, eventArguments);\r\n\t\treturn true;\r\n\t};\r\n\r\n\tobj.checkEvent=function(name){\r\n\t\tconst listeners = eventHost.listeners;\r\n\t\treturn (!!listeners['ev_'+name.toLowerCase()]);\r\n\t};\r\n\r\n\tobj.detachEvent=function(id){\r\n\t\tif (id){\r\n\t\t\tlet listeners = eventHost.listeners;\r\n\t\t\tfor(const i in listeners){\r\n\t\t\t\tlisteners[i].removeEvent(id); //remove event\r\n\t\t\t}\r\n\r\n\t\t\tconst list = id.split(':');//get EventName and ID\r\n\t\t\tlisteners = eventHost.listeners;\r\n\t\t\tif(list.length === 2){\r\n\t\t\t\tconst eventName = list[0];\r\n\t\t\t\tconst eventId = list[1];\r\n\t\t\t\tif(listeners[eventName]){\r\n\t\t\t\t\tlisteners[eventName].removeEvent(eventId); //remove event\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tobj.detachAllEvents = function(){\r\n\t\tfor (const name in eventHost.listeners) {\r\n\t\t\teventHost.listeners[name].clear();\r\n\t\t}\r\n\t};\r\n\r\n}\r\n\r\nexport default makeEventable;","export default {\r\n\tevent: function (el, event, handler){\r\n\t\tif (el.addEventListener)\r\n\t\t\tel.addEventListener(event, handler, false);\r\n\t\r\n\t\telse if (el.attachEvent)\r\n\t\t\tel.attachEvent(\"on\"+event, handler);\r\n\t},\r\n\teventRemove: function (el, event, handler){\r\n\t\tif (el.removeEventListener)\r\n\t\t\tel.removeEventListener(event, handler, false);\r\n\t\r\n\t\telse if (el.detachEvent)\r\n\t\t\tel.detachEvent(\"on\"+event, handler);\r\n\t}\r\n};","import createEventScope from './utils/scoped_event';\r\n\r\nexport default function extend(scheduler) {\r\n\r\n\r\nvar domEvents = createEventScope();\r\n\r\nscheduler.event = domEvents.attach;\r\nscheduler.eventRemove = domEvents.detach;\r\nscheduler._eventRemoveAll = domEvents.detachAll;\r\nscheduler._createDomEventScope = domEvents.extend;\r\n\r\n\r\nscheduler._trim = function(str){\r\n\tvar func = String.prototype.trim || function(){ return this.replace(/^\\s+|\\s+$/g, \"\"); };\r\n\treturn func.apply(str);\r\n};\r\n\r\nscheduler._isDate = function(obj){\r\n\tif (obj && typeof obj == \"object\") {\r\n\t\treturn !!(obj.getFullYear && obj.getMonth && obj.getDate);\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\nscheduler._isObject = function(obj){\r\n\treturn (obj && typeof obj == \"object\");\r\n};\r\n\r\n}","import defaultDomEvents from './event';\r\n\r\nexport default function(){\r\n\r\n\tvar domEvents = function (addEvent, removeEvent) {\r\n\t\taddEvent = addEvent || defaultDomEvents.event;\r\n\t\tremoveEvent = removeEvent || defaultDomEvents.eventRemove;\r\n\t\tvar handlers = [];\r\n\t\tvar eventScope = {\r\n\t\t\tattach: function(el, event, callback, capture){\r\n\t\t\t\thandlers.push({element: el, event:event, callback: callback, capture: capture});\r\n\t\t\t\taddEvent(el, event, callback, capture);\r\n\t\t\t},\r\n\t\t\tdetach: function(el, event, callback, capture){\r\n\t\t\t\tremoveEvent(el, event, callback, capture);\r\n\t\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\t\tvar handler = handlers[i];\r\n\t\t\t\t\tif (handler.element === el && handler.event === event && handler.callback === callback && handler.capture === capture) {\r\n\t\t\t\t\t\thandlers.splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdetachAll: function () {\r\n\t\t\t\tvar staticArray = handlers.slice();\r\n\t\t\t\t// original handlers array can be spliced on every iteration\r\n\t\t\t\tfor (var i = 0; i < staticArray.length; i++){\r\n\t\t\t\t\tvar handler = staticArray[i];\r\n\t\t\t\t\teventScope.detach(handler.element, handler.event, handler.callback, handler.capture);\r\n\t\t\t\t\teventScope.detach(handler.element, handler.event, handler.callback, undefined);\r\n\t\t\t\t\teventScope.detach(handler.element, handler.event, handler.callback, false);\r\n\t\t\t\t\teventScope.detach(handler.element, handler.event, handler.callback, true);\r\n\t\t\t\t}\r\n\t\t\t\thandlers.splice(0, handlers.length);\r\n\t\t\t},\r\n\t\t\textend: function(){\r\n\t\t\t\treturn domEvents(this.event, this.eventRemove);\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn eventScope;\r\n\t};\r\n\t\r\n\treturn domEvents();\r\n}","var uidSeed = Date.now();\r\nfunction uid () {\r\n\treturn uidSeed++;\r\n}\r\n\r\n// iframe-safe array type check instead of using instanceof\r\nfunction isArray(obj){\r\n\tif(Array.isArray){\r\n\t\treturn Array.isArray(obj);\r\n\t}else{\r\n\t\t// close enough\r\n\t\treturn (obj && obj.length !== undefined && obj.pop && obj.push);\r\n\t}\r\n}\r\n\r\n// non-primitive string object, e.g. new String(\"abc\")\r\nfunction isStringObject(obj){\r\n\treturn obj && typeof obj === \"object\" && \r\n\t\tFunction.prototype.toString.call(obj.constructor) === \"function String() { [native code] }\";\r\n}\r\n\r\n// non-primitive number object, e.g. new Number(5)\r\nfunction isNumberObject(obj){\r\n\treturn obj && typeof obj === \"object\" && \r\n\t\tFunction.prototype.toString.call(obj.constructor) === \"function Number() { [native code] }\";\r\n}\r\n\r\n// non-primitive number object, e.g. new Boolean(true)\r\nfunction isBooleanObject(obj){\r\n\treturn obj && typeof obj === \"object\" &&\r\n\t\tFunction.prototype.toString.call(obj.constructor) === \"function Boolean() { [native code] }\";\r\n}\r\n\r\nfunction isDate(obj) {\r\n\tif (obj && typeof obj === \"object\") {\r\n\t\treturn !!(obj.getFullYear && obj.getMonth && obj.getDate);\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nfunction defined(obj) {\r\n\treturn typeof(obj) != \"undefined\";\r\n}\r\n\r\nfunction delay (callback, timeout){\r\n\tvar timer;\r\n\r\n\tvar result = function() {\r\n\t\tresult.$cancelTimeout();\r\n\t\tresult.$pending = true;\r\n\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\ttimer = setTimeout(function(){\r\n\t\t\tcallback.apply(this, args);\r\n\t\t\tresult.$pending = false;\r\n\t\t}, timeout);\r\n\t};\r\n\r\n\tresult.$pending = false;\r\n\tresult.$cancelTimeout = function(){\r\n\t\tclearTimeout(timer);\r\n\t\tresult.$pending = false;\r\n\t};\r\n\tresult.$execute = function(){\r\n\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\tcallback.apply(this, args);\r\n\t\tresult.$cancelTimeout();\r\n\t};\r\n\r\n\treturn result;\r\n}\r\n\r\nexport default {\r\n\tuid: uid,\r\n\tmixin: function mixin (target, source, force){\r\n\t\tfor (var f in source)\r\n\t\t\tif (((target[f] === undefined) || force)) target[f]=source[f];\r\n\t\treturn target;\r\n\t},\r\n\tcopy: function copy(object) {\r\n\t\tvar i, result; // iterator, types array, result\r\n\t\r\n\t\tif (object && typeof object == \"object\") {\r\n\t\r\n\t\t\tswitch (true){\r\n\t\t\t\tcase (isDate(object)):\r\n\t\t\t\t\tresult = new Date(object);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase (isArray(object)):\r\n\t\t\t\t\tresult = new Array(object.length);\r\n\t\t\t\t\tfor(i = 0; i < object.length; i++){\r\n\t\t\t\t\t\tresult[i] = copy(object[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase (isStringObject(object)):\r\n\t\t\t\t\tresult = new String(object);// jshint ignore:line\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase (isNumberObject(object)):\r\n\t\t\t\t\tresult = new Number(object);// jshint ignore:line\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase (isBooleanObject(object)):\r\n\t\t\t\t\tresult = new Boolean(object);// jshint ignore:line\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tresult = {};\r\n\t\t\t\t\tfor (i in object) {\r\n\t\t\t\t\t\tconst varType = typeof object[i];\r\n\r\n\t\t\t\t\t\tif (varType === \"string\" || varType === \"number\" || varType === \"boolean\" ) {\r\n\t\t\t\t\t\t\tresult[i] = object[i];\r\n\t\t\t\t\t\t} else if(isDate(object[i])){\r\n\t\t\t\t\t\t\tresult[i] = new Date(object[i]);\r\n\t\t\t\t\t\t}else if (Object.prototype.hasOwnProperty.apply(object, [i]))\r\n\t\t\t\t\t\t\tresult[i] = copy(object[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result || object;\r\n\t},\r\n\tdefined,\r\n\tisDate,\r\n\tdelay\r\n};\r\n","//returns position of html element on the page\r\nfunction elementPosition(elem) {\r\n\tvar top=0, left=0, right=0, bottom=0;\r\n\tif (elem.getBoundingClientRect) { //HTML5 method\r\n\t\tvar box = elem.getBoundingClientRect();\r\n\t\tvar body = document.body;\r\n\t\tvar docElem = (document.documentElement ||\r\n\t\t\tdocument.body.parentNode ||\r\n\t\t\tdocument.body);\r\n\r\n\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\r\n\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\r\n\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\r\n\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\r\n\t\ttop  = box.top +  scrollTop - clientTop;\r\n\t\tleft = box.left + scrollLeft - clientLeft;\r\n\r\n\t\tright = document.body.offsetWidth - box.right;\r\n\t\tbottom = document.body.offsetHeight - box.bottom;\r\n\t} else { //fallback to naive approach\r\n\t\twhile(elem) {\r\n\t\t\ttop = top + parseInt(elem.offsetTop,10);\r\n\t\t\tleft = left + parseInt(elem.offsetLeft,10);\r\n\t\t\telem = elem.offsetParent;\r\n\t\t}\r\n\r\n\t\tright = document.body.offsetWidth - elem.offsetWidth - left;\r\n\t\tbottom = document.body.offsetHeight - elem.offsetHeight - top;\r\n\t}\r\n\treturn { y: Math.round(top), x: Math.round(left), width:elem.offsetWidth, height:elem.offsetHeight, right: Math.round(right), bottom: Math.round(bottom) };\r\n}\r\n\r\n/*\r\nevent position relatively to DOM element\r\n */\r\nfunction getRelativeEventPosition(ev, node){\r\n\tvar d = document.documentElement;\r\n\tvar box = elementPosition(node);\r\n\r\n\treturn {\r\n\t\tx: ev.clientX + d.scrollLeft - d.clientLeft - box.x + node.scrollLeft,\r\n\t\ty: ev.clientY + d.scrollTop - d.clientTop - box.y + node.scrollTop\r\n\t};\r\n}\r\n\r\nfunction getNodePosition(elem) {\r\n\tvar top=0, left=0, right=0, bottom=0;\r\n\tif (elem.getBoundingClientRect) { //HTML5 method\r\n\t\tvar box = elem.getBoundingClientRect();\r\n\t\tvar body = document.body;\r\n\t\tvar docElem = (document.documentElement ||\r\n\t\t\tdocument.body.parentNode ||\r\n\t\t\tdocument.body);\r\n\r\n\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\r\n\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\r\n\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\r\n\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\r\n\t\ttop  = box.top +  scrollTop - clientTop;\r\n\t\tleft = box.left + scrollLeft - clientLeft;\r\n\r\n\t\tright = document.body.offsetWidth - box.right;\r\n\t\tbottom = document.body.offsetHeight - box.bottom;\r\n\t} else { //fallback to naive approach\r\n\t\twhile(elem) {\r\n\t\t\ttop = top + parseInt(elem.offsetTop,10);\r\n\t\t\tleft = left + parseInt(elem.offsetLeft,10);\r\n\t\t\telem = elem.offsetParent;\r\n\t\t}\r\n\r\n\t\tright = document.body.offsetWidth - elem.offsetWidth - left;\r\n\t\tbottom = document.body.offsetHeight - elem.offsetHeight - top;\r\n\t}\r\n\treturn { y: Math.round(top), x: Math.round(left), width:elem.offsetWidth, height:elem.offsetHeight, right: Math.round(right), bottom: Math.round(bottom) };\r\n}\r\n\r\nfunction getClassName(node){\r\n\tif(!node) return \"\";\r\n\r\n\tvar className = node.className || \"\";\r\n\tif(className.baseVal)//'className' exist but not a string - IE svg element in DOM\r\n\t\tclassName = className.baseVal;\r\n\r\n\tif(!className.indexOf)\r\n\t\tclassName = '';\r\n\r\n\treturn className || \"\";\r\n}\r\n\r\nfunction getTargetNode(e) {\r\n\tvar trg;\r\n\tif (e.tagName)\r\n\t\ttrg = e;\r\n\telse {\r\n\t\te = e || window.event;\r\n\t\ttrg = e.target || e.srcElement;\r\n\t\tif (trg.shadowRoot && e.composedPath) {\r\n\t\t\ttrg = e.composedPath()[0];\r\n\t\t}\r\n\t}\r\n\treturn trg;\r\n}\r\n\r\nfunction locateCss(e, classname, strict){\r\n\tif(strict === undefined)\r\n\t\tstrict = true;\r\n\r\n\tvar trg = e.target || e.srcElement;\r\n\tvar css = '';\r\n\r\n\twhile (trg){\r\n\t\tcss = getClassName(trg);\r\n\r\n\t\tif(css){\r\n\t\t\tvar ind = css.indexOf(classname);\r\n\t\t\tif (ind >= 0){\r\n\t\t\t\tif (!strict)\r\n\t\t\t\t\treturn trg;\r\n\r\n\t\t\t\t//check that we have exact match\r\n\t\t\t\tvar left = (ind === 0) || (!((css.charAt(ind - 1)||\"\").trim()));\r\n\t\t\t\tvar right = ((ind + classname.length >= css.length)) || (!((css.charAt(ind + classname.length)).trim()));\r\n\r\n\t\t\t\tif (left && right)\r\n\t\t\t\t\treturn trg;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\n\r\n// get focusable nodes\r\nfunction isVisible(node){\r\n\tvar display = false,\r\n\t\tvisibility = false;\r\n\tif(window.getComputedStyle){\r\n\t\tvar style = window.getComputedStyle(node, null);\r\n\t\tdisplay = style[\"display\"];\r\n\t\tvisibility = style[\"visibility\"];\r\n\t}else if(node.currentStyle){\r\n\t\tdisplay = node.currentStyle[\"display\"];\r\n\t\tvisibility = node.currentStyle[\"visibility\"];\r\n\t}\r\n\r\n\tvar hiddenSection = false;\r\n\tvar recurringSection = locateCss({target:node}, \"dhx_form_repeat\", false);\r\n\tif(recurringSection){\r\n\t\thiddenSection = !!(recurringSection.style.height == \"0px\");\r\n\t}\r\n\thiddenSection = hiddenSection || !(node.offsetHeight);\r\n\r\n\treturn (display != \"none\" && visibility != \"hidden\" && !hiddenSection);\r\n}\r\n\r\nfunction hasNonNegativeTabIndex(node){\r\n\treturn !isNaN(node.getAttribute(\"tabindex\")) && (node.getAttribute(\"tabindex\")*1 >= 0);\r\n}\r\n\r\nfunction hasHref(node){\r\n\tvar canHaveHref = {\"a\": true, \"area\": true};\r\n\tif(canHaveHref[node.nodeName.loLowerCase()]){\r\n\t\treturn !!node.getAttribute(\"href\");\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nfunction isEnabled(node){\r\n\tvar canDisable = {\"input\":true, \"select\":true, \"textarea\":true, \"button\":true, \"object\":true};\r\n\tif(canDisable[node.nodeName.toLowerCase()]){\r\n\t\treturn !node.hasAttribute(\"disabled\");\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\n\r\nfunction getFocusableNodes(root){\r\n\tvar nodes = root.querySelectorAll([\r\n\t\t\"a[href]\",\r\n\t\t\"area[href]\",\r\n\t\t\"input\",\r\n\t\t\"select\",\r\n\t\t\"textarea\",\r\n\t\t\"button\",\r\n\t\t\"iframe\",\r\n\t\t\"object\",\r\n\t\t\"embed\",\r\n\t\t\"[tabindex]\",\r\n\t\t\"[contenteditable]\"\r\n\t].join(\", \"));\r\n\r\n\tvar nodesArray = Array.prototype.slice.call(nodes, 0);\r\n\t\r\n\tfor(var i = 0; i < nodesArray.length; i++){\r\n\t\tnodesArray[i].$position = i;\r\n\t\t// we remember original nodes order, \r\n\t\t// so when we sort them by tabindex we ensure order of nodes with same tabindex is preserved, \r\n\t\t// since some browsers do unstable sort\r\n\t}\r\n\t\r\n\tnodesArray.sort(function(a, b) {\r\n\t\tif(a.tabIndex === 0 && b.tabIndex !== 0){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tif(a.tabIndex !== 0 && b.tabIndex === 0){\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\t\r\n\t\tif (a.tabIndex === b.tabIndex){\r\n\t\t\t// ensure we do stable sort\r\n\t\t\treturn a.$position - b.$position;\r\n\t\t}\r\n\t\tif (a.tabIndex < b.tabIndex) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\treturn 1;\r\n\t});\r\n\t\r\n\tfor(var i = 0; i < nodesArray.length; i++){\r\n\t\tvar node = nodesArray[i];\r\n\t\tvar isValid = (hasNonNegativeTabIndex(node)  || isEnabled(node) || hasHref(node)) && isVisible(node);\r\n\t\tif(!isValid){\r\n\t\t\tnodesArray.splice(i, 1);\r\n\t\t\ti--;\r\n\t\t}\r\n\t}\r\n\treturn nodesArray;\r\n}\r\n\r\n\r\nfunction isShadowDomSupported() {\r\n\treturn document.head.createShadowRoot || document.head.attachShadow;\r\n}\r\n\r\n/**\r\n * Returns element that has the browser focus, or null if no element has focus.\r\n * Works with shadow DOM, so it's prefereed to use this function instead of document.activeElement directly.\r\n * @returns HTMLElement\r\n */\r\nfunction getActiveElement(){\r\n\tvar activeElement = document.activeElement;\r\n\tif (activeElement.shadowRoot) {\r\n\t\tactiveElement = activeElement.shadowRoot.activeElement;\r\n\t}\r\n\tif (activeElement === document.body && document.getSelection) {\r\n\t\tactiveElement = document.getSelection().focusNode || document.body;\r\n\t}\r\n\r\n\treturn activeElement;\r\n}\r\n\r\n/**\r\n * Returns document.body or the host node of the ShadowRoot, if the element is attached to ShadowDom\r\n * @param {HTMLElement} element \r\n * @returns HTMLElement\r\n */\r\nfunction getRootNode(element) {\r\n\tif (!element) {\r\n\t\treturn document.body;\r\n\t}\r\n\tif (!isShadowDomSupported()) {\r\n\t\treturn document.body;\r\n\t}\r\n\twhile (element.parentNode && (element = element.parentNode)) {\r\n\t\tif (element instanceof ShadowRoot) {\r\n\t\t\treturn element.host;\r\n\t\t}\r\n\t}\r\n\treturn document.body;\r\n}\r\n\r\nfunction hasShadowParent(element) {\r\n\treturn !!getRootNode(element);\r\n}\r\n\r\nexport default {\r\n\t/**\r\n\t *     @desc: Calculate absolute position of html object\r\n\t *     @type: private\r\n\t *     @param: htmlObject - html object\r\n\t *     @topic: 0\r\n\t */\r\n\tgetAbsoluteLeft: function getAbsoluteLeft(htmlObject){\r\n\t\treturn this.getOffset(htmlObject).left;\r\n\t},\r\n\t/**\r\n\t *     @desc: Calculate absolute position of html object\r\n\t *     @type: private\r\n\t *     @param: htmlObject - html object\r\n\t *     @topic: 0\r\n\t */\r\n\tgetAbsoluteTop: function getAbsoluteTop(htmlObject){\r\n\t\treturn this.getOffset(htmlObject).top;\r\n\t},\r\n\r\n\tgetOffsetSum: function getOffsetSum(elem) {\r\n\t\tvar top=0, left=0;\r\n\t\twhile(elem) {\r\n\t\t\ttop = top + parseInt(elem.offsetTop);\r\n\t\t\tleft = left + parseInt(elem.offsetLeft);\r\n\t\t\telem = elem.offsetParent;\r\n\t\t}\r\n\t\treturn {top: top, left: left};\r\n\t},\r\n\r\n\tgetOffsetRect: function getOffsetRect(elem) {\r\n\t\tvar box = elem.getBoundingClientRect();\r\n\r\n\t\tvar top = 0,\r\n\t\t\tleft = 0;\r\n\r\n\t\t// https://developer.mozilla.org/en-US/docs/Web/HTTP/Browser_detection_using_the_user_agent#Mobile_Tablet_or_Desktop\r\n\t\tif (!/Mobi/.test(navigator.userAgent)) {\r\n\t\t\tvar body = document.body;\r\n\t\t\tvar docElem = document.documentElement;\r\n\t\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\r\n\t\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\r\n\t\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\r\n\t\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\r\n\r\n\t\t\ttop  = box.top +  scrollTop - clientTop;\r\n\t\t\tleft = box.left + scrollLeft - clientLeft;\r\n\t\t}else {\r\n\t\t\t// incorrect left coordinate on mobile zoom\r\n\t\t\t// https://bugs.chromium.org/p/chromium/issues/detail?id=489206\r\n\r\n\t\t\tvar dummy = document.createElement(\"div\");\r\n\t\t\tdummy.style.position=\"absolute\";\r\n\t\t\tdummy.style.left=\"0px\";\r\n\t\t\tdummy.style.top=\"0px\";\r\n\t\t\tdummy.style.width=\"1px\";\r\n\t\t\tdummy.style.height = \"1px\";\r\n\r\n\t\t\tdocument.body.appendChild(dummy);\r\n\t\t\tvar dummyBox = dummy.getBoundingClientRect();\r\n\t\t\ttop  = box.top - dummyBox.top;\r\n\t\t\tleft = box.left - dummyBox.left;\r\n\r\n\t\t\tdummy.parentNode.removeChild(dummy);\r\n\t\t}\r\n\r\n\t\treturn { top: Math.round(top), left: Math.round(left) };\r\n\t},\r\n\r\n\tgetOffset: function getOffset(elem) {\r\n\t\tif (elem.getBoundingClientRect) {\r\n\t\t\treturn this.getOffsetRect(elem);\r\n\t\t} else {\r\n\t\t\treturn this.getOffsetSum(elem);\r\n\t\t}\r\n\t},\r\n\r\n\tclosest: function(element, selector){\r\n\t\tif(!element || !selector){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn closest(element, selector);\r\n\t},\r\n\tinsertAfter: function(newNode, referenceNode){\r\n\t\tif(referenceNode.nextSibling){\r\n\t\t\treferenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\r\n\t\t}else{\r\n\t\t\treferenceNode.parentNode.appendChild(newNode);\r\n\t\t}\r\n\t},\r\n\tremove: function(node) {\r\n\t\tif (node && node.parentNode) {\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t}\r\n\t},\r\n\tisChildOf: function(child, parent) {\r\n\t\treturn parent.contains(child);\r\n\t},\r\n\tgetFocusableNodes,\r\n\tgetClassName,\r\n\tlocateCss,\r\n\tgetRootNode,\r\n\thasShadowParent,\r\n\tisShadowDomSupported,\r\n\tgetActiveElement,\r\n\tgetRelativeEventPosition,\r\n\tgetTargetNode,\r\n\tgetNodePosition\r\n};\r\n\r\nvar closest;\r\nif(Element.prototype.closest){\r\n\tclosest = function(element, selector){\r\n\t\treturn element.closest(selector);\r\n\t};\r\n}else{\r\n\tvar matches = Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\r\n\tclosest = function(element, selector) {\r\n\t\tvar el = element;\r\n\t\tdo {\r\n\t\t\tif (matches.call(el, selector)){\r\n\t\t\t\treturn el;\r\n\t\t\t}\r\n\t\t\tel = el.parentElement || el.parentNode;\r\n\t\t} while (el !== null && el.nodeType === 1);\r\n\t\treturn null;\r\n\t};\r\n}\r\n","/* eslint-disable no-restricted-globals */\r\nvar isWindowAwailable = typeof window !== \"undefined\";\r\n\r\n/* eslint-enable no-restricted-globals */\r\n\r\nexport default {\r\n\tisIE: isWindowAwailable && (navigator.userAgent.indexOf(\"MSIE\") >= 0 || navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisOpera: isWindowAwailable && (navigator.userAgent.indexOf(\"Opera\") >= 0),\r\n\tisChrome: isWindowAwailable && (navigator.userAgent.indexOf(\"Chrome\") >= 0),\r\n\tisKHTML: isWindowAwailable && (navigator.userAgent.indexOf(\"Safari\") >= 0 || navigator.userAgent.indexOf(\"Konqueror\") >= 0),\r\n\tisFF: isWindowAwailable && (navigator.userAgent.indexOf(\"Firefox\") >= 0),\r\n\tisIPad: isWindowAwailable && (navigator.userAgent.search(/iPad/gi) >= 0),\r\n\tisEdge: isWindowAwailable && (navigator.userAgent.indexOf(\"Edge\")!=-1),\r\n\tisNode: (!isWindowAwailable || typeof navigator == \"undefined\")\r\n};","export default function(data) {\r\n\tif (typeof data === \"string\" || typeof data === \"number\") {\r\n\t\treturn data;\r\n\t}\r\n\tvar result = \"\";\r\n\tfor (var key in data) {\r\n\t\tvar serialized = \"\";\r\n\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\tif (typeof data[key] === \"string\") {\r\n\t\t\t\tserialized = encodeURIComponent(data[key]);\r\n\t\t\t} else if (typeof data[key] === \"number\") {\r\n\t\t\t\tserialized = data[key];\r\n\t\t\t} else {\r\n\t\t\t\tserialized = encodeURIComponent(JSON.stringify(data[key]));\r\n\t\t\t}\r\n\t\t\tserialized = key + \"=\" + serialized;\r\n\r\n\t\t\tif (result.length) {\r\n\t\t\t\tserialized = \"&\" + serialized;\r\n\t\t\t}\r\n\t\t\tresult += serialized;\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}","export default function extend(scheduler) {\r\n\r\nvar generateStringToDate = function (format, utc) {\r\n\tvar splt = \"var temp=date.match(/[a-zA-Z]+|[0-9]+/g);\";\r\n\tvar mask = format.match(/%[a-zA-Z]/g);\r\n\tfor (var i = 0; i < mask.length; i++) {\r\n\t\tswitch (mask[i]) {\r\n\t\t\tcase \"%j\":\r\n\t\t\tcase \"%d\": splt += \"set[2]=temp[\" + i + \"]||1;\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%n\":\r\n\t\t\tcase \"%m\": splt += \"set[1]=(temp[\" + i + \"]||1)-1;\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%y\": splt += \"set[0]=temp[\" + i + \"]*1+(temp[\" + i + \"]>50?1900:2000);\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%g\":\r\n\t\t\tcase \"%G\":\r\n\t\t\tcase \"%h\":\r\n\t\t\tcase \"%H\":\r\n\t\t\t\tsplt += \"set[3]=temp[\" + i + \"]||0;\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%i\":\r\n\t\t\t\tsplt += \"set[4]=temp[\" + i + \"]||0;\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%Y\": splt += \"set[0]=temp[\" + i + \"]||0;\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%a\":\r\n\t\t\tcase \"%A\": splt += \"set[3]=set[3]%12+((temp[\" + i + \"]||'').toLowerCase()=='am'?0:12);\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%s\": splt += \"set[5]=temp[\" + i + \"]||0;\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%M\": splt += \"set[1]=this.locale.date.month_short_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%F\": splt += \"set[1]=this.locale.date.month_full_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tvar code = \"set[0],set[1],set[2],set[3],set[4],set[5]\";\r\n\tif (utc) code = \" Date.UTC(\" + code + \")\";\r\n\treturn new Function(\"date\", \"var set=[0,0,1,0,0,0]; \" + splt + \" return new Date(\" + code + \");\");\r\n};\r\nvar csp_date_to_str = function (format, utc) {\r\n\treturn function(date) {\r\n\t\treturn format.replace(/%[a-zA-Z]/g, function (a) {\r\n\t\t\tswitch (a) {\r\n\t\t\t\tcase \"%d\": return utc ? scheduler.date.to_fixed(date.getUTCDate()) : scheduler.date.to_fixed(date.getDate());\r\n\t\t\t\tcase \"%m\": return utc ? scheduler.date.to_fixed((date.getUTCMonth() + 1)) : scheduler.date.to_fixed((date.getMonth() + 1));\r\n\t\t\t\tcase \"%j\": return utc ? date.getUTCDate() : date.getDate();\r\n\t\t\t\tcase \"%n\": return utc ? (date.getUTCMonth() + 1) : (date.getMonth() + 1);\r\n\t\t\t\tcase \"%y\": return utc ? scheduler.date.to_fixed(date.getUTCFullYear() % 100) : scheduler.date.to_fixed(date.getFullYear() % 100);\r\n\t\t\t\tcase \"%Y\": return utc ? date.getUTCFullYear() : date.getFullYear();\r\n\t\t\t\tcase \"%D\": return utc ? scheduler.locale.date.day_short[date.getUTCDay()] : scheduler.locale.date.day_short[date.getDay()];\r\n\t\t\t\tcase \"%l\": return utc ? scheduler.locale.date.day_full[date.getUTCDay()] : scheduler.locale.date.day_full[date.getDay()];\r\n\t\t\t\tcase \"%M\": return utc ? scheduler.locale.date.month_short[date.getUTCMonth()] : scheduler.locale.date.month_short[date.getMonth()];\r\n\t\t\t\tcase \"%F\": return utc ? scheduler.locale.date.month_full[date.getUTCMonth()] : scheduler.locale.date.month_full[date.getMonth()];\r\n\t\t\t\tcase \"%h\": return utc ? scheduler.date.to_fixed((date.getUTCHours() + 11) % 12 + 1) : scheduler.date.to_fixed((date.getHours() + 11) % 12 + 1);\r\n\t\t\t\tcase \"%g\": return utc ? ((date.getUTCHours() + 11) % 12 + 1) : ((date.getHours() + 11) % 12 + 1);\r\n\t\t\t\tcase \"%G\": return utc ? date.getUTCHours() : date.getHours();\r\n\t\t\t\tcase \"%H\": return utc ? scheduler.date.to_fixed(date.getUTCHours()) : scheduler.date.to_fixed(date.getHours());\r\n\t\t\t\tcase \"%i\": return utc ? scheduler.date.to_fixed(date.getUTCMinutes()) : scheduler.date.to_fixed(date.getMinutes());\r\n\t\t\t\tcase \"%a\": return utc ? (date.getUTCHours() > 11 ? \"pm\" : \"am\") : (date.getHours() > 11 ? \"pm\" : \"am\");\r\n\t\t\t\tcase \"%A\": return utc ? (date.getUTCHours() > 11 ? \"PM\" : \"AM\") : (date.getHours() > 11 ? \"PM\" : \"AM\");\r\n\t\t\t\tcase \"%s\": return utc ? scheduler.date.to_fixed(date.getUTCSeconds()) : scheduler.date.to_fixed(date.getSeconds());\r\n\t\t\t\tcase \"%W\": return utc ? scheduler.date.to_fixed(scheduler.date.getUTCISOWeek(date)) : scheduler.date.to_fixed(scheduler.date.getISOWeek(date));\r\n\t\t\t\tdefault: return a;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n};\r\nvar csp_str_to_date = function (format, utc) {\r\n\tconst mask = format.match(/%[a-zA-Z]/g);\r\n\treturn function (date){\r\n\t\tvar set = [0, 0, 1, 0, 0, 0];\r\n\t\tvar temp = date.match(/[a-zA-Z]+|[0-9]+/g);\r\n\r\n\t\tfor (var i = 0; i < mask.length; i++) {\r\n\t\t\tswitch (mask[i]) {\r\n\t\t\t\tcase \"%j\":\r\n\t\t\t\tcase \"%d\":\r\n\t\t\t\t\tset[2] = temp[i] || 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%n\":\r\n\t\t\t\tcase \"%m\":\r\n\t\t\t\t\tset[1] = (temp[i] || 1) - 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%y\":\r\n\t\t\t\t\tset[0] = temp[i] * 1 + (temp[i] > 50 ? 1900 : 2000);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%g\":\r\n\t\t\t\tcase \"%G\":\r\n\t\t\t\tcase \"%h\":\r\n\t\t\t\tcase \"%H\":\r\n\t\t\t\t\tset[3] = temp[i] || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%i\":\r\n\t\t\t\t\tset[4] = temp[i] || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\tset[0] = temp[i] || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%a\":\r\n\t\t\t\tcase \"%A\":\r\n\t\t\t\t\tset[3] = set[3] % 12 + ((temp[i] || '').toLowerCase() == 'am' ? 0 : 12);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%s\":\r\n\t\t\t\t\tset[5] = temp[i] || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%M\":\r\n\t\t\t\t\tset[1] = scheduler.locale.date.month_short_hash[temp[i]] || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%F\":\r\n\t\t\t\t\tset[1] = scheduler.locale.date.month_full_hash[temp[i]] || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (utc) {\r\n\t\t\treturn new Date(Date.UTC(set[0], set[1], set[2], set[3], set[4], set[5]));\r\n\t\t}\r\n\r\n\t\treturn new Date(set[0], set[1], set[2], set[3], set[4], set[5]);\r\n\t};\r\n};\r\n\r\nlet cspEnabled = undefined;\r\nfunction checkIfCSPEnabled(){\r\n\ttry {\r\n\t\tnew Function(\"cspEnabled = false;\");\r\n\t\tcspEnabled = false;\r\n\t} catch(e) {\r\n\t\tcspEnabled = true;\r\n\t}\r\n\treturn cspEnabled;\r\n}\r\n\r\nfunction useCsp() {\r\n\tvar result = false;\r\n\tif (scheduler.config.csp === \"auto\") {\r\n\t\tif(cspEnabled === undefined){\r\n\t\t\tcspEnabled = checkIfCSPEnabled();\r\n\t\t}\r\n\t\tresult = cspEnabled;\r\n\t} else {\r\n\t\tresult = scheduler.config.csp;\r\n\t}\r\n\treturn result;\r\n}\r\nscheduler.date = {\r\n\tinit:function(){\r\n\t\tvar s = scheduler.locale.date.month_short;\r\n\t\tvar t = scheduler.locale.date.month_short_hash = {};\r\n\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\tt[s[i]]=i;\r\n\r\n\t\tvar s = scheduler.locale.date.month_full;\r\n\t\tvar t = scheduler.locale.date.month_full_hash = {};\r\n\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\tt[s[i]]=i;\r\n\t},\r\n\tdate_part:function(date){\r\n\t\tvar old = new Date(date);\r\n\t\tdate.setHours(0);\r\n\t\tdate.setMinutes(0);\r\n\t\tdate.setSeconds(0);\r\n\t\tdate.setMilliseconds(0);\r\n\t\tif (date.getHours() && //shift to yesterday on dst\r\n\t\t\t(date.getDate() < old.getDate() || date.getMonth() < old.getMonth() || date.getFullYear() < old.getFullYear()) )\r\n\t\t\tdate.setTime(date.getTime() + 60 * 60 * 1000 * (24 - date.getHours()));\r\n\t\treturn date;\r\n\t},\r\n\ttime_part:function(date){\r\n\t\treturn (date.valueOf()/1000 - date.getTimezoneOffset()*60)%86400;\r\n\t},\r\n\tweek_start:function(date){\r\n\t\tvar shift=date.getDay();\r\n\t\tif (scheduler.config.start_on_monday){\r\n\t\t\tif (shift===0) shift=6;\r\n\t\t\telse shift--;\r\n\t\t}\r\n\t\treturn this.date_part(this.add(date,-1*shift,\"day\"));\r\n\t},\r\n\tmonth_start:function(date){\r\n\t\tdate.setDate(1);\r\n\t\treturn this.date_part(date);\r\n\t},\r\n\tyear_start:function(date){\r\n\t\tdate.setMonth(0);\r\n\t\treturn this.month_start(date);\r\n\t},\r\n\tday_start:function(date){\r\n\t\treturn this.date_part(date);\r\n\t},\r\n\t_add_days:function(date, inc){\r\n\t\tvar ndate = new Date(date.valueOf());\r\n\r\n\t\tndate.setDate(ndate.getDate() + inc);\r\n\r\n\t\t// Workaround for Safari/iOS timezone bug, ref:OKZ-149693\r\n\t\tif(inc == Math.round(inc) && inc > 0){\r\n\t\t\tvar datesDiff = +ndate - +date,\r\n\t\t\t\trest = datesDiff % (24*60*60*1000);\r\n\t\t\tif(rest && date.getTimezoneOffset() == ndate.getTimezoneOffset()){\r\n\t\t\t\tvar hours = rest / (60* 60 * 1000);\r\n\t\t\t\tndate.setTime(ndate.getTime() + (24 - hours) * 60 * 60 * 1000);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (inc >= 0 && (!date.getHours() && ndate.getHours()) &&//shift to yesterday on dst\r\n\t\t\t(ndate.getDate() < date.getDate() || ndate.getMonth() < date.getMonth() || ndate.getFullYear() < date.getFullYear()) )\r\n\t\t\tndate.setTime(ndate.getTime() + 60 * 60 * 1000 * (24 - ndate.getHours()));\r\n\t\treturn ndate;\r\n\t},\r\n\tadd:function(date,inc,mode){\r\n\t\tvar ndate=new Date(date.valueOf());\r\n\t\tswitch(mode){\r\n\t\t\tcase \"day\":\r\n\t\t\t\tndate = scheduler.date._add_days(ndate, inc);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"week\":\r\n\t\t\t\tndate = scheduler.date._add_days(ndate, inc * 7);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"month\": ndate.setMonth(ndate.getMonth()+inc); break;\r\n\t\t\tcase \"year\": ndate.setYear(ndate.getFullYear()+inc); break;\r\n\t\t\tcase \"hour\":\r\n\t\t\t\t/*\r\n\t\t\t\t setHour(getHour() + inc) and setMinutes gives weird result when is applied on a Daylight Saving time switch\r\n\t\t\t\t setTime seems working as expected\r\n\t\t\t\t*/\r\n\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 60 * 1000);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"minute\":\r\n\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 1000);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\treturn scheduler.date[\"add_\"+mode](date,inc,mode);\r\n\t\t}\r\n\t\treturn ndate;\r\n\t},\r\n\tto_fixed:function(num){\r\n\t\tif (num<10)\treturn \"0\"+num;\r\n\t\treturn num;\r\n\t},\r\n\tcopy:function(date){\r\n\t\treturn new Date(date.valueOf());\r\n\t},\r\n\tdate_to_str:function(format,utc){\r\n\t\tif (useCsp()) {\r\n\t\t\treturn csp_date_to_str(format,utc);\r\n\t\t}\r\n\r\n\t\tformat=format.replace(/%[a-zA-Z]/g,function(a){\r\n\t\t\tswitch(a){\r\n\t\t\t\tcase \"%d\": return \"\\\"+this.date.to_fixed(date.getDate())+\\\"\";\r\n\t\t\t\tcase \"%m\": return \"\\\"+this.date.to_fixed((date.getMonth()+1))+\\\"\";\r\n\t\t\t\tcase \"%j\": return \"\\\"+date.getDate()+\\\"\";\r\n\t\t\t\tcase \"%n\": return \"\\\"+(date.getMonth()+1)+\\\"\";\r\n\t\t\t\tcase \"%y\": return \"\\\"+this.date.to_fixed(date.getFullYear()%100)+\\\"\";\r\n\t\t\t\tcase \"%Y\": return \"\\\"+date.getFullYear()+\\\"\";\r\n\t\t\t\tcase \"%D\": return \"\\\"+this.locale.date.day_short[date.getDay()]+\\\"\";\r\n\t\t\t\tcase \"%l\": return \"\\\"+this.locale.date.day_full[date.getDay()]+\\\"\";\r\n\t\t\t\tcase \"%M\": return \"\\\"+this.locale.date.month_short[date.getMonth()]+\\\"\";\r\n\t\t\t\tcase \"%F\": return \"\\\"+this.locale.date.month_full[date.getMonth()]+\\\"\";\r\n\t\t\t\tcase \"%h\": return \"\\\"+this.date.to_fixed((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\tcase \"%g\": return \"\\\"+((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\tcase \"%G\": return \"\\\"+date.getHours()+\\\"\";\r\n\t\t\t\tcase \"%H\": return \"\\\"+this.date.to_fixed(date.getHours())+\\\"\";\r\n\t\t\t\tcase \"%i\": return \"\\\"+this.date.to_fixed(date.getMinutes())+\\\"\";\r\n\t\t\t\tcase \"%a\": return \"\\\"+(date.getHours()>11?\\\"pm\\\":\\\"am\\\")+\\\"\";\r\n\t\t\t\tcase \"%A\": return \"\\\"+(date.getHours()>11?\\\"PM\\\":\\\"AM\\\")+\\\"\";\r\n\t\t\t\tcase \"%s\": return \"\\\"+this.date.to_fixed(date.getSeconds())+\\\"\";\r\n\t\t\t\tcase \"%W\": return \"\\\"+this.date.to_fixed(this.date.getISOWeek(date))+\\\"\";\r\n\t\t\t\tdefault: return a;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (utc) format=format.replace(/date\\.get/g,\"date.getUTC\");\r\n\t\tvar func = new Function(\"date\",\"return \\\"\"+format+\"\\\";\");\r\n\r\n\t\treturn func.bind(scheduler);\r\n\t},\r\n\tstr_to_date:function(format, utc, exactFormat){\r\n\t\tvar stringToDateMethod = useCsp() ? csp_str_to_date : generateStringToDate;\r\n\t\tvar parseExactFormat = stringToDateMethod(format, utc);\r\n\t\t// eslint-disable-next-line\r\n\t\tvar yyyyMMddhhIIss = /^[0-9]{4}(\\-|\\/)[0-9]{2}(\\-|\\/)[0-9]{2} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/;\r\n\r\n\t\t// MM/dd/yyyy - default old format for xml-date\r\n\t\t// eslint-disable-next-line\r\n\t\tvar MMddyyyyhhIIss = /^[0-9]{2}\\/[0-9]{2}\\/[0-9]{4} ?(([0-9]{1,2}:[0-9]{2})(:[0-9]{1,2})?)?$/;\r\n\t\t// dd-MM-yyyy - default old format for api-date\r\n\t\t// eslint-disable-next-line\r\n\t\tvar ddMMyyyyhhIIss = /^[0-9]{2}\\-[0-9]{2}\\-[0-9]{4} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/;\r\n\t\t// eslint-disable-next-line\r\n\t\tvar ISO8601 = /^([\\+-]?\\d{4}(?!\\d{2}\\b))((-?)((0[1-9]|1[0-2])(\\3([12]\\d|0[1-9]|3[01]))?|W([0-4]\\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\\d|[12]\\d{2}|3([0-5]\\d|6[1-6])))([T\\s]((([01]\\d|2[0-3])((:?)[0-5]\\d)?|24\\:?00)([\\.,]\\d+(?!:))?)?(\\17[0-5]\\d([\\.,]\\d+)?)?([zZ]|([\\+-])([01]\\d|2[0-3]):?([0-5]\\d)?)?)?)?$/;\r\n\r\n\t\tvar isYMDDate = function (datestr) {\r\n\t\t\treturn yyyyMMddhhIIss.test(String(datestr));\r\n\t\t};\r\n\r\n\t\tvar isMDYDate = function (datestr) {\r\n\t\t\treturn MMddyyyyhhIIss.test(String(datestr));\r\n\t\t};\r\n\t\tvar isDMYDate = function (datestr) {\r\n\t\t\treturn ddMMyyyyhhIIss.test(String(datestr));\r\n\t\t};\r\n\t\tvar isISO8601 = function (datestr) {\r\n\t\t\treturn ISO8601.test(datestr);\r\n\t\t};\r\n\r\n\t\tvar parseYMD = stringToDateMethod(\"%Y-%m-%d %H:%i:%s\", utc);\r\n\t\tvar parseMDY = stringToDateMethod(\"%m/%d/%Y %H:%i:%s\", utc);\r\n\t\tvar parseDMY = stringToDateMethod(\"%d-%m-%Y %H:%i:%s\", utc);\r\n\r\n\t\treturn function (dateString) {\r\n\r\n\t\t\tif (!exactFormat && !scheduler.config.parse_exact_format) {\r\n\t\t\t\tif (dateString && dateString.getISOWeek) {\r\n\t\t\t\t\treturn new Date(dateString);\r\n\t\t\t\t} else if (typeof dateString === \"number\") {\r\n\t\t\t\t\treturn new Date(dateString);\r\n\t\t\t\t} else if (isYMDDate(dateString)) {\r\n\t\t\t\t\treturn parseYMD(dateString);\r\n\t\t\t\t} else if (isMDYDate(dateString)) {\r\n\t\t\t\t\treturn parseMDY(dateString);\r\n\t\t\t\t} else if (isDMYDate(dateString)) {\r\n\t\t\t\t\treturn parseDMY(dateString);\r\n\t\t\t\t} else if (isISO8601(dateString)) {\r\n\t\t\t\t\treturn new Date(dateString);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn parseExactFormat.call(scheduler, dateString);\r\n\t\t};\r\n\t},\r\n\tgetISOWeek: function(ndate) {\r\n\t\tif(!ndate) return false;\r\n\t\tndate = this.date_part(new Date(ndate));\r\n\t\tvar nday = ndate.getDay();\r\n\t\tif (nday === 0) {\r\n\t\t\tnday = 7;\r\n\t\t}\r\n\t\tvar first_thursday = new Date(ndate.valueOf());\r\n\t\tfirst_thursday.setDate(ndate.getDate() + (4 - nday));\r\n\t\tvar year_number = first_thursday.getFullYear(); // year of the first Thursday\r\n\t\tvar ordinal_date = Math.round( (first_thursday.getTime() - new Date(year_number, 0, 1).getTime()) / 86400000); //ordinal date of the first Thursday - 1 (so not really ordinal date)\r\n\t\tvar week_number = 1 + Math.floor( ordinal_date / 7);\r\n\t\treturn week_number;\r\n\t},\r\n\tgetUTCISOWeek: function(ndate){\r\n\t\treturn this.getISOWeek(this.convert_to_utc(ndate));\r\n\t},\r\n\tconvert_to_utc: function(date) {\r\n\t\treturn new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\r\n\t}\r\n};\r\n\r\n}\r\n\r\n","export default function(scheduler){\r\n\treturn (function(){\r\n\t\tvar res = {};\r\n\t\tfor (var a in this._events){\r\n\t\t\tvar ev = this._events[a];\r\n\t\t\tif (ev.id.toString().indexOf(\"#\") == -1){\r\n\t\t\t\tres[ev.id] = ev;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t}).bind(scheduler);\r\n}","import xmlLoaded from \"./loaders/xml\";\r\nimport jsonLoader from \"./loaders/json\";\r\nimport iCalLoader from \"./loaders/ical\";\r\nimport createSerializator from \"../core/common/get_serializable_events\";\r\n\r\nexport default function extend(scheduler) {\r\n\r\nscheduler._loaded = {};\r\nscheduler._load = function(url, from) {\r\n\turl = url || this._load_url;\r\n\r\n\tif(!url){\r\n\t\t//if scheduler.setLoadMode is called before scheduler.init, initial rendering will invoke data loading while url is undefined\r\n\t\treturn;\r\n\t}\r\n\r\n\turl += (url.indexOf(\"?\") == -1 ? \"?\" : \"&\") + \"timeshift=\" + (new Date()).getTimezoneOffset();\r\n\tif (this.config.prevent_cache)    url += \"&uid=\" + this.uid();\r\n\tvar to;\r\n\tfrom = from || this._date;\r\n\tfunction ajaxCallback(response) {\r\n\t\tscheduler.on_load(response);\r\n\t\tscheduler.callEvent(\"onLoadEnd\", []);\r\n\t}\r\n\tif (this._load_mode) {\r\n\t\tvar lf = this.templates.load_format;\r\n\r\n\t\tfrom = this.date[this._load_mode + \"_start\"](new Date(from.valueOf()));\r\n\t\twhile (from > this._min_date) from = this.date.add(from, -1, this._load_mode);\r\n\t\tto = from;\r\n\r\n\t\tvar cache_line = true;\r\n\t\twhile (to < this._max_date) {\r\n\t\t\tto = this.date.add(to, 1, this._load_mode);\r\n\t\t\tif (this._loaded[lf(from)] && cache_line)\r\n\t\t\t\tfrom = this.date.add(from, 1, this._load_mode); else cache_line = false;\r\n\t\t}\r\n\r\n\t\tvar temp_to = to;\r\n\t\tdo {\r\n\t\t\tto = temp_to;\r\n\t\t\ttemp_to = this.date.add(to, -1, this._load_mode);\r\n\t\t} while (temp_to > from && this._loaded[lf(temp_to)]);\r\n\r\n\t\tif (to <= from)\r\n\t\t\treturn false; //already loaded\r\n\r\n\t\tscheduler.ajax.get(url + \"&from=\" + lf(from) + \"&to=\" + lf(to), ajaxCallback);\r\n\r\n\t\twhile (from < to) {\r\n\t\t\tthis._loaded[lf(from)] = true;\r\n\t\t\tfrom = this.date.add(from, 1, this._load_mode);\r\n\t\t}\r\n\t} else {\r\n\t\tscheduler.ajax.get(url, ajaxCallback);\r\n\t}\r\n\r\n\t// TODO: remove onXLS\r\n\tthis.callEvent(\"onXLS\", []);\r\n\tthis.callEvent(\"onLoadStart\", []);\r\n\treturn true;\r\n};\r\n\r\nscheduler._parsers = {};\r\n\r\n\r\nxmlLoaded(scheduler);\r\njsonLoader(scheduler);\r\niCalLoader(scheduler);\r\n\r\nscheduler.on_load = function (loader) {\r\n\tthis.callEvent(\"onBeforeParse\", []);\r\n\r\n\tvar evs;\r\n\tvar error = false;\r\n\r\n\tvar foundParser = false;\r\n\tfor(var i in this._parsers){\r\n\t\tvar parser = this._parsers[i];\r\n\t\tif(parser.canParse(loader.xmlDoc.responseText, loader.xmlDoc)){\r\n\t\t\ttry{\r\n\t\t\t\tvar param = loader.xmlDoc.responseText;\r\n\t\t\t\tif(i === \"xml\"){\r\n\t\t\t\t\tparam = loader;\r\n\t\t\t\t}\r\n\t\t\t\tevs = parser.parse(param);\r\n\t\t\t\tif(!evs){\r\n\t\t\t\t\terror = true;\r\n\t\t\t\t}\r\n\t\t\t}catch(e){\r\n\t\t\t\terror = true;\r\n\t\t\t}\r\n\t\t\tfoundParser = true;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tif(!foundParser){\r\n\t\tif(this._process && this[this._process]){\r\n\t\t\ttry{\r\n\t\t\t\tevs = this[this._process].parse(loader.xmlDoc.responseText);\r\n\t\t\t}catch (e){\r\n\t\t\t\terror = true;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\terror = true;\r\n\t\t}\r\n\t}\r\n\r\n\tif(error || (loader.xmlDoc.status && loader.xmlDoc.status >= 400)){\r\n\t\tthis.callEvent(\"onLoadError\", [loader.xmlDoc]);\r\n\t\tevs = [];\r\n\t}\r\n\r\n\tthis._process_loading(evs);\r\n\r\n\t// TODO: remove onXLE\r\n\tthis.callEvent(\"onXLE\", []);\r\n\tthis.callEvent(\"onParse\", []);\r\n};\r\nscheduler._process_loading = function(evs) {\r\n\tthis._loading = true;\r\n\tthis._not_render = true;\r\n\tfor (var i = 0; i < evs.length; i++) {\r\n\t\tif (!this.callEvent(\"onEventLoading\", [evs[i]])) continue;\r\n\t\tthis.addEvent(evs[i]);\r\n\t}\r\n\tthis._not_render = false;\r\n\tif (this._render_wait) this.render_view_data();\r\n\r\n\tthis._loading = false;\r\n\tif (this._after_call) this._after_call();\r\n\tthis._after_call = null;\r\n};\r\nscheduler._init_event = function(event) {\r\n\tevent.text = (event.text || event._tagvalue) || \"\";\r\n\tevent.start_date = scheduler._init_date(event.start_date);\r\n\tevent.end_date = scheduler._init_date(event.end_date);\r\n};\r\n\r\nscheduler._init_date = function(date){\r\n\tif(!date)\r\n\t\treturn null;\r\n\tif (typeof date == \"string\") {\r\n\t\treturn scheduler._helpers.parseDate(date);\r\n\t}\r\n\telse return new Date(date);\r\n};\r\n\r\nconst getSerializableData = createSerializator(scheduler);\r\nscheduler.serialize = function(){\r\n\tconst dataset = [];\r\n\tconst allEvents = getSerializableData();\r\n\tfor (var a in allEvents){\r\n\t\t\r\n\t\tconst exportedEvent = {};\r\n\t\tvar ev = allEvents[a];\r\n\r\n\t\tfor(var key in ev){\r\n\t\t\tif (key.charAt(0) == \"$\" || key.charAt(0) == \"_\"){\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tlet exportValue;\r\n\t\t\tconst rawValue = ev[key];\r\n\t\t\tif(scheduler.utils.isDate(rawValue)){\r\n\t\t\t\texportValue = scheduler.defined(scheduler.templates.xml_format) ? scheduler.templates.xml_format(rawValue) : scheduler.templates.format_date(rawValue);\r\n\t\t\t}else{\r\n\t\t\t\texportValue = rawValue;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\texportedEvent[key] = exportValue;\r\n\t\t}\r\n\r\n\t\tdataset.push(exportedEvent);\r\n\t}\r\n\treturn dataset;\r\n};\r\n\r\n/*\r\nscheduler.json = {};\r\nscheduler.json.parse = function(data) {\r\n\r\n\tvar events = [];\r\n\r\n\tif (typeof data == \"string\") {\r\n\t\tdata = JSON.parse(data);\r\n\t}\r\n\tif (Object.prototype.toString.call(data) === '[object Array]') {\r\n\t\tevents = data;\r\n\t} else {\r\n\t\tif(data){\r\n\t\t\tif(data.events){\r\n\t\t\t\tevents = data.events;\r\n\t\t\t}else if(data.data){\r\n\t\t\t\tevents = data.data;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tevents = events || [];\r\n\r\n\tif (data.dhx_security) {\r\n\t\tif (window.dhtmlx) {\r\n\t\t\twindow.dhtmlx.security_key = data.dhx_security;\r\n\t\t}\r\n\t\tscheduler.security_key = data.dhx_security;\r\n\t}\r\n\r\n\tvar collections = (data && data.collections) ? data.collections : {};\r\n\tvar collections_loaded = false;\r\n\tfor (var key in collections) {\r\n\t\tif (collections.hasOwnProperty(key)) {\r\n\t\t\tcollections_loaded = true;\r\n\t\t\tvar collection = collections[key];\r\n\t\t\tvar arr = scheduler.serverList[key];\r\n\t\t\tif (!arr) {\r\n\t\t\t\tscheduler.serverList[key] = arr = [];\r\n\t\t\t}\r\n\t\t\tarr.splice(0, arr.length); //clear old options\r\n\t\t\tfor (var j = 0; j < collection.length; j++) {\r\n\t\t\t\tvar option = collection[j];\r\n\t\t\t\tvar obj = { key: option.value, label: option.label }; // resulting option object\r\n\t\t\t\tfor (var option_key in option) {\r\n\t\t\t\t\tif (option.hasOwnProperty(option_key)) {\r\n\t\t\t\t\t\tif (option_key == \"value\" || option_key == \"label\")\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\tobj[option_key] = option[option_key]; // obj['value'] = option['value']\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tarr.push(obj);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (collections_loaded)\r\n\t\tscheduler.callEvent(\"onOptionsLoad\", []);\r\n\r\n\tvar evs = [];\r\n\tfor (var i = 0; i < events.length; i++) {\r\n\t\tvar event = events[i];\r\n\t\tscheduler._init_event(event);\r\n\t\tevs.push(event);\r\n\t}\r\n\treturn evs;\r\n};*/\r\nscheduler.parse = function(data, type) {\r\n\tthis._process = type;\r\n\tthis.on_load({xmlDoc: {responseText: data}});\r\n};\r\nscheduler.load = function(url, call) {\r\n\tif (typeof call == \"string\") {\r\n\t\tthis._process = call;\r\n\t\tcall = arguments[2];\r\n\t}\r\n\r\n\tthis._load_url = url;\r\n\tthis._after_call = call;\r\n\tthis._load(url, this._date);\r\n};\r\n//possible values - day,week,month,year,all\r\nscheduler.setLoadMode = function(mode) {\r\n\tif (mode == \"all\") mode = \"\";\r\n\tthis._load_mode = mode;\r\n};\r\n\r\nscheduler.serverList = function(name, array) {\r\n\tif (array) {\r\n\t\tthis.serverList[name] = array.slice(0);\r\n\t\treturn this.serverList[name];\r\n\t}\r\n\tthis.serverList[name] = (this.serverList[name] || []);\r\n\treturn this.serverList[name];\r\n};\r\nscheduler._userdata = {};\r\n\r\nscheduler._xmlNodeToJSON = function(node) {\r\n\tvar t = {};\r\n\tfor (var i = 0; i < node.attributes.length; i++)\r\n\t\tt[node.attributes[i].name] = node.attributes[i].value;\r\n\r\n\tfor (var i = 0; i < node.childNodes.length; i++) {\r\n\t\tvar child = node.childNodes[i];\r\n\t\tif (child.nodeType == 1)\r\n\t\t\tt[child.tagName] = child.firstChild ? child.firstChild.nodeValue : \"\";\r\n\t}\r\n\r\n\tif (!t.text) t.text = node.firstChild ? node.firstChild.nodeValue : \"\";\r\n\r\n\treturn t;\r\n};\r\nscheduler.attachEvent(\"onXLS\", function() {\r\n\tif (this.config.show_loading === true) {\r\n\t\tvar t;\r\n\t\tt = this.config.show_loading = document.createElement(\"div\");\r\n\t\tt.className = 'dhx_loading';\r\n\t\tt.style.left = Math.round((this._x - 128) / 2) + \"px\";\r\n\t\tt.style.top = Math.round((this._y - 15) / 2) + \"px\";\r\n\t\tthis._obj.appendChild(t);\r\n\t}\r\n});\r\nscheduler.attachEvent(\"onXLE\", function() {\r\n\tvar t = this.config.show_loading;\r\n\tif (t && typeof t == \"object\") {\r\n\t\tif(t.parentNode) {\r\n\t\t\tt.parentNode.removeChild(t);\r\n\t\t}\r\n\t\tthis.config.show_loading = true;\r\n\t}\r\n});\r\n\r\n\r\n}","export default function extend(scheduler) {\r\n\r\n\r\nscheduler._parsers.xml = {\r\n\tcanParse: function(data, xhr){\r\n\t\t// IE returns non-empty responseXML type regardless of actual data type\r\n\t\tif(xhr.responseXML && xhr.responseXML.firstChild){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\ttry{\r\n\t\t\tvar xmlDoc = scheduler.ajax.parse(xhr.responseText);\r\n\t\t\tvar topElement = scheduler.ajax.xmltop(\"data\", xmlDoc);\r\n\t\t\tif(topElement && topElement.tagName === \"data\"){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}catch (e){\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tparse: function(loader) {\r\n\t\tvar xml;\r\n\r\n\t\tif (!loader.xmlDoc.responseXML) { //from a string\r\n\t\t\tloader.xmlDoc.responseXML = scheduler.ajax.parse(loader.xmlDoc.responseText);\r\n\t\t}\r\n\t\r\n\t\txml = scheduler.ajax.xmltop(\"data\", loader.xmlDoc);\r\n\t\tif (xml.tagName != \"data\") return null;//not an xml\r\n\t\tvar csrfToken = xml.getAttribute(\"dhx_security\");\r\n\t\tif (csrfToken) {\r\n\t\t\tif (window.dhtmlx) {\r\n\t\t\t\twindow.dhtmlx.security_key = csrfToken;\r\n\t\t\t}\r\n\t\t\tscheduler.security_key = csrfToken;\r\n\t\t}\r\n\t\r\n\t\tvar opts = scheduler.ajax.xpath(\"//coll_options\", loader.xmlDoc);\r\n\t\tfor (var i = 0; i < opts.length; i++) {\r\n\t\t\tvar bind = opts[i].getAttribute(\"for\");\r\n\t\t\tvar arr = scheduler.serverList[bind];\r\n\t\t\tif (!arr) {\r\n\t\t\t\tscheduler.serverList[bind] = arr = [];\r\n\t\t\t}\r\n\t\t\tarr.splice(0, arr.length);\t//clear old options\r\n\t\t\tvar itms = scheduler.ajax.xpath(\".//item\", opts[i]);\r\n\t\t\tfor (var j = 0; j < itms.length; j++) {\r\n\t\t\t\tvar itm = itms[j];\r\n\t\t\t\tvar attrs = itm.attributes;\r\n\t\t\t\tvar obj = { key: itms[j].getAttribute(\"value\"), label: itms[j].getAttribute(\"label\")};\r\n\t\t\t\tfor (var k = 0; k < attrs.length; k++) {\r\n\t\t\t\t\tvar attr = attrs[k];\r\n\t\t\t\t\tif (attr.nodeName == \"value\" || attr.nodeName == \"label\")\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\tobj[attr.nodeName] = attr.nodeValue;\r\n\t\t\t\t}\r\n\t\t\t\tarr.push(obj);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (opts.length)\r\n\t\t\tscheduler.callEvent(\"onOptionsLoad\", []);\r\n\t\r\n\t\tvar ud = scheduler.ajax.xpath(\"//userdata\", loader.xmlDoc);\r\n\t\tfor (var i = 0; i < ud.length; i++) {\r\n\t\t\tvar udx = scheduler._xmlNodeToJSON(ud[i]);\r\n\t\t\tscheduler._userdata[udx.name] = udx.text;\r\n\t\t}\r\n\t\r\n\t\tvar evs = [];\r\n\t\txml = scheduler.ajax.xpath(\"//event\", loader.xmlDoc);\r\n\t\r\n\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\tvar ev = evs[i] = scheduler._xmlNodeToJSON(xml[i]);\r\n\t\t\tscheduler._init_event(ev);\r\n\t\t}\r\n\t\treturn evs;\r\n\t}\r\n};\r\n\r\n}","export default function extend(scheduler) {\r\n\r\n\r\nscheduler.json = scheduler._parsers.json = {\r\n\tcanParse: function(data){\r\n\t\tif(data && typeof data === \"object\"){\r\n\t\t\treturn true;\r\n\t\t} else if(typeof data === \"string\"){\r\n\t\t\ttry {\r\n\t\t\t\tvar result = JSON.parse(data);\r\n\t\t\t\treturn Object.prototype.toString.call(result) === '[object Object]' || \r\n\t\t\t\t\t\tObject.prototype.toString.call(result) === '[object Array]';\r\n\t\t\t} catch (err) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tparse: function(data) {\r\n\t\tvar events = [];\r\n\r\n\t\tif (typeof data == \"string\") {\r\n\t\t\tdata = JSON.parse(data);\r\n\t\t}\r\n\t\tif (Object.prototype.toString.call(data) === '[object Array]') {\r\n\t\t\tevents = data;\r\n\t\t} else {\r\n\t\t\tif(data){\r\n\t\t\t\tif(data.events){\r\n\t\t\t\t\tevents = data.events;\r\n\t\t\t\t}else if(data.data){\r\n\t\t\t\t\tevents = data.data;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tevents = events || [];\r\n\r\n\t\tif (data.dhx_security) {\r\n\t\t\tif (window.dhtmlx) {\r\n\t\t\t\twindow.dhtmlx.security_key = data.dhx_security;\r\n\t\t\t}\r\n\t\t\tscheduler.security_key = data.dhx_security;\r\n\t\t}\r\n\r\n\t\tvar collections = (data && data.collections) ? data.collections : {};\r\n\t\tvar collections_loaded = false;\r\n\t\tfor (var key in collections) {\r\n\t\t\tif (collections.hasOwnProperty(key)) {\r\n\t\t\t\tcollections_loaded = true;\r\n\t\t\t\tvar collection = collections[key];\r\n\t\t\t\tvar arr = scheduler.serverList[key];\r\n\t\t\t\tif (!arr) {\r\n\t\t\t\t\tscheduler.serverList[key] = arr = [];\r\n\t\t\t\t}\r\n\t\t\t\tarr.splice(0, arr.length); //clear old options\r\n\t\t\t\tfor (var j = 0; j < collection.length; j++) {\r\n\t\t\t\t\tvar option = collection[j];\r\n\t\t\t\t\tvar obj = { key: option.value, label: option.label }; // resulting option object\r\n\t\t\t\t\tfor (var option_key in option) {\r\n\t\t\t\t\t\tif (option.hasOwnProperty(option_key)) {\r\n\t\t\t\t\t\t\tif (option_key == \"value\" || option_key == \"label\")\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\tobj[option_key] = option[option_key]; // obj['value'] = option['value']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (collections_loaded)\r\n\t\t\tscheduler.callEvent(\"onOptionsLoad\", []);\r\n\r\n\t\tvar evs = [];\r\n\t\tfor (var i = 0; i < events.length; i++) {\r\n\t\t\tvar event = events[i];\r\n\t\t\tscheduler._init_event(event);\r\n\t\t\tevs.push(event);\r\n\t\t}\r\n\t\treturn evs;\r\n\t}\r\n};\r\n\r\n}","export default function extend(scheduler) {\r\n\r\n\r\nscheduler.ical = scheduler._parsers.ical = {\r\n\tcanParse: function(data){\r\n\t\tif(typeof data === \"string\"){\r\n\t\t\treturn new RegExp(\"^BEGIN:VCALENDAR\").test(data);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\tparse:function(str){\r\n\t\tvar data = str.match(RegExp(this.c_start+\"[^\\f]*\"+this.c_end,\"\"));\r\n\t\tif (!data.length) return;\r\n\r\n\t\t// mpl: handle bad unfolding\r\n\t\tdata[0]=data[0].replace(/[\\r\\n]+ /g,\"\");\r\n\r\n\t\t//unfolding \r\n\t\tdata[0]=data[0].replace(/[\\r\\n]+(?=[a-z \\t])/g,\" \");\r\n\t\t//drop property\r\n\t\tdata[0]=data[0].replace(/;[^:\\r\\n]*:/g,\":\");\r\n\t\t\r\n\t\t\r\n\t\tvar incoming=[];\r\n\t\tvar match;\r\n\t\tvar event_r = RegExp(\"(?:\"+this.e_start+\")([^\\f]*?)(?:\"+this.e_end+\")\",\"g\");\r\n\t\twhile ((match=event_r.exec(data)) !== null){\r\n\t\t\tvar e={};\r\n\t\t\tvar param;\r\n\t\t\tvar param_r = /[^\\r\\n]+[\\r\\n]+/g;\r\n\t\t\twhile ((param=param_r.exec(match[1])) !== null)\r\n\t\t\t\tthis.parse_param(param.toString(),e);\r\n\t\t\tif (e.uid && !e.id) e.id = e.uid; //fallback to UID, when ID is not defined\r\n\t\t\tincoming.push(e);\t\r\n\t\t}\r\n\t\treturn incoming;\r\n\t},\r\n\tparse_param:function(str,obj){\r\n\t\tvar d = str.indexOf(\":\"); \r\n\t\t\tif (d==-1) return;\r\n\t\t\r\n\t\tvar name = str.substr(0,d).toLowerCase();\r\n\t\tvar value = str.substr(d+1).replace(/\\\\,/g,\",\").replace(/[\\r\\n]+$/,\"\");\r\n\t\tif (name==\"summary\")\r\n\t\t\tname=\"text\";\r\n\t\telse if (name==\"dtstart\"){\r\n\t\t\tname = \"start_date\";\r\n\t\t\tvalue = this.parse_date(value,0,0);\r\n\t\t}\r\n\t\telse if (name==\"dtend\"){\r\n\t\t\tname = \"end_date\";\r\n\t\t\tvalue = this.parse_date(value,0,0);\r\n\t\t}\r\n\t\tobj[name]=value;\r\n\t},\r\n\tparse_date:function(value,dh,dm){\r\n\t\tvar t = value.split(\"T\");\r\n\r\n\t\tvar utcMark = false;\r\n\t\tif (t[1]){\r\n\t\t\tdh=t[1].substr(0,2);\r\n\t\t\tdm=t[1].substr(2,2);\r\n\t\t\tutcMark = !!(t[1][6] == \"Z\");\r\n\t\t}\r\n\t\tvar dy = t[0].substr(0,4);\r\n\t\tvar dn = parseInt(t[0].substr(4,2),10)-1;\r\n\t\tvar dd = t[0].substr(6,2);\r\n\r\n\t\tif(scheduler.config.server_utc || utcMark){\r\n\t\t\treturn new Date(Date.UTC(dy,dn,dd,dh,dm)) ;\r\n\t\t}else{\r\n\t\t\treturn new Date(dy,dn,dd,dh,dm);\r\n\t\t}\r\n\t},\r\n\tc_start:\"BEGIN:VCALENDAR\",\r\n\te_start:\"BEGIN:VEVENT\",\r\n\te_end:\"END:VEVENT\",\r\n\tc_end:\"END:VCALENDAR\"\t\r\n};\r\n\r\n}","export default function extend(scheduler) {\r\n\r\n\r\nscheduler._init_touch_events = function(){\r\n\tvar mobile = this.config.touch  &&\r\n\t\t( ((navigator.userAgent.indexOf(\"Mobile\")!=-1)   ||\r\n\t\t\t(navigator.userAgent.indexOf(\"iPad\")!=-1)       ||\r\n\t\t\t(navigator.userAgent.indexOf(\"Android\")!=-1)    ||\r\n\t\t\t(navigator.userAgent.indexOf(\"Touch\")!=-1)) && !window.MSStream) ||\r\n\t\t\t((navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1));\r\n\r\n\tif(mobile){\r\n\t\tthis.xy.scroll_width = 0;\r\n\t\tthis._mobile = true;\r\n\t}\r\n\r\n\tif(this.config.touch){\r\n\r\n\t\tvar touchEventsSupported = true;\r\n\t\ttry {\r\n\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t} catch (e) {\r\n\t\t\ttouchEventsSupported = false;\r\n\t\t}\r\n\r\n\t\tif (touchEventsSupported) {\r\n\t\t\tthis._touch_events([\"touchmove\", \"touchstart\", \"touchend\"], function (ev) {\r\n\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttarget: ev.target,\r\n\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t};\r\n\t\t\t\telse\r\n\t\t\t\t\treturn ev;\r\n\t\t\t}, function () {\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t} else if (window.PointerEvent || window.navigator.pointerEnabled) {\r\n\t\t\tthis._touch_events([\"pointermove\", \"pointerdown\", \"pointerup\"], function (ev) {\r\n\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\treturn ev;\r\n\t\t\t}, function (ev) {\r\n\t\t\t\treturn (!ev || (ev.pointerType == \"mouse\" ));\r\n\t\t\t});\r\n\t\t} else if (window.navigator.msPointerEnabled) {\r\n\t\t\tthis._touch_events([\"MSPointerMove\", \"MSPointerDown\", \"MSPointerUp\"], function (ev) {\r\n\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\treturn ev;\r\n\t\t\t}, function (ev) {\r\n\t\t\t\treturn (!ev || ev.pointerType == ev.MSPOINTER_TYPE_MOUSE);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n\r\nscheduler._touch_events = function(names, accessor, ignore){\r\n\t//webkit on android need to be handled separately\r\n\t//var a_webkit = (navigator.userAgent.indexOf(\"Android\")!=-1) && (navigator.userAgent.indexOf(\"WebKit\")!=-1);\r\n\tvar source, tracker, timer, drag_mode, scroll_mode, action_mode;\r\n\tvar dblclicktime = 0;\r\n\r\n\tfunction attachTouchEvent(element, name, callback){\r\n\t\t//touch gestures must be disabled when ligthbox is opened\r\n\t\tscheduler.event(element, name, function(e){\r\n\t\t\tif(scheduler._is_lightbox_open()){\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\tif (ignore(e)) return;\r\n\t\t\t\treturn callback(e);\r\n\t\t\t}\r\n\t\t}, { passive: false });\r\n\t}\r\n\r\n\tfunction check_direction_swipe(s_ev, e_ev, step, max_dy){\r\n\t\tif (!s_ev || !e_ev) return false;\r\n\r\n\t\tvar t = s_ev.target;\r\n\t\twhile(t && t != scheduler._obj){\r\n\t\t\tt = t.parentNode;\r\n\t\t}\r\n\t\tif(t != scheduler._obj){\r\n\t\t\t//swipe outside scheduler\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// ignore swipe in horizontal timeline\r\n\t\tif(scheduler.matrix && scheduler.matrix[scheduler.getState().mode]){\r\n\t\t\tvar timeline = scheduler.matrix[scheduler.getState().mode];\r\n\t\t\tif(timeline.scrollable){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar dy = Math.abs(s_ev.pageY - e_ev.pageY);\r\n\t\tvar dx = Math.abs(s_ev.pageX - e_ev.pageX);\r\n\t\tif (dy < max_dy && dx>step && (!dy || (dx/dy > 3))){\r\n\t\t\tif (s_ev.pageX > e_ev.pageX) {\r\n\t\t\t\tscheduler._click.dhx_cal_next_button();\r\n\t\t\t}else {\r\n\t\t\t\tscheduler._click.dhx_cal_prev_button();\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfunction doMouseMove(e){\r\n\t\tif (ignore(e)) return;\r\n\t\tvar dnd = scheduler.getState().drag_mode,\r\n\t\t\ttimeline = scheduler.matrix ? scheduler.matrix[scheduler._mode] : false;\r\n\r\n\t\tvar original_render = scheduler.render_view_data;\r\n\t\tif(dnd == 'create' && timeline){\r\n\t\t\t//suppress full redraw of timeline on creating event\r\n\t\t\tscheduler.render_view_data = function() {\r\n\t\t\t\tvar id = scheduler.getState().drag_id;\r\n\t\t\t\tvar ev = scheduler.getEvent(id);\r\n\t\t\t\tvar property = timeline.y_property;\r\n\r\n\t\t\t\tvar evs = scheduler.getEvents(ev.start_date, ev.end_date);\r\n\t\t\t\tfor(var i = 0; i < evs.length; i++){\r\n\t\t\t\t\tif(evs[i][property] != ev[property]){\r\n\t\t\t\t\t\tevs.splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tev._sorder = evs.length - 1;\r\n\t\t\t\tev._count = evs.length;\r\n\r\n\t\t\t\tthis.render_data([ev], scheduler.getState().mode);\r\n\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tscheduler._on_mouse_move(e);\r\n\r\n\t\tif(dnd == 'create' && timeline){\r\n\t\t\tscheduler.render_view_data = original_render;\r\n\t\t}\r\n\r\n\t\tif (e.preventDefault)\r\n\t\t\te.preventDefault();\r\n\t\te.cancelBubble = true;\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// touchmove\r\n\tattachTouchEvent(document.body, names[0], function(e){\r\n\t\tif (ignore(e)) return;\r\n\r\n\t\tvar acc = accessor(e);\r\n\t\tif(!acc) return;\r\n\t\tif (drag_mode){\r\n\t\t\tdoMouseMove(acc);\r\n\r\n\t\t\tif (e.preventDefault)\r\n\t\t\t\te.preventDefault();\r\n\t\t\te.cancelBubble = true;\r\n\t\t\tscheduler._update_global_tip();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t//if (tracker && a_webkit){\r\n\t\t//\tcheck_direction_swipe(tracker, accessor(e), 0);\r\n\t\t//}\r\n\r\n\t\ttracker = accessor(e);\r\n\t\t//ignore common and scrolling moves\r\n\t\tif (!action_mode) return;\r\n\r\n\t\t//multitouch\r\n\t\tif (!tracker){\r\n\t\t\tscroll_mode = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//target changed - probably in scroll mode\r\n\r\n\t\tif (source.target != tracker.target || (Math.abs(source.pageX - tracker.pageX) > 5) || (Math.abs(source.pageY - tracker.pageY) > 5)){\r\n\t\t\tscroll_mode = true;\r\n\t\t\tclearTimeout(timer);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t//attachTouchEvent(this._els[\"dhx_cal_data\"][0], \"scroll\", drag_cancel);\r\n\tattachTouchEvent(this._els[\"dhx_cal_data\"][0], \"touchcancel\", drag_cancel);\r\n\tattachTouchEvent(this._els[\"dhx_cal_data\"][0], \"contextmenu\", function(e){\r\n\t\tif (ignore(e)) return;\r\n\t\tif (action_mode){\r\n\t\t\tif (e && e.preventDefault)\r\n\t\t\t\te.preventDefault();\r\n\t\t\te.cancelBubble = true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t});\r\n\r\n\t// touchstart\r\n\tattachTouchEvent(this._obj, names[1], function(e){\r\n\t\t// block pull-to-refresh\r\n\t\tif(document && document.body){\r\n\t\t\tdocument.body.classList.add(\"dhx_cal_touch_active\");\r\n\t\t}\r\n\r\n\t\tif (ignore(e)) return;\r\n\t\tscheduler._pointerDragId = e.pointerId;\r\n\r\n\t\tvar fake_event;\r\n\t\tdrag_mode = scroll_mode = false;\r\n\t\taction_mode = true;\r\n\t\tfake_event = tracker = accessor(e);\r\n\r\n\t\tif (!fake_event){\r\n\t\t\tscroll_mode = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//dbl click\r\n\t\tvar now = new Date();\r\n\r\n\t\tif (!scroll_mode && !drag_mode && now - dblclicktime < 250){\r\n\t\t\tscheduler._click.dhx_cal_data(fake_event);\r\n\t\t\twindow.setTimeout(function(){\r\n\t\t\t\tif(scheduler.$destroyed){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t//fake_event.type = \"dblclick\";\r\n\t\t\t\tscheduler._on_dbl_click(fake_event);\r\n\t\t\t}, 50);\r\n\r\n\t\t\tif (e.preventDefault)\r\n\t\t\t\te.preventDefault();\r\n\t\t\te.cancelBubble = true;\r\n\t\t\tscheduler._block_next_stop = true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tdblclicktime = now;\r\n\r\n\t\t//drag\r\n\r\n\t\tif (scroll_mode || drag_mode || !scheduler.config.touch_drag)\r\n\t\t\treturn;\r\n\r\n\t\tvar actTask = scheduler._locate_event(document.activeElement);\r\n\t\tvar fakeTask = scheduler._locate_event(fake_event.target);\r\n\t\tvar sourceTask = source? scheduler._locate_event(source.target) : null;\r\n\r\n\t\tif(actTask && fakeTask && actTask == fakeTask && actTask != sourceTask)\r\n\t\t{\r\n\t\t\tif(e.preventDefault) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\te.cancelBubble = true;\r\n\t\t\tscheduler._ignore_next_click = false;\r\n\t\t\tscheduler._click.dhx_cal_data(fake_event);\r\n\t\t\tsource = fake_event;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t//there is no target\r\n\t\ttimer = setTimeout(function(){\r\n\t\t\tif(scheduler.$destroyed){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdrag_mode = true;\r\n\t\t\tvar target = source.target;\r\n\t\t\tvar className = scheduler._getClassName(target);\r\n\t\t\tif (target && className.indexOf(\"dhx_body\") != -1)\r\n\t\t\t\ttarget = target.previousSibling;\r\n\r\n\t\t\tscheduler._on_mouse_down(source, target);\r\n\t\t\tif (scheduler._drag_mode && scheduler._drag_mode != \"create\"){\r\n\t\t\t\tscheduler.for_rendered(scheduler._drag_id, function(node, i) {\r\n\t\t\t\t\tnode.style.display='none';\r\n\t\t\t\t\tscheduler._rendered.splice(i, 1);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (scheduler.config.touch_tip) {\r\n\t\t\t\tscheduler._show_global_tip();\r\n\t\t\t}\r\n\t\t\tscheduler.updateEvent(scheduler._drag_id);\r\n\t\t},scheduler.config.touch_drag);\r\n\r\n\t\tsource = fake_event;\r\n\t});\r\n\tfunction drag_cancel(e){\r\n\t\tif (ignore(e)) return;\r\n\t\tscheduler._hide_global_tip();\r\n\t\tif (drag_mode){\r\n\t\t\tscheduler._on_mouse_up( accessor(e) );\r\n\t\t\tscheduler._temp_touch_block = false;\r\n\t\t}\r\n\t\tscheduler._drag_id = null;\r\n\t\tscheduler._drag_mode=null;\r\n\t\tscheduler._drag_pos=null;\r\n\t\tscheduler._pointerDragId = null;\r\n\t\tclearTimeout(timer);\r\n\t\tdrag_mode = action_mode = false;\r\n\t\tscroll_mode = true;\r\n\t}\r\n\r\n\t// touch end\r\n\tattachTouchEvent(this._els[\"dhx_cal_data\"][0], names[2], function(e){\r\n\t\tif(document && document.body){\r\n\t\t\tdocument.body.classList.remove(\"dhx_cal_touch_active\");\r\n\t\t}\r\n\r\n\t\tif (ignore(e)) return;\r\n\r\n\t\tif(scheduler.config.touch_swipe_dates){\r\n\t\t\tif (!drag_mode && check_direction_swipe(source, tracker, 200, 100)) {\r\n\t\t\t\tscheduler._block_next_stop = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (drag_mode) {\r\n\t\t\tscheduler._ignore_next_click = true;\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tscheduler._ignore_next_click = false;\r\n\t\t\t}, 100);\r\n\t\t}\r\n\r\n\t\tdrag_cancel(e);\r\n\t\tif (scheduler._block_next_stop){\r\n\t\t\tscheduler._block_next_stop = false;\r\n\t\t\tif (e.preventDefault)\r\n\t\t\t\te.preventDefault();\r\n\t\t\te.cancelBubble = true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t});\r\n\r\n\tscheduler.event(document.body, names[2], drag_cancel);\r\n};\r\n\r\nscheduler._show_global_tip = function(){\r\n\tscheduler._hide_global_tip();\r\n\r\n\tvar toptip = scheduler._global_tip = document.createElement(\"div\");\r\n\ttoptip.className='dhx_global_tip';\r\n\r\n\tscheduler._update_global_tip(1);\r\n\r\n\tdocument.body.appendChild(toptip);\r\n};\r\nscheduler._update_global_tip = function(init){\r\n\tvar toptip = scheduler._global_tip;\r\n\tif (toptip){\r\n\t\tvar time = \"\";\r\n\t\tif (scheduler._drag_id && !init){\r\n\t\t\tvar ev = scheduler.getEvent(scheduler._drag_id);\r\n\t\t\tif (ev)\r\n\t\t\t\ttime = \"<div>\" + (ev._timed ? scheduler.templates.event_header(ev.start_date, ev.end_date, ev):scheduler.templates.day_date(ev.start_date, ev.end_date, ev)) + \"</div>\";\r\n\t\t}\r\n\r\n\t\tif (scheduler._drag_mode == \"create\" || scheduler._drag_mode == \"new-size\")\r\n\t\t\ttoptip.innerHTML = (scheduler.locale.labels.drag_to_create || \"Drag to create\")+time;\r\n\t\telse\r\n\t\t\ttoptip.innerHTML = (scheduler.locale.labels.drag_to_move || \"Drag to move\")+time;\r\n\t}\r\n};\r\nscheduler._hide_global_tip = function(){\r\n\tvar toptip = scheduler._global_tip;\r\n\tif (toptip && toptip.parentNode){\r\n\t\ttoptip.parentNode.removeChild(toptip);\r\n\t\tscheduler._global_tip = 0;\r\n\t}\r\n};\r\n\r\n\r\n}","export default function extend(scheduler) {\r\n\r\n\r\nscheduler._addThemeClass = function(){\r\n\tdocument.documentElement.setAttribute(\"data-scheduler-theme\", scheduler.skin);\r\n};\r\n\r\nscheduler._skin_settings = {\r\n\tfix_tab_position: [1,0],\r\n\tuse_select_menu_space: [1,0],\r\n\twide_form: [1,0],\r\n\r\n\thour_size_px: [44,42],\r\n\tdisplayed_event_color: [\"#ff4a4a\", \"ffc5ab\"],\r\n\tdisplayed_event_text_color: [\"#ffef80\", \"7e2727\"]\r\n};\r\n\r\nscheduler._skin_xy = {\r\n\tlightbox_additional_height: [90,50],\r\n\tnav_height: [59,22],\r\n\tbar_height: [24,20]\r\n};\r\n\r\n// material skin uses a different box sizing model than other skins, and also requires some post-processing.\r\n// In order to render events correctly, we need to know which box sizing model is used\r\n// We can detect it by styles applied, taking into account that styles may be loaded after scheduler is rendered\r\n\r\nscheduler._is_material_skin = function(){\r\n\tif(!scheduler.skin){\r\n\t\treturn checkIfMaterialSkin();\r\n\t}else{\r\n\t\treturn ((scheduler.skin + \"\").indexOf(\"material\") > -1);\r\n\t}\r\n};\r\n\r\nfunction themeNameFromFile(){\r\n\tvar links = document.getElementsByTagName(\"link\");\r\n\tfor (var i = 0; i < links.length; i++) {\r\n\t\tvar res = links[i].href.match(\"dhtmlxscheduler_([a-z]+).css\");\r\n\t\tif (res){\r\n\t\t\treturn res[1];\r\n\t\t}\r\n\t}\r\n}\r\n\r\nscheduler._build_skin_info = function() {\r\n\tmonitorThemeChange();\r\n\tconst styles = getComputedStyle(this.$container);\r\n\tconst themeVar = styles.getPropertyValue(\"--dhx-scheduler-theme\");\r\n\r\n\tlet isCssVarTheme = !!themeVar;\r\n\tlet themeName;\r\n\tlet cssValues = {};\r\n\tlet oldMaterialTheme = false;\r\n\r\n\tif(isCssVarTheme){\r\n\t\tthemeName = themeVar;\r\n\t\tfor(let i in scheduler.xy){\r\n\t\t\tcssValues[i] = styles.getPropertyValue(`--dhx-scheduler-xy-${i}`);\r\n\t\t}\r\n\r\n\t\tcssValues.hour_size_px = styles.getPropertyValue(`--dhx-scheduler-config-hour_size_px`);\r\n\t\tcssValues.wide_form = styles.getPropertyValue(`--dhx-scheduler-config-form_wide`);\r\n\r\n\t}else{\r\n\t\tthemeName = themeNameFromFile();\r\n\t\toldMaterialTheme = scheduler._is_material_skin();\r\n\t}\r\n\r\n\r\n\tscheduler._theme_info = {\r\n\t\ttheme: themeName,\r\n\t\tcssVarTheme: isCssVarTheme,\r\n\t\toldMaterialTheme: oldMaterialTheme,\r\n\t\tvalues: cssValues\r\n\t};\r\n\r\n\tif(scheduler._theme_info.cssVarTheme){\r\n\t\tconst themeVariables = this._theme_info.values;\r\n\t\tfor(let i in scheduler.xy){\r\n\t\t\tif(!isNaN(parseInt(themeVariables[i]))){\r\n\t\t\t\tscheduler.xy[i] = parseInt(themeVariables[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nvar calculatedMaterial;\r\nfunction checkIfMaterialSkin(){\r\n\tif(calculatedMaterial === undefined){\r\n\t\tvar probe = document.createElement(\"div\");\r\n\t\tprobe.style.position = \"absolute\";\r\n\t\tprobe.style.left = \"-9999px\";\r\n\t\tprobe.style.top = \"-9999px\";\r\n\t\tprobe.innerHTML = \"<div class='dhx_cal_container'>\" +\r\n\t\t\t\"<div class='dhx_cal_scale_placeholder'>\" +\r\n\t\t\t\"</div>\"+\r\n\t\t\"<div>\";\r\n\t\tdocument.body.appendChild(probe);\r\n\t\tvar styles = window.getComputedStyle(probe.querySelector(\".dhx_cal_scale_placeholder\"));\r\n\t\tvar position = styles.getPropertyValue('position');\r\n\t\tif(position === \"absolute\"){\r\n\t\t\t// page has skins for placeholder element from material skin\r\n\t\t\tcalculatedMaterial = true;\r\n\t\t}else{\r\n\t\t\tcalculatedMaterial = false;\r\n\t\t}\r\n\r\n\t\tsetTimeout(function(){\r\n\t\t\tcalculatedMaterial = null;\r\n\t\t\tif(probe && probe.parentNode){\r\n\t\t\t\tprobe.parentNode.removeChild(probe);\r\n\t\t\t}\r\n\t\t}, 500);\r\n\t}\r\n\treturn calculatedMaterial;\r\n}\r\n\r\nvar cachedBorderBoxValue;\r\nfunction checkIfBorderBoxStyling(){\r\n\tif(scheduler._is_material_skin()){\r\n\t\treturn true;\r\n\t}else{\r\n\t\tif(cachedBorderBoxValue === undefined){\r\n\t\t\tvar probe = document.createElement(\"div\");\r\n\t\t\tprobe.style.position = \"absolute\";\r\n\t\t\tprobe.style.left = \"-9999px\";\r\n\t\t\tprobe.style.top = \"-9999px\";\r\n\t\t\tprobe.innerHTML = \"<div class='dhx_cal_container'>\" +\r\n\t\t\t\t\"<div class='dhx_cal_data'>\" +\r\n\t\t\t\t\t\"<div class='dhx_cal_event'><div class='dhx_body'></div>\"+\r\n\t\t\t\t\"</div>\"+\r\n\t\t\t\"<div>\";\r\n\r\n\t\t\tdocument.body.appendChild(probe);\r\n\t\t\tvar styles = window.getComputedStyle(probe.querySelector(\".dhx_body\"));\r\n\t\t\tvar boxSizing = styles.getPropertyValue('box-sizing');\r\n\t\t\tdocument.body.removeChild(probe);\r\n\t\t\tcachedBorderBoxValue = !!(boxSizing === \"border-box\");\r\n\r\n\t\t\tif(!cachedBorderBoxValue){\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tcachedBorderBoxValue = undefined;\r\n\t\t\t\t}, 1000);// recalculate in case scheduler initialized before skin is loaded\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn cachedBorderBoxValue;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction refreshAfterLoad(){\r\n\tif(scheduler._is_material_skin() || scheduler._border_box_events()){\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar oldStyling = cachedBorderBoxValue;\r\n\tcachedBorderBoxValue = undefined;\r\n\tcalculatedMaterial = undefined;\r\n\tvar newStyling = checkIfBorderBoxStyling();\r\n\r\n\t// if box styling model changed - means scheduler was rendered before stylesheet was loaded or parsed inline\r\n\t// repaint scheduler in order to apply new styles\r\n\tif(oldStyling !== newStyling && scheduler.$container && scheduler.getState().mode){\r\n\t\tscheduler.setCurrentView();\r\n\t}\r\n}\r\nscheduler.event(window, 'DOMContentLoaded', refreshAfterLoad);\r\nscheduler.event(window, 'load', refreshAfterLoad);\r\n\r\nscheduler._border_box_events = function(){\r\n\treturn checkIfBorderBoxStyling();\r\n};\r\n\r\nscheduler._configure = function(col, data, skin){\r\n\tfor (var key in data)\r\n\t\tif (typeof col[key] == \"undefined\")\r\n\t\t\tcol[key] = data[key][skin];\r\n};\r\n\r\nscheduler.setSkin = function(value){\r\n\tthis.skin = value;\r\n\tscheduler._addThemeClass();\r\n\tif(scheduler.$container){\r\n\t\tthis._skin_init();\r\n\t\tthis.render();\r\n\t}\r\n\t\r\n\t//\r\n};\r\n\r\nfunction flatSkinHourScale(date){\r\n\tvar min = date.getMinutes();\r\n\tmin = min < 10 ? \"0\"+min : min;\r\n\tvar html = \"<span class='dhx_scale_h'>\"+ date.getHours() +\"</span>\"+\r\n\t\t\"<span class='dhx_scale_m'>&nbsp;\"+ min +\"</span>\";\r\n\treturn html;\r\n}\r\n\r\nlet monitorIntervalId = null;\r\nfunction monitorThemeChange(){\r\n\tconst container = scheduler.$container;\r\n\t\r\n\tclearInterval(monitorIntervalId);\r\n\tif(container){\r\n\t\tmonitorIntervalId = setInterval(() => {\r\n\t\t\tconst csstheme = getComputedStyle(container).getPropertyValue('--dhx-scheduler-theme');\r\n\t\t\tif(csstheme && csstheme !== scheduler.skin){\r\n\t\t\t\tscheduler.setSkin(csstheme);\r\n\t\t\t}\r\n\r\n\t\t}, 100);\r\n\t}\r\n}\r\nscheduler.attachEvent(\"onDestroy\", function(){\r\n\tclearInterval(monitorIntervalId);\r\n});\r\n\r\nscheduler._skin_init = function(){\r\n\tthis._build_skin_info();\r\n\r\n\tif (!this.skin){\r\n\t\tthis.skin = this._theme_info.theme;\r\n\t}\r\n\tscheduler._addThemeClass();\r\n\tif (scheduler.skin === \"flat\"){\r\n\t\t// scheduler.xy.scale_height = 35;\r\n\t\tscheduler.templates.hour_scale = flatSkinHourScale;\r\n\t}else if (scheduler.templates.hour_scale === flatSkinHourScale){\r\n\t\tscheduler.templates.hour_scale = scheduler.date.date_to_str(scheduler.config.hour_date);\r\n\t}\r\n\r\n\r\n\r\n\t//scheduler._lightbox_template=\"<div class='dhx_cal_ltitle'><span class='dhx_mark'>&nbsp;</span><span class='dhx_time'></span><span class='dhx_title'></span><div class='dhx_close_icon'></div></div><div class='dhx_cal_larea'></div>\";\r\n\tscheduler.attachEvent(\"onTemplatesReady\", function() {\r\n\r\n\t\tvar date_to_str = scheduler.date.date_to_str(\"%d\");\r\n\t\tif(!scheduler.templates._old_month_day){\r\n\t\t\tscheduler.templates._old_month_day = scheduler.templates.month_day;\r\n\t\t}\r\n\t\tvar old_month_day = scheduler.templates._old_month_day;\r\n\t\tscheduler.templates.month_day = function(date) {\r\n\t\t\tif (this._mode == \"month\") {\r\n\t\t\t\tvar label = date_to_str(date);\r\n\t\t\t\tif (date.getDate() == 1) {\r\n\t\t\t\t\tlabel = scheduler.locale.date.month_full[date.getMonth()] + \" \" + label;\r\n\t\t\t\t}\r\n\t\t\t\tif (+date == +scheduler.date.date_part(this._currentDate())) {\r\n\t\t\t\t\tlabel = scheduler.locale.labels.dhx_cal_today_button + \" \" + label;\r\n\t\t\t\t}\r\n\t\t\t\treturn label;\r\n\t\t\t} else {\r\n\t\t\t\treturn old_month_day.call(this, date);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// tab classes\r\n\t\tif(scheduler.config.fix_tab_position){\r\n\t\t\tconst tabs = scheduler._els[\"dhx_cal_navline\"][0].querySelectorAll('[data-tab]');\r\n\t\t\ttabs.forEach((tab) => {\r\n\t\t\t\tconst view = tab.getAttribute(\"data-tab\") || tab.getAttribute(\"name\");\r\n\r\n\t\t\t\tswitch (view) {\r\n\t\t\t\t\tcase \"day\":\r\n\t\t\t\t\tcase \"day_tab\":\r\n\t\t\t\t\t\ttab.classList.add(\"dhx_cal_tab_first\");\r\n\t\t\t\t\t\ttab.classList.add(\"dhx_cal_tab_segmented\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"week\":\r\n\t\t\t\t\tcase \"week_tab\":\r\n\t\t\t\t\t\ttab.classList.add(\"dhx_cal_tab_segmented\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"month\":\r\n\t\t\t\t\tcase \"month_tab\":\r\n\t\t\t\t\t\ttab.classList.add(\"dhx_cal_tab_last\");\r\n\t\t\t\t\t\ttab.classList.add(\"dhx_cal_tab_segmented\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\ttab.classList.add(\"dhx_cal_tab_standalone\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treorderTabs(scheduler._els[\"dhx_cal_navline\"][0]);\r\n\r\n\t\t}\r\n\t}, {once: true});\r\n\r\n\tfunction reorderTabs(container) {\r\n\t\t// segmented tabs should go first\r\n\r\n\t\tif(scheduler.config.header){\r\n\t\t\treturn;\r\n\t\t\t// don't reorder tabs if header is defined via config\r\n\t\t}\r\n\t\tconst tabs = Array.from(container.querySelectorAll('.dhx_cal_tab'));\r\n\t\r\n\t\t// segmented tabs\r\n\t\tconst order = ['day', 'week', 'month'];\r\n\t\r\n\t\tconst specialTabs = order.map(tabName => \r\n\t\t\ttabs.find(tab => tab.getAttribute('data-tab') === tabName)\r\n\t\t).filter(tab => tab !== undefined);\r\n\t\r\n\t\tlet firstTab = tabs.length > 0 ? tabs[0] : null;\r\n\r\n\t\tspecialTabs.reverse().forEach(tab => {\r\n\t\t\tcontainer.insertBefore(tab, firstTab);\r\n\t\t\tfirstTab = tab;\r\n\t\t});\r\n\t}\r\n\r\n\t// scheduler._skin_init = function(){\r\n\t// \tthis._build_skin_info();\r\n\t// \tthis.skin = this._theme_info.theme;\r\n\t// };\r\n};\r\n\r\n\r\n\r\n}","export default function DataProcessorEvents(scheduler, dp){\r\n\tthis.$scheduler = scheduler;\r\n\tthis.$dp = dp;\r\n\tthis._dataProcessorHandlers = [];\r\n\r\n\tthis.attach = function () {\r\n\t\tvar dp = this.$dp;\r\n\t\tvar scheduler = this.$scheduler;\r\n\r\n\t\tthis._dataProcessorHandlers.push(scheduler.attachEvent(\"onEventAdded\", function(id) {\r\n\t\t\tif (!this._loading && this._validId(id))\r\n\t\t\tdp.setUpdated(id,true,\"inserted\");\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(scheduler.attachEvent(\"onConfirmedBeforeEventDelete\", function(id) {\r\n\t\t\tif (!this._validId(id)) return;\r\n\t\t\tvar z=dp.getState(id);\r\n\r\n\t\t\tif (z==\"inserted\" || this._new_event) { dp.setUpdated(id,false); return true; }\r\n\t\t\tif (z==\"deleted\") return false;\r\n\t\t\tif (z==\"true_deleted\") return true;\r\n\r\n\t\t\tdp.setUpdated(id,true,\"deleted\");\r\n\t\t\treturn false;\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(scheduler.attachEvent(\"onEventChanged\", function(id) { \r\n\t\t\tif (!this._loading && this._validId(id))\r\n\t\t\tdp.setUpdated(id,true,\"updated\");\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(scheduler.attachEvent(\"onClearAll\", function() { \r\n\t\t\t// clear dataprocessor state when scheduler is reset\r\n\t\t\tdp._in_progress={};\r\n\t\t\tdp._invalid={};\r\n\t\t\tdp.updatedRows = [];\r\n\t\t\tdp._waitMode = 0;\r\n\t\t}));\r\n\r\n\t\tdp.attachEvent(\"insertCallback\", scheduler._update_callback);\r\n\t\tdp.attachEvent(\"updateCallback\", scheduler._update_callback);\r\n\t\tdp.attachEvent(\"deleteCallback\", function(upd, id) {\r\n\t\t\tif (scheduler.getEvent(id)){\r\n\t\t\t\tscheduler.setUserData(id, this.action_param, \"true_deleted\");\r\n\t\t\t\tscheduler.deleteEvent(id);\r\n\t\t\t} else if (scheduler._add_rec_marker)\r\n\t\t\t\tscheduler._update_callback(upd, id);\r\n\t\t});\r\n\t};\r\n\r\n\tthis.detach = function () {\r\n\t\tfor (var key in this._dataProcessorHandlers) {\r\n\t\t\tvar handler = this._dataProcessorHandlers[key];\r\n\t\t\tthis.$scheduler.detachEvent(handler);\r\n\t\t}\r\n\t\tthis._dataProcessorHandlers = [];\r\n\t};\r\n}\r\n\r\nexport function extendScheduler(scheduler, dp){\r\n\tscheduler._validId=function(id){\r\n\t\tif(this._is_virtual_event){\r\n\t\t\treturn !this._is_virtual_event(id);\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\tscheduler.setUserData=function(id,name,value){\r\n\t\tif (id){\r\n\t\t\tvar ev = this.getEvent(id);\r\n\t\t\tif(ev) ev[name]=value;\r\n\t\t}else{\r\n\t\t\tthis._userdata[name]=value;\r\n\t\t}\r\n\t};\r\n\tscheduler.getUserData=function(id,name){\r\n\t\tif (id){\r\n\t\t\tvar ev = this.getEvent(id);\r\n\t\t\tif(ev)\r\n\t\t\t\treturn ev[name];\r\n\t\t\telse\r\n\t\t\t\treturn null;\r\n\t\t}else{\r\n\t\t\treturn this._userdata[name];\r\n\t\t}\r\n\t};\r\n\tscheduler._set_event_text_style=function(id,style){\r\n\t\tif(!scheduler.getEvent(id))\r\n\t\t\treturn;\r\n\t\tthis.for_rendered(id,function(r){\r\n\t\t\tr.style.cssText+=\";\"+style;\r\n\t\t});\r\n\t\tvar ev = this.getEvent(id);\r\n\t\tev[\"_text_style\"]=style;\r\n\t\tthis.event_updated(ev);\r\n\t};\r\n\tscheduler._update_callback = function(upd,id){\r\n\t\tvar data = scheduler._xmlNodeToJSON(upd.firstChild);\r\n\t\t//fix for updates of recurring events\r\n\t\tif (data.rec_type == \"none\") data.rec_pattern = \"none\";\r\n\t\tdata.text = data.text||data._tagvalue;\r\n\t\tdata.start_date = scheduler._helpers.parseDate(data.start_date);\r\n\t\tdata.end_date = scheduler._helpers.parseDate(data.end_date);\r\n\t\tscheduler.addEvent(data);\r\n\t\tif (scheduler._add_rec_marker)\r\n\t\t\tscheduler.setCurrentView();\r\n\t};\r\n\tscheduler._dp_change_event_id = function(id, new_id){\r\n\t\tif(!scheduler.getEvent(id))\r\n\t\t\treturn;\r\n\t\tscheduler.changeEventId(id, new_id);\r\n\t};\r\n\tscheduler._dp_hook_delete = function(id, new_id){\r\n\t\tif(!scheduler.getEvent(id))\r\n\t\t\treturn;\r\n\r\n\t\tif(new_id && id != new_id){\r\n\t\t\tif(this.getUserData(id, dp.action_param) == \"true_deleted\")\r\n\t\t\t\tthis.setUserData(id, dp.action_param, \"updated\");\r\n\r\n\t\t\tthis.changeEventId(id, new_id);\r\n\t\t}\r\n\t\treturn this.deleteEvent(new_id, true);\r\n\t};\r\n\r\n\tscheduler.setDp = function() {\r\n\t\tthis._dp = dp;\r\n\t};\r\n\tscheduler.setDp();\r\n}","import DataProcessorEvents from \"./dataprocessor_hooks\";\r\nimport { extendScheduler } from \"./dataprocessor_hooks\";\r\nimport eventable from \"../../utils/eventable\";\r\nimport global from \"../../global\";\r\n\r\n/**\r\n *\t@desc: constructor, data processor object\r\n *\t@param: serverProcessorURL - url used for update\r\n *\t@type: public\r\n */\r\nexport function DataProcessor(serverProcessorURL){\r\n\tthis.serverProcessor = serverProcessorURL;\r\n\tthis.action_param = \"!nativeeditor_status\";\r\n\r\n\tthis.object = null;\r\n\tthis.updatedRows = []; // ids of updated rows\r\n\r\n\tthis.autoUpdate = true;\r\n\tthis.updateMode = \"cell\";\r\n\tthis._tMode = \"GET\";\r\n\tthis._headers = null;\r\n\tthis._payload = null;\r\n\tthis.post_delim = \"_\";\r\n\r\n\tthis._waitMode = 0;\r\n\tthis._in_progress = {};\r\n\tthis._invalid = {};\r\n\tthis.messages = [];\r\n\r\n\tthis.styles = {\r\n\t\tupdated: \"font-weight:bold;\",\r\n\t\tinserted: \"font-weight:bold;\",\r\n\t\tdeleted: \"text-decoration : line-through;\",\r\n\t\tinvalid: \"background-color:FFE0E0;\",\r\n\t\tinvalid_cell: \"border-bottom:2px solid red;\",\r\n\t\terror: \"color:red;\",\r\n\t\tclear: \"font-weight:normal;text-decoration:none;\"\r\n\t};\r\n\tthis.enableUTFencoding(true);\r\n\teventable(this); // TODO: need to update\r\n\r\n\treturn this;\r\n}\r\nDataProcessor.prototype = {\r\n\tsetTransactionMode: function (mode, total) {\r\n\t\tif (typeof mode == \"object\") {\r\n\t\t\tthis._tMode = mode.mode || this._tMode;\r\n\r\n\t\t\tif (mode.headers !== undefined) {\r\n\t\t\t\tthis._headers = mode.headers;\r\n\t\t\t}\r\n\r\n\t\t\tif (mode.payload !== undefined) {\r\n\t\t\t\tthis._payload = mode.payload;\r\n\t\t\t}\r\n\t\t\tthis._tSend = !!total;\r\n\t\t} else {\r\n\t\t\tthis._tMode = mode;\r\n\t\t\tthis._tSend = total;\r\n\t\t}\r\n\r\n\t\tif (this._tMode == \"REST\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t}\r\n\r\n\t\tif (this._tMode === \"JSON\" || this._tMode === \"REST-JSON\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t\tthis._serializeAsJson = true;\r\n\t\t\tthis._headers = this._headers || {};\r\n\t\t\tthis._headers[\"Content-Type\"] = \"application/json\";\r\n\t\t}else{\r\n\t\t\tif(this._headers && !this._headers[\"Content-Type\"]){\r\n\t\t\t\tthis._headers[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this._tMode === \"CUSTOM\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t\tthis._router = mode.router;\r\n\t\t}\r\n\t},\r\n\tescape: function (data) {\r\n\t\tif (this._utf)\r\n\t\t\treturn encodeURIComponent(data);\r\n\t\telse\r\n\t\t\treturn escape(data);\r\n\t},\r\n\t/**\r\n\t *\t@desc: allows to set escaping mode\r\n\t *\t@param: true - utf based escaping, simple - use current page encoding\r\n\t *\t@type: public\r\n\t */\r\n\tenableUTFencoding: function (mode) {\r\n\t\tthis._utf = !!mode;\r\n\t},\r\n\t/**\r\n\t *\t@desc: allows to define, which column may trigger update\r\n\t *\t@param: val - array or list of true/false values\r\n\t *\t@type: public\r\n\t */\r\n\tsetDataColumns: function (val) {\r\n\t\tthis._columns = (typeof val == \"string\") ? val.split(\",\") : val;\r\n\t},\r\n\t/**\r\n\t *\t@desc: get state of updating\r\n\t *\t@returns:   true - all in sync with server, false - some items not updated yet.\r\n\t *\t@type: public\r\n\t */\r\n\tgetSyncState: function () {\r\n\t\treturn !this.updatedRows.length;\r\n\t},\r\n\t/**\r\n\t *\t@desc: enable/disable named field for data syncing, will use column ids for grid\r\n\t *\t@param:   mode - true/false\r\n\t *\t@type: public\r\n\t */\r\n\tenableDataNames: function (mode) {\r\n\t\tthis._endnm = !!mode;\r\n\t},\r\n\t/**\r\n\t *\t@desc: enable/disable mode , when only changed fields and row id send to the server side, instead of all fields in default mode\r\n\t *\t@param:   mode - true/false\r\n\t *\t@type: public\r\n\t */\r\n\tenablePartialDataSend: function (mode) {\r\n\t\tthis._changed = !!mode;\r\n\t},\r\n\t/**\r\n\t *\t@desc: set if rows should be send to server automatically\r\n\t *\t@param: mode - \"row\" - based on row selection changed, \"cell\" - based on cell editing finished, \"off\" - manual data sending\r\n\t *\t@type: public\r\n\t */\r\n\tsetUpdateMode: function (mode, dnd) {\r\n\t\tthis.autoUpdate = (mode == \"cell\");\r\n\t\tthis.updateMode = mode;\r\n\t\tthis.dnd = dnd;\r\n\t},\r\n\tignore: function (code, master) {\r\n\t\tthis._silent_mode = true;\r\n\t\tcode.call(master || window);\r\n\t\tthis._silent_mode = false;\r\n\t},\r\n\t/**\r\n\t *\t@desc: mark row as updated/normal. check mandatory fields,initiate autoupdate (if turned on)\r\n\t *\t@param: rowId - id of row to set update-status for\r\n\t *\t@param: state - true for \"updated\", false for \"not updated\"\r\n\t *\t@param: mode - update mode name\r\n\t *\t@type: public\r\n\t */\r\n\tsetUpdated: function (rowId, state, mode) {\r\n\t\tif (this._silent_mode) return;\r\n\t\tvar ind = this.findRow(rowId);\r\n\r\n\t\tmode = mode || \"updated\";\r\n\t\tvar existing = this.$scheduler.getUserData(rowId, this.action_param);\r\n\t\tif (existing && mode == \"updated\") mode = existing;\r\n\t\tif (state) {\r\n\t\t\tthis.set_invalid(rowId, false); //clear previous error flag\r\n\t\t\tthis.updatedRows[ind] = rowId;\r\n\t\t\tthis.$scheduler.setUserData(rowId, this.action_param, mode);\r\n\t\t\tif (this._in_progress[rowId])\r\n\t\t\t\tthis._in_progress[rowId] = \"wait\";\r\n\t\t} else {\r\n\t\t\tif (!this.is_invalid(rowId)) {\r\n\t\t\t\tthis.updatedRows.splice(ind, 1);\r\n\t\t\t\tthis.$scheduler.setUserData(rowId, this.action_param, \"\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.markRow(rowId, state, mode);\r\n\t\tif (state && this.autoUpdate) this.sendData(rowId);\r\n\t},\r\n\r\n\tmarkRow: function (id, state, mode) {\r\n\t\tvar str = \"\";\r\n\t\tvar invalid = this.is_invalid(id);\r\n\t\tif (invalid) {\r\n\t\t\tstr = this.styles[invalid];\r\n\t\t\tstate = true;\r\n\t\t}\r\n\t\tif (this.callEvent(\"onRowMark\", [id, state, mode, invalid])) {\r\n\t\t\t//default logic\r\n\t\t\tstr = this.styles[state ? mode : \"clear\"] + str;\r\n\r\n\t\t\tthis.$scheduler[this._methods[0]](id, str);\r\n\r\n\t\t\tif (invalid && invalid.details) {\r\n\t\t\t\tstr += this.styles[invalid + \"_cell\"];\r\n\t\t\t\tfor (var i = 0; i < invalid.details.length; i++)\r\n\t\t\t\t\tif (invalid.details[i])\r\n\t\t\t\t\t\tthis.$scheduler[this._methods[1]](id, i, str);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetActionByState: function(state) {\r\n\t\tif (state === \"inserted\") {\r\n\t\t\treturn \"create\";\r\n\t\t}\r\n\t\tif (state === \"updated\") {\r\n\t\t\treturn \"update\";\r\n\t\t}\r\n\t\tif (state === \"deleted\") {\r\n\t\t\treturn \"delete\";\r\n\t\t}\r\n\t\treturn \"update\";\r\n\t},\r\n\r\n\tgetState: function (id) {\r\n\t\treturn this.$scheduler.getUserData(id, this.action_param);\r\n\t},\r\n\tis_invalid: function (id) {\r\n\t\treturn this._invalid[id];\r\n\t},\r\n\tset_invalid: function (id, mode, details) {\r\n\t\tif (details) mode = {\r\n\t\t\tvalue: mode, details: details, toString: function () {\r\n\t\t\t\treturn this.value.toString();\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis._invalid[id] = mode;\r\n\t},\r\n\t/**\r\n\t *\t@desc: check mandatory fields and varify values of cells, initiate update (if specified)\r\n\t *\t@param: rowId - id of row to set update-status for\r\n\t *\t@type: public\r\n\t */\r\n\tcheckBeforeUpdate: function (rowId) {\r\n\t\treturn true;\r\n\t},\r\n\t/**\r\n\t *\t@desc: send row(s) values to server\r\n\t *\t@param: rowId - id of row which data to send. If not specified, then all \"updated\" rows will be send\r\n\t *\t@type: public\r\n\t */\r\n\tsendData: function (rowId) {\r\n\t\tif (this.$scheduler.editStop) this.$scheduler.editStop();\r\n\r\n\t\tif (typeof rowId == \"undefined\" || this._tSend) return this.sendAllData();\r\n\t\tif (this._in_progress[rowId]) return false;\r\n\r\n\t\tthis.messages = [];\r\n\t\tif (!this.checkBeforeUpdate(rowId) && this.callEvent(\"onValidationError\", [rowId, this.messages])) return false;\r\n\t\tthis._beforeSendData(this._getRowData(rowId), rowId);\r\n\t},\r\n\t_beforeSendData: function (data, rowId) {\r\n\t\tif (!this.callEvent(\"onBeforeUpdate\", [rowId, this.getState(rowId), data])) return false;\r\n\t\tthis._sendData(data, rowId);\r\n\t},\r\n\tserialize: function (data, id) {\r\n\t\tif (this._serializeAsJson) {\r\n\t\t\treturn  this._serializeAsJSON(data);\r\n\t\t}\r\n\r\n\t\tif (typeof data == \"string\")\r\n\t\t\treturn data;\r\n\t\tif (typeof id != \"undefined\")\r\n\t\t\treturn this.serialize_one(data, \"\");\r\n\t\telse {\r\n\t\t\tvar stack = [];\r\n\t\t\tvar keys = [];\r\n\t\t\tfor (var key in data)\r\n\t\t\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\t\t\tstack.push(this.serialize_one(data[key], key + this.post_delim));\r\n\t\t\t\t\tkeys.push(key);\r\n\t\t\t\t}\r\n\t\t\tstack.push(\"ids=\" + this.escape(keys.join(\",\")));\r\n\t\t\tif (this.$scheduler.security_key)\r\n\t\t\t\tstack.push(\"dhx_security=\" + (this.$scheduler.security_key));\r\n\t\t\treturn stack.join(\"&\");\r\n\t\t}\r\n\t},\r\n\tserialize_one: function (data, pref) {\r\n\t\tif (typeof data == \"string\")\r\n\t\t\treturn data;\r\n\t\tvar stack = [];\r\n\t\tvar serialized = \"\";\r\n\t\tfor (var key in data)\r\n\t\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\t\tif ((key == \"id\" || key == this.action_param) && this._tMode == \"REST\") continue;\r\n\t\t\t\tif (typeof data[key] === \"string\" || typeof data[key] === \"number\") {\r\n\t\t\t\t\tserialized = data[key];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tserialized = JSON.stringify(data[key]);\r\n\t\t\t\t}\r\n\t\t\t\tstack.push(this.escape((pref || \"\") + key) + \"=\" + this.escape(serialized));\r\n\t\t\t}\r\n\t\treturn stack.join(\"&\");\r\n\t},\r\n\t_applyPayload: function (url) {\r\n\t\tvar ajax = this.$scheduler.ajax;\r\n\t\tif (this._payload)\r\n\t\t\tfor (var key in this._payload)\r\n\t\t\t\turl = url + ajax.urlSeparator(url) + this.escape(key) + \"=\" + this.escape(this._payload[key]);\r\n\t\treturn url;\r\n\t},\r\n\t_sendData: function (dataToSend, rowId) {\r\n\t\tif (!dataToSend) {\r\n\t\t\treturn; // nothing to send\r\n\t\t}\r\n\t\tif (!this.callEvent(\"onBeforeDataSending\", rowId ? [rowId, this.getState(rowId), dataToSend] : [null, null, dataToSend])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (rowId) {\r\n\t\t\tthis._in_progress[rowId] = (new Date()).valueOf();\r\n\t\t}\r\n\r\n\t\tvar self = this;\r\n\t\tvar ajax = this.$scheduler.ajax;\r\n\r\n\t\tif (this._tMode === \"CUSTOM\") {\r\n\t\t\tvar state = this.getState(rowId);\r\n\t\t\tvar action = this.getActionByState(state);\r\n\t\t\tvar _onResolvedCreateUpdate = function (tag) {\r\n\t\t\t\tvar resultState = state;\r\n\t\t\t\tif(tag && tag.responseText && tag.setRequestHeader){\r\n\t\t\t\t\tif(tag.status !== 200){\r\n\t\t\t\t\t\tresultState = \"error\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\ttag = JSON.parse(tag.responseText);\r\n\t\t\t\t\t} catch (e){}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresultState = resultState || \"updated\";\r\n\t\t\t\tvar sid = rowId;\r\n\t\t\t\tvar tid = rowId;\r\n\r\n\t\t\t\tif (tag) {\r\n\t\t\t\t\tresultState = tag.action || resultState;\r\n\t\t\t\t\tsid = tag.sid || sid;\r\n\t\t\t\t\ttid = tag.id || tag.tid || tid;\r\n\t\t\t\t}\r\n\t\t\t\tself.afterUpdateCallback(sid, tid, resultState, tag);\r\n\t\t\t};\r\n\r\n\t\t\tconst routerMode = \"event\";\r\n\t\t\tvar actionPromise;\r\n\t\t\tif (this._router instanceof Function) {\r\n\t\t\t\tactionPromise = this._router(routerMode, action, dataToSend, rowId);\r\n\t\t\t} else {\r\n\t\t\t\tswitch (state) {\r\n\t\t\t\t\tcase \"inserted\":\r\n\t\t\t\t\t\tactionPromise = this._router[routerMode].create(dataToSend);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"deleted\":\r\n\t\t\t\t\t\tactionPromise = this._router[routerMode].delete(rowId);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tactionPromise = this._router[routerMode].update(dataToSend, rowId);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(actionPromise){\r\n\t\t\t\t// neither promise nor {tid: newId} response object\r\n\t\t\t\tif(!actionPromise.then &&\r\n\t\t\t\t\t(actionPromise.id === undefined && actionPromise.tid === undefined && actionPromise.action === undefined)){\r\n\t\t\t\t\tthrow new Error(\"Incorrect router return value. A Promise or a response object is expected\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(actionPromise.then){\r\n\t\t\t\t\tactionPromise.then(_onResolvedCreateUpdate).catch(function(error) {\r\n\t\t\t\t\t\tif(error && error.action){\r\n\t\t\t\t\t\t\t_onResolvedCreateUpdate(error);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t_onResolvedCreateUpdate({ action: \"error\", value: error});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// custom method may return a response object in case of sync action\r\n\t\t\t\t\t_onResolvedCreateUpdate(actionPromise);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t_onResolvedCreateUpdate(null);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar queryParams = {\r\n\t\t\tcallback: function(xml) {\r\n\t\t\t\tvar ids = [];\r\n\r\n\t\t\t\tif (rowId) {\r\n\t\t\t\t\tids.push(rowId);\r\n\t\t\t\t} else if (dataToSend) {\r\n\t\t\t\t\tfor (var key in dataToSend) {\r\n\t\t\t\t\t\tids.push(key);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn self.afterUpdate(self, xml, ids);\r\n\t\t\t},\r\n\t\t\theaders: self._headers\r\n\t\t};\r\n\r\n\t\tvar urlParams = this.serverProcessor + (this._user ? (ajax.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, \"dhx_version=\" + this.$scheduler.getUserData(0, \"version\")].join(\"&\")) : \"\");\r\n\t\tvar url = this._applyPayload(urlParams);\r\n\t\tvar data;\r\n\r\n\t\tswitch (this._tMode) {\r\n\t\t\tcase \"GET\":\r\n\t\t\t\tdata = this._cleanupArgumentsBeforeSend(dataToSend);\r\n\t\t\t\tqueryParams.url = url + ajax.urlSeparator(url) + this.serialize(data, rowId);\r\n\t\t\t\tqueryParams.method = \"GET\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"POST\":\r\n\t\t\t\tdata = this._cleanupArgumentsBeforeSend(dataToSend);\r\n\t\t\t\tqueryParams.url = url;\r\n\t\t\t\tqueryParams.method = \"POST\";\r\n\t\t\t\tqueryParams.data = this.serialize(data, rowId);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"JSON\":\r\n\t\t\t\tdata = {};\r\n\t\t\t\tvar preprocessedData = this._cleanupItemBeforeSend(dataToSend);\r\n\t\t\t\tfor (var key in preprocessedData) {\r\n\t\t\t\t\tif (key === this.action_param || key === \"id\" || key === \"gr_id\") {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdata[key] = preprocessedData[key];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tqueryParams.url = url;\r\n\t\t\t\tqueryParams.method = \"POST\";\r\n\t\t\t\tqueryParams.data = JSON.stringify({\r\n\t\t\t\t\tid: rowId,\r\n\t\t\t\t\taction: dataToSend[this.action_param],\r\n\t\t\t\t\tdata: data\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"REST\":\r\n\t\t\tcase \"REST-JSON\":\r\n\t\t\t\turl = urlParams.replace(/(&|\\?)editing=true/, \"\");\r\n\t\t\t\tdata = \"\";\r\n\r\n\t\t\t\tswitch (this.getState(rowId)) {\r\n\t\t\t\t\tcase \"inserted\":\r\n\t\t\t\t\t\tqueryParams.method = \"POST\";\r\n\t\t\t\t\t\tqueryParams.data = this.serialize(dataToSend, rowId);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"deleted\":\r\n\t\t\t\t\t\tqueryParams.method = \"DELETE\";\r\n\t\t\t\t\t\turl = url + (url.slice(-1) === \"/\" ? \"\" : \"/\") + rowId;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tqueryParams.method = \"PUT\";\r\n\t\t\t\t\t\tqueryParams.data = this.serialize(dataToSend, rowId);\r\n\t\t\t\t\t\turl = url + (url.slice(-1) === \"/\" ? \"\" : \"/\") + rowId;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tqueryParams.url = this._applyPayload(url);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis._waitMode++;\r\n\t\treturn ajax.query(queryParams);\r\n\t},\r\n\tsendAllData: function () {\r\n\t\tif (!this.updatedRows.length || this.updateMode === \"off\") { // FIXME: need to leave checking 'this.updateMode === \"off\"'?\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.messages = [];\r\n\t\tvar valid = true;\r\n\r\n\t\tthis._forEachUpdatedRow(function(rowId) {\r\n\t\t\tvalid = valid && this.checkBeforeUpdate(rowId);\r\n\t\t});\r\n\r\n\t\tif (!valid && !this.callEvent(\"onValidationError\", [\"\", this.messages])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (this._tSend) {\r\n\t\t\tthis._sendData(this._getAllData());\r\n\t\t} else {\r\n\t\t\tthis._forEachUpdatedRow(function(rowId) {\r\n\t\t\t\tif (!this._in_progress[rowId]) {\r\n\t\t\t\t\tif (this.is_invalid(rowId)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._beforeSendData(this._getRowData(rowId), rowId);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t_getAllData: function (rowId) {\r\n\t\tvar out = {};\r\n\t\tvar has_one = false;\r\n\t\tthis._forEachUpdatedRow(function(id) {\r\n\t\t\tif (this._in_progress[id] || this.is_invalid(id)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar row = this._getRowData(id);\r\n\t\t\tif (!this.callEvent(\"onBeforeUpdate\", [id, this.getState(id), row])) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tout[id] = row;\r\n\t\t\thas_one = true;\r\n\t\t\tthis._in_progress[id] = (new Date()).valueOf();\r\n\t\t});\r\n\t\treturn has_one ? out : null;\r\n\t},\r\n\r\n\tfindRow: function (pattern) {\r\n\t\tvar i = 0;\r\n\t\tfor (i = 0; i < this.updatedRows.length; i++)\r\n\t\t\tif (pattern == this.updatedRows[i]) break;\r\n\t\treturn i;\r\n\t},\r\n\r\n\t/**\r\n\t *\t@desc: define custom actions\r\n\t *\t@param: name - name of action, same as value of action attribute\r\n\t *\t@param: handler - custom function, which receives a XMl response content for action\r\n\t *\t@type: private\r\n\t */\r\n\tdefineAction: function (name, handler) {\r\n\t\tif (!this._uActions) this._uActions = {};\r\n\t\tthis._uActions[name] = handler;\r\n\t},\r\n\r\n\t/**\r\n\t *\t @desc: used in combination with setOnBeforeUpdateHandler to create custom client-server transport system\r\n\t *\t @param: sid - id of item before update\r\n\t *\t @param: tid - id of item after up0ate\r\n\t *\t @param: action - action name\r\n\t *\t @type: public\r\n\t *\t @topic: 0\r\n\t */\r\n\tafterUpdateCallback: function (sid, tid, action, btag) {\r\n\t\tif(!this.$scheduler){\r\n\t\t\t// destructor has been called before the callback\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar marker = sid;\r\n\t\tvar correct = (action !== \"error\" && action !== \"invalid\");\r\n\t\tif (!correct) {\r\n\t\t\tthis.set_invalid(sid, action);\r\n\t\t}\r\n\t\tif ((this._uActions) && (this._uActions[action]) && (!this._uActions[action](btag))) {\r\n\t\t\treturn (delete this._in_progress[marker]);\r\n\t\t}\r\n\r\n\t\tif (this._in_progress[marker] !== \"wait\") {\r\n\t\t\tthis.setUpdated(sid, false);\r\n\t\t}\r\n\r\n\t\tvar originalSid = sid;\r\n\r\n\t\tswitch (action) {\r\n\t\t\tcase \"inserted\":\r\n\t\t\tcase \"insert\":\r\n\t\t\t\tif (tid != sid) {\r\n\t\t\t\t\tthis.setUpdated(sid, false);\r\n\t\t\t\t\tthis.$scheduler[this._methods[2]](sid, tid);\r\n\t\t\t\t\tsid = tid;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"delete\":\r\n\t\t\tcase \"deleted\":\r\n\t\t\t\tthis.$scheduler.setUserData(sid, this.action_param, \"true_deleted\");\r\n\t\t\t\tthis.$scheduler[this._methods[3]](sid, tid);\r\n\t\t\t\tdelete this._in_progress[marker];\r\n\t\t\t\treturn this.callEvent(\"onAfterUpdate\", [sid, action, tid, btag]);\r\n\t\t}\r\n\r\n\t\tif (this._in_progress[marker] !== \"wait\") {\r\n\t\t\tif (correct) {\r\n\t\t\t\tthis.$scheduler.setUserData(sid, this.action_param, \"\");\r\n\t\t\t}\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t} else {\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t\tthis.setUpdated(tid, true, this.$scheduler.getUserData(sid, this.action_param));\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterUpdate\", [originalSid, action, tid, btag]);\r\n\t},\r\n\r\n\t_errorResponse: function (xml, id){\r\n\t\tif(this.$scheduler && this.$scheduler.callEvent){\r\n\t\t\tthis.$scheduler.callEvent(\"onSaveError\", [id, xml.xmlDoc]);\r\n\t\t}\r\n\t\treturn this.cleanUpdate(id);\r\n\t},\r\n\r\n\t_setDefaultTransactionMode: function () {\r\n\t\tif (this.serverProcessor) {\r\n\t\t\tthis.setTransactionMode(\"POST\", true);\r\n\t\t\tthis.serverProcessor += (this.serverProcessor.indexOf(\"?\") !== -1 ? \"&\" : \"?\") + \"editing=true\";\r\n\t\t\tthis._serverProcessor = this.serverProcessor;\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t *\t@desc: response from server\r\n\t *\t@param: xml - XMLLoader object with response XML\r\n\t *\t@type: private\r\n\t */\r\n\tafterUpdate: function (that, xml, id) {\r\n\t\tvar ajax = this.$scheduler.ajax;\r\n\r\n\t\tif (xml.xmlDoc.status !== 200){\r\n\t\t\tthis._errorResponse(xml, id);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// try to use json first\r\n\t\tvar tag;\r\n\t\ttry {\r\n\t\t\ttag = JSON.parse(xml.xmlDoc.responseText);\r\n\t\t} catch (e) {\r\n\t\t\t// empty response also can be processed by json handler\r\n\t\t\tif (!xml.xmlDoc.responseText.length) {\r\n\t\t\t\ttag = {};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (tag) {\r\n\t\t\tvar action = tag.action || this.getState(id) || \"updated\";\r\n\t\t\tvar sid = tag.sid || id[0];\r\n\t\t\tvar tid = tag.tid || id[0];\r\n\t\t\tthat.afterUpdateCallback(sid, tid, action, tag);\r\n\t\t\tthat.finalizeUpdate();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// xml response\r\n\t\tvar top = ajax.xmltop(\"data\", xml.xmlDoc); // fix incorrect content type in IE\r\n\t\tif (!top) {\r\n\t\t\treturn this._errorResponse(xml, id);\r\n\t\t}\r\n\t\tvar atag = ajax.xpath(\"//data/action\", top);\r\n\t\tif (!atag.length) {\r\n\t\t\treturn this._errorResponse(xml, id);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < atag.length; i++) {\r\n\t\t\tvar btag = atag[i];\r\n\t\t\tvar action = btag.getAttribute(\"type\");\r\n\t\t\tvar sid = btag.getAttribute(\"sid\");\r\n\t\t\tvar tid = btag.getAttribute(\"tid\");\r\n\r\n\t\t\tthat.afterUpdateCallback(sid, tid, action, btag);\r\n\t\t}\r\n\t\tthat.finalizeUpdate();\r\n\t},\r\n\tcleanUpdate: function (id) {\r\n\t\tif (id)\r\n\t\t\tfor (var i = 0; i < id.length; i++)\r\n\t\t\t\tdelete this._in_progress[id[i]];\r\n\t},\r\n\tfinalizeUpdate: function () {\r\n\t\tif (this._waitMode) this._waitMode--;\r\n\r\n\t\tthis.callEvent(\"onAfterUpdateFinish\", []);\r\n\t\tif (!this.updatedRows.length)\r\n\t\t\tthis.callEvent(\"onFullSync\", []);\r\n\t},\r\n\r\n\t/**\r\n\t *\t@desc: initializes data-processor\r\n\t *\t@param: scheduler - dhtmlxScheduler object to attach this data-processor to\r\n\t *\t@type: public\r\n\t */\r\n\tinit: function (scheduler) {\r\n\t\tif (this._initialized) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.$scheduler = scheduler;\r\n\t\tif (this.$scheduler._dp_init) {\r\n\t\t\tthis.$scheduler._dp_init(this);\r\n\t\t}\r\n\r\n\t\tthis._setDefaultTransactionMode();\r\n\r\n\t\tthis._methods=this._methods||[\"_set_event_text_style\",\"\",\"_dp_change_event_id\",\"_dp_hook_delete\"];\r\n\t\textendScheduler(this.$scheduler, this);\r\n\t\tvar dataProcessorEvents = new DataProcessorEvents(this.$scheduler, this);\r\n\t\tdataProcessorEvents.attach();\r\n\t\tthis.attachEvent(\"onDestroy\", function() {\r\n\t\t\tdelete this._getRowData;\r\n\r\n\t\t\tdelete this.$scheduler._dp;\r\n\t\t\tdelete this.$scheduler._dataprocessor;\r\n\t\t\tdelete this.$scheduler._set_event_text_style;\r\n\t\t\tdelete this.$scheduler._dp_change_event_id;\r\n\t\t\tdelete this.$scheduler._dp_hook_delete;\r\n\t\t\tdelete this.$scheduler;\r\n\t\t\tdataProcessorEvents.detach();\r\n\t\t});\r\n\t\tthis.$scheduler.callEvent(\"onDataProcessorReady\", [this]);\r\n\t\tthis._initialized = true;\r\n\r\n\t\tscheduler._dataprocessor=this;\r\n\t},\r\n\r\n\tsetOnAfterUpdate: function (ev) {\r\n\t\tthis.attachEvent(\"onAfterUpdate\", ev);\r\n\t},\r\n\tsetOnBeforeUpdateHandler: function (func) {\r\n\t\tthis.attachEvent(\"onBeforeDataSending\", func);\r\n\t},\r\n\r\n\t/* starts autoupdate mode\r\n\t\t@param interval time interval for sending update requests\r\n\t*/\r\n\tsetAutoUpdate: function (interval, user) {\r\n\t\tinterval = interval || 2000;\r\n\r\n\t\tthis._user = user || (new Date()).valueOf();\r\n\t\tthis._need_update = false;\r\n\t\t//this._loader = null;\r\n\t\tthis._update_busy = false;\r\n\r\n\t\tthis.attachEvent(\"onAfterUpdate\", function (sid, action, tid, xml_node) {\r\n\t\t\tthis.afterAutoUpdate(sid, action, tid, xml_node);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onFullSync\", function () {\r\n\t\t\tthis.fullSync();\r\n\t\t});\r\n\r\n\t\tvar self = this;\r\n\t\tlet intervalId = global.setInterval(function () {\r\n\t\t\tself.loadUpdate();\r\n\t\t}, interval);\r\n\t\tthis.attachEvent(\"onDestroy\", function(){\r\n\t\t\tclearInterval(intervalId);\r\n\t\t});\r\n\t},\r\n\r\n\t/* process updating request answer\r\n\t\tif status == collision version is deprecated\r\n\t\tset flag for autoupdating immediately\r\n\t*/\r\n\tafterAutoUpdate: function (sid, action, tid, xml_node) {\r\n\t\tif (action == 'collision') {\r\n\t\t\tthis._need_update = true;\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/* callback function for onFillSync event\r\n\t\tcall update function if it's need\r\n\t*/\r\n\tfullSync: function () {\r\n\t\tif (this._need_update) {\r\n\t\t\tthis._need_update = false;\r\n\t\t\tthis.loadUpdate();\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/* sends query to the server and call callback function\r\n\t*/\r\n\tgetUpdates: function (url, callback) {\r\n\t\tvar ajax = this.$scheduler.ajax;\r\n\t\tif (this._update_busy)\r\n\t\t\treturn false;\r\n\t\telse\r\n\t\t\tthis._update_busy = true;\r\n\r\n\t\tajax.get(url, callback);\r\n\t},\r\n\r\n\t/* returns xml node value\r\n\t\t@param node\r\n\t\t\txml node\r\n\t*/\r\n\t_getXmlNodeValue: function(node) {\r\n\t\tif (node.firstChild) {\r\n\t\t\treturn node.firstChild.nodeValue;\r\n\t\t}\r\n\t\treturn \"\";\r\n\t},\r\n\r\n\t/* loads updates and processes them\r\n\t*/\r\n\tloadUpdate: function () {\r\n\t\tvar self = this;\r\n\t\tvar ajax = this.$scheduler.ajax;\r\n\t\tvar version = this.$scheduler.getUserData(0, \"version\");\r\n\t\tvar url = this.serverProcessor + ajax.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, \"dhx_version=\" + version].join(\"&\");\r\n\t\turl = url.replace(\"editing=true&\", \"\");\r\n\t\tthis.getUpdates(url, function (xml) {\r\n\t\t\tvar vers = ajax.xpath(\"//userdata\", xml);\r\n\t\t\tself.$scheduler.setUserData(0, \"version\", self._getXmlNodeValue(vers[0]));\r\n\r\n\t\t\tvar updates = ajax.xpath(\"//update\", xml);\r\n\t\t\tif (updates.length) {\r\n\t\t\t\tself._silent_mode = true;\r\n\r\n\t\t\t\tfor (var i = 0; i < updates.length; i++) {\r\n\t\t\t\t\tvar status = updates[i].getAttribute(\"status\");\r\n\t\t\t\t\tvar id = updates[i].getAttribute(\"id\");\r\n\t\t\t\t\tvar parent = updates[i].getAttribute(\"parent\");\r\n\t\t\t\t\tswitch (status) {\r\n\t\t\t\t\t\tcase \"inserted\":\r\n\t\t\t\t\t\t\tthis.callEvent(\"insertCallback\", [updates[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"updated\":\r\n\t\t\t\t\t\t\tthis.callEvent(\"updateCallback\", [updates[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"deleted\":\r\n\t\t\t\t\t\t\tthis.callEvent(\"deleteCallback\", [updates[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tself._silent_mode = false;\r\n\t\t\t}\r\n\t\t\tself._update_busy = false;\r\n\t\t\tself = null;\r\n\t\t});\r\n\t},\r\n\r\n\tdestructor: function() {\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tthis.updatedRows = [];\r\n\t\tthis._in_progress = {};\r\n\t\tthis._invalid = {};\r\n\t\tthis._headers = null;\r\n\t\tthis._payload = null;\r\n\t\tdelete this._initialized;\r\n\t},\r\n\r\n\turl: function(url) {\r\n\t\tthis.serverProcessor = this._serverProcessor = url;\r\n\t},\r\n\r\n\t_serializeAsJSON: function(data) {\r\n\t\tif (typeof data === \"string\") {\r\n\t\t\treturn data;\r\n\t\t}\r\n\r\n\t\tvar copy = this.$scheduler.utils.copy(data);\r\n\t\tif (this._tMode === \"REST-JSON\") {\r\n\t\t\tdelete copy.id;\r\n\t\t\tdelete copy[this.action_param];\r\n\t\t}\r\n\r\n\t\treturn JSON.stringify(copy);\r\n\t},\r\n\r\n\t// GET/POST/JSON modes of the dataProcessor didn't send the whole data items in 'delete' requests\r\n\t// clear extra info from the data in order not to change the request format\r\n\t_cleanupArgumentsBeforeSend: function(dataToSend) {\r\n\t\tvar processedData;\r\n\t\tif(dataToSend[this.action_param] === undefined){// hash of updated items, and not an individual item\r\n\t\t\tprocessedData = {};\r\n\t\t\tfor(var i in dataToSend) {\r\n\t\t\t\tprocessedData[i] = this._cleanupArgumentsBeforeSend(dataToSend[i]);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tprocessedData = this._cleanupItemBeforeSend(dataToSend);\r\n\t\t}\r\n\t\treturn processedData;\r\n\t},\r\n\t_cleanupItemBeforeSend: function(updatedItem) {\r\n\t\tvar output = null;\r\n\t\tif(updatedItem){\r\n\t\t\tif(updatedItem[this.action_param] === \"deleted\"){\r\n\t\t\t\toutput = {};\r\n\t\t\t\toutput.id = updatedItem.id;\r\n\t\t\t\toutput[this.action_param] = updatedItem[this.action_param];\r\n\t\t\t}else{\r\n\t\t\t\toutput = updatedItem;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn output;\r\n\t},\r\n\r\n\t_forEachUpdatedRow: function(code) {\r\n\t\tvar updatedRows = this.updatedRows.slice();\r\n\t\tfor (var i = 0; i < updatedRows.length; i++) {\r\n\t\t\tvar rowId = updatedRows[i];\r\n\t\t\tif (this.$scheduler.getUserData(rowId, this.action_param)) {\r\n\t\t\t\tcode.call(this, rowId);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_prepareDataItem: function(item) {\r\n\t\tvar processedItem = {};\r\n\t\tvar scheduler = this.$scheduler;\r\n\t\tvar copy = scheduler.utils.copy(item);\r\n\t\tfor (var i in copy) {\r\n\t\t\tif (i.indexOf(\"_\") === 0) {\r\n\t\t\t\tcontinue;\r\n\t\t\t} else if (copy[i]) {\r\n\t\t\t\tif(copy[i].getUTCFullYear){\r\n\t\t\t\t\tprocessedItem[i] = scheduler._helpers.formatDate(copy[i]);\r\n\t\t\t\t} else if(typeof copy[i] == \"object\") {\r\n\t\t\t\t\tprocessedItem[i] = this._prepareDataItem(copy[i]);\r\n\t\t\t\t} else if(copy[i] === null) {\r\n\t\t\t\t\tprocessedItem[i] = \"\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tprocessedItem[i] = copy[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tprocessedItem[this.action_param] = scheduler.getUserData(item.id, this.action_param);\r\n\t\treturn processedItem;\r\n\t},\r\n\t_getRowData: function(id) {\r\n\t\tvar dataItem = this.$scheduler.getEvent(id);\r\n\t\tif (!dataItem) {\r\n\t\t\tdataItem = { id: id };\r\n\t\t}\r\n\t\treturn this._prepareDataItem(dataItem);\r\n\t}\r\n};\r\n\r\n\r\nexport default function extend(scheduler) {\r\n\r\nscheduler.createDataProcessor = function(config) {\r\n\tvar router;\r\n\tvar tMode;\r\n\tif (config instanceof Function) {\r\n\t\trouter = config;\r\n\t} else if (config.hasOwnProperty(\"router\")) {\r\n\t\trouter = config.router;\r\n\t} else if(config.hasOwnProperty(\"event\")){\r\n\t\trouter = config;\r\n\t}\r\n\r\n\tif (router) {\r\n\t\ttMode = \"CUSTOM\";\r\n\t} else {\r\n\t\ttMode = config.mode || \"REST-JSON\";\r\n\t}\r\n\r\n\tvar dp = new DataProcessor(config.url);\r\n\tdp.init(scheduler);\r\n\tdp.setTransactionMode({\r\n\t\tmode: tMode,\r\n\t\trouter: router\r\n\t}, config.batchUpdate); // FIXME: config.batchUpdate where it is explained?\r\n\treturn dp;\r\n};\r\n\r\nscheduler.DataProcessor = DataProcessor;\r\n\r\n}\r\n\r\n//var dataProcessor = global.dataProcessor = DataProcessor; // for old","import utils from \"./utils/utils\";\r\nimport domHelpers from \"./utils/dom_helpers\";\r\n\r\n\r\nexport default function(scheduler) {\r\n\r\n\tvar boxAttribute = \"data-dhxbox\";\r\n\r\n\tvar _dhx_msg_cfg = null;\r\n\r\n\tfunction callback(config, result) {\r\n\t\tvar usercall = config.callback;\r\n\t\tmodalBox.hide(config.box);\r\n\r\n\t\t_dhx_msg_cfg = config.box = null;\r\n\tif (usercall)\r\n\t\t\tusercall(result);\r\n\t}\r\n\r\n\tfunction modal_key(event) {\r\n\t\tif (_dhx_msg_cfg) {\r\n\r\n\t\t\tvar code = event.which || event.keyCode;\r\n\t\t\tvar preventDefault = false;\r\n\r\n\t\t\tif (messageBox.keyboard) {\r\n\t\t\t\tif (code == 13 || code == 32) {\r\n\t\t\t\t\t// default behavior is to confirm/submit popup on space/enter\r\n\t\t\t\t\t// if browser focus is set on button element - do button click instead of default behavior\r\n\t\t\t\t\tvar target = event.target || event.srcElement;\r\n\t\t\t\t\tif (domHelpers.getClassName(target).indexOf(\"scheduler_popup_button\") > -1 && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcallback(_dhx_msg_cfg, true);\r\n\t\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (code == 27) {\r\n\t\t\t\t\tcallback(_dhx_msg_cfg, false);\r\n\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (preventDefault) {\r\n\t\t\t\tif (event.preventDefault){\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t\treturn !(event.cancelBubble = true);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tscheduler.event(document, \"keydown\", modal_key, true);\r\n\r\n\tfunction modality(mode) {\r\n\t\tif (!modality.cover) {\r\n\t\t\tmodality.cover = document.createElement(\"div\");\r\n\t\t\t//necessary for IE only\r\n\t\t\tscheduler.event(modality.cover, \"keydown\", modal_key);\r\n\t\t\tmodality.cover.className = \"dhx_modal_cover\";\r\n\t\t\tdocument.body.appendChild(modality.cover);\r\n\t\t}\r\n\r\n\t\tmodality.cover.style.display = mode ? \"inline-block\" : \"none\";\r\n\t}\r\n\r\n\tfunction button(text, classValue, result) {\r\n\t\tvar buttonAriaAttrs = scheduler._waiAria.messageButtonAttrString(text);\r\n\t\tvar name = (classValue || \"\").toLowerCase().replace(/ /g, \"_\");\r\n\t\tvar buttonCss = `scheduler_${name}_button dhtmlx_${name}_button`; \r\n\t\treturn `<div ${buttonAriaAttrs} class='scheduler_popup_button dhtmlx_popup_button ${buttonCss}' data-result='${result}' result='${result}' ><div>${text}</div></div>`;\r\n\t}\r\n\r\n\tfunction info(text) {\r\n\t\tif (!messageBox.area) {\r\n\t\t\tmessageBox.area = document.createElement(\"div\");\r\n\t\t\tmessageBox.area.className = \"scheduler_message_area dhtmlx_message_area\";\r\n\t\t\tmessageBox.area.style[messageBox.position] = \"5px\";\r\n\t\t\tdocument.body.appendChild(messageBox.area);\r\n\t\t}\r\n\r\n\t\tmessageBox.hide(text.id);\r\n\t\tvar message = document.createElement(\"div\");\r\n\t\tmessage.innerHTML = \"<div>\" + text.text + \"</div>\";\r\n\t\tmessage.className = \"scheduler-info dhtmlx-info scheduler-\" + text.type + \" dhtmlx-\" + text.type;\r\n\t\tscheduler.event(message, \"click\",function () {\r\n\t\t\tmessageBox.hide(text.id);\r\n\t\t\ttext = null;\r\n\t\t});\r\n\r\n\t\tscheduler._waiAria.messageInfoAttr(message);\r\n\r\n\t\tif (messageBox.position == \"bottom\" && messageBox.area.firstChild)\r\n\t\t\tmessageBox.area.insertBefore(message, messageBox.area.firstChild);\r\n\t\telse\r\n\t\t\tmessageBox.area.appendChild(message);\r\n\r\n\t\tif (text.expire > 0)\r\n\t\t\tmessageBox.timers[text.id] = window.setTimeout(function () {\r\n\t\t\t\t// GS-1213: We need that when Scheduler is destroyed\r\n\t\t\t\tif (messageBox) messageBox.hide(text.id);\r\n\t\t\t}, text.expire);\r\n\r\n\t\tmessageBox.pull[text.id] = message;\r\n\t\tmessage = null;\r\n\r\n\t\treturn text.id;\r\n\t}\r\n\r\n\tfunction getFirstDefined() {\r\n\t\tvar values = [].slice.apply(arguments, [0]);\r\n\r\n\t\tfor (var i = 0; i < values.length; i++) {\r\n\t\t\tif (values[i]) {\r\n\t\t\t\treturn values[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _boxStructure(config, ok, cancel) {\r\n\t\tvar box = document.createElement(\"div\");\r\n\r\n\t\tvar contentId = utils.uid();\r\n\t\tscheduler._waiAria.messageModalAttr(box, contentId);\r\n\r\n\r\n\t\tbox.className = \" scheduler_modal_box dhtmlx_modal_box scheduler-\" + config.type + \" dhtmlx-\" + config.type;\r\n\t\tbox.setAttribute(boxAttribute, 1);\r\n\r\n\t\tvar inner = '';\r\n\r\n\t\tif (config.width)\r\n\t\t\tbox.style.width = config.width;\r\n\t\tif (config.height)\r\n\t\t\tbox.style.height = config.height;\r\n\t\tif (config.title)\r\n\t\t\tinner += '<div class=\"scheduler_popup_title dhtmlx_popup_title\">' + config.title + '</div>';\r\n\t\tinner += '<div class=\"scheduler_popup_text dhtmlx_popup_text\" id=\"' + contentId + '\"><span>' + (config.content ? '' : config.text) + '</span></div><div  class=\"scheduler_popup_controls dhtmlx_popup_controls\">';\r\n\t\tif (ok)\r\n\t\t\tinner += button(getFirstDefined(config.ok, scheduler.locale.labels.message_ok, \"OK\"), \"ok\", true);\r\n\t\tif (cancel)\r\n\t\t\tinner += button(getFirstDefined(config.cancel, scheduler.locale.labels.message_cancel, \"Cancel\"), \"cancel\", false);\r\n\r\n\t\tif (config.buttons) {\r\n\t\t\tfor (var i = 0; i < config.buttons.length; i++) {\r\n\t\t\t\tvar btn = config.buttons[i];\r\n\t\t\t\tif (typeof btn == \"object\") {\r\n\t\t\t\t\t// Support { label:\"Save\", css:\"main_button\", value:\"save\" }\r\n\t\t\t\t\tvar label = btn.label;\r\n\t\t\t\t\tvar css = btn.css || (\"scheduler_\" + btn.label.toLowerCase() + \"_button dhtmlx_\" + btn.label.toLowerCase() + \"_button\");\r\n\t\t\t\t\tvar value = btn.value || i;\r\n\t\t\t\t\tinner += button(label, css, value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tinner += button(btn, btn, i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinner += '</div>';\r\n\t\tbox.innerHTML = inner;\r\n\r\n\t\tif (config.content) {\r\n\t\t\tvar node = config.content;\r\n\t\t\tif (typeof node == \"string\")\r\n\t\t\t\tnode = document.getElementById(node);\r\n\t\t\tif (node.style.display == 'none')\r\n\t\t\t\tnode.style.display = \"\";\r\n\t\t\tbox.childNodes[config.title ? 1 : 0].appendChild(node);\r\n\t\t}\r\n\r\n\t\tscheduler.event(box, \"click\", function (event) {\r\n\t\t\tvar source = event.target || event.srcElement;\r\n\t\t\tif (!source.className) source = source.parentNode;\r\n\t\t\tif (domHelpers.closest(source, \".scheduler_popup_button\")) {\r\n\t\t\t\tvar result = source.getAttribute(\"data-result\");\r\n\t\t\t\tresult = (result == \"true\") || (result == \"false\" ? false : result);\r\n\t\t\t\tcallback(config, result);\r\n\t\t\t}\r\n\t\t});\r\n\t\tconfig.box = box;\r\n\t\tif (ok || cancel)\r\n\t\t\t_dhx_msg_cfg = config;\r\n\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction _createBox(config, ok, cancel) {\r\n\t\tvar box = config.tagName ? config : _boxStructure(config, ok, cancel);\r\n\r\n\t\tif (!config.hidden)\r\n\t\t\tmodality(true);\r\n\t\tdocument.body.appendChild(box);\r\n\t\tvar x = Math.abs(Math.floor(((window.innerWidth || document.documentElement.offsetWidth) - box.offsetWidth) / 2));\r\n\t\tvar y = Math.abs(Math.floor(((window.innerHeight || document.documentElement.offsetHeight) - box.offsetHeight) / 2));\r\n\t\tif (config.position == \"top\")\r\n\t\t\tbox.style.top = \"-3px\";\r\n\t\telse\r\n\t\t\tbox.style.top = y + 'px';\r\n\t\tbox.style.left = x + 'px';\r\n\t\t//necessary for IE only\r\n\t\tscheduler.event(box, \"keydown\", modal_key);\r\n\r\n\t\tmodalBox.focus(box);\r\n\r\n\t\tif (config.hidden)\r\n\t\t\tmodalBox.hide(box);\r\n\r\n\t\tscheduler.callEvent(\"onMessagePopup\", [box]);\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction alertPopup(config) {\r\n\t\treturn _createBox(config, true, false);\r\n\t}\r\n\r\n\tfunction confirmPopup(config) {\r\n\t\treturn _createBox(config, true, true);\r\n\t}\r\n\r\n\tfunction boxPopup(config) {\r\n\t\treturn _createBox(config);\r\n\t}\r\n\r\n\tfunction box_params(text, type, callback) {\r\n\t\tif (typeof text != \"object\") {\r\n\t\t\tif (typeof type == \"function\") {\r\n\t\t\t\tcallback = type;\r\n\t\t\t\ttype = \"\";\r\n\t\t\t}\r\n\t\t\ttext = {text: text, type: type, callback: callback};\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\r\n\tfunction params(text, type, expire, id) {\r\n\t\tif (typeof text != \"object\")\r\n\t\t\ttext = {text: text, type: type, expire: expire, id: id};\r\n\t\ttext.id = text.id || utils.uid();\r\n\t\ttext.expire = text.expire || messageBox.expire;\r\n\t\treturn text;\r\n\t}\r\n\r\n\tvar alertBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"confirm\";\r\n\t\treturn alertPopup(text);\r\n\t};\r\n\tvar confirmBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn confirmPopup(text);\r\n\t};\r\n\tvar modalBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn boxPopup(text);\r\n\t};\r\n\tmodalBox.hide = function (node) {\r\n\t\twhile (node && node.getAttribute && !node.getAttribute(boxAttribute))\r\n\t\t\tnode = node.parentNode;\r\n\t\tif (node) {\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tmodality(false);\r\n\r\n\t\t\tscheduler.callEvent(\"onAfterMessagePopup\", [node]);\r\n\t\t}\r\n\t};\r\n\r\n\tmodalBox.focus = function (node) {\r\n\t\tsetTimeout(function () {\r\n\t\t\tvar focusable = domHelpers.getFocusableNodes(node);\r\n\t\t\tif (focusable.length) {\r\n\t\t\t\tif (focusable[0].focus) focusable[0].focus();\r\n\t\t\t}\r\n\t\t}, 1);\r\n\t};\r\n\r\n\tvar messageBox = function (text, type, expire, id) {\r\n\t\ttext = params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"info\";\r\n\r\n\t\tvar subtype = text.type.split(\"-\")[0];\r\n\t\tswitch (subtype) {\r\n\t\t\tcase \"alert\":\r\n\t\t\t\treturn alertPopup(text);\r\n\t\t\tcase \"confirm\":\r\n\t\t\t\treturn confirmPopup(text);\r\n\t\t\tcase \"modalbox\":\r\n\t\t\t\treturn boxPopup(text);\r\n\t\t\tdefault:\r\n\t\t\t\treturn info(text);\r\n\t\t}\r\n\t};\r\n\r\n\tmessageBox.seed = (new Date()).valueOf();\r\n\tmessageBox.uid = utils.uid;\r\n\tmessageBox.expire = 4000;\r\n\tmessageBox.keyboard = true;\r\n\tmessageBox.position = \"top\";\r\n\tmessageBox.pull = {};\r\n\tmessageBox.timers = {};\r\n\r\n\tmessageBox.hideAll = function () {\r\n\t\tfor (var key in messageBox.pull)\r\n\t\t\tmessageBox.hide(key);\r\n\t};\r\n\tmessageBox.hide = function (id) {\r\n\t\tvar obj = messageBox.pull[id];\r\n\t\tif (obj && obj.parentNode) {\r\n\t\t\twindow.setTimeout(function () {\r\n\t\t\t\tobj.parentNode.removeChild(obj);\r\n\t\t\t\tobj = null;\r\n\t\t\t}, 2000);\r\n\t\t\tobj.className += \" hidden\";\r\n\r\n\t\t\tif (messageBox.timers[id])\r\n\t\t\t\twindow.clearTimeout(messageBox.timers[id]);\r\n\t\t\tdelete messageBox.pull[id];\r\n\t\t}\r\n\t};\r\n\r\n\tvar popups = [];\r\n\tscheduler.attachEvent(\"onMessagePopup\", function(box){\r\n\t\tpopups.push(box);\r\n\t});\r\n\tscheduler.attachEvent(\"onAfterMessagePopup\", function(box){\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i] === box){\r\n\t\t\t\tpopups.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tscheduler.attachEvent(\"onDestroy\", function(){\r\n\t\tif(modality.cover && modality.cover.parentNode){\r\n\t\t\tmodality.cover.parentNode.removeChild(modality.cover);\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i].parentNode){\r\n\t\t\t\tpopups[i].parentNode.removeChild(popups[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tpopups = null;\r\n\r\n\t\tif(messageBox.area && messageBox.area.parentNode){\r\n\t\t\tmessageBox.area.parentNode.removeChild(messageBox.area);\r\n\t\t}\r\n\t\tmessageBox = null;\r\n\t});\r\n\r\n\treturn {\r\n\t\talert: alertBox,\r\n\t\tconfirm: confirmBox,\r\n\t\tmessage: messageBox,\r\n\t\tmodalbox: modalBox\r\n\t};\r\n}","export default {\r\n\tdate: {\r\n\t\tmonth_full: [\"كانون الثاني\", \"شباط\", \"آذار\", \"نيسان\", \"أيار\", \"حزيران\", \"تموز\", \"آب\", \"أيلول\", \"تشرين الأول\", \"تشرين الثاني\", \"كانون الأول\"],\r\n\t\tmonth_short: [\"يناير\", \"فبراير\", \"مارس\", \"أبريل\", \"مايو\", \"يونيو\", \"يوليو\", \"أغسطس\", \"سبتمبر\", \"أكتوبر\", \"نوفمبر\", \"ديسمبر\"],\r\n\t\tday_full: [\"الأحد\", \"الأثنين\", \"ألثلاثاء\", \"الأربعاء\", \"ألحميس\", \"ألجمعة\", \"السبت\"],\r\n\t\tday_short: [\"احد\", \"اثنين\", \"ثلاثاء\", \"اربعاء\", \"خميس\", \"جمعة\", \"سبت\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"اليوم\",\r\n\t\tday_tab: \"يوم\",\r\n\t\tweek_tab: \"أسبوع\",\r\n\t\tmonth_tab: \"شهر\",\r\n\t\tnew_event: \"حدث جديد\",\r\n\t\ticon_save: \"اخزن\",\r\n\t\ticon_cancel: \"الغاء\",\r\n\t\ticon_details: \"تفاصيل\",\r\n\t\ticon_edit: \"تحرير\",\r\n\t\ticon_delete: \"حذف\",\r\n\t\tconfirm_closing: \"التغييرات سوف تضيع, هل انت متأكد؟\", //Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"الحدث سيتم حذفها نهائيا ، هل أنت متأكد؟\",\r\n\t\tsection_description: \"الوصف\",\r\n\t\tsection_time: \"الفترة الزمنية\",\r\n\t\tfull_day: \"طوال اليوم\",\r\n\r\n\t\tconfirm_recurring: \"هل تريد تحرير مجموعة كاملة من الأحداث المتكررة؟\",\r\n\t\tsection_recurring: \"تكرار الحدث\",\r\n\t\tbutton_recurring: \"تعطيل\",\r\n\t\tbutton_recurring_open: \"تمكين\",\r\n\t\tbutton_edit_series: \"تحرير سلسلة\",\r\n\t\tbutton_edit_occurrence: \"تعديل نسخة\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"جدول\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\"\r\n\t}\r\n};\r\n\r\n\r\n","/*\r\n Translation by Sofya Morozova\r\n */\r\nexport default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Студзень\", \"Люты\", \"Сакавік\", \"Красавік\", \"Maй\", \"Чэрвень\", \"Ліпень\", \"Жнівень\", \"Верасень\", \"Кастрычнік\", \"Лістапад\", \"Снежань\"],\r\n\t\tmonth_short: [\"Студз\", \"Лют\", \"Сак\", \"Крас\", \"Maй\", \"Чэр\", \"Ліп\", \"Жнів\", \"Вер\", \"Каст\", \"Ліст\", \"Снеж\"],\r\n\t\tday_full: [ \"Нядзеля\", \"Панядзелак\", \"Аўторак\", \"Серада\", \"Чацвер\", \"Пятніца\", \"Субота\"],\r\n\t\tday_short: [\"Нд\", \"Пн\", \"Аўт\", \"Ср\", \"Чцв\", \"Пт\", \"Сб\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Сёння\",\r\n\t\tday_tab: \"Дзень\",\r\n\t\tweek_tab: \"Тыдзень\",\r\n\t\tmonth_tab: \"Месяц\",\r\n\t\tnew_event: \"Новая падзея\",\r\n\t\ticon_save: \"Захаваць\",\r\n\t\ticon_cancel: \"Адмяніць\",\r\n\t\ticon_details: \"Дэталі\",\r\n\t\ticon_edit: \"Змяніць\",\r\n\t\ticon_delete: \"Выдаліць\",\r\n\t\tconfirm_closing: \"\", //Унесеныя змены будуць страчаны, працягнуць?\r\n\t\tconfirm_deleting: \"Падзея будзе выдалена незваротна, працягнуць?\",\r\n\t\tsection_description: \"Апісанне\",\r\n\t\tsection_time: \"Перыяд часу\",\r\n\t\tfull_day: \"Увесь дзень\",\r\n\r\n\t\tconfirm_recurring: \"Вы хочаце змяніць усю серыю паўтаральных падзей?\",\r\n\t\tsection_recurring: \"Паўтарэнне\",\r\n\t\tbutton_recurring: \"Адключана\",\r\n\t\tbutton_recurring_open: \"Уключана\",\r\n\t\tbutton_edit_series: \"Рэдагаваць серыю\",\r\n\t\tbutton_edit_occurrence: \"Рэдагаваць асобнік\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Спіс\",\r\n\t\tdate: \"Дата\",\r\n\t\tdescription: \"Апісанне\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"Год\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Спіс\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Спic\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"Дзень\",\r\n\t\trepeat_radio_week: \"Тыдзень\",\r\n\t\trepeat_radio_month: \"Месяц\",\r\n\t\trepeat_radio_year: \"Год\",\r\n\t\trepeat_radio_day_type: \"Кожны\",\r\n\t\trepeat_text_day_count: \"дзень\",\r\n\t\trepeat_radio_day_type2: \"Кожны працоўны дзень\",\r\n\t\trepeat_week: \" Паўтараць кожны\",\r\n\t\trepeat_text_week_count: \"тыдзень\",\r\n\t\trepeat_radio_month_type: \"Паўтараць\",\r\n\t\trepeat_radio_month_start: \"\",\r\n\t\trepeat_text_month_day: \" чысла кожнага\",\r\n\t\trepeat_text_month_count: \"месяцу\",\r\n\t\trepeat_text_month_count2_before: \"кожны \",\r\n\t\trepeat_text_month_count2_after: \"месяц\",\r\n\t\trepeat_year_label: \"\",\r\n\t\tselect_year_day2: \"\",\r\n\t\trepeat_text_year_day: \"дзень\",\r\n\t\tselect_year_month: \"\",\r\n\t\trepeat_radio_end: \"Без даты заканчэння\",\r\n\t\trepeat_text_occurences_count: \"паўтораў\",\r\n\t\trepeat_radio_end2: \"\",\r\n\t\trepeat_radio_end3: \"Да \",\r\n\t\tmonth_for_recurring: [\"Студзеня\", \"Лютага\", \"Сакавіка\", \"Красавіка\", \"Мая\", \"Чэрвеня\", \"Ліпeня\", \"Жніўня\", \"Верасня\", \"Кастрычніка\", \"Лістапада\", \"Снежня\"],\r\n\t\tday_for_recurring: [\"Нядзелю\", \"Панядзелак\", \"Аўторак\", \"Сераду\", \"Чацвер\", \"Пятніцу\", \"Суботу\"]\r\n\t}\r\n};\r\n","/*\r\n @Traducido por Vicente Adria Bohigues - vicenteadria@hotmail.com\r\n */\r\nexport default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Gener\", \"Febrer\", \"Març\", \"Abril\", \"Maig\", \"Juny\", \"Juliol\", \"Agost\", \"Setembre\", \"Octubre\", \"Novembre\", \"Desembre\"],\r\n\t\tmonth_short: [\"Gen\", \"Feb\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Oct\", \"Nov\", \"Des\"],\r\n\t\tday_full: [\"Diumenge\", \"Dilluns\", \"Dimarts\", \"Dimecres\", \"Dijous\", \"Divendres\", \"Dissabte\"],\r\n\t\tday_short: [\"Dg\", \"Dl\", \"Dm\", \"Dc\", \"Dj\", \"Dv\", \"Ds\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Hui\",\r\n\t\tday_tab: \"Dia\",\r\n\t\tweek_tab: \"Setmana\",\r\n\t\tmonth_tab: \"Mes\",\r\n\t\tnew_event: \"Nou esdeveniment\",\r\n\t\ticon_save: \"Guardar\",\r\n\t\ticon_cancel: \"Cancel·lar\",\r\n\t\ticon_details: \"Detalls\",\r\n\t\ticon_edit: \"Editar\",\r\n\t\ticon_delete: \"Esborrar\",\r\n\t\tconfirm_closing: \"\", //\"Els seus canvis es perdràn, continuar ?\"\r\n\t\tconfirm_deleting: \"L'esdeveniment s'esborrarà definitivament, continuar ?\",\r\n\t\tsection_description: \"Descripció\",\r\n\t\tsection_time: \"Periode de temps\",\r\n\t\tfull_day: \"Tot el dia\",\r\n\r\n\t\tconfirm_recurring: \"¿Desitja modificar el conjunt d'esdeveniments repetits?\",\r\n\t\tsection_recurring: \"Repeteixca l'esdeveniment\",\r\n\t\tbutton_recurring: \"Impedit\",\r\n\t\tbutton_recurring_open: \"Permés\",\r\n\t\tbutton_edit_series: \"Edit sèrie\",\r\n\t\tbutton_edit_occurrence: \"Edita Instància\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Agenda\",\r\n\t\tdate: \"Data\",\r\n\t\tdescription: \"Descripció\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"Any\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Agenda\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Taula\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\"\r\n\t}\r\n};","/*\r\nTranslation by FreezeSoul\r\n*/\r\n//scheduler.config.day_date=\"%M %d日 %D\";\r\n//scheduler.config.default_date=\"%Y年 %M %d日\";\r\n//scheduler.config.month_date=\"%Y年 %M\";\r\n\r\nexport default {\r\n\tdate: {\r\n\t\tmonth_full: [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"十月\", \"十一月\", \"十二月\"],\r\n\t\tmonth_short: [\"1月\", \"2月\", \"3月\", \"4月\", \"5月\", \"6月\", \"7月\", \"8月\", \"9月\", \"10月\", \"11月\", \"12月\"],\r\n\t\tday_full: [\"星期日\", \"星期一\", \"星期二\", \"星期三\", \"星期四\", \"星期五\", \"星期六\"],\r\n\t\tday_short: [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"今天\",\r\n\t\tday_tab: \"日\",\r\n\t\tweek_tab: \"周\",\r\n\t\tmonth_tab: \"月\",\r\n\t\tnew_event: \"新建日程\",\r\n\t\ticon_save: \"保存\",\r\n\t\ticon_cancel: \"关闭\",\r\n\t\ticon_details: \"详细\",\r\n\t\ticon_edit: \"编辑\",\r\n\t\ticon_delete: \"删除\",\r\n\t\tconfirm_closing: \"请确认是否撤销修改!\", //Your changes will be lost, are your sure?\r\n\t\tconfirm_deleting: \"是否删除日程?\",\r\n\t\tsection_description: \"描述\",\r\n\t\tsection_time: \"时间范围\",\r\n\t\tfull_day: \"整天\",\r\n\r\n\t\tconfirm_recurring:\"请确认是否将日程设为重复模式?\",\r\n\t\tsection_recurring:\"重复周期\",\r\n\t\tbutton_recurring:\"禁用\",\r\n\t\tbutton_recurring_open:\"启用\",\r\n\t\tbutton_edit_series: \"编辑系列\",\r\n\t\tbutton_edit_occurrence: \"编辑实例\",\r\n\t\t\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab:\"议程\",\r\n\t\tdate:\"日期\",\r\n\t\tdescription:\"说明\",\r\n\t\t\r\n\t\t/*year view extension*/\r\n\t\tyear_tab:\"今年\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"议程\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab:\"电网\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"按天\",\r\n\t\trepeat_radio_week: \"按周\",\r\n\t\trepeat_radio_month: \"按月\",\r\n\t\trepeat_radio_year: \"按年\",\r\n\t\trepeat_radio_day_type: \"每\",\r\n\t\trepeat_text_day_count: \"天\",\r\n\t\trepeat_radio_day_type2: \"每个工作日\",\r\n\t\trepeat_week: \" 重复 每\",\r\n\t\trepeat_text_week_count: \"星期的:\",\r\n\t\trepeat_radio_month_type: \"重复\",\r\n\t\trepeat_radio_month_start: \"在\",\r\n\t\trepeat_text_month_day: \"日 每\",\r\n\t\trepeat_text_month_count: \"月\",\r\n\t\trepeat_text_month_count2_before: \"每\",\r\n\t\trepeat_text_month_count2_after: \"月\",\r\n\t\trepeat_year_label: \"在\",\r\n\t\tselect_year_day2: \"的\",\r\n\t\trepeat_text_year_day: \"日\",\r\n\t\tselect_year_month: \"月\",\r\n\t\trepeat_radio_end: \"无结束日期\",\r\n\t\trepeat_text_occurences_count: \"次结束\",\r\n\t\trepeat_radio_end2: \"重复\",\r\n\t\trepeat_radio_end3: \"结束于\",\r\n\t\tmonth_for_recurring: [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"十月\", \"十一月\", \"十二月\"],\r\n\t\tday_for_recurring: [\"星期日\", \"星期一\", \"星期二\", \"星期三\", \"星期四\", \"星期五\", \"星期六\"]\r\n\t}\r\n};\r\n\r\n","export default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Leden\", \"Únor\", \"Březen\", \"Duben\", \"Květen\", \"Červen\", \"Červenec\", \"Srpen\", \"Září\", \"Říjen\", \"Listopad\", \"Prosinec\"],\r\n\t\tmonth_short: [\"Led\", \"Ún\", \"Bře\", \"Dub\", \"Kvě\", \"Čer\", \"Čec\", \"Srp\", \"Září\", \"Říj\", \"List\", \"Pro\"],\r\n\t\tday_full: [\"Neděle\", \"Pondělí\", \"Úterý\", \"Středa\", \"Čtvrtek\", \"Pátek\", \"Sobota\"],\r\n\t\tday_short: [\"Ne\", \"Po\", \"Út\", \"St\", \"Čt\", \"Pá\", \"So\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Dnes\",\r\n\t\tday_tab: \"Den\",\r\n\t\tweek_tab: \"Týden\",\r\n\t\tmonth_tab: \"Měsíc\",\r\n\t\tnew_event: \"Nová událost\",\r\n\t\ticon_save: \"Uložit\",\r\n\t\ticon_cancel: \"Zpět\",\r\n\t\ticon_details: \"Detail\",\r\n\t\ticon_edit: \"Edituj\",\r\n\t\ticon_delete: \"Smazat\",\r\n\t\tconfirm_closing: \"\", //Vaše změny budou ztraceny, opravdu ?\r\n\t\tconfirm_deleting: \"Událost bude trvale smazána, opravdu?\",\r\n\t\tsection_description: \"Poznámky\",\r\n\t\tsection_time: \"Doba platnosti\",\r\n\r\n\t\t/*recurring events*/\r\n\t\tconfirm_recurring: \"Přejete si upravit celou řadu opakovaných událostí?\",\r\n\t\tsection_recurring: \"Opakování události\",\r\n\t\tbutton_recurring: \"Vypnuto\",\r\n\t\tbutton_recurring_open: \"Zapnuto\",\r\n\t\tbutton_edit_series: \"Edit series\",\r\n\t\tbutton_edit_occurrence: \"Upravit instance\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Program\",\r\n\t\tdate: \"Datum\",\r\n\t\tdescription: \"Poznámka\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"Rok\",\r\n\t\tfull_day: \"Full day\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Program\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Mřížka\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"Denně\",\r\n\t\trepeat_radio_week: \"Týdně\",\r\n\t\trepeat_radio_month: \"Měsíčně\",\r\n\t\trepeat_radio_year: \"Ročně\",\r\n\t\trepeat_radio_day_type: \"každý\",\r\n\t\trepeat_text_day_count: \"Den\",\r\n\t\trepeat_radio_day_type2: \"pracovní dny\",\r\n\t\trepeat_week: \"Opakuje každých\",\r\n\t\trepeat_text_week_count: \"Týdnů na:\",\r\n\t\trepeat_radio_month_type: \"u každého\",\r\n\t\trepeat_radio_month_start: \"na\",\r\n\t\trepeat_text_month_day: \"Den každého\",\r\n\t\trepeat_text_month_count: \"Měsíc\",\r\n\t\trepeat_text_month_count2_before: \"každý\",\r\n\t\trepeat_text_month_count2_after: \"Měsíc\",\r\n\t\trepeat_year_label: \"na\",\r\n\t\tselect_year_day2: \"v\",\r\n\t\trepeat_text_year_day: \"Den v\",\r\n\t\tselect_year_month: \"\",\r\n\t\trepeat_radio_end: \"bez data ukončení\",\r\n\t\trepeat_text_occurences_count: \"Události\",\r\n\t\trepeat_radio_end2: \"po\",\r\n\t\trepeat_radio_end3: \"Konec\",\r\n\t\tmonth_for_recurring: [\"Leden\", \"Únor\", \"Březen\", \"Duben\", \"Květen\", \"Červen\", \"Červenec\", \"Srpen\", \"Září\", \"Říjen\", \"Listopad\", \"Prosinec\"],\r\n\t\tday_for_recurring: [\"Neděle \", \"Pondělí\", \"Úterý\", \"Středa\", \"Čtvrtek\", \"Pátek\", \"Sobota\"]\r\n\t}\r\n};\r\n\r\n","export default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Marts\", \"April\", \"Maj\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Søndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lørdag\"],\r\n\t\tday_short: [\"Søn\", \"Man\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lør\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Idag\",\r\n\t\tday_tab: \"Dag\",\r\n\t\tweek_tab: \"Uge\",\r\n\t\tmonth_tab: \"Måned\",\r\n\t\tnew_event: \"Ny begivenhed\",\r\n\t\ticon_save: \"Gem\",\r\n\t\ticon_cancel: \"Fortryd\",\r\n\t\ticon_details: \"Detaljer\",\r\n\t\ticon_edit: \"Tilret\",\r\n\t\ticon_delete: \"Slet\",\r\n\t\tconfirm_closing: \"Dine rettelser vil gå tabt.. Er dy sikker?\", //Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Bigivenheden vil blive slettet permanent. Er du sikker?\",\r\n\t\tsection_description: \"Beskrivelse\",\r\n\t\tsection_time: \"Tidsperiode\",\r\n\r\n\t\t/*recurring events*/\r\n\t\tconfirm_recurring: \"Vil du tilrette hele serien af gentagne begivenheder?\",\r\n\t\tsection_recurring: \"Gentag begivenhed\",\r\n\t\tbutton_recurring: \"Frakoblet\",\r\n\t\tbutton_recurring_open: \"Tilkoblet\",\r\n\t\tbutton_edit_series: \"Rediger serien\",\r\n\t\tbutton_edit_occurrence: \"Rediger en kopi\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Dagsorden\",\r\n\t\tdate: \"Dato\",\r\n\t\tdescription: \"Beskrivelse\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"År\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Dagsorden\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Grid\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"Daglig\",\r\n\t\trepeat_radio_week: \"Ugenlig\",\r\n\t\trepeat_radio_month: \"Månedlig\",\r\n\t\trepeat_radio_year: \"Årlig\",\r\n\t\trepeat_radio_day_type: \"Hver\",\r\n\t\trepeat_text_day_count: \"dag\",\r\n\t\trepeat_radio_day_type2: \"På hver arbejdsdag\",\r\n\t\trepeat_week: \" Gentager sig hver\",\r\n\t\trepeat_text_week_count: \"uge på følgende dage:\",\r\n\t\trepeat_radio_month_type: \"Hver den\",\r\n\t\trepeat_radio_month_start: \"Den\",\r\n\t\trepeat_text_month_day: \" i hver\",\r\n\t\trepeat_text_month_count: \"måned\",\r\n\t\trepeat_text_month_count2_before: \"hver\",\r\n\t\trepeat_text_month_count2_after: \"måned\",\r\n\t\trepeat_year_label: \"Den\",\r\n\t\tselect_year_day2: \"i\",\r\n\t\trepeat_text_year_day: \"dag i\",\r\n\t\tselect_year_month: \"\",\r\n\t\trepeat_radio_end: \"Ingen slutdato\",\r\n\t\trepeat_text_occurences_count: \"gentagelse\",\r\n\t\trepeat_radio_end2: \"Efter\",\r\n\t\trepeat_radio_end3: \"Slut\",\r\n\t\tmonth_for_recurring: [\"Januar\", \"Februar\", \"März\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Dezember\"],\r\n\t\tday_for_recurring: [\"Søndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lørdag\"]\r\n\t}\r\n};\r\n\r\n","export default {\r\n\tdate: {\r\n\t\tmonth_full: [\" Januar\", \" Februar\", \" März \", \" April\", \" Mai\", \" Juni\", \" Juli\", \" August\", \" September \", \" Oktober\", \" November \", \" Dezember\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mär\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dez\"],\r\n\t\tday_full: [ \"Sonntag\", \"Montag\", \"Dienstag\", \" Mittwoch\", \" Donnerstag\", \"Freitag\", \"Samstag\"],\r\n\t\tday_short: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Heute\",\r\n\t\tday_tab: \"Tag\",\r\n\t\tweek_tab: \"Woche\",\r\n\t\tmonth_tab: \"Monat\",\r\n\t\tnew_event: \"neuer Eintrag\",\r\n\t\ticon_save: \"Speichern\",\r\n\t\ticon_cancel: \"Abbrechen\",\r\n\t\ticon_details: \"Details\",\r\n\t\ticon_edit: \"Ändern\",\r\n\t\ticon_delete: \"Löschen\",\r\n\t\tconfirm_closing: \"\", //\"Ihre Veränderungen werden verloren sein, wollen Sie ergänzen? \"\r\n\t\tconfirm_deleting: \"Der Eintrag wird gelöscht\",\r\n\t\tsection_description: \"Beschreibung\",\r\n\t\tsection_time: \"Zeitspanne\",\r\n\t\tfull_day: \"Ganzer Tag\",\r\n\r\n\t\tconfirm_recurring: \"Wollen Sie alle Einträge bearbeiten oder nur diesen einzelnen Eintrag?\",\r\n\t\tsection_recurring: \"Wiederholung\",\r\n\t\tbutton_recurring: \"Aus\",\r\n\t\tbutton_recurring_open: \"An\",\r\n\t\tbutton_edit_series: \"Bearbeiten Sie die Serie\",\r\n\t\tbutton_edit_occurrence: \"Bearbeiten Sie eine Kopie\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Agenda\",\r\n\t\tdate: \"Datum\",\r\n\t\tdescription: \"Beschreibung\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"Jahre\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Agenda\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Grid\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"Täglich\",\r\n\t\trepeat_radio_week: \"Wöchentlich\",\r\n\t\trepeat_radio_month: \"Monatlich\",\r\n\t\trepeat_radio_year: \"Jährlich\",\r\n\t\trepeat_radio_day_type: \"jeden\",\r\n\t\trepeat_text_day_count: \"Tag\",\r\n\t\trepeat_radio_day_type2: \"an jedem Arbeitstag\",\r\n\t\trepeat_week: \" Wiederholt sich jede\",\r\n\t\trepeat_text_week_count: \"Woche am:\",\r\n\t\trepeat_radio_month_type: \"an jedem\",\r\n\t\trepeat_radio_month_start: \"am\",\r\n\t\trepeat_text_month_day: \"Tag eines jeden\",\r\n\t\trepeat_text_month_count: \"Monats\",\r\n\t\trepeat_text_month_count2_before: \"jeden\",\r\n\t\trepeat_text_month_count2_after: \"Monats\",\r\n\t\trepeat_year_label: \"am\",\r\n\t\tselect_year_day2: \"im\",\r\n\t\trepeat_text_year_day: \"Tag im\",\r\n\t\tselect_year_month: \"\",\r\n\t\trepeat_radio_end: \"kein Enddatum\",\r\n\t\trepeat_text_occurences_count: \"Ereignissen\",\r\n\t\trepeat_radio_end3: \"Schluß\",\r\n\t\trepeat_radio_end2: \"nach\",\r\n\t\tmonth_for_recurring: [\"Januar\", \"Februar\", \"März\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Dezember\"],\r\n\t\tday_for_recurring: [\"Sonntag\", \"Montag\", \"Dienstag\", \"Mittwoch\", \"Donnerstag\", \"Freitag\", \"Samstag\"]\r\n\t}\r\n};\r\n\r\n","export default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Ιανουάριος\", \"Φεβρουάριος\", \"Μάρτιος\", \"Απρίλιος\", \"Μάϊος\", \"Ιούνιος\", \"Ιούλιος\", \"Αύγουστος\", \"Σεπτέμβριος\", \"Οκτώβριος\", \"Νοέμβριος\", \"Δεκέμβριος\"],\r\n\t\tmonth_short: [\"ΙΑΝ\", \"ΦΕΒ\", \"ΜΑΡ\", \"ΑΠΡ\", \"ΜΑΙ\", \"ΙΟΥΝ\", \"ΙΟΥΛ\", \"ΑΥΓ\", \"ΣΕΠ\", \"ΟΚΤ\", \"ΝΟΕ\", \"ΔΕΚ\"],\r\n\t\tday_full: [\"Κυριακή\", \"Δευτέρα\", \"Τρίτη\", \"Τετάρτη\", \"Πέμπτη\", \"Παρασκευή\", \"Σάββατο\"],\r\n\t\tday_short: [\"ΚΥ\", \"ΔΕ\", \"ΤΡ\", \"ΤΕ\", \"ΠΕ\", \"ΠΑ\", \"ΣΑ\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Σήμερα\",\r\n\t\tday_tab: \"Ημέρα\",\r\n\t\tweek_tab: \"Εβδομάδα\",\r\n\t\tmonth_tab: \"Μήνας\",\r\n\t\tnew_event: \"Νέο έργο\",\r\n\t\ticon_save: \"Αποθήκευση\",\r\n\t\ticon_cancel: \"Άκυρο\",\r\n\t\ticon_details: \"Λεπτομέρειες\",\r\n\t\ticon_edit: \"Επεξεργασία\",\r\n\t\ticon_delete: \"Διαγραφή\",\r\n\t\tconfirm_closing: \"\", //Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Το έργο θα διαγραφεί οριστικά. Θέλετε να συνεχίσετε;\",\r\n\t\tsection_description: \"Περιγραφή\",\r\n\t\tsection_time: \"Χρονική περίοδος\",\r\n\t\tfull_day: \"Πλήρης Ημέρα\",\r\n\r\n\t\t/*recurring events*/\r\n\t\tconfirm_recurring: \"Θέλετε να επεξεργασθείτε ολόκληρη την ομάδα των επαναλαμβανόμενων έργων;\",\r\n\t\tsection_recurring: \"Επαναλαμβανόμενο έργο\",\r\n\t\tbutton_recurring: \"Ανενεργό\",\r\n\t\tbutton_recurring_open: \"Ενεργό\",\r\n\t\tbutton_edit_series: \"Επεξεργαστείτε τη σειρά\",\r\n\t\tbutton_edit_occurrence: \"Επεξεργασία ένα αντίγραφο\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Ημερήσια Διάταξη\",\r\n\t\tdate: \"Ημερομηνία\",\r\n\t\tdescription: \"Περιγραφή\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"Έτος\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Ημερήσια Διάταξη\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Πλέγμα\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"Ημερησίως\",\r\n\t\trepeat_radio_week: \"Εβδομαδιαίως\",\r\n\t\trepeat_radio_month: \"Μηνιαίως\",\r\n\t\trepeat_radio_year: \"Ετησίως\",\r\n\t\trepeat_radio_day_type: \"Κάθε\",\r\n\t\trepeat_text_day_count: \"ημέρα\",\r\n\t\trepeat_radio_day_type2: \"Κάθε εργάσιμη\",\r\n\t\trepeat_week: \" Επανάληψη κάθε\",\r\n\t\trepeat_text_week_count: \"εβδομάδα τις επόμενες ημέρες:\",\r\n\t\trepeat_radio_month_type: \"Επανάληψη\",\r\n\t\trepeat_radio_month_start: \"Την\",\r\n\t\trepeat_text_month_day: \"ημέρα κάθε\",\r\n\t\trepeat_text_month_count: \"μήνα\",\r\n\t\trepeat_text_month_count2_before: \"κάθε\",\r\n\t\trepeat_text_month_count2_after: \"μήνα\",\r\n\t\trepeat_year_label: \"Την\",\r\n\t\tselect_year_day2: \"του\",\r\n\t\trepeat_text_year_day: \"ημέρα\",\r\n\t\tselect_year_month: \"μήνα\",\r\n\t\trepeat_radio_end: \"Χωρίς ημερομηνία λήξεως\",\r\n\t\trepeat_text_occurences_count: \"επαναλήψεις\",\r\n\t\trepeat_radio_end3: \"Λήγει την\",\r\n\t\trepeat_radio_end2: \"Μετά από\",\r\n\t\tmonth_for_recurring: [\"Ιανουάριος\", \"Φεβρουάριος\", \"Μάρτιος\", \"Απρίλιος\", \"Μάϊος\", \"Ιούνιος\", \"Ιούλιος\", \"Αύγουστος\", \"Σεπτέμβριος\", \"Οκτώβριος\", \"Νοέμβριος\", \"Δεκέμβριος\"],\r\n\t\tday_for_recurring: [\"Κυριακή\", \"Δευτέρα\", \"Τρίτη\", \"Τετάρτη\", \"Πέμπτη\", \"Παρασκευή\", \"Σάββατο\"]\r\n\t}\r\n};\r\n\r\n","export default {\r\n\tdate:{\r\n\t\tmonth_full:[\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\tmonth_short:[\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\tday_full:[\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\r\n\t\tday_short:[\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\r\n\t},\r\n\tlabels:{\r\n\t\tdhx_cal_today_button:\"Today\",\r\n\t\tday_tab:\"Day\",\r\n\t\tweek_tab:\"Week\",\r\n\t\tmonth_tab:\"Month\",\r\n\t\tnew_event:\"New event\",\r\n\t\ticon_save:\"Save\",\r\n\t\ticon_cancel:\"Cancel\",\r\n\t\ticon_details:\"Details\",\r\n\t\ticon_edit:\"Edit\",\r\n\t\ticon_delete:\"Delete\",\r\n\t\tconfirm_closing:\"\",//Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting:\"Event will be deleted permanently, are you sure?\",\r\n\t\tsection_description:\"Description\",\r\n\t\tsection_time:\"Time period\",\r\n\t\tfull_day:\"Full day\",\r\n\r\n\t\t/*recurring events*/\r\n\t\tconfirm_recurring:\"Do you want to edit the whole set of repeated events?\",\r\n\t\tsection_recurring:\"Repeat event\",\r\n\t\tbutton_recurring:\"Disabled\",\r\n\t\tbutton_recurring_open:\"Enabled\",\r\n\t\tbutton_edit_series: \"Edit series\",\r\n\t\tbutton_edit_occurrence: \"Edit occurrence\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab:\"Agenda\",\r\n\t\tdate:\"Date\",\r\n\t\tdescription:\"Description\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab:\"Year\",\r\n\r\n\t\t/* week agenda extension */\r\n\t\tweek_agenda_tab: \"Agenda\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Grid\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"Daily\",//name=\"repeat\" value=\"day\"\r\n\t\trepeat_radio_week: \"Weekly\",//name=\"repeat\" value=\"week\r\n\t\trepeat_radio_month: \"Monthly\",\r\n\t\trepeat_radio_year: \"Yearly\",\r\n\t\trepeat_radio_day_type: \"Every\",\r\n\t\trepeat_text_day_count: \"day\",\r\n\t\trepeat_radio_day_type2: \"Every workday\",\r\n\t\trepeat_week: \" Repeat every\",\r\n\t\trepeat_text_week_count: \"week next days:\",\r\n\t\trepeat_radio_month_type: \"Repeat\",\r\n\t\trepeat_radio_month_start: \"On\",\r\n\t\trepeat_text_month_day: \"day every\",\r\n\t\trepeat_text_month_count: \"month\",\r\n\t\trepeat_text_month_count2_before: \"every\",\r\n\t\trepeat_text_month_count2_after: \"month\",\r\n\t\trepeat_year_label: \"On\",\r\n\t\tselect_year_day2: \"of\",\r\n\t\trepeat_text_year_day: \"day\",\r\n\t\tselect_year_month: \"month\",\r\n\t\trepeat_radio_end: \"No end date\",\r\n\t\trepeat_text_occurences_count: \"occurrences\",\r\n\t\trepeat_radio_end2: \"After\",\r\n\t\trepeat_radio_end3: \"End by\",\r\n\t\tmonth_for_recurring: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\tday_for_recurring: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]//\r\n\t}\r\n};\r\n\r\n","/*\r\n @Autor Manuel Fernandez Panzuela - www.mfernandez.es\r\n */\r\nexport default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"],\r\n\t\tmonth_short: [\"Ene\", \"Feb\", \"Mar\", \"Abr\", \"May\", \"Jun\", \"Jul\", \"Ago\", \"Sep\", \"Oct\", \"Nov\", \"Dic\"],\r\n\t\tday_full: [\"Domingo\", \"Lunes\", \"Martes\", \"Miércoles\", \"Jueves\", \"Viernes\", \"Sábado\"],\r\n\t\tday_short: [\"Dom\", \"Lun\", \"Mar\", \"Mié\", \"Jue\", \"Vie\", \"Sáb\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Hoy\",\r\n\t\tday_tab: \"Día\",\r\n\t\tweek_tab: \"Semana\",\r\n\t\tmonth_tab: \"Mes\",\r\n\t\tnew_event: \"Nuevo evento\",\r\n\t\ticon_save: \"Guardar\",\r\n\t\ticon_cancel: \"Cancelar\",\r\n\t\ticon_details: \"Detalles\",\r\n\t\ticon_edit: \"Editar\",\r\n\t\ticon_delete: \"Eliminar\",\r\n\t\tconfirm_closing: \"\", //\"Sus cambios se perderán, continuar ?\"\r\n\t\tconfirm_deleting: \"El evento se borrará definitivamente, ¿continuar?\",\r\n\t\tsection_description: \"Descripción\",\r\n\t\tsection_time: \"Período\",\r\n\t\tfull_day: \"Todo el día\",\r\n\r\n\t\tconfirm_recurring: \"¿Desea modificar el conjunto de eventos repetidos?\",\r\n\t\tsection_recurring: \"Repita el evento\",\r\n\t\tbutton_recurring: \"Impedido\",\r\n\t\tbutton_recurring_open: \"Permitido\",\r\n\t\tbutton_edit_series: \"Editar la serie\",\r\n\t\tbutton_edit_occurrence: \"Editar este evento\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Día\",\r\n\t\tdate: \"Fecha\",\r\n\t\tdescription: \"Descripción\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"Año\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Día\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Reja\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"Diariamente\",\r\n\t\trepeat_radio_week: \"Semanalmente\",\r\n\t\trepeat_radio_month: \"Mensualmente\",\r\n\t\trepeat_radio_year: \"Anualmente\",\r\n\t\trepeat_radio_day_type: \"Cada\",\r\n\t\trepeat_text_day_count: \"dia\",\r\n\t\trepeat_radio_day_type2: \"Cada jornada de trabajo\",\r\n\t\trepeat_week: \" Repetir cada\",\r\n\t\trepeat_text_week_count: \"semana:\",\r\n\t\trepeat_radio_month_type: \"Repita\",\r\n\t\trepeat_radio_month_start: \"El\",\r\n\t\trepeat_text_month_day: \"dia cada \",\r\n\t\trepeat_text_month_count: \"mes\",\r\n\t\trepeat_text_month_count2_before: \"cada\",\r\n\t\trepeat_text_month_count2_after: \"mes\",\r\n\t\trepeat_year_label: \"El\",\r\n\t\tselect_year_day2: \"del\",\r\n\t\trepeat_text_year_day: \"dia\",\r\n\t\tselect_year_month: \"mes\",\r\n\t\trepeat_radio_end: \"Sin fecha de finalización\",\r\n\t\trepeat_text_occurences_count: \"ocurrencias\",\r\n\t\trepeat_radio_end3: \"Fin\",\r\n\t\trepeat_radio_end2: \"Después de\",\r\n\t\tmonth_for_recurring: [\"Enero\", \"Febrero\", \"Маrzo\", \"Аbril\", \"Mayo\", \"Junio\", \"Julio\", \"Аgosto\", \"Setiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"],\r\n\t\tday_for_recurring: [\"Domingo\", \"Lunes\", \"Martes\", \"Miércoles\", \"Jeuves\", \"Viernes\", \"Sabado\"]\r\n\t}\r\n};\r\n","export default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Tammikuu\", \"Helmikuu\", \"Maaliskuu\", \"Huhtikuu\", \"Toukokuu\", \"Kes&auml;kuu\", \"Hein&auml;kuu\", \"Elokuu\", \"Syyskuu\", \"Lokakuu\", \"Marraskuu\", \"Joulukuu\"],\r\n\t\tmonth_short: [\"Tam\", \"Hel\", \"Maa\", \"Huh\", \"Tou\", \"Kes\", \"Hei\", \"Elo\", \"Syy\", \"Lok\", \"Mar\", \"Jou\"],\r\n\t\tday_full: [\"Sunnuntai\", \"Maanantai\", \"Tiistai\", \"Keskiviikko\", \"Torstai\", \"Perjantai\", \"Lauantai\"],\r\n\t\tday_short: [\"Su\", \"Ma\", \"Ti\", \"Ke\", \"To\", \"Pe\", \"La\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Tänään\",\r\n\t\tday_tab: \"Päivä\",\r\n\t\tweek_tab: \"Viikko\",\r\n\t\tmonth_tab: \"Kuukausi\",\r\n\t\tnew_event: \"Uusi tapahtuma\",\r\n\t\ticon_save: \"Tallenna\",\r\n\t\ticon_cancel: \"Peru\",\r\n\t\ticon_details: \"Tiedot\",\r\n\t\ticon_edit: \"Muokkaa\",\r\n\t\ticon_delete: \"Poista\",\r\n\t\tconfirm_closing: \"\", //Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Haluatko varmasti poistaa tapahtuman?\",\r\n\t\tsection_description: \"Kuvaus\",\r\n\t\tsection_time: \"Aikajakso\",\r\n\t\tfull_day: \"Koko päivä\",\r\n\r\n\t\tconfirm_recurring: \"Haluatko varmasti muokata toistuvan tapahtuman kaikkia jaksoja?\",\r\n\t\tsection_recurring: \"Toista tapahtuma\",\r\n\t\tbutton_recurring: \"Ei k&auml;yt&ouml;ss&auml;\",\r\n\t\tbutton_recurring_open: \"K&auml;yt&ouml;ss&auml;\",\r\n\t\tbutton_edit_series: \"Muokkaa sarja\",\r\n\t\tbutton_edit_occurrence: \"Muokkaa kopio\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Esityslista\",\r\n\t\tdate: \"Päivämäärä\",\r\n\t\tdescription: \"Kuvaus\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"Vuoden\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Esityslista\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Ritilä\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Luo uusi vetämällä\",\r\n\t\tdrag_to_move:\"Siirrä vetämällä\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"P&auml;ivitt&auml;in\",\r\n\t\trepeat_radio_week: \"Viikoittain\",\r\n\t\trepeat_radio_month: \"Kuukausittain\",\r\n\t\trepeat_radio_year: \"Vuosittain\",\r\n\t\trepeat_radio_day_type: \"Joka\",\r\n\t\trepeat_text_day_count: \"p&auml;iv&auml;\",\r\n\t\trepeat_radio_day_type2: \"Joka arkip&auml;iv&auml;\",\r\n\t\trepeat_week: \"Toista joka\",\r\n\t\trepeat_text_week_count: \"viikko n&auml;in&auml; p&auml;ivin&auml;:\",\r\n\t\trepeat_radio_month_type: \"Toista\",\r\n\t\trepeat_radio_month_start: \"\",\r\n\t\trepeat_text_month_day: \"p&auml;iv&auml;n&auml; joka\",\r\n\t\trepeat_text_month_count: \"kuukausi\",\r\n\t\trepeat_text_month_count2_before: \"joka\",\r\n\t\trepeat_text_month_count2_after: \"kuukausi\",\r\n\t\trepeat_year_label: \"\",\r\n\t\tselect_year_day2: \"\",\r\n\t\trepeat_text_year_day: \"p&auml;iv&auml;\",\r\n\t\tselect_year_month: \"kuukausi\",\r\n\t\trepeat_radio_end: \"Ei loppumisaikaa\",\r\n\t\trepeat_text_occurences_count: \"Toiston j&auml;lkeen\",\r\n\t\trepeat_radio_end3: \"Loppuu\",\r\n\t\trepeat_radio_end2: \"\",\r\n\t\tmonth_for_recurring: [\"Tammikuu\", \"Helmikuu\", \"Maaliskuu\", \"Huhtikuu\", \"Toukokuu\", \"Kes&auml;kuu\", \"Hein&auml;kuu\", \"Elokuu\", \"Syyskuu\", \"Lokakuu\", \"Marraskuu\", \"Joulukuu\"],\r\n\t\tday_for_recurring: [\"Sunnuntai\", \"Maanantai\", \"Tiistai\", \"Keskiviikko\", \"Torstai\", \"Perjantai\", \"Lauantai\"]\r\n\t}\r\n};\r\n\r\n\r\n","export default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Janvier\", \"Février\", \"Mars\", \"Avril\", \"Mai\", \"Juin\", \"Juillet\", \"Août\", \"Septembre\", \"Octobre\", \"Novembre\", \"Décembre\"],\r\n\t\tmonth_short: [\"Jan\", \"Fév\", \"Mar\", \"Avr\", \"Mai\", \"Juin\", \"Juil\", \"Aoû\", \"Sep\", \"Oct\", \"Nov\", \"Déc\"],\r\n\t\tday_full: [\"Dimanche\", \"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\"],\r\n\t\tday_short: [\"Dim\", \"Lun\", \"Mar\", \"Mer\", \"Jeu\", \"Ven\", \"Sam\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Aujourd'hui\",\r\n\t\tday_tab: \"Jour\",\r\n\t\tweek_tab: \"Semaine\",\r\n\t\tmonth_tab: \"Mois\",\r\n\t\tnew_event: \"Nouvel événement\",\r\n\t\ticon_save: \"Enregistrer\",\r\n\t\ticon_cancel: \"Annuler\",\r\n\t\ticon_details: \"Détails\",\r\n\t\ticon_edit: \"Modifier\",\r\n\t\ticon_delete: \"Effacer\",\r\n\t\tconfirm_closing: \"\", //Vos modifications seront perdus, êtes-vous sûr ?\r\n\t\tconfirm_deleting: \"L'événement sera effacé sans appel, êtes-vous sûr ?\",\r\n\t\tsection_description: \"Description\",\r\n\t\tsection_time: \"Période\",\r\n\t\tfull_day: \"Journée complète\",\r\n\r\n\t\tconfirm_recurring: \"Voulez-vous éditer toute une série d'évènements répétés?\",\r\n\t\tsection_recurring: \"Périodicité\",\r\n\t\tbutton_recurring: \"Désactivé\",\r\n\t\tbutton_recurring_open: \"Activé\",\r\n\t\tbutton_edit_series: \"Modifier la série\",\r\n\t\tbutton_edit_occurrence: \"Modifier une copie\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Jour\",\r\n\t\tdate: \"Date\",\r\n\t\tdescription: \"Description\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"Année\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Jour\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Grille\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"Quotidienne\",\r\n\t\trepeat_radio_week: \"Hebdomadaire\",\r\n\t\trepeat_radio_month: \"Mensuelle\",\r\n\t\trepeat_radio_year: \"Annuelle\",\r\n\t\trepeat_radio_day_type: \"Chaque\",\r\n\t\trepeat_text_day_count: \"jour\",\r\n\t\trepeat_radio_day_type2: \"Chaque journée de travail\",\r\n\t\trepeat_week: \" Répéter toutes les\",\r\n\t\trepeat_text_week_count: \"semaine:\",\r\n\t\trepeat_radio_month_type: \"Répéter\",\r\n\t\trepeat_radio_month_start: \"Le\",\r\n\t\trepeat_text_month_day: \"jour chaque\",\r\n\t\trepeat_text_month_count: \"mois\",\r\n\t\trepeat_text_month_count2_before: \"chaque\",\r\n\t\trepeat_text_month_count2_after: \"mois\",\r\n\t\trepeat_year_label: \"Le\",\r\n\t\tselect_year_day2: \"du\",\r\n\t\trepeat_text_year_day: \"jour\",\r\n\t\tselect_year_month: \"mois\",\r\n\t\trepeat_radio_end: \"Pas de date d&quot;achèvement\",\r\n\t\trepeat_text_occurences_count: \"occurrences\",\r\n\t\trepeat_radio_end3: \"Fin\",\r\n\t\trepeat_radio_end2: \"Après\",\r\n\t\tmonth_for_recurring: [\"Janvier\", \"Février\", \"Mars\", \"Avril\", \"Mai\", \"Juin\", \"Juillet\", \"Août\", \"Septembre\", \"Octobre\", \"Novembre\", \"Décembre\"],\r\n\t\tday_for_recurring: [\"Dimanche\", \"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\"]\r\n\t}\r\n};\r\n","export default {\r\n\tdate: {\r\n\t\tmonth_full: [\"ינואר\", \"פברואר\", \"מרץ\", \"אפריל\", \"מאי\", \"יוני\", \"יולי\", \"אוגוסט\", \"ספטמבר\", \"אוקטובר\", \"נובמבר\", \"דצמבר\"],\r\n\t\tmonth_short: [\"ינו\", \"פבר\", \"מרץ\", \"אפר\", \"מאי\", \"יונ\", \"יול\", \"אוג\", \"ספט\", \"אוק\", \"נוב\", \"דצמ\"],\r\n\t\tday_full: [\"ראשון\", \"שני\", \"שלישי\", \"רביעי\", \"חמישי\", \"שישי\", \"שבת\"],\r\n\t\tday_short: [\"א\", \"ב\", \"ג\", \"ד\", \"ה\", \"ו\", \"ש\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"היום\",\r\n\t\tday_tab: \"יום\",\r\n\t\tweek_tab: \"שבוע\",\r\n\t\tmonth_tab: \"חודש\",\r\n\t\tnew_event: \"ארוע חדש\",\r\n\t\ticon_save: \"שמור\",\r\n\t\ticon_cancel: \"בטל\",\r\n\t\ticon_details: \"פרטים\",\r\n\t\ticon_edit: \"ערוך\",\r\n\t\ticon_delete: \"מחק\",\r\n\t\tconfirm_closing: \"\", //Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"ארוע ימחק סופית.להמשיך?\",\r\n\t\tsection_description: \"תיאור\",\r\n\t\tsection_time: \"תקופה\",\r\n\r\n\t\tconfirm_recurring: \"האם ברצונך לשנות כל סדרת ארועים מתמשכים?\",\r\n\t\tsection_recurring: \"להעתיק ארוע\",\r\n\t\tbutton_recurring: \"לא פעיל\",\r\n\t\tbutton_recurring_open: \"פעיל\",\r\n\t\tfull_day: \"יום שלם\",\r\n\t\tbutton_edit_series: \"ערוך את הסדרה\",\r\n\t\tbutton_edit_occurrence: \"עריכת עותק\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"סדר יום\",\r\n\t\tdate: \"תאריך\",\r\n\t\tdescription: \"תיאור\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"לשנה\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"סדר יום\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"סורג\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"גרור כדי להזיז\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"בטל\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"הבא\",\r\n\t\tprev: \"הקודם\",\r\n\t\tyear: \"שנה\",\r\n\t\tmonth: \"חודש\",\r\n\t\tday: \"יום\",\r\n\t\thour:\"שעה\",\r\n\t\tminute: \"דקה\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"יומי\",\r\n\t\trepeat_radio_week: \"שבועי\",\r\n\t\trepeat_radio_month: \"חודשי\",\r\n\t\trepeat_radio_year: \"שנתי\",\r\n\t\trepeat_radio_day_type: \"חזור כל\",\r\n\t\trepeat_text_day_count: \"ימים\",\r\n\t\trepeat_radio_day_type2: \"חזור כל יום עבודה\",\r\n\t\trepeat_week: \" חזור כל\",\r\n\t\trepeat_text_week_count: \"שבוע לפי ימים:\",\r\n\t\trepeat_radio_month_type: \"חזור כל\",\r\n\t\trepeat_radio_month_start: \"כל\",\r\n\t\trepeat_text_month_day: \"ימים כל\",\r\n\t\trepeat_text_month_count: \"חודשים\",\r\n\t\trepeat_text_month_count2_before: \"חזור כל\",\r\n\t\trepeat_text_month_count2_after: \"חודש\",\r\n\t\trepeat_year_label: \"כל\",\r\n\t\tselect_year_day2: \"בחודש\",\r\n\t\trepeat_text_year_day: \"ימים\",\r\n\t\tselect_year_month: \"חודש\",\r\n\t\trepeat_radio_end: \"לעולם לא מסתיים\",\r\n\t\trepeat_text_occurences_count: \"אירועים\",\r\n\t\trepeat_radio_end3: \"מסתיים ב\",\r\n\t\trepeat_radio_end2: \"אחרי\",\r\n\t\tmonth_for_recurring: [\"ינואר\", \"פברואר\", \"מרץ\", \"אפריל\", \"מאי\", \"יוני\", \"יולי\", \"אוגוסט\", \"ספטמבר\", \"אוקטובר\", \"נובמבר\", \"דצמבר\"],\r\n\t\tday_for_recurring: [\"ראשון\", \"שני\", \"שלישי\", \"רביעי\", \"חמישי\", \"שישי\", \"שבת\"]\r\n\t}\r\n};\r\n\r\n\r\n","export default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Január\", \"Február\", \"Március\", \"Április\", \"Május\", \"Június\", \"Július\", \"Augusztus\", \"Szeptember\", \"Október\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Már\", \"Ápr\", \"Máj\", \"Jún\", \"Júl\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Vasárnap\", \"Hétfõ\", \"Kedd\", \"Szerda\", \"Csütörtök\", \"Péntek\", \"szombat\"],\r\n\t\tday_short: [\"Va\", \"Hé\", \"Ke\", \"Sze\", \"Csü\", \"Pé\", \"Szo\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Ma\",\r\n\t\tday_tab: \"Nap\",\r\n\t\tweek_tab: \"Hét\",\r\n\t\tmonth_tab: \"Hónap\",\r\n\t\tnew_event: \"Új esemény\",\r\n\t\ticon_save: \"Mentés\",\r\n\t\ticon_cancel: \"Mégse\",\r\n\t\ticon_details: \"Részletek\",\r\n\t\ticon_edit: \"Szerkesztés\",\r\n\t\ticon_delete: \"Törlés\",\r\n\t\tconfirm_closing: \"\", //A változások elvesznek, biztosan folytatja? \"\r\n\t\tconfirm_deleting: \"Az esemény törölve lesz, biztosan folytatja?\",\r\n\t\tsection_description: \"Leírás\",\r\n\t\tsection_time: \"Idõszak\",\r\n\t\tfull_day: \"Egesz napos\",\r\n\r\n\t\t/*ismétlõdõ események*/\r\n\t\tconfirm_recurring: \"Biztosan szerkeszteni akarod az összes ismétlõdõ esemény beállítását?\",\r\n\t\tsection_recurring: \"Esemény ismétlése\",\r\n\t\tbutton_recurring: \"Tiltás\",\r\n\t\tbutton_recurring_open: \"Engedélyezés\",\r\n\t\tbutton_edit_series: \"Edit series\",\r\n\t\tbutton_edit_occurrence: \"Szerkesztés bíróság\",\r\n\r\n\t\t/*napirendi nézet*/\r\n\t\tagenda_tab: \"Napirend\",\r\n\t\tdate: \"Dátum\",\r\n\t\tdescription: \"Leírás\",\r\n\r\n\t\t/*éves nézet*/\r\n\t\tyear_tab: \"Év\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\"\r\n\t}\r\n};\r\n\r\n","export default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januari\", \"Februari\", \"Maret\", \"April\", \"Mei\", \"Juni\", \"Juli\", \"Agustus\", \"September\", \"Oktober\", \"November\", \"Desember\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mei\", \"Jun\", \"Jul\", \"Ags\", \"Sep\", \"Okt\", \"Nov\", \"Des\"],\r\n\t\tday_full: [\"Minggu\", \"Senin\", \"Selasa\", \"Rabu\", \"Kamis\", \"Jumat\", \"Sabtu\"],\r\n\t\tday_short: [\"Ming\", \"Sen\", \"Sel\", \"Rab\", \"Kam\", \"Jum\", \"Sab\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Hari Ini\",\r\n\t\tday_tab: \"Hari\",\r\n\t\tweek_tab: \"Minggu\",\r\n\t\tmonth_tab: \"Bulan\",\r\n\t\tnew_event: \"Acara Baru\",\r\n\t\ticon_save: \"Simpan\",\r\n\t\ticon_cancel: \"Batal\",\r\n\t\ticon_details: \"Detail\",\r\n\t\ticon_edit: \"Edit\",\r\n\t\ticon_delete: \"Hapus\",\r\n\t\tconfirm_closing: \"\", /*Perubahan tidak akan disimpan ?*/\r\n\t\tconfirm_deleting: \"Acara akan dihapus\",\r\n\t\tsection_description: \"Keterangan\",\r\n\t\tsection_time: \"Periode\",\r\n\t\tfull_day: \"Hari penuh\",\r\n\r\n\t\t/*recurring events*/\r\n\t\tconfirm_recurring: \"Apakah acara ini akan berulang?\",\r\n\t\tsection_recurring: \"Acara Rutin\",\r\n\t\tbutton_recurring: \"Tidak Difungsikan\",\r\n\t\tbutton_recurring_open: \"Difungsikan\",\r\n\t\tbutton_edit_series: \"Mengedit seri\",\r\n\t\tbutton_edit_occurrence: \"Mengedit salinan\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Agenda\",\r\n\t\tdate: \"Tanggal\",\r\n\t\tdescription: \"Keterangan\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"Tahun\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Agenda\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Tabel\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\"\r\n\t}\r\n};","export default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Gennaio\", \"Febbraio\", \"Marzo\", \"Aprile\", \"Maggio\", \"Giugno\", \"Luglio\", \"Agosto\", \"Settembre\", \"Ottobre\", \"Novembre\", \"Dicembre\"],\r\n\t\tmonth_short: [\"Gen\", \"Feb\", \"Mar\", \"Apr\", \"Mag\", \"Giu\", \"Lug\", \"Ago\", \"Set\", \"Ott\", \"Nov\", \"Dic\"],\r\n\t\tday_full: [\"Domenica\", \"Lunedì\", \"Martedì\", \"Mercoledì\", \"Giovedì\", \"Venerdì\", \"Sabato\"],\r\n\t\tday_short: [\"Dom\", \"Lun\", \"Mar\", \"Mer\", \"Gio\", \"Ven\", \"Sab\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Oggi\",\r\n\t\tday_tab: \"Giorno\",\r\n\t\tweek_tab: \"Settimana\",\r\n\t\tmonth_tab: \"Mese\",\r\n\t\tnew_event: \"Nuovo evento\",\r\n\t\ticon_save: \"Salva\",\r\n\t\ticon_cancel: \"Chiudi\",\r\n\t\ticon_details: \"Dettagli\",\r\n\t\ticon_edit: \"Modifica\",\r\n\t\ticon_delete: \"Elimina\",\r\n\t\tconfirm_closing: \"\", //Le modifiche apportate saranno perse, siete sicuri?\r\n\t\tconfirm_deleting: \"L'evento sarà eliminato, siete sicuri?\",\r\n\t\tsection_description: \"Descrizione\",\r\n\t\tsection_time: \"Periodo di tempo\",\r\n\t\tfull_day: \"Intera giornata\",\r\n\r\n\t\tconfirm_recurring: \"Vuoi modificare l'intera serie di eventi?\",\r\n\t\tsection_recurring: \"Ripetere l'evento\",\r\n\t\tbutton_recurring: \"Disattivato\",\r\n\t\tbutton_recurring_open: \"Attivato\",\r\n\t\tbutton_edit_series: \"Modificare la serie\",\r\n\t\tbutton_edit_occurrence: \"Modificare una copia\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Agenda\",\r\n\t\tdate: \"Data\",\r\n\t\tdescription: \"Descrizione\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"Anno\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Agenda\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Griglia\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"Quotidiano\",\r\n\t\trepeat_radio_week: \"Settimanale\",\r\n\t\trepeat_radio_month: \"Mensile\",\r\n\t\trepeat_radio_year: \"Annuale\",\r\n\t\trepeat_radio_day_type: \"Ogni\",\r\n\t\trepeat_text_day_count: \"giorno\",\r\n\t\trepeat_radio_day_type2: \"Ogni giornata lavorativa\",\r\n\t\trepeat_week: \" Ripetere ogni\",\r\n\t\trepeat_text_week_count: \"settimana:\",\r\n\t\trepeat_radio_month_type: \"Ripetere\",\r\n\t\trepeat_radio_month_start: \"Il\",\r\n\t\trepeat_text_month_day: \"giorno ogni\",\r\n\t\trepeat_text_month_count: \"mese\",\r\n\t\trepeat_text_month_count2_before: \"ogni\",\r\n\t\trepeat_text_month_count2_after: \"mese\",\r\n\t\trepeat_year_label: \"Il\",\r\n\t\tselect_year_day2: \"del\",\r\n\t\trepeat_text_year_day: \"giorno\",\r\n\t\tselect_year_month: \"mese\",\r\n\t\trepeat_radio_end: \"Senza data finale\",\r\n\t\trepeat_text_occurences_count: \"occorenze\",\r\n\t\trepeat_radio_end3: \"Fine\",\r\n\t\trepeat_radio_end2: \"Dopo\",\r\n\t\tmonth_for_recurring: [\"Gennaio\", \"Febbraio\", \"Marzo\", \"Aprile\", \"Maggio\", \"Jiugno\", \"Luglio\", \"Agosto\", \"Settembre\", \"Ottobre\", \"Novembre\", \"Dicembre\"],\r\n\t\tday_for_recurring: [\"Domenica\", \"Lunedì\", \"Martedì\", \"Mercoledì\", \"Jovedì\", \"Venerdì\", \"Sabato\"]\r\n\t}\r\n};\r\n","/*\r\n Translation by Genexus Japan Inc.\r\n */\r\nexport default {\r\n\tdate: {\r\n\t\tmonth_full: [\"1月\", \"2月\", \"3月\", \"4月\", \"5月\", \"6月\", \"7月\", \"8月\", \"9月\", \"10月\", \"11月\", \"12月\"],\r\n\t\tmonth_short: [ \"1月\", \"2月\", \"3月\", \"4月\", \"5月\", \"6月\", \"7月\", \"8月\", \"9月\", \"10月\", \"11月\", \"12月\"],\r\n\t\tday_full: [\"日曜日\", \"月曜日\", \"火曜日\", \"水曜日\", \"木曜日\", \"金曜日\", \"土曜日\"],\r\n\t\tday_short: [\"日\", \"月\", \"火\", \"水\", \"木\", \"金\", \"土\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"今日\",\r\n\t\tday_tab: \"日\",\r\n\t\tweek_tab: \"週\",\r\n\t\tmonth_tab: \"月\",\r\n\t\tnew_event: \"新イベント\",\r\n\t\ticon_save: \"保存\",\r\n\t\ticon_cancel: \"キャンセル\",\r\n\t\ticon_details: \"詳細\",\r\n\t\ticon_edit: \"編集\",\r\n\t\ticon_delete: \"削除\",\r\n\t\tconfirm_closing: \"\", //変更が取り消されます、宜しいですか？\r\n\t\tconfirm_deleting: \"イベント完全に削除されます、宜しいですか？\",\r\n\t\tsection_description: \"デスクリプション\",\r\n\t\tsection_time: \"期間\",\r\n\t\tconfirm_recurring: \"繰り返されているイベントを全て編集しますか？\",\r\n\t\tsection_recurring: \"イベントを繰り返す\",\r\n\t\tbutton_recurring: \"無効\",\r\n\t\tbutton_recurring_open: \"有効\",\r\n\t\tfull_day: \"終日\",\r\n\t\tbutton_edit_series: \"シリーズを編集します\",\r\n\t\tbutton_edit_occurrence: \"コピーを編集\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"議題は\",\r\n\t\tdate: \"日付\",\r\n\t\tdescription: \"説明\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"今年\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"議題は\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"グリッド\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\"\r\n\t}\r\n};\r\n\r\n\r\n","export default class LocaleManager{\r\n\tconstructor(config){\r\n\t\tthis._locales = {};\r\n\t\tfor(const i in config){\r\n\t\t\tthis._locales[i] = config[i];\r\n\t\t}\r\n\t}\r\n\r\n\taddLocale(name, locale) {\r\n\t\tthis._locales[name] = locale;\r\n\t}\r\n\r\n\tgetLocale(name) {\r\n\t\treturn this._locales[name];\r\n\t}\r\n}","export default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Mars\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Desember\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Des\"],\r\n\t\tday_full: [\"Søndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lørdag\"],\r\n\t\tday_short: [\"Søn\", \"Mon\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lør\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"I dag\",\r\n\t\tday_tab: \"Dag\",\r\n\t\tweek_tab: \"Uke\",\r\n\t\tmonth_tab: \"Måned\",\r\n\t\tnew_event: \"Ny hendelse\",\r\n\t\ticon_save: \"Lagre\",\r\n\t\ticon_cancel: \"Avbryt\",\r\n\t\ticon_details: \"Detaljer\",\r\n\t\ticon_edit: \"Rediger\",\r\n\t\ticon_delete: \"Slett\",\r\n\t\tconfirm_closing: \"\", //Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Hendelsen vil bli slettet permanent. Er du sikker?\",\r\n\t\tsection_description: \"Beskrivelse\",\r\n\t\tsection_time: \"Tidsperiode\",\r\n\r\n\t\t/*recurring events*/\r\n\t\tconfirm_recurring: \"Vil du forandre hele dette settet av repeterende hendelser?\",\r\n\t\tsection_recurring: \"Repeter hendelsen\",\r\n\t\tbutton_recurring: \"Av\",\r\n\t\tbutton_recurring_open: \"På\",\r\n\t\tbutton_edit_series: \"Rediger serien\",\r\n\t\tbutton_edit_occurrence: \"Redigere en kopi\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Agenda\",\r\n\t\tdate: \"Dato\",\r\n\t\tdescription: \"Beskrivelse\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"År\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Agenda\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Grid\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"Daglig\",\r\n\t\trepeat_radio_week: \"Ukentlig\",\r\n\t\trepeat_radio_month: \"Månedlig\",\r\n\t\trepeat_radio_year: \"Årlig\",\r\n\t\trepeat_radio_day_type: \"Hver\",\r\n\t\trepeat_text_day_count: \"dag\",\r\n\t\trepeat_radio_day_type2: \"Alle hverdager\",\r\n\t\trepeat_week: \" Gjentas hver\",\r\n\t\trepeat_text_week_count: \"uke på:\",\r\n\t\trepeat_radio_month_type: \"På hver\",\r\n\t\trepeat_radio_month_start: \"På\",\r\n\t\trepeat_text_month_day: \"dag hver\",\r\n\t\trepeat_text_month_count: \"måned\",\r\n\t\trepeat_text_month_count2_before: \"hver\",\r\n\t\trepeat_text_month_count2_after: \"måned\",\r\n\t\trepeat_year_label: \"på\",\r\n\t\tselect_year_day2: \"i\",\r\n\t\trepeat_text_year_day: \"dag i\",\r\n\t\tselect_year_month: \"\",\r\n\t\trepeat_radio_end: \"Ingen sluttdato\",\r\n\t\trepeat_text_occurences_count: \"forekomst\",\r\n\t\trepeat_radio_end3: \"Stop den\",\r\n\t\trepeat_radio_end2: \"Etter\",\r\n\t\tmonth_for_recurring: [\"Januar\", \"Februar\", \"Mars\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Desember\"],\r\n\t\tday_for_recurring: [\"Sondag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lørdag\"]\r\n\t}\r\n};\r\n","export default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januari\", \"Februari\", \"Maart\", \"April\", \"Mei\", \"Juni\", \"Juli\", \"Augustus\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"mrt\", \"Apr\", \"Mei\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Zondag\", \"Maandag\", \"Dinsdag\", \"Woensdag\", \"Donderdag\", \"Vrijdag\", \"Zaterdag\"],\r\n\t\tday_short: [\"Zo\", \"Ma\", \"Di\", \"Wo\", \"Do\", \"Vr\", \"Za\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Vandaag\",\r\n\t\tday_tab: \"Dag\",\r\n\t\tweek_tab: \"Week\",\r\n\t\tmonth_tab: \"Maand\",\r\n\t\tnew_event: \"Nieuw item\",\r\n\t\ticon_save: \"Opslaan\",\r\n\t\ticon_cancel: \"Annuleren\",\r\n\t\ticon_details: \"Details\",\r\n\t\ticon_edit: \"Bewerken\",\r\n\t\ticon_delete: \"Verwijderen\",\r\n\t\tconfirm_closing: \"\", //Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Item zal permanent worden verwijderd, doorgaan?\",\r\n\t\tsection_description: \"Beschrijving\",\r\n\t\tsection_time: \"Tijd periode\",\r\n\t\tfull_day: \"Hele dag\",\r\n\r\n\t\tconfirm_recurring: \"Wilt u alle terugkerende items bijwerken?\",\r\n\t\tsection_recurring: \"Item herhalen\",\r\n\t\tbutton_recurring: \"Uit\",\r\n\t\tbutton_recurring_open: \"Aan\",\r\n\t\tbutton_edit_series: \"Bewerk de serie\",\r\n\t\tbutton_edit_occurrence: \"Bewerk een kopie\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Agenda\",\r\n\t\tdate: \"Datum\",\r\n\t\tdescription: \"Omschrijving\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"Jaar\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Agenda\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Tabel\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"Dagelijks\",\r\n\t\trepeat_radio_week: \"Wekelijks\",\r\n\t\trepeat_radio_month: \"Maandelijks\",\r\n\t\trepeat_radio_year: \"Jaarlijks\",\r\n\t\trepeat_radio_day_type: \"Elke\",\r\n\t\trepeat_text_day_count: \"dag(en)\",\r\n\t\trepeat_radio_day_type2: \"Elke werkdag\",\r\n\t\trepeat_week: \" Herhaal elke\",\r\n\t\trepeat_text_week_count: \"week op de volgende dagen:\",\r\n\t\trepeat_radio_month_type: \"Herhaal\",\r\n\t\trepeat_radio_month_start: \"Op\",\r\n\t\trepeat_text_month_day: \"dag iedere\",\r\n\t\trepeat_text_month_count: \"maanden\",\r\n\t\trepeat_text_month_count2_before: \"iedere\",\r\n\t\trepeat_text_month_count2_after: \"maanden\",\r\n\t\trepeat_year_label: \"Op\",\r\n\t\tselect_year_day2: \"van\",\r\n\t\trepeat_text_year_day: \"dag\",\r\n\t\tselect_year_month: \"maand\",\r\n\t\trepeat_radio_end: \"Geen eind datum\",\r\n\t\trepeat_text_occurences_count: \"keren\",\r\n\t\trepeat_radio_end3: \"Eindigd per\",\r\n\t\trepeat_radio_end2: \"Na\",\r\n\t\tmonth_for_recurring: [\"Januari\", \"Februari\", \"Maart\", \"April\", \"Mei\", \"Juni\", \"Juli\", \"Augustus\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tday_for_recurring: [\"Zondag\", \"Maandag\", \"Dinsdag\", \"Woensdag\", \"Donderdag\", \"Vrijdag\", \"Zaterdag\"]\r\n\t}\r\n};\r\n\r\n\r\n","export default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Mars\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Desember\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Des\"],\r\n\t\tday_full: [\"Søndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lørdag\"],\r\n\t\tday_short: [\"Søn\", \"Man\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lør\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Idag\",\r\n\t\tday_tab: \"Dag\",\r\n\t\tweek_tab: \"Uke\",\r\n\t\tmonth_tab: \"Måned\",\r\n\t\tnew_event: \"Ny\",\r\n\t\ticon_save: \"Lagre\",\r\n\t\ticon_cancel: \"Avbryt\",\r\n\t\ticon_details: \"Detaljer\",\r\n\t\ticon_edit: \"Endre\",\r\n\t\ticon_delete: \"Slett\",\r\n\t\tconfirm_closing: \"Endringer blir ikke lagret, er du sikker?\", //Endringer blir ikke lagret, er du sikker?\r\n\t\tconfirm_deleting: \"Oppføringen vil bli slettet, er du sikker?\",\r\n\t\tsection_description: \"Beskrivelse\",\r\n\t\tsection_time: \"Tidsperiode\",\r\n\t\tfull_day: \"Full dag\",\r\n\r\n\t\t/*recurring events*/\r\n\t\tconfirm_recurring: \"Vil du endre hele settet med repeterende oppføringer?\",\r\n\t\tsection_recurring: \"Repeterende oppføring\",\r\n\t\tbutton_recurring: \"Ikke aktiv\",\r\n\t\tbutton_recurring_open: \"Aktiv\",\r\n\t\tbutton_edit_series: \"Rediger serien\",\r\n\t\tbutton_edit_occurrence: \"Redigere en kopi\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Agenda\",\r\n\t\tdate: \"Dato\",\r\n\t\tdescription: \"Beskrivelse\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"År\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Agenda\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Grid\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\"\r\n\t}\r\n};\r\n\r\n","export default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Styczeń\", \"Luty\", \"Marzec\", \"Kwiecień\", \"Maj\", \"Czerwiec\", \"Lipiec\", \"Sierpień\", \"Wrzesień\", \"Październik\", \"Listopad\", \"Grudzień\"],\r\n\t\tmonth_short: [\"Sty\", \"Lut\", \"Mar\", \"Kwi\", \"Maj\", \"Cze\", \"Lip\", \"Sie\", \"Wrz\", \"Paź\", \"Lis\", \"Gru\"],\r\n\t\tday_full: [\"Niedziela\", \"Poniedziałek\", \"Wtorek\", \"Środa\", \"Czwartek\", \"Piątek\", \"Sobota\"],\r\n\t\tday_short: [\"Nie\", \"Pon\", \"Wto\", \"Śro\", \"Czw\", \"Pią\", \"Sob\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Dziś\",\r\n\t\tday_tab: \"Dzień\",\r\n\t\tweek_tab: \"Tydzień\",\r\n\t\tmonth_tab: \"Miesiąc\",\r\n\t\tnew_event: \"Nowe zdarzenie\",\r\n\t\ticon_save: \"Zapisz\",\r\n\t\ticon_cancel: \"Anuluj\",\r\n\t\ticon_details: \"Szczegóły\",\r\n\t\ticon_edit: \"Edytuj\",\r\n\t\ticon_delete: \"Usuń\",\r\n\t\tconfirm_closing: \"\", //Zmiany zostaną usunięte, jesteś pewien?\r\n\t\tconfirm_deleting: \"Zdarzenie zostanie usunięte na zawsze, kontynuować?\",\r\n\t\tsection_description: \"Opis\",\r\n\t\tsection_time: \"Okres czasu\",\r\n\t\tfull_day: \"Cały dzień\",\r\n\r\n\t\t/*recurring events*/\r\n\t\tconfirm_recurring: \"Czy chcesz edytować cały zbiór powtarzających się zdarzeń?\",\r\n\t\tsection_recurring: \"Powtórz zdarzenie\",\r\n\t\tbutton_recurring: \"Nieaktywne\",\r\n\t\tbutton_recurring_open: \"Aktywne\",\r\n\t\tbutton_edit_series: \"Edytuj serię\",\r\n\t\tbutton_edit_occurrence: \"Edytuj kopię\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Agenda\",\r\n\t\tdate: \"Data\",\r\n\t\tdescription: \"Opis\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"Rok\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Agenda\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Tabela\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"Codziennie\",\r\n\t\trepeat_radio_week: \"Co tydzie\",\r\n\t\trepeat_radio_month: \"Co miesic\",\r\n\t\trepeat_radio_year: \"Co rok\",\r\n\t\trepeat_radio_day_type: \"Kadego\",\r\n\t\trepeat_text_day_count: \"dnia\",\r\n\t\trepeat_radio_day_type2: \"Kadego dnia roboczego\",\r\n\t\trepeat_week: \" Powtarzaj kadego\",\r\n\t\trepeat_text_week_count: \"tygodnia w dni:\",\r\n\t\trepeat_radio_month_type: \"Powtrz\",\r\n\t\trepeat_radio_month_start: \"W\",\r\n\t\trepeat_text_month_day: \"dnia kadego\",\r\n\t\trepeat_text_month_count: \"miesica\",\r\n\t\trepeat_text_month_count2_before: \"kadego\",\r\n\t\trepeat_text_month_count2_after: \"miesica\",\r\n\t\trepeat_year_label: \"W\",\r\n\t\tselect_year_day2: \"miesica\",\r\n\t\trepeat_text_year_day: \"dnia miesica\",\r\n\t\tselect_year_month: \"\",\r\n\t\trepeat_radio_end: \"Bez daty kocowej\",\r\n\t\trepeat_text_occurences_count: \"wystpieniu/ach\",\r\n\t\trepeat_radio_end3: \"Zakocz w\",\r\n\t\trepeat_radio_end2: \"Po\",\r\n\t\tmonth_for_recurring: [\"Stycznia\", \"Lutego\", \"Marca\", \"Kwietnia\", \"Maja\", \"Czerwca\", \"Lipca\", \"Sierpnia\", \"Wrzenia\", \"Padziernka\", \"Listopada\", \"Grudnia\"],\r\n\t\tday_for_recurring: [\"Niedziela\", \"Poniedziaek\", \"Wtorek\", \"roda\", \"Czwartek\", \"Pitek\", \"Sobota\"]\r\n\t}\r\n};\r\n\r\n","/*\r\n\r\n TRANSLATION BY MATTHEUS PIROVANI RORIZ GONЗALVES\r\n\r\n mattheusroriz@hotmail.com / mattheus.pirovani@gmail.com /\r\n\r\n www.atrixian.com.br\r\n\r\n */\r\n\r\nexport default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Janeiro\", \"Fevereiro\", \"Março\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"],\r\n\t\tmonth_short: [\"Jan\", \"Fev\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Out\", \"Nov\", \"Dez\"],\r\n\t\tday_full: [\"Domingo\", \"Segunda\", \"Terça\", \"Quarta\", \"Quinta\", \"Sexta\", \"Sábado\"],\r\n\t\tday_short: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sab\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Hoje\",\r\n\t\tday_tab: \"Dia\",\r\n\t\tweek_tab: \"Semana\",\r\n\t\tmonth_tab: \"Mês\",\r\n\t\tnew_event: \"Novo evento\",\r\n\t\ticon_save: \"Salvar\",\r\n\t\ticon_cancel: \"Cancelar\",\r\n\t\ticon_details: \"Detalhes\",\r\n\t\ticon_edit: \"Editar\",\r\n\t\ticon_delete: \"Deletar\",\r\n\t\tconfirm_closing: \"\", //Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Tem certeza que deseja excluir?\",\r\n\t\tsection_description: \"Descrição\",\r\n\t\tsection_time: \"Período de tempo\",\r\n\t\tfull_day: \"Dia inteiro\",\r\n\r\n\t\tconfirm_recurring: \"Deseja editar todos esses eventos repetidos?\",\r\n\t\tsection_recurring: \"Repetir evento\",\r\n\t\tbutton_recurring: \"Desabilitar\",\r\n\t\tbutton_recurring_open: \"Habilitar\",\r\n\t\tbutton_edit_series: \"Editar a série\",\r\n\t\tbutton_edit_occurrence: \"Editar uma cópia\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Dia\",\r\n\t\tdate: \"Data\",\r\n\t\tdescription: \"Descrição\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"Ano\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Dia\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Grade\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"Diário\",\r\n\t\trepeat_radio_week: \"Semanal\",\r\n\t\trepeat_radio_month: \"Mensal\",\r\n\t\trepeat_radio_year: \"Anual\",\r\n\t\trepeat_radio_day_type: \"Cada\",\r\n\t\trepeat_text_day_count: \"dia(s)\",\r\n\t\trepeat_radio_day_type2: \"Cada trabalho diário\",\r\n\t\trepeat_week: \" Repita cada\",\r\n\t\trepeat_text_week_count: \"semana:\",\r\n\t\trepeat_radio_month_type: \"Repetir\",\r\n\t\trepeat_radio_month_start: \"Em\",\r\n\t\trepeat_text_month_day: \"todo dia\",\r\n\t\trepeat_text_month_count: \"mês\",\r\n\t\trepeat_text_month_count2_before: \"todo\",\r\n\t\trepeat_text_month_count2_after: \"mês\",\r\n\t\trepeat_year_label: \"Em\",\r\n\t\tselect_year_day2: \"of\",\r\n\t\trepeat_text_year_day: \"dia\",\r\n\t\tselect_year_month: \"mês\",\r\n\t\trepeat_radio_end: \"Sem data final\",\r\n\t\trepeat_text_occurences_count: \"ocorrências\",\r\n\t\trepeat_radio_end3: \"Fim\",\r\n\t\trepeat_radio_end2: \"Depois\",\r\n\t\tmonth_for_recurring: [\"Janeiro\", \"Fevereiro\", \"Março\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"],\r\n\t\tday_for_recurring: [\"Domingo\", \"Segunda\", \"Terça\", \"Quarta\", \"Quinta\", \"Sexta\", \"Sábado\"]\r\n\t}\r\n};\r\n\r\n\r\n","/*\r\n\tTraducere de Ovidiu Lixandru: http://www.madball.ro\r\n */\r\n\r\nexport default {\r\n\tdate:{\r\n\t\tmonth_full:[\"Ianuarie\", \"Februarie\", \"Martie\", \"Aprilie\", \"Mai\", \"Iunie\", \"Iulie\", \"August\", \"Septembrie\", \"Octombrie\", \"November\", \"December\"],\r\n\t\tmonth_short:[\"Ian\", \"Feb\", \"Mar\", \"Apr\", \"Mai\", \"Iun\", \"Iul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\tday_full:[\"Duminica\", \"Luni\", \"Marti\", \"Miercuri\", \"Joi\", \"Vineri\", \"Sambata\"],\r\n\t\tday_short:[\"Du\", \"Lu\", \"Ma\", \"Mi\", \"Jo\", \"Vi\", \"Sa\"]\r\n\t},\r\n\tlabels:{\r\n\t\tdhx_cal_today_button:\"Astazi\",\r\n\t\tday_tab:\"Zi\",\r\n\t\tweek_tab:\"Saptamana\",\r\n\t\tmonth_tab:\"Luna\",\r\n\t\tnew_event:\"Eveniment nou\",\r\n\t\ticon_save:\"Salveaza\",\r\n\t\ticon_cancel:\"Anuleaza\",\r\n\t\ticon_details:\"Detalii\",\r\n\t\ticon_edit:\"Editeaza\",\r\n\t\ticon_delete:\"Sterge\",\r\n\t\tconfirm_closing:\"Schimbarile nu vor fi salvate, esti sigur?\",//Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting:\"Evenimentul va fi sters permanent, esti sigur?\",\r\n\t\tsection_description:\"Descriere\",\r\n\t\tsection_time:\"Interval\",\r\n\t\tfull_day:\"Toata ziua\",\r\n\r\n\t\t/*recurring events*/\r\n\t\tconfirm_recurring:\"Vrei sa editezi toata seria de evenimente repetate?\",\r\n\t\tsection_recurring:\"Repetare\",\r\n\t\tbutton_recurring:\"Dezactivata\",\r\n\t\tbutton_recurring_open:\"Activata\",\r\n\t\tbutton_edit_series: \"Editeaza serie\",\r\n\t\tbutton_edit_occurrence: \"Editeaza doar intrare\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab:\"Agenda\",\r\n\t\tdate:\"Data\",\r\n\t\tdescription:\"Descriere\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab:\"An\",\r\n\r\n\t\t/* week agenda extension */\r\n\t\tweek_agenda_tab: \"Agenda\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Lista\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"Zilnic\",\r\n\t\trepeat_radio_week: \"Saptamanal\",\r\n\t\trepeat_radio_month: \"Lunar\",\r\n\t\trepeat_radio_year: \"Anual\",\r\n\t\trepeat_radio_day_type: \"La fiecare\",\r\n\t\trepeat_text_day_count: \"zi(le)\",\r\n\t\trepeat_radio_day_type2: \"Fiecare zi lucratoare\",\r\n\t\trepeat_week: \" Repeta la fiecare\",\r\n\t\trepeat_text_week_count: \"saptamana in urmatoarele zile:\",\r\n\t\trepeat_radio_month_type: \"Repeta in\",\r\n\t\trepeat_radio_month_start: \"In a\",\r\n\t\trepeat_text_month_day: \"zi la fiecare\",\r\n\t\trepeat_text_month_count: \"luni\",\r\n\t\trepeat_text_month_count2_before: \"la fiecare\",\r\n\t\trepeat_text_month_count2_after: \"luni\",\r\n\t\trepeat_year_label: \"In\",\r\n\t\tselect_year_day2: \"a lunii\",\r\n\t\trepeat_text_year_day: \"zi a lunii\",\r\n\t\tselect_year_month: \"\",\r\n\t\trepeat_radio_end: \"Fara data de sfarsit\",\r\n\t\trepeat_text_occurences_count: \"evenimente\",\r\n\t\trepeat_radio_end3: \"La data\",\r\n\t\trepeat_radio_end2: \"Dupa\",\r\n\t\tmonth_for_recurring: [\"Ianuarie\", \"Februarie\", \"Martie\", \"Aprilie\", \"Mai\", \"Iunie\", \"Iulie\", \"August\", \"Septembrie\", \"Octombrie\", \"Noiembrie\", \"Decembrie\"],\r\n\t\tday_for_recurring: [\"Duminica\", \"Luni\", \"Marti\", \"Miercuri\", \"Joi\", \"Vineri\", \"Sambata\"]\r\n\t}\r\n};\r\n\r\n","export default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Январь\", \"Февраль\", \"Март\", \"Апрель\", \"Maй\", \"Июнь\", \"Июль\", \"Август\", \"Сентябрь\", \"Oктябрь\", \"Ноябрь\", \"Декабрь\"],\r\n\t\tmonth_short: [\"Янв\", \"Фев\", \"Maр\", \"Aпр\", \"Maй\", \"Июн\", \"Июл\", \"Aвг\", \"Сен\", \"Окт\", \"Ноя\", \"Дек\"],\r\n\t\tday_full: [ \"Воскресенье\", \"Понедельник\", \"Вторник\", \"Среда\", \"Четверг\", \"Пятница\", \"Суббота\"],\r\n\t\tday_short: [\"Вс\", \"Пн\", \"Вт\", \"Ср\", \"Чт\", \"Пт\", \"Сб\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Сегодня\",\r\n\t\tday_tab: \"День\",\r\n\t\tweek_tab: \"Неделя\",\r\n\t\tmonth_tab: \"Месяц\",\r\n\t\tnew_event: \"Новое событие\",\r\n\t\ticon_save: \"Сохранить\",\r\n\t\ticon_cancel: \"Отменить\",\r\n\t\ticon_details: \"Детали\",\r\n\t\ticon_edit: \"Изменить\",\r\n\t\ticon_delete: \"Удалить\",\r\n\t\tconfirm_closing: \"\", //Ваши изменения будут потеряны, продолжить?\r\n\t\tconfirm_deleting: \"Событие будет удалено безвозвратно, продолжить?\",\r\n\t\tsection_description: \"Описание\",\r\n\t\tsection_time: \"Период времени\",\r\n\t\tfull_day: \"Весь день\",\r\n\r\n\t\tconfirm_recurring: \"Вы хотите изменить всю серию повторяющихся событий?\",\r\n\t\tsection_recurring: \"Повторение\",\r\n\t\tbutton_recurring: \"Отключено\",\r\n\t\tbutton_recurring_open: \"Включено\",\r\n\t\tbutton_edit_series: \"Редактировать серию\",\r\n\t\tbutton_edit_occurrence: \"Редактировать экземпляр\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Список\",\r\n\t\tdate: \"Дата\",\r\n\t\tdescription: \"Описание\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"Год\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Список\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Таблица\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"День\",\r\n\t\trepeat_radio_week: \"Неделя\",\r\n\t\trepeat_radio_month: \"Месяц\",\r\n\t\trepeat_radio_year: \"Год\",\r\n\t\trepeat_radio_day_type: \"Каждый\",\r\n\t\trepeat_text_day_count: \"день\",\r\n\t\trepeat_radio_day_type2: \"Каждый рабочий день\",\r\n\t\trepeat_week: \" Повторять каждую\",\r\n\t\trepeat_text_week_count: \"неделю , в:\",\r\n\t\trepeat_radio_month_type: \"Повторять\",\r\n\t\trepeat_radio_month_start: \"\",\r\n\t\trepeat_text_month_day: \" числа каждый \",\r\n\t\trepeat_text_month_count: \"месяц\",\r\n\t\trepeat_text_month_count2_before: \"каждый \",\r\n\t\trepeat_text_month_count2_after: \"месяц\",\r\n\t\trepeat_year_label: \"\",\r\n\t\tselect_year_day2: \"\",\r\n\t\trepeat_text_year_day: \"день\",\r\n\t\tselect_year_month: \"\",\r\n\t\trepeat_radio_end: \"Без даты окончания\",\r\n\t\trepeat_text_occurences_count: \"повторений\",\r\n\t\trepeat_radio_end3: \"До \",\r\n\t\trepeat_radio_end2: \"\",\r\n\t\tmonth_for_recurring: [\"Января\", \"Февраля\", \"Марта\", \"Апреля\", \"Мая\", \"Июня\", \"Июля\", \"Августа\", \"Сентября\", \"Октября\", \"Ноября\", \"Декабря\"],\r\n\t\tday_for_recurring: [\"Воскресенье\", \"Понедельник\", \"Вторник\", \"Среду\", \"Четверг\", \"Пятницу\", \"Субботу\"]\r\n\t}\r\n};\r\n","export default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Marec\", \"April\", \"Maj\", \"Junij\", \"Julij\", \"Avgust\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Nedelja\", \"Ponedeljek\", \"Torek\", \"Sreda\", \"Četrtek\", \"Petek\", \"Sobota\"],\r\n\t\tday_short: [\"Ned\", \"Pon\", \"Tor\", \"Sre\", \"Čet\", \"Pet\", \"Sob\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Danes\",\r\n\t\tday_tab: \"Dan\",\r\n\t\tweek_tab: \"Teden\",\r\n\t\tmonth_tab: \"Mesec\",\r\n\t\tnew_event: \"Nov dogodek\",\r\n\t\ticon_save: \"Shrani\",\r\n\t\ticon_cancel: \"Prekliči\",\r\n\t\ticon_details: \"Podrobnosti\",\r\n\t\ticon_edit: \"Uredi\",\r\n\t\ticon_delete: \"Izbriši\",\r\n\t\tconfirm_closing: \"\", //Spremembe ne bodo shranjene. Želite nadaljevati ?\r\n\t\tconfirm_deleting: \"Dogodek bo izbrisan. Želite nadaljevati?\",\r\n\t\tsection_description: \"Opis\",\r\n\t\tsection_time: \"Časovni okvir\",\r\n\t\tfull_day: \"Ves dan\",\r\n\r\n\t\t/*recurring events*/\r\n\t\tconfirm_recurring: \"Želite urediti celoten set ponavljajočih dogodkov?\",\r\n\t\tsection_recurring: \"Ponovi dogodek\",\r\n\t\tbutton_recurring: \"Onemogočeno\",\r\n\t\tbutton_recurring_open: \"Omogočeno\",\r\n\t\tbutton_edit_series: \"Edit series\",\r\n\t\tbutton_edit_occurrence: \"Edit occurrence\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Zadeva\",\r\n\t\tdate: \"Datum\",\r\n\t\tdescription: \"Opis\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"Leto\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Zadeva\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Miza\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\"\r\n\t}\r\n};\r\n\r\n","export default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Január\", \"Február\", \"Marec\", \"Apríl\", \"Máj\", \"Jún\", \"Júl\", \"August\", \"September\", \"Október\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Máj\", \"Jún\", \"Júl\", \"Aug\", \"Sept\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Nedeľa\", \"Pondelok\", \"Utorok\", \"Streda\", \"Štvrtok\", \"Piatok\", \"Sobota\"],\r\n\t\tday_short: [\"Ne\", \"Po\", \"Ut\", \"St\", \"Št\", \"Pi\", \"So\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Dnes\",\r\n\t\tday_tab: \"Deň\",\r\n\t\tweek_tab: \"Týždeň\",\r\n\t\tmonth_tab: \"Mesiac\",\r\n\t\tnew_event: \"Nová udalosť\",\r\n\t\ticon_save: \"Uložiť\",\r\n\t\ticon_cancel: \"Späť\",\r\n\t\ticon_details: \"Detail\",\r\n\t\ticon_edit: \"Edituj\",\r\n\t\ticon_delete: \"Zmazať\",\r\n\t\tconfirm_closing: \"Vaše zmeny nebudú uložené. Skutočne?\", //Vaše změny budou ztraceny, opravdu ?\r\n\t\tconfirm_deleting: \"Udalosť bude natrvalo vymazaná. Skutočne?\",\r\n\t\tsection_description: \"Poznámky\",\r\n\t\tsection_time: \"Doba platnosti\",\r\n\r\n\t\t/*recurring events*/\r\n\t\tconfirm_recurring: \"Prajete si upraviť celú radu opakovaných udalostí?\",\r\n\t\tsection_recurring: \"Opakovanie udalosti\",\r\n\t\tbutton_recurring: \"Vypnuté\",\r\n\t\tbutton_recurring_open: \"Zapnuté\",\r\n\t\tbutton_edit_series: \"Upraviť opakovania\",\r\n\t\tbutton_edit_occurrence: \"Upraviť inštancie\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Program\",\r\n\t\tdate: \"Dátum\",\r\n\t\tdescription: \"Poznámka\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"Rok\",\r\n\t\tfull_day: \"Celý deň\", // Full day\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Program\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Mriežka\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"Denne\",\r\n\t\trepeat_radio_week: \"Týždenne\",\r\n\t\trepeat_radio_month: \"Mesaène\",\r\n\t\trepeat_radio_year: \"Roène\",\r\n\t\trepeat_radio_day_type: \"Každý\",\r\n\t\trepeat_text_day_count: \"deò\",\r\n\t\trepeat_radio_day_type2: \"Každý prac. deò\",\r\n\t\trepeat_week: \"Opakova každý\",\r\n\t\trepeat_text_week_count: \"týždeò v dòoch:\",\r\n\t\trepeat_radio_month_type: \"Opakova\",\r\n\t\trepeat_radio_month_start: \"On\",\r\n\t\trepeat_text_month_day: \"deò každý\",\r\n\t\trepeat_text_month_count: \"mesiac\",\r\n\t\trepeat_text_month_count2_before: \"každý\",\r\n\t\trepeat_text_month_count2_after: \"mesiac\",\r\n\t\trepeat_year_label: \"On\",\r\n\t\tselect_year_day2: \"poèas\",\r\n\t\trepeat_text_year_day: \"deò\",\r\n\t\tselect_year_month: \"mesiac\",\r\n\t\trepeat_radio_end: \"Bez dátumu ukonèenia\",\r\n\t\trepeat_text_occurences_count: \"udalostiach\",\r\n\t\trepeat_radio_end3: \"Ukonèi\",\r\n\t\trepeat_radio_end2: \"Po\",\r\n\t\tmonth_for_recurring: [\"Január\", \"Február\", \"Marec\", \"Apríl\", \"Máj\", \"Jún\", \"Júl\", \"August\", \"September\", \"Október\", \"November\", \"December\"],\r\n\t\tday_for_recurring: [\"Nede¾a\", \"Pondelok\", \"Utorok\", \"Streda\", \"Štvrtok\", \"Piatok\", \"Sobota\"]\r\n\t}\r\n};\r\n\r\n","export default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januari\", \"Februari\", \"Mars\", \"April\", \"Maj\", \"Juni\", \"Juli\", \"Augusti\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Söndag\", \"Måndag\", \"Tisdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lördag\"],\r\n\t\tday_short: [\"Sön\", \"Mån\", \"Tis\", \"Ons\", \"Tor\", \"Fre\", \"Lör\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Idag\",\r\n\t\tday_tab: \"Dag\",\r\n\t\tweek_tab: \"Vecka\",\r\n\t\tmonth_tab: \"Månad\",\r\n\t\tnew_event: \"Ny händelse\",\r\n\t\ticon_save: \"Spara\",\r\n\t\ticon_cancel: \"Ångra\",\r\n\t\ticon_details: \"Detaljer\",\r\n\t\ticon_edit: \"Ändra\",\r\n\t\ticon_delete: \"Ta bort\",\r\n\t\tconfirm_closing: \"\", //Dina förändingar kommer gå förlorade, är du säker?\r\n\t\tconfirm_deleting: \"Är du säker på att du vill ta bort händelsen permanent?\",\r\n\t\tsection_description: \"Beskrivning\",\r\n\t\tsection_time: \"Tid\",\r\n\t\tfull_day: \"Hela dagen\",\r\n\r\n\t\t/*recurring events*/\r\n\t\tconfirm_recurring: \"Vill du redigera hela serien med repeterande händelser?\",\r\n\t\tsection_recurring: \"Upprepa händelse\",\r\n\t\tbutton_recurring: \"Inaktiverat\",\r\n\t\tbutton_recurring_open: \"Aktiverat\",\r\n\t\tbutton_edit_series: \"Redigera serien\",\r\n\t\tbutton_edit_occurrence: \"Redigera en kopia\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Dagordning\",\r\n\t\tdate: \"Datum\",\r\n\t\tdescription: \"Beskrivning\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"År\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Dagordning\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Galler\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Dra för att skapa ny\",\r\n\t\tdrag_to_move:\"Dra för att flytta\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"Dagligen\",\r\n\t\trepeat_radio_week: \"Veckovis\",\r\n\t\trepeat_radio_month: \"Månadsvis\",\r\n\t\trepeat_radio_year: \"Årligen\",\r\n\t\trepeat_radio_day_type: \"Var\",\r\n\t\trepeat_text_day_count: \"dag\",\r\n\t\trepeat_radio_day_type2: \"Varje arbetsdag\",\r\n\t\trepeat_week: \" Upprepa var\",\r\n\t\trepeat_text_week_count: \"vecka dessa dagar:\",\r\n\t\trepeat_radio_month_type: \"Upprepa\",\r\n\t\trepeat_radio_month_start: \"Den\",\r\n\t\trepeat_text_month_day: \"dagen var\",\r\n\t\trepeat_text_month_count: \"månad\",\r\n\t\trepeat_text_month_count2_before: \"var\",\r\n\t\trepeat_text_month_count2_after: \"månad\",\r\n\t\trepeat_year_label: \"Den\",\r\n\t\tselect_year_day2: \"i\",\r\n\t\trepeat_text_year_day: \"dag i\",\r\n\t\tselect_year_month: \"månad\",\r\n\t\trepeat_radio_end: \"Inget slutdatum\",\r\n\t\trepeat_text_occurences_count: \"upprepningar\",\r\n\t\trepeat_radio_end3: \"Sluta efter\",\r\n\t\trepeat_radio_end2: \"Efter\",\r\n\t\tmonth_for_recurring: [\"Januari\", \"Februari\", \"Mars\", \"April\", \"Maj\", \"Juni\", \"Juli\", \"Augusti\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tday_for_recurring: [\"Söndag\", \"Måndag\", \"Tisdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lördag\"]\r\n\t}\r\n};\r\n","export default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Ocak\", \"Þubat\", \"Mart\", \"Nisan\", \"Mayýs\", \"Haziran\", \"Temmuz\", \"Aðustos\", \"Eylül\", \"Ekim\", \"Kasým\", \"Aralýk\"],\r\n\t\tmonth_short: [\"Oca\", \"Þub\", \"Mar\", \"Nis\", \"May\", \"Haz\", \"Tem\", \"Aðu\", \"Eyl\", \"Eki\", \"Kas\", \"Ara\"],\r\n\t\tday_full: [\"Pazar\", \"Pazartes,\", \"Salý\", \"Çarþamba\", \"Perþembe\", \"Cuma\", \"Cumartesi\"],\r\n\t\tday_short: [\"Paz\", \"Pts\", \"Sal\", \"Çar\", \"Per\", \"Cum\", \"Cts\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Bugün\",\r\n\t\tday_tab: \"Gün\",\r\n\t\tweek_tab: \"Hafta\",\r\n\t\tmonth_tab: \"Ay\",\r\n\t\tnew_event: \"Uygun\",\r\n\t\ticon_save: \"Kaydet\",\r\n\t\ticon_cancel: \"Ýptal\",\r\n\t\ticon_details: \"Detaylar\",\r\n\t\ticon_edit: \"Düzenle\",\r\n\t\ticon_delete: \"Sil\",\r\n\t\tconfirm_closing: \"\", //Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Etkinlik silinecek, devam?\",\r\n\t\tsection_description: \"Açýklama\",\r\n\t\tsection_time: \"Zaman aralýðý\",\r\n\t\tfull_day: \"Tam gün\",\r\n\r\n\t\t/*recurring events*/\r\n\t\tconfirm_recurring: \"Tüm tekrar eden etkinlikler silinecek, devam?\",\r\n\t\tsection_recurring: \"Etkinliði tekrarla\",\r\n\t\tbutton_recurring: \"Pasif\",\r\n\t\tbutton_recurring_open: \"Aktif\",\r\n\t\tbutton_edit_series: \"Dizi düzenleme\",\r\n\t\tbutton_edit_occurrence: \"Bir kopyasını düzenleyin\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Ajanda\",\r\n\t\tdate: \"Tarih\",\r\n\t\tdescription: \"Açýklama\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"Yýl\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Ajanda\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Izgara\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\"\r\n\t}\r\n};","export default {\r\n\tdate: {\r\n\t\tmonth_full: [\"Січень\", \"Лютий\", \"Березень\", \"Квітень\", \"Травень\", \"Червень\", \"Липень\", \"Серпень\", \"Вересень\", \"Жовтень\", \"Листопад\", \"Грудень\"],\r\n\t\tmonth_short: [\"Січ\", \"Лют\", \"Бер\", \"Кві\", \"Тра\", \"Чер\", \"Лип\", \"Сер\", \"Вер\", \"Жов\", \"Лис\", \"Гру\"],\r\n\t\tday_full: [\"Неділя\", \"Понеділок\", \"Вівторок\", \"Середа\", \"Четвер\", \"П'ятниця\", \"Субота\"],\r\n\t\tday_short: [\"Нед\", \"Пон\", \"Вів\", \"Сер\", \"Чет\", \"Птн\", \"Суб\"]\r\n\t},\r\n\tlabels: {\r\n\t\tdhx_cal_today_button: \"Сьогодні\",\r\n\t\tday_tab: \"День\",\r\n\t\tweek_tab: \"Тиждень\",\r\n\t\tmonth_tab: \"Місяць\",\r\n\t\tnew_event: \"Нова подія\",\r\n\t\ticon_save: \"Зберегти\",\r\n\t\ticon_cancel: \"Відміна\",\r\n\t\ticon_details: \"Деталі\",\r\n\t\ticon_edit: \"Редагувати\",\r\n\t\ticon_delete: \"Вилучити\",\r\n\t\tconfirm_closing: \"\", //Ваші зміни втратяться. Ви впевнені ?\r\n\t\tconfirm_deleting: \"Подія вилучиться назавжди. Ви впевнені?\",\r\n\t\tsection_description: \"Опис\",\r\n\t\tsection_time: \"Часовий проміжок\",\r\n\t\tfull_day: \"Весь день\",\r\n\r\n\t\t/*recurring events*/\r\n\t\tconfirm_recurring: \"Хочете редагувати весь перелік повторюваних подій?\",\r\n\t\tsection_recurring: \"Повторювана подія\",\r\n\t\tbutton_recurring: \"Відключено\",\r\n\t\tbutton_recurring_open: \"Включено\",\r\n\t\tbutton_edit_series: \"Редагувати серію\",\r\n\t\tbutton_edit_occurrence: \"Редагувати примірник\",\r\n\r\n\t\t/*agenda view extension*/\r\n\t\tagenda_tab: \"Перелік\",\r\n\t\tdate: \"Дата\",\r\n\t\tdescription: \"Опис\",\r\n\r\n\t\t/*year view extension*/\r\n\t\tyear_tab: \"Рік\",\r\n\r\n\t\t/*week agenda view extension*/\r\n\t\tweek_agenda_tab: \"Перелік\",\r\n\r\n\t\t/*grid view extension*/\r\n\t\tgrid_tab: \"Таблиця\",\r\n\r\n\t\t/* touch tooltip*/\r\n\t\tdrag_to_create:\"Drag to create\",\r\n\t\tdrag_to_move:\"Drag to move\",\r\n\r\n\t\t/* dhtmlx message default buttons */\r\n\t\tmessage_ok:\"OK\",\r\n\t\tmessage_cancel:\"Cancel\",\r\n\r\n\t\t/* wai aria labels for non-text controls */\r\n\t\tnext: \"Next\",\r\n\t\tprev: \"Previous\",\r\n\t\tyear: \"Year\",\r\n\t\tmonth: \"Month\",\r\n\t\tday: \"Day\",\r\n\t\thour:\"Hour\",\r\n\t\tminute: \"Minute\",\r\n\r\n\t\t/* recurring event components */\r\n\t\trepeat_radio_day: \"День\",\r\n\t\trepeat_radio_week: \"Тиждень\",\r\n\t\trepeat_radio_month: \"Місяць\",\r\n\t\trepeat_radio_year: \"Рік\",\r\n\t\trepeat_radio_day_type: \"Кожний\",\r\n\t\trepeat_text_day_count: \"день\",\r\n\t\trepeat_radio_day_type2: \"Кожний робочий день\",\r\n\t\trepeat_week: \" Повторювати кожен\",\r\n\t\trepeat_text_week_count: \"тиждень , по:\",\r\n\t\trepeat_radio_month_type: \"Повторювати\",\r\n\t\trepeat_radio_month_start: \"\",\r\n\t\trepeat_text_month_day: \" числа кожний \",\r\n\t\trepeat_text_month_count: \"місяць\",\r\n\t\trepeat_text_month_count2_before: \"кожен \",\r\n\t\trepeat_text_month_count2_after: \"місяць\",\r\n\t\trepeat_year_label: \"\",\r\n\t\tselect_year_day2: \"\",\r\n\t\trepeat_text_year_day: \"день\",\r\n\t\tselect_year_month: \"\",\r\n\t\trepeat_radio_end: \"Без дати закінчення\",\r\n\t\trepeat_text_occurences_count: \"повторень\",\r\n\t\trepeat_radio_end3: \"До \",\r\n\t\trepeat_radio_end2: \"\",\r\n\t\tmonth_for_recurring: [\"січня\", \"лютого\", \"березня\", \"квітня\", \"травня\", \"червня\", \"липня\", \"серпня\", \"вересня\", \"жовтня\", \"листопада\", \"грудня\"],\r\n\t\tday_for_recurring: [\"Неділям\", \"Понеділкам\", \"Вівторкам\", \"Середам\", \"Четвергам\", \"П'ятницям\", \"Суботам\"]\r\n\t}\r\n};\r\n","import eventable from \"../utils/eventable\";\r\n\r\nexport class DatePicker {\r\n\tconstructor(scheduler, container, state = {}) {\r\n\t\tthis.state = {\r\n\t\t\tdate: new Date(),\r\n\t\t\tmodes: ['days', 'months', 'years'],\r\n\t\t\tcurrentRange: [],\r\n\t\t\teventDates: [],\r\n\t\t\tcurrentModeIndex: 0,\r\n\t\t\t...state\r\n\t\t};\r\n\t\tthis.container = null;\r\n\t\tthis.element = null;\r\n\t\tthis.onStateChangeHandlers = [];\r\n\t\tthis.scheduler = scheduler;\r\n\t\tthis._domEvents = scheduler._createDomEventScope();\r\n\t\tthis.state = this.getState();\r\n\t\teventable(this);\r\n\t\tif(container){\r\n\r\n\t\t\tthis.container = container;\r\n\t\t\tthis.render(this.container);\r\n\t\t}\r\n\r\n\t\tthis.onStateChange((oldState, newState) => {\r\n\t\t\tthis.callEvent(\"onStateChange\", [newState, oldState]);\r\n\t\t});\r\n\t}\r\n\r\n\tgetState() {\r\n\t\treturn { \r\n\t\t\t...this.state,\r\n\t\t\tmode: this.state.modes[this.state.currentModeIndex]\r\n\t\t};\r\n\t}\r\n\r\n\tsetState(newState) {\r\n\t\tconst oldState = { ...this.state };\r\n\t\tif(newState.mode){\r\n\t\t\tnewState.currentModeIndex = this.state.modes.indexOf(newState.mode);\r\n\t\t}\r\n\t\tthis.state = { ...this.state, ...newState };\r\n\r\n\t\tthis._notifyStateChange(oldState, this.state);\r\n\r\n\t\tif (this.container) {\r\n\t\t\tthis.render(this.container);\r\n\t\t}\r\n\t}\r\n\r\n\tonStateChange(handler) {\r\n\t\tthis.onStateChangeHandlers.push(handler);\r\n\r\n\t\t// function to remove the handler\r\n\t\treturn () => {\r\n\t\t\tconst index = this.onStateChangeHandlers.indexOf(handler);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tthis.onStateChangeHandlers.splice(index, 1);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\t_notifyStateChange(oldState, newState) {\r\n\t\tthis.onStateChangeHandlers.forEach(handler => handler(oldState, newState));\r\n\t}\r\n\r\n\t_adjustDate(direction) {\r\n\r\n\t\tconst {mode, date} = this.getState();\r\n\t\tconst newDate = new Date(date);\r\n\t\tif (mode === 'days') {\r\n\t\t\tnewDate.setMonth(date.getMonth() + direction);\r\n\t\t} else if (mode === 'months') {\r\n\t\t\tnewDate.setFullYear(date.getFullYear() + direction);\r\n\t\t} else {\r\n\t\t\tnewDate.setFullYear(date.getFullYear() + direction * 10);\r\n\t\t}\r\n\t\tthis.setState({ date: newDate });\r\n\t}\r\n\r\n\t_toggleMode() {\r\n\t\tconst newIndex = (this.state.currentModeIndex + 1) % this.state.modes.length;\r\n\t\tthis.setState({ currentModeIndex: newIndex });\r\n\t}\r\n\r\n\t_renderCalendarHeader(container) {\r\n\t\tconst {mode, date} = this.getState();\r\n\r\n\t\tconst header = document.createElement('div');\r\n\t\theader.classList.add('dhx_cal_datepicker_header');\r\n\r\n\t\tconst backwardArrow = document.createElement('button');\r\n\r\n\t\tbackwardArrow.classList.add(\"dhx_cal_datepicker_arrow\", \"scheduler_icon\", \"arrow_left\");\r\n\t\theader.appendChild(backwardArrow);\r\n\r\n\t\tconst monthLabel = document.createElement('div');\r\n\t\tmonthLabel.classList.add('dhx_cal_datepicker_title');\r\n\r\n\t\tif (mode === 'days') {\r\n\t\t\tmonthLabel.innerText = date.toLocaleString('default', { month: 'long' }) + ' ' + date.getFullYear();\r\n\t\t} else if (mode === 'months') {\r\n\t\t\tmonthLabel.innerText = date.getFullYear();\r\n\t\t} else {\r\n\t\t\tconst startYear = Math.floor(date.getFullYear() / 10) * 10;\r\n\t\t\tmonthLabel.innerText = `${startYear} - ${startYear + 9}`;\r\n\t\t}\r\n\r\n\t\tthis._domEvents.attach(monthLabel, \"click\", this._toggleMode.bind(this));\r\n\t\theader.appendChild(monthLabel);\r\n\r\n\t\tconst forwardArrow = document.createElement('button');\r\n\r\n\t\tforwardArrow.classList.add(\"dhx_cal_datepicker_arrow\", \"scheduler_icon\", \"arrow_right\");\r\n\t\theader.appendChild(forwardArrow);\r\n\r\n\t\tcontainer.appendChild(header);\r\n\r\n\t\tthis._domEvents.attach(backwardArrow, \"click\", this._adjustDate.bind(this, -1));\r\n\t\tthis._domEvents.attach(forwardArrow, \"click\", this._adjustDate.bind(this, 1));\r\n\t}\r\n\r\n\trender(container) {\r\n\t\tthis._domEvents.detachAll();\r\n\t\tthis.container = container || this.container; \r\n\t\tthis.container.innerHTML = '';\r\n\r\n\t\tif(!this.element){\r\n\t\t\tthis.element = document.createElement(\"div\");\r\n\t\t\tthis.element.classList.add(\"dhx_cal_datepicker\");\r\n\t\t}\r\n\t\tthis.element.innerHTML = '';\r\n\t\tthis.container.appendChild(this.element);\r\n\r\n\t\tthis._renderCalendarHeader(this.element);\r\n\t\tconst dataContainer = document.createElement(\"div\");\r\n\t\tdataContainer.classList.add(\"dhx_cal_datepicker_data\");\r\n\t\tthis.element.appendChild(dataContainer);\r\n\r\n\t\tconst {mode} = this.getState();\r\n\t\tif (mode === 'days') {\r\n\t\t\tthis._renderDayGrid(dataContainer);\r\n\t\t} else if (mode === 'months') {\r\n\t\t\tthis._renderMonthGrid(dataContainer);\r\n\t\t} else {\r\n\t\t\tthis._renderYearGrid(dataContainer);\r\n\t\t}\r\n\t}\r\n\r\n\t_renderDayGridHeader(daysOfWeekContainer) {\r\n\t\tconst {date} = this.getState();\r\n\t\tconst scheduler = this.scheduler;\r\n\r\n\t\tlet currentDate = scheduler.date.week_start(new Date(date));\r\n\t\tconst maxDate = scheduler.date.add(scheduler.date.week_start(new Date(date)), 1, 'week');\r\n\r\n\t\tdaysOfWeekContainer.classList.add('dhx_cal_datepicker_days');\r\n\r\n\t\tconst labelFormat = scheduler.date.date_to_str(\"%D\");\r\n\r\n\t\twhile (currentDate.valueOf() < maxDate.valueOf()) {\r\n\t\t\tconst label = labelFormat(currentDate);\r\n\r\n\t\t\tconst dayElement = document.createElement('div');\r\n\t\t\tdayElement.setAttribute(\"data-day\", currentDate.getDay());\r\n\t\t\tdayElement.classList.add('dhx_cal_datepicker_dayname');\r\n\t\t\tdayElement.innerText = label;\r\n\t\t\tdaysOfWeekContainer.appendChild(dayElement);\r\n\r\n\t\t\tcurrentDate = scheduler.date.add(currentDate, 1, 'day');\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t_weeksBetween(min, max) {\r\n\t\tconst scheduler = this.scheduler;\r\n\t\tlet weeks = 0;\r\n\t\tlet currWeek = new Date(min);\r\n\t\twhile(currWeek.valueOf() < max.valueOf()){\r\n\t\t\tweeks += 1;\r\n\t\t\tcurrWeek = scheduler.date.week_start(scheduler.date.add(currWeek, 1, \"week\"));\r\n\t\t}\r\n\t\treturn weeks;\r\n\t}\r\n\r\n\t_renderDayGrid(container) {\r\n\t\tconst {date, currentRange, eventDates, minWeeks} = this.getState();\r\n\r\n\t\tlet minSchedulerDate = currentRange[0];\r\n\t\tlet maxSchedulerDate = currentRange[1];\r\n\r\n\t\tconst eventDaysTable = eventDates.reduce((acc, date) => {\r\n\t\t\tconst dayStart = this.scheduler.date.day_start(new Date(date));\r\n\t\t\tacc[dayStart.valueOf()] = true;\r\n\t\t\treturn acc;\r\n\t\t}, {});\r\n\r\n\r\n\t\t// Render Days of the Week\r\n\t\tconst daysOfWeekContainer = document.createElement('div');\r\n\t\tthis._renderDayGridHeader(daysOfWeekContainer);\r\n\t\tcontainer.appendChild(daysOfWeekContainer);\r\n\r\n\t\tconst scheduler = this.scheduler;\r\n\t\tconst firstDate = scheduler.date.week_start(scheduler.date.month_start(new Date(date)));\r\n\t\tconst monthStart = scheduler.date.month_start(new Date(date));\r\n\t\tconst monthEnd = scheduler.date.add(scheduler.date.month_start(new Date(date)), 1, 'month');\r\n\t\tlet lastDate = scheduler.date.add(scheduler.date.month_start(new Date(date)), 1, 'month');\r\n\t\tconst currentCalDate = scheduler.date.date_part(scheduler._currentDate());\r\n\t\tif(lastDate.getDay() !== 0){\r\n\t\t\tlastDate = scheduler.date.add(scheduler.date.week_start(lastDate), 1, \"week\");\r\n\t\t}\r\n\r\n\t\tlet weeks = this._weeksBetween(firstDate, lastDate);\r\n\t\tif(minWeeks && weeks < minWeeks){\r\n\t\t\tlastDate = scheduler.date.add(lastDate, (minWeeks - weeks), \"week\");\r\n\t\t}\r\n\r\n\t\tlet currDate = firstDate;\r\n\r\n\t\tconst dayGridContainer = document.createElement('div');\r\n\t\tdayGridContainer.classList.add('dhx_cal_datepicker_days');\r\n\r\n\t\tthis._domEvents.attach(dayGridContainer, \"click\", (event) => {\r\n\t\t\tconst dateCell = event.target.closest(\"[data-cell-date]\");\r\n\t\t\tconst date = new Date(dateCell.getAttribute(\"data-cell-date\"));\r\n\t\t\tthis.callEvent(\"onDateClick\", [date, event]);\r\n\t\t});\r\n\r\n\t\twhile(currDate.valueOf() < lastDate.valueOf()){\r\n\t\t\tconst dayElement = document.createElement('div');\r\n\t\t\tdayElement.setAttribute(\"data-cell-date\", scheduler.templates.format_date(currDate));\r\n\t\t\tdayElement.setAttribute(\"data-day\", currDate.getDay());\r\n\t\t\tdayElement.innerHTML = currDate.getDate();\r\n\r\n\t\t\tif(currDate.valueOf() < monthStart.valueOf()){\r\n\t\t\t\tdayElement.classList.add('dhx_before');\r\n\t\t\t}else if(currDate.valueOf() >= monthEnd.valueOf()){\t\r\n\t\t\t\tdayElement.classList.add('dhx_after');\r\n\t\t\t}\r\n\r\n\t\t\tif(currDate.getDay() === 0 || currDate.getDay() === 6){\r\n\t\t\t\tdayElement.classList.add(\"dhx_cal_datepicker_weekend\");\r\n\t\t\t}\r\n\r\n\t\t\tif(currDate.valueOf() == currentCalDate.valueOf()){\r\n\t\t\t\tdayElement.classList.add(\"dhx_now\");\r\n\t\t\t}\r\n\r\n\t\t\tif(minSchedulerDate && maxSchedulerDate){\r\n\t\t\t\tif(currDate.valueOf() >= minSchedulerDate.valueOf() && currDate.valueOf() < maxSchedulerDate.valueOf()){\r\n\t\t\t\t\tdayElement.classList.add('dhx_cal_datepicker_current');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(eventDaysTable[currDate.valueOf()]){\r\n\t\t\t\tdayElement.classList.add('dhx_cal_datepicker_event');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdayElement.classList.add('dhx_cal_datepicker_date');\r\n\r\n\t\t\tdayGridContainer.appendChild(dayElement);\r\n\t\t\tcurrDate = scheduler.date.add(currDate, 1, 'day');\r\n\t\t}\r\n\r\n\t\tcontainer.appendChild(dayGridContainer);\r\n\r\n\t}\r\n\r\n\t_renderMonthGrid(container) {\r\n\t\tconst {date} = this.getState();\r\n\r\n\t\tconst wrapper = document.createElement('div');\r\n\t\twrapper.classList.add(\"dhx_cal_datepicker_months\");\r\n\r\n\t\tconst months = [];\r\n\t\tfor(let i = 0; i < 12; i++){\r\n\t\t\tmonths.push(new Date(date.getFullYear(), i, 1));\r\n\t\t}\r\n\r\n\t\tconst formatLabel = this.scheduler.date.date_to_str(\"%M\");\r\n\t\tmonths.forEach(month => {\r\n\t\t\tconst monthElement = document.createElement('div');\r\n\t\t\tmonthElement.classList.add('dhx_cal_datepicker_month');\r\n\t\t\tif(date.getMonth() === month.getMonth()){\r\n\t\t\t\tmonthElement.classList.add('dhx_cal_datepicker_current');\r\n\t\t\t}\r\n\t\t\tmonthElement.setAttribute(\"data-month\", month.getMonth());\r\n\t\t\tmonthElement.innerHTML = formatLabel(month);\r\n\t\t\tthis._domEvents.attach(monthElement, \"click\", () => {\r\n\t\t\t\tconst newDate = new Date(month);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tdate: newDate,\r\n\t\t\t\t\tmode: 'days'\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\twrapper.appendChild(monthElement);\r\n\t\t});\r\n\t\tcontainer.appendChild(wrapper);\r\n\r\n\t\tconst doneArea = document.createElement(\"div\");\r\n\t\tdoneArea.classList.add(\"dhx_cal_datepicker_done\");\r\n\t\tconst doneBtn = document.createElement(\"button\");\r\n\t\tdoneBtn.innerText = \"Done\";\r\n\t\tdoneBtn.classList.add(\"dhx_cal_datepicker_done_btn\");\r\n\t\tthis._domEvents.attach(doneBtn, \"click\", () => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tmode: 'days'\r\n\t\t\t});\r\n\t\t});\r\n\t\tdoneArea.appendChild(doneBtn);\r\n\t\tcontainer.appendChild(doneArea);\r\n\t}\r\n\r\n\t_renderYearGrid(container) {\r\n\t\tconst {date} = this.getState();\r\n\t\tconst startYear = Math.floor(date.getFullYear() / 10) * 10;\r\n\t\t\r\n\t\tconst wrapper = document.createElement('div');\r\n\t\twrapper.classList.add(\"dhx_cal_datepicker_years\");\r\n\t\tfor (let i = startYear - 1; i <= startYear + 10; i++) {\r\n\t\t\tconst yearElement = document.createElement('div');\r\n\t\t\tyearElement.innerText = i;\r\n\t\t\tyearElement.classList.add('dhx_cal_datepicker_year');\r\n\t\t\tyearElement.setAttribute(\"data-year\", i);\r\n\t\t\tif(date.getFullYear() === i){\r\n\t\t\t\tyearElement.classList.add('dhx_cal_datepicker_current');\r\n\t\t\t}\r\n\t\t\tthis._domEvents.attach(yearElement, \"click\", () => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tdate: new Date(i, date.getMonth(), 1),\r\n\t\t\t\t\tmode: 'months'\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\twrapper.appendChild(yearElement);\r\n\t\t\t\r\n\t\t}\r\n\t\tcontainer.appendChild(wrapper);\r\n\r\n\t\tconst doneArea = document.createElement(\"div\");\r\n\t\tdoneArea.classList.add(\"dhx_cal_datepicker_done\");\r\n\t\tconst doneBtn = document.createElement(\"button\");\r\n\t\tdoneBtn.innerText = \"Done\";\r\n\t\tdoneBtn.classList.add(\"dhx_cal_datepicker_done_btn\");\r\n\t\tthis._domEvents.attach(doneBtn, \"click\", () => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tmode: 'months'\r\n\t\t\t});\r\n\t\t});\r\n\t\tdoneArea.appendChild(doneBtn);\r\n\t\tcontainer.appendChild(doneArea);\r\n\t}\r\n\r\n\tdestructor(){\r\n\t\tthis.onStateChangeHandlers = [];\r\n\t\tif(this.element){\r\n\t\t\tthis.element.innerHTML = '';\r\n\t\t\tthis.element.remove();\r\n\t\t}\r\n\r\n\t\tthis._domEvents.detachAll();\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tthis.scheduler = null;\r\n\t}\r\n}","// import \"./css/dhtmlxscheduler_terrace\";\r\n// import \"./css/dhtmlxscheduler_material\";\r\n// import \"./css/dhtmlxscheduler_material_nofont\";\r\n// import \"./css/dhtmlxscheduler_flat\";\r\n// import \"./css/dhtmlxscheduler_contrast_black\";\r\n// import \"./css/dhtmlxscheduler_contrast_white\";\r\n\r\n\r\nimport assert from \"./core/common/assert\";\r\nimport common_errors from \"./core/common_errors\";\r\nimport connector from \"./core/connector\";\r\nimport schedulerCore from \"./core/scheduler\";\r\nimport common from \"./core/common\";\r\nimport wai_aria from \"./core/wai_aria\";\r\nimport utils from \"./core/utils/utils\";\r\nimport dom_helpers from \"./core/utils/dom_helpers\";\r\nimport env from \"./utils/env\";\r\nimport destructor from \"./core/destructor\";\r\nimport ajax from \"./core/utils/ajax\";\r\nimport base from \"./core/base\";\r\nimport config from \"./core/config\";\r\nimport event from \"./core/event\";\r\nimport event_highlight from \"./core/event_highlight\";\r\nimport load from \"./core/load\";\r\nimport lightbox from \"./core/lightbox\";\r\nimport touch from \"./core/touch\";\r\nimport dhtmlx_suite_hooks from \"./core/dhtmlx/dhtmlx_suite_hooks\";\r\nimport skins from \"./core/skins\";\r\nimport jquery from \"./core/jquery\";\r\nimport delay_render from \"./core/delay_render\";\r\nimport dataProcessorExtend from \"./core/dataprocessor/dataprocessor\";\r\nimport message from \"./core/message\";\r\nimport i18nFactory from \"./locale\";\r\n\r\nimport voidFirst from \"./publish_helpers/void_script_first\";\r\nimport voidSecond from \"./publish_helpers/void_script_second\";\r\nimport voidThird from \"./publish_helpers/void_script_third\";\r\n\r\n//import datepickerHeader from \"./core/clickable_header\";\r\n\r\nimport { DatePicker } from \"./core/datepicker\";\r\n\r\nexport default function(extensionManager) {\r\n\r\n\tconst scheduler = { version: VERSION };\r\n\t\r\n\tcommon_errors(scheduler);\r\n\tcommon(scheduler);\r\n\tschedulerCore(scheduler);\r\n\twai_aria(scheduler);\r\n\t//utils(scheduler);\r\n\r\n\tscheduler.utils = utils;\r\n\tscheduler.$domHelpers = dom_helpers;\r\n\tscheduler.utils.dom = dom_helpers;\r\n\tscheduler.uid = utils.uid;\r\n\tscheduler.mixin = utils.mixin;\r\n\tscheduler.defined = utils.defined;\r\n\tscheduler.assert = assert(scheduler);\r\n\tscheduler.copy = utils.copy;\r\n\r\n\tscheduler._createDatePicker = function(container, config){\r\n\t\treturn new DatePicker(scheduler, container, config);\r\n\t};\r\n\r\n\t//datepickerHeader(scheduler);\r\n\r\n\r\n\t//old api compatibility\r\n\tscheduler._getFocusableNodes = dom_helpers.getFocusableNodes;\r\n\tscheduler._getClassName = dom_helpers.getClassName;\r\n\tscheduler._locate_css = dom_helpers.locateCss;\r\n\r\n\tconst messageApi = message(scheduler);\r\n\tscheduler.utils.mixin(scheduler, messageApi);\r\n\r\n\tscheduler.env = scheduler.$env = env;\r\n\tscheduler.Promise = window.Promise;\r\n\tdestructor(scheduler);\r\n\tajax(scheduler);\r\n\tvoidFirst(scheduler);\r\n\tbase(scheduler);\r\n\tconfig(scheduler);\r\n\tevent(scheduler);\r\n\tevent_highlight(scheduler);\r\n\tload(scheduler);\r\n\tlightbox(scheduler);\r\n\ttouch(scheduler);\r\n\tdhtmlx_suite_hooks(scheduler);\r\n\tvoidSecond(scheduler);\r\n\tskins(scheduler);\r\n\tjquery(scheduler);\r\n\tdelay_render(scheduler);\r\n\tdataProcessorExtend(scheduler);\r\n\tvoidThird(scheduler);\r\n\tconnector(scheduler);\r\n\tconst i18n = i18nFactory();\r\n\tscheduler.i18n = {\r\n\t\taddLocale: i18n.addLocale,\r\n\t\tsetLocale: function(locale){\r\n\t\t\tif(typeof locale === \"string\"){\r\n\t\t\t\tvar localeObject = i18n.getLocale(locale);\r\n\t\t\t\tif(!localeObject){\r\n\t\t\t\t\tlocaleObject = i18n.getLocale(\"en\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscheduler.locale = localeObject;\r\n\t\t\t}else if(locale){\r\n\t\t\t\tif(!scheduler.locale){\r\n\t\t\t\t\tscheduler.locale = locale;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfor(var i in locale){\r\n\t\t\t\t\t\tif(locale[i] && typeof locale[i] === \"object\"){\r\n\t\t\t\t\t\t\tif(!scheduler.locale[i]){\r\n\t\t\t\t\t\t\t\tscheduler.locale[i] = {};\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tscheduler.mixin(scheduler.locale[i], locale[i], true);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tscheduler.locale[i] = locale[i];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar labels = scheduler.locale.labels;\r\n\t\t\tlabels.dhx_save_btn \t= labels.icon_save;\r\n\t\t\tlabels.dhx_cancel_btn \t= labels.icon_cancel;\r\n\t\t\tlabels.dhx_delete_btn \t= labels.icon_delete;\r\n\r\n\t\t\tif(scheduler.$container){\r\n\t\t\t\tscheduler.get_elements();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\tgetLocale: i18n.getLocale\r\n\t};\r\n\tscheduler.i18n.setLocale(\"en\");\r\n\r\n\tscheduler.ext = {};\r\n\r\n\tconst activePlugins = {};\r\n\tscheduler.plugins = function(config){\r\n\t\tconst extensionList = getExtensionList(config, {\r\n\t\t\t\ttreetimeline: [\"timeline\"],\r\n\t\t\t\tdaytimeline: [\"timeline\"],\r\n\t\t\t\touterdrag: [\"legacy\"]\r\n\t\t\t}, {\r\n\t\t\t\tlegacy: 1,\r\n\t\t\t\tlimit: 1,\r\n\t\t\t\ttimeline: 2,\r\n\t\t\t\tdaytimeline: 3,\r\n\t\t\t\ttreetimeline: 3,\r\n\t\t\t\touterdrag:6\r\n\t\t\t});\r\n\r\n\t\textensionList.forEach(function(name){\r\n\t\t\tif(!activePlugins[name]){\r\n\t\t\t\tconst plugin = extensionManager.getExtension(name);\r\n\t\t\t\tif(plugin){\r\n\t\t\t\t\tplugin(scheduler);\r\n\t\t\t\t\tactivePlugins[name] = true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthrow new Error(\"unknown plugin \" + name);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tfunction getExtensionList(config, dependencies, priorities){\r\n\t\tconst result = [];\r\n\r\n\t\tfor(const i in config){\r\n\t\t\tif(config[i]){\r\n\t\t\t\tconst extension = i.toLowerCase();\r\n\t\t\t\tif(dependencies[extension]){\r\n\t\t\t\t\tdependencies[extension].forEach(function(dep){\r\n\t\t\t\t\t\tconst dependencyName = dep.toLowerCase();\r\n\t\t\t\t\t\tif(!config[dependencyName]){\r\n\t\t\t\t\t\t\tresult.push(dependencyName);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tresult.push(extension);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tresult.sort(function(a, b){\r\n\t\t\tconst orderA = priorities[a] || 0;\r\n\t\t\tconst orderB = priorities[b] || 0;\r\n\t\t\tif(orderA > orderB){\r\n\t\t\t\treturn 1;\r\n\t\t\t}else if(orderA < orderB){\r\n\t\t\t\treturn -1;\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\treturn scheduler;\r\n\r\n}","export default function extend(scheduler) {\r\n\r\nvar commonViews = {\r\n\tagenda: \"https://docs.dhtmlx.com/scheduler/agenda_view.html\",\r\n\tgrid: \"https://docs.dhtmlx.com/scheduler/grid_view.html\",\r\n\tmap: \"https://docs.dhtmlx.com/scheduler/map_view.html\",\r\n\tunit: \"https://docs.dhtmlx.com/scheduler/units_view.html\",\r\n\ttimeline: \"https://docs.dhtmlx.com/scheduler/timeline_view.html\",\r\n\tweek_agenda: \"https://docs.dhtmlx.com/scheduler/weekagenda_view.html\",\r\n\tyear: \"https://docs.dhtmlx.com/scheduler/year_view.html\",\r\n\tanythingElse: \"https://docs.dhtmlx.com/scheduler/views.html\"\r\n};\r\n\r\nvar requiredExtensions = {\r\n\tagenda: \"ext/dhtmlxscheduler_agenda_view.js\",\r\n\tgrid: \"ext/dhtmlxscheduler_grid_view.js\",\r\n\tmap: \"ext/dhtmlxscheduler_map_view.js\",\r\n\tunit: \"ext/dhtmlxscheduler_units.js\",\r\n\ttimeline: \"ext/dhtmlxscheduler_timeline.js, ext/dhtmlxscheduler_treetimeline.js, ext/dhtmlxscheduler_daytimeline.js\",\r\n\tweek_agenda: \"ext/dhtmlxscheduler_week_agenda.js\",\r\n\tyear: \"ext/dhtmlxscheduler_year_view.js\",\r\n\tlimit: \"ext/dhtmlxscheduler_limit.js\"\r\n};\r\n\r\nscheduler._commonErrorMessages = {\r\n\tunknownView: function(view){\r\n\t\tvar relatedDoc = \"Related docs: \" + (commonViews[view] || commonViews.anythingElse); \r\n\t\tvar relatedExtension = requiredExtensions[view] ? (\"You're probably missing \" + requiredExtensions[view] + \".\") : \"\";\r\n\t\treturn (\r\n\t\t\t\"`\"+view+\"` view is not defined. \\n\" +\r\n\t\t\t\"Please check parameters you pass to `scheduler.init` or `scheduler.setCurrentView` in your code and ensure you've imported appropriate extensions. \\n\" + \r\n\t\t\trelatedDoc + \"\\n\" + (relatedExtension ? (relatedExtension + \"\\n\") : \"\"));\r\n\t},\r\n\tcollapsedContainer: function(div){\r\n\t\treturn \"Scheduler container height is set to *100%* but the rendered height is zero and the scheduler is not visible. \\n\"+\r\n\t\t\"Make sure that the container has some initial height or use different units. For example:\\n\" +\r\n\t\t\"<div id='scheduler_here' class='dhx_cal_container' style='width:100%; height:600px;'> \\n\";\r\n\t}\r\n};\r\n\r\nscheduler.createTimelineView = function() {\r\n\tthrow new Error(\"scheduler.createTimelineView is not implemented. Be sure to add the required extension: \" + requiredExtensions.timeline + \r\n\t\"\\n\" +\r\n\t\"Related docs: \" + commonViews.timeline);\r\n};\r\n\r\nscheduler.createUnitsView = function() {\r\n\tthrow new Error(\"scheduler.createUnitsView is not implemented. Be sure to add the required extension: \" + requiredExtensions.unit + \r\n\t\"\\n\" +\r\n\t\"Related docs: \" + commonViews.unit);\r\n};\r\n\r\nscheduler.createGridView = function() {\r\n\tthrow new Error(\"scheduler.createGridView is not implemented. Be sure to add the required extension: \" + requiredExtensions.grid + \r\n\t\"\\n\" +\r\n\t\"Related docs: \" + commonViews.grid);\r\n};\r\n\r\nscheduler.addMarkedTimespan = function() {\r\n\tthrow new Error(\"scheduler.addMarkedTimespan is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_limit.js\" + \r\n\t\"\\n\" +\r\n\t\"Related docs: https://docs.dhtmlx.com/scheduler/limits.html\");\r\n};\r\n\r\nscheduler.renderCalendar = function() {\r\n\tthrow new Error(\"scheduler.renderCalendar is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_minical.js\" + \r\n\t\"\\n\" +\r\n\t\"https://docs.dhtmlx.com/scheduler/minicalendar.html\");\r\n};\r\n\r\nscheduler.exportToPNG = function() {\r\n\tthrow new Error([\r\n\t\t\"scheduler.exportToPNG is not implemented.\",\r\n\t\t\"This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/png.html\",\r\n\t\t\"Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml\"\r\n\t].join(\"\\n\"));\r\n};\r\n\r\nscheduler.exportToPDF = function() {\r\n\tthrow new Error([\r\n\t\t\"scheduler.exportToPDF is not implemented.\",\r\n\t\t\"This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/pdf.html\",\r\n\t\t\"Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml\"\r\n\t].join(\"\\n\"));\r\n};\r\n\r\n\r\n}","\r\nimport nav_bar from \"./nav_bar\";\r\nimport scheduler_resize_listener from \"./scheduler_resize_listener\";\r\nimport eventable from \"../utils/eventable\";\r\n\r\n\r\nexport default function extend(scheduler) {\r\n\r\neventable(scheduler);\r\n\r\nnav_bar(scheduler);\r\n\r\nscheduler._detachDomEvent = function(el, event, handler){\r\n\tif (el.removeEventListener){\r\n\t\tel.removeEventListener(event, handler, false);\r\n\r\n\t}else if (el.detachEvent){\r\n\t\tel.detachEvent(\"on\"+event, handler);\r\n\t}\r\n};\r\n\r\n\r\nscheduler._init_once = function(){\r\n\tscheduler_resize_listener(scheduler);\r\n\r\n\tscheduler._init_once = function(){};\r\n};\r\n\r\nconst layout = {\r\n\t\"navbar\": {\r\n\t\trender: function (config) {\r\n\t\t\treturn scheduler._init_nav_bar(config);\r\n\t\t}\r\n\t},\r\n\t\"header\": {\r\n\t\trender: function (config) {\r\n\t\t\tconst element = document.createElement(\"div\");\r\n\t\t\telement.className = \"dhx_cal_header\";\r\n\t\t\treturn element;\r\n\t\t}\r\n\t},\r\n\t\"dataArea\": {\r\n\t\trender: function (config) {\r\n\t\t\tconst element = document.createElement(\"div\");\r\n\t\t\telement.className = \"dhx_cal_data\";\r\n\t\t\treturn element;\r\n\t\t}\r\n\t},\r\n\t\"html_element\": {\r\n\t\trender: function (config) {\r\n\t\t\treturn config.html;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction hasSchedulerMarkup(element){\r\n\treturn !!(\r\n\t\telement.querySelector(\".dhx_cal_header\") &&\r\n\t\telement.querySelector(\".dhx_cal_data\") &&\r\n\t\telement.querySelector(\".dhx_cal_navline\")\r\n\t\t);\r\n}\r\n\r\nfunction createDefaultHeader(scheduler){\r\n\tconst views = [\r\n\t\t\"day\",\r\n\t\t\"week\",\r\n\t\t\"month\"\r\n\t];\r\n\tconst date = [\r\n\t\t\"date\"\r\n\t];\r\n\tconst nav = [\r\n\t\t\"prev\",\r\n\t\t\"today\",\r\n\t\t\"next\"\r\n\t];\r\n\r\n\tif(scheduler.matrix){\r\n\t\tfor(const i in scheduler.matrix){\r\n\t\t\tviews.push(i);\r\n\t\t}\r\n\t}\r\n\tif(scheduler._props){\r\n\t\tfor(const i in scheduler._props){\r\n\t\t\tviews.push(i);\r\n\t\t}\r\n\t}\r\n\r\n\tif(scheduler._grid && scheduler._grid.names){\r\n\t\tfor(const i in scheduler._grid.names){\r\n\t\t\tviews.push(i);\r\n\t\t}\r\n\t}\r\n\r\n\tconst optionalViews = [\r\n\t\t\"map\",\r\n\t\t\"agenda\",\r\n\t\t\"week_agenda\",\r\n\t\t\"year\"\r\n\t];\r\n\r\n\toptionalViews.forEach(function(viewName){\r\n\t\tif(scheduler[viewName + \"_view\"]){\r\n\t\t\tviews.push(viewName);\r\n\t\t}\r\n\t});\r\n\r\n\treturn views.concat(date).concat(nav);\r\n}\r\n\r\nscheduler.init=function(id,date,mode){\r\n\tif(this.$destroyed){\r\n\t\treturn; // not have errors when try to reinit destroyed scheduler\r\n\t}\r\n\tdate=date||(scheduler._currentDate());\r\n\tmode=mode||\"week\";\r\n\r\n\tif(this._obj){\r\n\t\tthis.unset_actions();\r\n\t}\r\n\r\n\tthis._obj=(typeof id == \"string\")?document.getElementById(id):id;\r\n\tthis.$container = this._obj;\r\n\tthis.$root = this._obj;\r\n\r\n\tif(!this.$container.offsetHeight && this.$container.offsetWidth && this.$container.style.height === \"100%\"){\r\n\t\t// scheduler container has zero height and non-zero width\r\n\t\twindow.console.error(scheduler._commonErrorMessages.collapsedContainer(), this.$container);\r\n\t}\r\n\r\n\tif(this.config.wai_aria_attributes && this.config.wai_aria_application_role){\r\n\t\tthis.$container.setAttribute(\"role\", \"application\");\r\n\t}\r\n\r\n\tif(!this.config.header && !hasSchedulerMarkup(this.$container)){\r\n\t\t// if no header config and no required markup - use the default header\r\n\t\t// so the scheduler could be initialized in an empty div\r\n\t\tthis.config.header = createDefaultHeader(this);\r\n\t\twindow.console.log([// jshint ignore:line\r\n\t\t\t\"Required DOM elements are missing from the scheduler container and **scheduler.config.header** is not specified.\",\r\n\t\t\t\"Using a default header configuration: \",\r\n\t\t\t\"scheduler.config.header = \" + JSON.stringify(this.config.header, null, 2),\r\n\t\t\t\"Check this article for the details: https://docs.dhtmlx.com/scheduler/initialization.html\"\r\n\t\t].join(\"\\n\"));// jshint ignore:line\r\n\t}\r\n\r\n\tif (this.config.header) {\r\n\t\tthis.$container.innerHTML = \"\";\r\n\t\tthis.$container.classList.add(\"dhx_cal_container\");\r\n\t\tif(this.config.header.height){\r\n\t\t\tthis.xy.nav_height = this.config.header.height;\r\n\t\t}\r\n\t\tthis.$container.appendChild(layout.navbar.render(this.config.header));\r\n\t\tthis.$container.appendChild(layout.header.render());\r\n\t\tthis.$container.appendChild(layout.dataArea.render());\r\n\t} else {\r\n\t\t// if no header config provided - make sure scheduler container has all necessary elements\r\n\t\tif(!hasSchedulerMarkup(this.$container)){\r\n\t\t\tthrow new Error([\r\n\t\t\t\t\"Required DOM elements are missing from the scheduler container.\",\r\n\t\t\t\t\"Be sure to either specify them manually in the markup: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviamarkup\",\r\n\t\t\t\t\"Or to use **scheduler.config.header** setting so they could be created automatically: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviaheaderconfig\"\r\n\t\t\t].join(\"\\n\"));\r\n\t\t}\r\n\t}\r\n\r\n\tif (this.config.rtl) this.$container.className += \" dhx_cal_container_rtl\";\r\n\r\n\t//hook for terrace skin\r\n\tif (this._skin_init)\r\n\t\tscheduler._skin_init();\r\n\r\n\tscheduler.date.init();\r\n\r\n\tthis._scroll=true;\r\n\r\n\tthis._els=[];\r\n\tthis.get_elements();\r\n\tthis.init_templates();\r\n\tthis.set_actions();\r\n\r\n\tthis._init_once();\r\n\tthis._init_touch_events();\r\n\r\n\tthis.set_sizes();\r\n\tscheduler.callEvent('onSchedulerReady', []);\r\n\tscheduler.$initialized = true;\r\n\tthis.setCurrentView(date,mode);\r\n\r\n};\r\n\r\nscheduler.xy={\r\n\tmin_event_height:20,\r\n\tbar_height: 24,\r\n\tscale_width:50,\r\n\tscroll_width:18,\r\n\tscale_height:20,\r\n\tmonth_scale_height:20,\r\n\tmenu_width:25,\r\n\tmargin_top:0,\r\n\tmargin_left:0,\r\n\teditor_width:140,\r\n\tmonth_head_height:22,\r\n\tevent_header_height: 14\r\n};\r\nscheduler.keys={\r\n\tedit_save:13,\r\n\tedit_cancel:27\r\n};\r\n\r\nscheduler.bind = function bind(functor, object){\r\n\tif(functor.bind)\r\n\t\treturn functor.bind(object);\r\n\telse\r\n\t\treturn function(){ return functor.apply(object,arguments); };\r\n};\r\n\r\nscheduler.set_sizes=function(){\r\n\r\n\tvar w = this._x = this._obj.clientWidth-this.xy.margin_left;\r\n\r\n\t//not-table mode always has scroll - need to be fixed in future\r\n\tvar scale_x=this._table_view?0:(this.xy.scale_width+this.xy.scroll_width);\r\n\r\n\tvar materialScalePlaceholder = this.$container.querySelector(\".dhx_cal_scale_placeholder\");\r\n\tif(scheduler._is_material_skin()){\r\n\t\tif(!materialScalePlaceholder) {\r\n\t\t\tmaterialScalePlaceholder = document.createElement(\"div\");\r\n\t\t\tmaterialScalePlaceholder.className = \"dhx_cal_scale_placeholder\";\r\n\t\t\tthis.$container.insertBefore(materialScalePlaceholder, this._els[\"dhx_cal_header\"][0]);\r\n\t\t}\r\n\t\tmaterialScalePlaceholder.style.display = \"block\";\r\n\r\n\t\tthis.set_xy(materialScalePlaceholder,w,this.xy.scale_height + 1,0, this._els[\"dhx_cal_header\"][0].offsetTop);\r\n\r\n\t}else{\r\n\t\tif(materialScalePlaceholder){\r\n\t\t\tmaterialScalePlaceholder.parentNode.removeChild(materialScalePlaceholder);\r\n\t\t}\r\n\t}\r\n\r\n\tif (this._lightbox) {\r\n\t\tif (scheduler.$container.offsetWidth  < 1200) {\r\n\t\t} else {\r\n\t\t\tthis._setLbPosition(document.querySelector(\".dhx_cal_light\"));\r\n\t\t}\r\n\t}\r\n\r\n\tthis._data_width = w-scale_x;\r\n\r\n\tthis._els[\"dhx_cal_navline\"][0].style.width = w + \"px\";\r\n\tconst header = this._els[\"dhx_cal_header\"][0];\r\n\tthis.set_xy(header, this._data_width, this.xy.scale_height);\r\n\t// this._els[\"dhx_cal_header\"][0].style.marginLeft = `${scheduler.xy.scale_width}px`;\r\n\theader.style.left = ``;\r\n\theader.style.right = ``;\r\n\tif(!this._table_view){\r\n\t\tif(this.config.rtl){\r\n\t\t\theader.style.right = `${this.xy.scale_width}px`;\r\n\t\t}else{\r\n\t\t\theader.style.left = `${this.xy.scale_width}px`;\r\n\t\t}\r\n\t} else {\r\n\t\tif(!this.config.rtl){\r\n\t\t\theader.style.left = `-1px`;\r\n\t\t} else {\r\n\t\t\theader.style.right = `-1px`;\r\n\t\t}\r\n\t}\r\n};\r\nscheduler.set_xy=function(node,w,h,x,y){\r\n\tfunction prepareValue(val){\r\n\t\tlet prepared = val;\r\n\t\tif(!isNaN(Number(prepared))){\r\n\t\t\tprepared = Math.max(0,prepared) + \"px\";\r\n\t\t}\r\n\t\treturn prepared;\r\n\t}\r\n\r\n\tvar direction = 'left';\r\n\r\n\tif(w !== undefined) {\r\n\t\tnode.style.width = prepareValue(w);\r\n\t}\r\n\r\n\tif(h !== undefined){\r\n\t\tnode.style.height = prepareValue(h);\r\n\t}\r\n\r\n\tif (arguments.length>3){\r\n\r\n\t\tif(x !== undefined){\r\n\t\t\tif (this.config.rtl) direction = 'right';\r\n\t\t\tnode.style[direction]=x+\"px\";\r\n\t\t}\r\n\t\tif(y !== undefined){\r\n\t\t\tnode.style.top=y+\"px\";\r\n\t\t}\r\n\t}\r\n};\r\nscheduler.get_elements=function(){\r\n\t//get all child elements as named hash\r\n\tconst els=this._obj.getElementsByTagName(\"DIV\");\r\n\tfor (let i=0; i < els.length; i++){\r\n\t\tlet class_name= scheduler._getClassName(els[i]);\r\n\t\tconst attr_value = els[i].getAttribute(\"data-tab\") || els[i].getAttribute(\"name\") || \"\";\r\n\t\tif (class_name) class_name = class_name.split(\" \")[0];\r\n\t\tif (!this._els[class_name]) this._els[class_name]=[];\r\n\t\tthis._els[class_name].push(els[i]);\r\n\r\n\t\t//check if name need to be changed\r\n\t\t// scheduler.locale.labels[attr_value+\"_tab\"] - to fix getting labels for data-tab\r\n\t\tlet label = scheduler.locale.labels[attr_value+\"_tab\"] || scheduler.locale.labels[attr_value||class_name];\r\n\t\tif (typeof label !== \"string\" && attr_value && !els[i].innerHTML)\r\n\t\t\tlabel = attr_value.split(\"_\")[0];\r\n\t\tif (label) {\r\n\t\t\tthis._waiAria.labelAttr(els[i], label);\r\n\t\t\tels[i].innerHTML = label;\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nconst domEventsScope = scheduler._createDomEventScope();\r\n\r\nscheduler.unset_actions = function(){\r\n\tdomEventsScope.detachAll();\r\n};\r\n\r\nscheduler.set_actions=function(){\r\n\tfor (const a in this._els){\r\n\t\tif (this._click[a]){\r\n\t\t\tfor (let i=0; i < this._els[a].length; i++){\r\n\t\t\t\tconst element = this._els[a][i];\r\n\t\t\t\tconst handler = this._click[a].bind(element);\r\n\t\t\t\tdomEventsScope.attach(element, \"click\", handler);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdomEventsScope.attach(this._obj, \"selectstart\", function(e){\r\n\t\te.preventDefault();\r\n\t\treturn false;\r\n\t});\r\n\t//this._obj.onselectstart=function(e){ return false; };\r\n\tdomEventsScope.attach(this._obj, \"mousemove\", function(e){\r\n\t\tif (!scheduler._temp_touch_block)\r\n\t\t\tscheduler._on_mouse_move(e);\r\n\t});\r\n\tdomEventsScope.attach(this._obj, \"mousedown\", function(e){\r\n\t\tif (!scheduler._ignore_next_click)\r\n\t\t\tscheduler._on_mouse_down(e);\r\n\t});\r\n\tdomEventsScope.attach(this._obj, \"mouseup\", function(e){\r\n\t\tif (!scheduler._ignore_next_click)\r\n\t\t\tscheduler._on_mouse_up(e);\r\n\t});\r\n\tdomEventsScope.attach(this._obj, \"dblclick\", function(e){\r\n\t\tscheduler._on_dbl_click(e);\r\n\t});\r\n\tdomEventsScope.attach(this._obj, \"contextmenu\", function(event) {\r\n\t\tif(scheduler.checkEvent(\"onContextMenu\")){\r\n\t\t\t// block the default browser context menu \r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\r\n\t\tconst returnValue = scheduler.callEvent(\"onContextMenu\", [scheduler._locate_event(event.target), event]);\r\n\t\treturn returnValue;\r\n\t});\r\n};\r\nscheduler.select=function(id){\r\n\tif (this._select_id==id) return;\r\n\tscheduler._close_not_saved();\r\n\tthis.editStop(false);\r\n\tif(this._select_id){\r\n\t\tthis.unselect();\r\n\t}\r\n\tthis._select_id = id;\r\n\tthis.updateEvent(id);\r\n\tthis.callEvent(\"onEventSelected\", [id]);\r\n};\r\nscheduler.unselect=function(id){\r\n\tif (id && id!=this._select_id) {\r\n\t\treturn;\r\n\t}\r\n\tconst previousSelection = this._select_id;\r\n\tthis._select_id = null;\r\n\tif (previousSelection && this.getEvent(previousSelection)) {\r\n\t\tthis.updateEvent(previousSelection);\r\n\t}\r\n\tthis.callEvent(\"onEventUnselected\", [previousSelection]);\r\n};\r\nscheduler.getState=function(){\r\n\treturn {\r\n\t\tmode: this._mode,\r\n\t\tdate: new Date(this._date),\r\n\t\tmin_date: new Date(this._min_date),\r\n\t\tmax_date: new Date(this._max_date),\r\n\t\teditor_id: this._edit_id,\r\n\t\tlightbox_id: this._lightbox_id,\r\n\t\tnew_event: this._new_event,\r\n\t\tselect_id: this._select_id,\r\n\t\texpanded: this.expanded,\r\n\t\tdrag_id: this._drag_id,\r\n\t\tdrag_mode: this._drag_mode\r\n\t};\r\n};\r\nscheduler._click={\r\n\tdhx_cal_data:function(e){\r\n\t\t//in case of touch disable click processing\r\n\t\tif (scheduler._ignore_next_click){\r\n\t\t\tif (e.preventDefault)\r\n\t\t\t\te.preventDefault();\r\n\t\t\te.cancelBubble = true;\r\n\t\t\tscheduler._ignore_next_click = false;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\r\n\t\tconst id = scheduler._locate_event(e.target);\r\n\r\n\t\tif (!id) {\r\n\t\t\tscheduler.callEvent(\"onEmptyClick\",[scheduler.getActionData(e).date, e]);\r\n\t\t} else {\r\n\t\t\tif ( !scheduler.callEvent(\"onClick\",[id,e]) || scheduler.config.readonly ) return;\r\n\t\t}\r\n\r\n\t\tif (id && scheduler.config.select) {\r\n\r\n\t\t\tscheduler.select(id);\r\n\t\t\tconst icon = e.target.closest(\".dhx_menu_icon\");\r\n\r\n\t\t\tconst mask = scheduler._getClassName(icon);\r\n\t\t\tif (mask.indexOf(\"_icon\")!=-1)\r\n\t\t\t\tscheduler._click.buttons[mask.split(\" \")[1].replace(\"icon_\",\"\")](id);\r\n\t\t} else{\r\n\t\t\tscheduler._close_not_saved();\r\n\t\t\tif (scheduler.getState().select_id && new Date().valueOf()-(scheduler._new_event||0) > 500){\r\n\t\t\t\tscheduler.unselect();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdhx_cal_prev_button:function(){\r\n\t\tscheduler._click.dhx_cal_next_button(0,-1);\r\n\t},\r\n\tdhx_cal_next_button:function(dummy,step){\r\n\t\tlet def_step = 1;\r\n\t\tif (scheduler.config.rtl){\r\n\t\t\tstep = -step;\r\n\t\t\tdef_step = -def_step;\r\n\t\t}\r\n\t\tscheduler.setCurrentView(scheduler.date.add( //next line changes scheduler._date , but seems it has not side-effects\r\n\t\t\tscheduler.date[scheduler._mode+\"_start\"](new Date(scheduler._date)),(step||def_step),scheduler._mode));\r\n\t},\r\n\tdhx_cal_today_button:function(){\r\n\t\tif (scheduler.callEvent(\"onBeforeTodayDisplayed\", [])) {\r\n\t\t\tscheduler.setCurrentView(scheduler._currentDate());\r\n\t\t}\r\n\t},\r\n\tdhx_cal_tab:function(){\r\n\t\tconst name = this.getAttribute(\"data-tab\");\r\n\t\tconst deprecated_name = this.getAttribute(\"name\");\r\n\t\tconst mode = name || deprecated_name.substring(0, deprecated_name.search(\"_tab\"));\r\n\t\tscheduler.setCurrentView(scheduler._date,mode);\r\n\t},\r\n\tbuttons:{\r\n\t\t\"delete\":function(id){\r\n\t\t\tconst c = scheduler.locale.labels.confirm_deleting;\r\n\t\t\tscheduler._dhtmlx_confirm({message: c, title: scheduler.locale.labels.title_confirm_deleting, callback:function(){ scheduler.deleteEvent(id); },\r\n\t\t\tconfig: {ok: scheduler.locale.labels.icon_delete}\r\n\t\t});\r\n\t\t},\r\n\t\tedit:function(id){ scheduler.edit(id); },\r\n\t\tsave:function(id){ scheduler.editStop(true); },\r\n\t\tdetails:function(id){ scheduler.showLightbox(id); },\r\n\t\tform:function(id){ scheduler.showLightbox(id); },\r\n\t\tcancel:function(id){ scheduler.editStop(false); }\r\n\t}\r\n};\r\nscheduler._dhtmlx_confirm = function({message, title, callback, config}) {\r\n\tif (!message)\r\n\t\treturn callback();\r\n\r\n\tconfig = config || {};\r\n\tconst opts = { ...config, text: message };\r\n\tif (title) {\r\n\t\topts.title = title;\r\n\t}\r\n\tif (callback) {\r\n\t\topts.callback = function(result) {\r\n\t\t\tif (result) {\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\tscheduler.confirm(opts);\r\n};\r\nscheduler.addEventNow=function(start,end,e){\r\n\tlet base = {};\r\n\tif (scheduler._isObject(start) && !scheduler._isDate(start)){\r\n\t\tbase = start;\r\n\t\tstart = null;\r\n\t}\r\n\r\n\tconst duration = (this.config.event_duration||this.config.time_step)*60000;\r\n\tif (!start) start = base.start_date||Math.round((scheduler._currentDate()).valueOf()/duration)*duration;\r\n\tlet start_date = new Date(start);\r\n\tif (!end){\r\n\t\tlet start_hour = this.config.first_hour;\r\n\t\tif (start_hour > start_date.getHours()){\r\n\t\t\tstart_date.setHours(start_hour);\r\n\t\t\tstart = start_date.valueOf();\r\n\t\t}\r\n\t\tend = start.valueOf()+duration;\r\n\t}\r\n\tlet end_date = new Date(end);\r\n\r\n\t// scheduler.addEventNow(new Date(), new Date()) + collision though get_visible events defect (such event was not retrieved)\r\n\tif(start_date.valueOf() == end_date.valueOf())\r\n\t\tend_date.setTime(end_date.valueOf()+duration);\r\n\tbase.start_date = base.start_date||start_date;\r\n\tbase.end_date =  base.end_date||end_date;\r\n\tbase.text = base.text||this.locale.labels.new_event;\r\n\tbase.id = this._drag_id = base.id || this.uid();\r\n\tthis._drag_mode=\"new-size\";\r\n\tthis._loading=true;\r\n\tconst eventId = this.addEvent(base);\r\n\tthis.callEvent(\"onEventCreated\",[this._drag_id,e]);\r\n\tthis._loading=false;\r\n\r\n\tthis._drag_event={}; //dummy , to trigger correct event updating logic\r\n\tthis._on_mouse_up(e);\r\n\treturn eventId;\r\n};\r\nscheduler._on_dbl_click=function(e,src){\r\n\tsrc = src || e.target;\r\n\tif (this.config.readonly) return;\r\n\tconst name = scheduler._getClassName(src).split(\" \")[0];\r\n\tswitch(name){\r\n\t\tcase \"dhx_scale_holder\":\r\n\t\tcase \"dhx_scale_holder_now\":\r\n\t\tcase \"dhx_month_body\":\r\n\t\tcase \"dhx_wa_day_data\":\r\n\t\t\tif (!scheduler.config.dblclick_create) break;\r\n\t\t\tthis.addEventNow(this.getActionData(e).date,null,e);\r\n\t\t\tbreak;\r\n\t\tcase \"dhx_cal_event\":\r\n\t\tcase \"dhx_wa_ev_body\":\r\n\t\tcase \"dhx_agenda_line\":\r\n\t\tcase \"dhx_cal_agenda_event_line\":\r\n\t\tcase \"dhx_grid_event\":\r\n\t\tcase \"dhx_cal_event_line\":\r\n\t\tcase \"dhx_cal_event_clear\": {\r\n\t\t\tconst id = this._locate_event(src);\r\n\t\t\tif (!this.callEvent(\"onDblClick\",[id,e])) return;\r\n\t\t\tif (this.config.details_on_dblclick || this._table_view || !this.getEvent(id)._timed || !this.config.select)\r\n\t\t\t\tthis.showLightbox(id);\r\n\t\t\telse\r\n\t\t\t\tthis.edit(id);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase \"dhx_time_block\":\r\n\t\tcase \"dhx_cal_container\":\r\n\t\t\treturn;\r\n\t\tdefault: {\r\n\t\t\tconst viewHandler = this[\"dblclick_\"+name];\r\n\t\t\tif (viewHandler) {\r\n\t\t\t\tviewHandler.call(this,e);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (src.parentNode && src != this)\r\n\t\t\t\t\treturn scheduler._on_dbl_click(e,src.parentNode);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n};\r\n//column index by mouse x-coordinate\r\nscheduler._get_column_index = function(x_pos){\r\n\tlet column = 0;\r\n\tif (this._cols){\r\n\t\tlet width = 0;\r\n\t\tlet i = 0;\r\n\t\twhile (width + this._cols[i] < x_pos && i < this._cols.length){\r\n\t\t\twidth += this._cols[i];\r\n\t\t\ti++;\r\n\t\t}\r\n\t\tcolumn = i + (this._cols[i] ? ((x_pos - width)/ this._cols[i]) : 0);\r\n\r\n\t\tif (this._ignores){\r\n\t\t\tif(column >= this._cols.length){\r\n\t\t\t\twhile(column >= 1 && this._ignores[Math.floor(column)]){\r\n\t\t\t\t\tcolumn--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\treturn column;\r\n};\r\n\r\n//transform mouse coordinates to day-time indexes of week based view\r\nscheduler._week_indexes_from_pos = function(pos){\r\n\t//\"get position\" can be invoked before columns are loaded into the units view(e.g. by onMouseMove handler in key_nav.js)\r\n\tif(!this._cols){\r\n\t\treturn pos;\r\n\t}else{\r\n\t\tconst column = this._get_column_index(pos.x);\r\n\r\n\t\tpos.x=Math.min(this._cols.length-1, Math.max(0,Math.ceil(column)-1));\r\n\t\tpos.y=Math.max(0,Math.ceil(pos.y*60/(this.config.time_step*this.config.hour_size_px))-1)+this.config.first_hour*(60/this.config.time_step);\r\n\t\treturn pos;\r\n\t}\r\n};\r\n\r\nscheduler._mouse_coords=function(ev){\r\n\tlet pos;\r\n\tconst body = document.body;\r\n\tconst documentElement = document.documentElement;\r\n\tif (!this.$env.isIE && (ev.pageX || ev.pageY))\r\n\t\tpos={x:ev.pageX, y:ev.pageY};\r\n\telse pos={\r\n\t\tx:ev.clientX + (body.scrollLeft||documentElement.scrollLeft||0) - body.clientLeft,\r\n\t\ty:ev.clientY + (body.scrollTop||documentElement.scrollTop||0) - body.clientTop\r\n\t};\r\n\t//apply layout\r\n\tif (this.config.rtl && this._colsS) {\r\n\t\tpos.x = this.$container.querySelector(\".dhx_cal_data\").offsetWidth - pos.x;\r\n\t\tpos.x += this.$domHelpers.getAbsoluteLeft(this._obj);\r\n\t\tif (this._mode !== \"month\") {\r\n\t\t\tpos.x -= this.xy.scale_width;\r\n\t\t}\r\n\t} else {\r\n\t\tpos.x-=this.$domHelpers.getAbsoluteLeft(this._obj)+(this._table_view?0:this.xy.scale_width);\r\n\t}\r\n\r\n\tconst dataArea = this.$container.querySelector(\".dhx_cal_data\");\r\n\t//pos.y-=this.$domHelpers.getAbsoluteTop(this._obj)+this.xy.nav_height+(this._dy_shift||0)+this.xy.scale_height-this._els[\"dhx_cal_data\"][0].scrollTop;\r\n\tpos.y-=this.$domHelpers.getAbsoluteTop(dataArea)-this._els[\"dhx_cal_data\"][0].scrollTop;\r\n\tpos.ev = ev;\r\n\tconst handler = this[\"mouse_\"+this._mode];\r\n\tif (handler){\r\n\t\tpos = handler.call(this,pos);\r\n\t}else{\r\n\t\t//transform to date\r\n\t\tif (!this._table_view) {\r\n\t\t\tpos = this._week_indexes_from_pos(pos);\r\n\t\t} else {\r\n\t\t\tconst column = this._get_column_index(pos.x);\r\n\t\t\tif (!this._cols || !this._colsS) // agenda/map views\r\n\t\t\t\treturn pos;\r\n\t\t\tlet dy=0;\r\n\t\t\tfor (dy=1; dy < this._colsS.heights.length; dy++)\r\n\t\t\t\tif (this._colsS.heights[dy]>pos.y) break;\r\n\r\n\t\t\tpos.y=Math.ceil( (Math.max(0, column)+Math.max(0,dy-1)*7)*24*60/this.config.time_step );\r\n\r\n\t\t\tif (scheduler._drag_mode || this._mode == \"month\")\r\n\t\t\t\tpos.y=(Math.max(0,Math.ceil(column)-1)+Math.max(0,dy-1)*7)*24*60/this.config.time_step;\r\n\r\n\t\t\t//we care about ignored days only during event moving in month view\r\n\t\t\tif (this._drag_mode == \"move\"){\r\n\t\t\t\tif (scheduler._ignores_detected && scheduler.config.preserve_length){\r\n\t\t\t\t\tpos._ignores = true;\r\n\t\t\t\t\t//get real lengtn of event\r\n\t\t\t\t\tif (!this._drag_event._event_length)\r\n\t\t\t\t\t\tthis._drag_event._event_length = this._get_real_event_length(this._drag_event.start_date, this._drag_event.end_date, { x_step:1, x_unit:\"day\"});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tpos.x=0;\r\n\t\t}\r\n\t}\r\n\tpos.timestamp = +new Date();\r\n\treturn pos;\r\n};\r\nscheduler._close_not_saved=function(){\r\n\tif (new Date().valueOf()-(scheduler._new_event||0) > 500 && scheduler._edit_id){\r\n\t\tconst confirmationText=scheduler.locale.labels.confirm_closing;\r\n\r\n\t\tscheduler._dhtmlx_confirm({\r\n\t\t\tmessage: confirmationText, \r\n\t\t\ttitle: scheduler.locale.labels.title_confirm_closing, \r\n\t\t\tcallback: function() { \r\n\t\t\t\tscheduler.editStop(scheduler.config.positive_closing);\r\n\t\t\t}\r\n\t\t});\r\n\t\tif(confirmationText){\r\n\t\t\tthis._drag_id = this._drag_pos = this._drag_mode = null;\r\n\t\t}\r\n\t}\r\n};\r\nscheduler._correct_shift=function(start, back){\r\n\treturn start-=((new Date(scheduler._min_date)).getTimezoneOffset()-(new Date(start)).getTimezoneOffset())*60000*(back?-1:1);\r\n};\r\n\r\nscheduler._is_pos_changed = function(old_pos, new_pos){\r\n\tfunction diff(old_val, new_val, acc){\r\n\t\treturn !!(Math.abs(old_val - new_val) > acc);\r\n\t}\r\n\r\n\tif(!(old_pos && this._drag_pos)){\r\n\t\treturn true;\r\n\t}\r\n\tconst delay = 100;\r\n\tconst d_pos = 5;\r\n\r\n\t// start drag only if passed some time since mouse down, or if mouse position changed sufficiently\r\n\treturn !!(this._drag_pos.has_moved || !this._drag_pos.timestamp || (new_pos.timestamp - this._drag_pos.timestamp > delay) || diff(old_pos.ev.clientX, new_pos.ev.clientX, d_pos) || diff(old_pos.ev.clientY, new_pos.ev.clientY, d_pos));\r\n};\r\n\r\nscheduler._correct_drag_start_date = function(start){\r\n\tlet obj;\r\n\tif (scheduler.matrix)\r\n\t\tobj = scheduler.matrix[scheduler._mode];\r\n\tobj = obj  || { x_step:1, x_unit:\"day\" };\r\n\r\n\tstart = new Date(start);\r\n\tlet len = 1;\r\n\tif(obj._start_correction || obj._end_correction)\r\n\t\tlen = (obj.last_hour||0)*60 - (start.getHours()*60+start.getMinutes()) || 1;\r\n\r\n\treturn start*1 + (scheduler._get_fictional_event_length(start, len, obj)  - len);\r\n};\r\nscheduler._correct_drag_end_date = function(start, duration){\r\n\tlet obj;\r\n\tif (scheduler.matrix) {\r\n\t\tobj = scheduler.matrix[scheduler._mode];\r\n\t}\r\n\tobj = obj  || { x_step:1, x_unit:\"day\" };\r\n\r\n\tconst end = start*1 + scheduler._get_fictional_event_length(start, duration, obj);\r\n\treturn new Date(end*1 - (scheduler._get_fictional_event_length(end, -1, obj, -1) + 1));\r\n};\r\n\r\nscheduler._on_mouse_move=function(e){\r\n\tif (this._drag_mode){\r\n\t\tvar pos=this._mouse_coords(e);\r\n\t\tif (this._is_pos_changed(this._drag_pos, pos)){\r\n\t\t\tvar start, end;\r\n\t\t\tif (this._edit_id!=this._drag_id)\r\n\t\t\t\tthis._close_not_saved();\r\n\r\n\t\t\tif(!this._drag_mode)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar mousedownPos = null;\r\n\t\t\tif(this._drag_pos && !this._drag_pos.has_moved){\r\n\t\t\t\tmousedownPos = this._drag_pos;\r\n\t\t\t\tmousedownPos.has_moved = true;\r\n\t\t\t}\r\n\r\n\t\t\tthis._drag_pos = pos;\r\n\r\n\t\t\tthis._drag_pos.has_moved = true;\r\n\r\n\t\t\tif (this._drag_mode==\"create\"){\r\n\r\n\t\t\t\t// use mouse down position as a starting point for drag-create\r\n\t\t\t\tif(mousedownPos){\r\n\t\t\t\t\tpos = mousedownPos;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._close_not_saved();\r\n\t\t\t\tthis.unselect(this._select_id);\r\n\t\t\t\tthis._loading=true; //will be ignored by dataprocessor\r\n\r\n\t\t\t\tstart = this._get_date_from_pos(pos).valueOf();\r\n\r\n\t\t\t\tif (!this._drag_start) {\r\n\t\t\t\t\tvar res = this.callEvent(\"onBeforeEventCreated\", [e, this._drag_id]);\r\n\t\t\t\t\tif (!res){\r\n\t\t\t\t\t\tthis._loading=false;\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._loading=false;\r\n\t\t\t\t\tthis._drag_start=start;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tend = start;\r\n\t\t\t\tif (end == this._drag_start) {\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar start_date = new Date(this._drag_start);\r\n\t\t\t\tvar end_date = new Date(end);\r\n\t\t\t\tif ( (this._mode == \"day\" || this._mode == \"week\") &&\r\n\t\t\t\t\t(start_date.getHours() == end_date.getHours() &&\r\n\t\t\t\t\tstart_date.getMinutes() == end_date.getMinutes()) ) {\r\n\t\t\t\t\t\tend_date = new Date(this._drag_start+1000);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tthis._drag_id=this.uid();\r\n\t\t\t\tthis.addEvent(start_date, end_date, this.locale.labels.new_event, this._drag_id, pos.fields);\r\n\r\n\t\t\t\tthis.callEvent(\"onEventCreated\",[this._drag_id,e]);\r\n\t\t\t\tthis._loading=false;\r\n\t\t\t\tthis._drag_mode=\"new-size\";\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar timeStep = this.config.time_step;\r\n\t\t\tvar ev=this.getEvent(this._drag_id);\r\n\t\t\tvar obj;\r\n\t\t\tif (scheduler.matrix)\r\n\t\t\t\tobj = scheduler.matrix[scheduler._mode];\r\n\t\t\tobj = obj  || { x_step:1, x_unit:\"day\" };\r\n\r\n\t\t\tif (this._drag_mode==\"move\"){\r\n\t\t\t\tstart = this._min_date.valueOf()+(pos.y*this.config.time_step+pos.x*24*60)*60000;\r\n\t\t\t\tif (!pos.custom && this._table_view) {\r\n\t\t\t\t\tstart += this.date.time_part(ev.start_date) * 1000;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!this._table_view && this._dragEventBody && this._drag_event._move_event_shift === undefined) {\r\n\t\t\t\t\tthis._drag_event._move_event_shift = start - ev.start_date;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this._drag_event._move_event_shift) {\r\n\t\t\t\t\tstart -= this._drag_event._move_event_shift;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstart = this._correct_shift(start);\r\n\r\n\t\t\t\tif (pos._ignores && this.config.preserve_length && this._table_view && obj){\r\n\r\n\t\t\t\t\tstart = scheduler._correct_drag_start_date(start);\r\n\t\t\t\t\tend = scheduler._correct_drag_end_date(start,this._drag_event._event_length);\r\n\r\n\t\t\t\t} else\r\n\t\t\t\t\tend = ev.end_date.valueOf()-(ev.start_date.valueOf()-start);\r\n\t\t\t} else { // resize\r\n\t\t\t\tstart = ev.start_date.valueOf();\r\n\t\t\t\tend = ev.end_date.valueOf();\r\n\t\t\t\tif (this._table_view) {\r\n\t\t\t\t\tvar resize_date = this._min_date.valueOf()+pos.y*this.config.time_step*60000 + (pos.custom?0:24*60*60000);\r\n\t\t\t\t\tif (this._mode == \"month\") {\r\n\t\t\t\t\t\tresize_date = this._correct_shift(resize_date, false);\r\n\t\t\t\t\t\tif( this._drag_from_start ) {\r\n\t\t\t\t\t\t\tvar day = 24*60*60000;\r\n\t\t\t\t\t\t\tif( resize_date <= scheduler.date.date_part(new Date(end+day-1)).valueOf() ) // to get end time as 23:59:59 and then the day start\r\n\t\t\t\t\t\t\t\tstart = resize_date - day;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tend = resize_date;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif(this.config.preserve_length) {\r\n\t\t\t\t\t\t\tif (pos.resize_from_start) {\r\n\t\t\t\t\t\t\t\tstart = scheduler._correct_drag_start_date(resize_date);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tend = scheduler._correct_drag_end_date(resize_date, 0);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tif (pos.resize_from_start) {\r\n\t\t\t\t\t\t\t\tstart = resize_date;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tend = resize_date;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar end_day_start = this.date.date_part(new Date(ev.end_date.valueOf() - 1)).valueOf();\r\n\t\t\t\t\tvar end_day_date = new Date(end_day_start);\r\n\t\t\t\t\tvar firstHour = this.config.first_hour;\r\n\t\t\t\t\tvar lastHour = this.config.last_hour;\r\n\t\t\t\t\tvar maxY = (lastHour - firstHour) * (60/timeStep);\r\n\r\n\t\t\t\t\tthis.config.time_step = 1;\r\n\t\t\t\t\tvar precisePos = this._mouse_coords(e);\r\n\t\t\t\t\tthis.config.time_step = timeStep;\r\n\r\n\t\t\t\t\tvar minDate = pos.y*timeStep*60000;\r\n\t\t\t\t\tvar maxDate = Math.min(pos.y + 1, maxY)*timeStep*60000;\r\n\t\t\t\t\tvar preciseDate = precisePos.y*60000;\r\n\r\n\t\t\t\t\t// rounding end date to the closest time step\r\n\t\t\t\t\tif(Math.abs(minDate - preciseDate) > Math.abs(maxDate - preciseDate)){\r\n\t\t\t\t\t\tend = end_day_start + maxDate;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tend = end_day_start + minDate;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tend = end + ((new Date(end)).getTimezoneOffset() - end_day_date.getTimezoneOffset()) * 60000;\r\n\t\t\t\t\tthis._els[\"dhx_cal_data\"][0].style.cursor=\"s-resize\";\r\n\t\t\t\t\tif (this._mode == \"week\" || this._mode == \"day\")\r\n\t\t\t\t\t\tend = this._correct_shift(end);\r\n\t\t\t\t}\r\n\t\t\t\tif (this._drag_mode == \"new-size\") {\r\n\t\t\t\t\tif (end <= this._drag_start){\r\n\t\t\t\t\t\tvar shift = pos.shift||((this._table_view && !pos.custom)?24*60*60000:0);\r\n\t\t\t\t\t\tstart = end-(pos.shift?0:shift);\r\n\t\t\t\t\t\tend = this._drag_start+(shift||(timeStep*60000));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstart = this._drag_start;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (end<=start)\r\n\t\t\t\t\t\tend=start+timeStep*60000;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar new_end = new Date(end-1);\r\n\t\t\tvar new_start = new Date(start);\r\n\t\t\t//deny drag out of visible scheduler scale in timeline view\r\n\t\t\tif(this._drag_mode==\"move\" && scheduler.config.limit_drag_out &&\r\n\t\t\t\t(+new_start < +scheduler._min_date || +end > +scheduler._max_date)){\r\n\r\n\t\t\t\tif(+ev.start_date < +scheduler._min_date || +ev.end_date > +scheduler._max_date){\r\n\t\t\t\t\t// not move event if it's already outside time scale\r\n\t\t\t\t\tnew_start = new Date(ev.start_date);\r\n\t\t\t\t\tend = new Date(ev.end_date);\r\n\t\t\t\t}else{\r\n\r\n\t\t\t\t\tvar duration = end - new_start;\r\n\r\n\t\t\t\t\tif(+new_start < +scheduler._min_date){\r\n\t\t\t\t\t\tnew_start = new Date(scheduler._min_date);\r\n\t\t\t\t\t\tif (pos._ignores && this.config.preserve_length && this._table_view){\r\n\t\t\t\t\t\t\tnew_start = new Date(scheduler._correct_drag_start_date(new_start));\r\n\t\t\t\t\t\t\tif(obj._start_correction)\r\n\t\t\t\t\t\t\t\tnew_start = new Date(new_start.valueOf() + obj._start_correction);\r\n\t\t\t\t\t\t\tend = new Date(new_start*1 + this._get_fictional_event_length(new_start, this._drag_event._event_length, obj));\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tend = new Date(+new_start + duration);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tend = new Date(scheduler._max_date);\r\n\r\n\t\t\t\t\t\tif (pos._ignores && this.config.preserve_length && this._table_view){\r\n\t\t\t\t\t\t\tif(obj._end_correction)\r\n\t\t\t\t\t\t\t\tend = new Date(end.valueOf() - obj._end_correction);\r\n\t\t\t\t\t\t\tend = new Date(end*1 - this._get_fictional_event_length(end, 0, obj, true));\r\n\t\t\t\t\t\t\tnew_start = new Date(end*1 - this._get_fictional_event_length(end, this._drag_event._event_length, obj, true));\r\n\t\t\t\t\t\t\tif(this._ignores_detected){\r\n\t\t\t\t\t\t\t\tnew_start = scheduler.date.add(new_start, obj.x_step, obj.x_unit);\r\n\t\t\t\t\t\t\t\tend = new Date(end*1 - this._get_fictional_event_length(end, 0, obj, true));\r\n\t\t\t\t\t\t\t\tend = scheduler.date.add(end, obj.x_step, obj.x_unit);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tnew_start = new Date(+end - duration);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tvar new_end = new Date(end-1);\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\t// fix event dates when resized to bottom of the column (day/week views)\r\n\t\t\tif(!this._table_view && this._dragEventBody &&\r\n\t\t\t\t!scheduler.config.all_timed &&\r\n\t\t\t\t((!scheduler._get_section_view() && pos.x != this._get_event_sday({start_date: new Date(start), end_date:new Date(start)})) || new Date(start).getHours() < this.config.first_hour)){\r\n\t\t\t\tvar duration = end - new_start;\r\n\t\t\t\tif (this._drag_mode == \"move\") {\r\n\t\t\t\t\tvar day = this._min_date.valueOf() + (pos.x * 24 * 60) * 60000;\r\n\t\t\t\t\tnew_start = new Date(day);\r\n\t\t\t\t\tnew_start.setHours(this.config.first_hour);\r\n\t\t\t\t\tend = new Date(new_start.valueOf() + duration);\r\n\t\t\t\t\tnew_end = new Date(end-1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// fix event dates when resized to bottom of the column (day/week views)\r\n\t\t\tif(!this._table_view &&\r\n\t\t\t\t!scheduler.config.all_timed &&\r\n\t\t\t\t((!scheduler.getView() && pos.x != this._get_event_sday({start_date: new Date(end), end_date:new Date(end)})) || new Date(end).getHours() >= this.config.last_hour)){\r\n\t\t\t\tvar duration = end - new_start;\r\n\t\t\t\tvar day = this._min_date.valueOf()+(pos.x*24*60)*60000;\r\n\t\t\t\tend = scheduler.date.date_part(new Date(day));\r\n\t\t\t\tend.setHours(this.config.last_hour);\r\n\t\t\t\tnew_end = new Date(end-1);\r\n\t\t\t\tif(this._drag_mode == \"move\"){\r\n\t\t\t\t\tnew_start = new Date(+end - duration);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//prevent out-of-borders situation for day|week view\r\n\t\t\tif ( this._table_view || (new_end.getDate()==new_start.getDate() && new_end.getHours()<this.config.last_hour) || scheduler._allow_dnd ){\r\n\t\t\t\tev.start_date=new_start;\r\n\t\t\t\tev.end_date=new Date(end);\r\n\t\t\t\tif (this.config.update_render){\r\n\t\t\t\t\t//fix for repaint after dnd and scroll issue, #231\r\n\t\t\t\t\tvar sx = scheduler._els[\"dhx_cal_data\"][0].scrollTop;\r\n\t\t\t\t\tthis.update_view();\r\n\t\t\t\t\tscheduler._els[\"dhx_cal_data\"][0].scrollTop = sx;\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.updateEvent(this._drag_id);\r\n\t\t\t}\r\n\t\t\tif (this._table_view) {\r\n\t\t\t\tthis.for_rendered(this._drag_id,function(r){\r\n\t\t\t\t\tr.className+=\" dhx_in_move dhx_cal_event_drag\";\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onEventDrag\", [this._drag_id, this._drag_mode, e]);\r\n\t\t}\r\n\t}  else {\r\n\t\tif (scheduler.checkEvent(\"onMouseMove\")){\r\n\t\t\tvar id = this._locate_event(e.target||e.srcElement);\r\n\t\t\tthis.callEvent(\"onMouseMove\",[id,e]);\r\n\t\t}\r\n\t}\r\n};\r\nscheduler._on_mouse_down=function(e,src) {\r\n\t// on Mac we do not get onmouseup event when clicking right mouse button leaving us in dnd state\r\n\t// let's ignore right mouse button then\r\n\tif (e.button == 2)\r\n\t\treturn;\r\n\r\n\tif (this.config.readonly || this._drag_mode) return;\r\n\tsrc = src||(e.target||e.srcElement);\r\n\tvar classname = scheduler._getClassName(src).split(\" \")[0];\r\n\r\n\tif (this.config.drag_event_body && classname == \"dhx_body\") {\r\n\t\tif(src.parentNode && src.parentNode.className.indexOf(\"dhx_cal_select_menu\") === -1){\r\n\t\t\tclassname = \"dhx_event_move\";\r\n\t\t\tthis._dragEventBody = true;\r\n\t\t}\r\n\t}\r\n\r\n\tswitch (classname) {\r\n\t\tcase \"dhx_cal_event_line\":\r\n\t\tcase \"dhx_cal_event_clear\":\r\n\t\t\tif (this._table_view)\r\n\t\t\t\tthis._drag_mode=\"move\"; //item in table mode\r\n\t\t\tbreak;\r\n\t\tcase \"dhx_event_move\":\r\n\t\tcase \"dhx_wa_ev_body\":\r\n\t\t\tthis._drag_mode=\"move\";\r\n\t\t\tbreak;\r\n\t\tcase \"dhx_event_resize\":\r\n\t\t\tthis._drag_mode=\"resize\";\r\n\t\t\tvar fullClass = scheduler._getClassName(src);\r\n\t\t\tif((fullClass).indexOf(\"dhx_event_resize_end\") < 0){\r\n\t\t\t\tscheduler._drag_from_start = true;\r\n\t\t\t}else{\r\n\t\t\t\tscheduler._drag_from_start = false;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase \"dhx_scale_holder\":\r\n\t\tcase \"dhx_scale_holder_now\":\r\n\t\tcase \"dhx_month_body\":\r\n\t\tcase \"dhx_matrix_cell\":\r\n\t\tcase \"dhx_marked_timespan\":\r\n\t\t\tthis._drag_mode=\"create\";\r\n\t\t\tbreak;\r\n\t\tcase \"\":\r\n\t\t\tif (src.parentNode)\r\n\t\t\t\treturn scheduler._on_mouse_down(e,src.parentNode);\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tif (!scheduler.checkEvent(\"onMouseDown\") || scheduler.callEvent(\"onMouseDown\", [classname, e])) {\r\n\t\t\t\tif (src.parentNode && src != this && classname != \"dhx_body\") {\r\n\t\t\t\t\treturn scheduler._on_mouse_down(e,src.parentNode);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._drag_mode=null;\r\n\t\t\tthis._drag_id=null;\r\n\t\t\tbreak;\r\n\t}\r\n\tif (this._drag_mode){\r\n\t\tvar id = this._locate_event(src);\r\n\t\tif (!this.config[\"drag_\"+this._drag_mode] || !this.callEvent(\"onBeforeDrag\",[id, this._drag_mode, e]))\r\n\t\t\tthis._drag_mode=this._drag_id=0;\r\n\t\telse {\r\n\t\t\tthis._drag_id= id;\r\n\r\n\t\t\tif (this._edit_id!=this._drag_id || (this._edit_id && this._drag_mode == \"create\"))\r\n\t\t\t\tthis._close_not_saved();\r\n\t\t\tif(!this._drag_mode)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis._drag_event = scheduler._lame_clone(this.getEvent(this._drag_id) || {});\r\n\t\t\tthis._drag_pos = this._mouse_coords(e);\r\n\t\t}\r\n\t}\r\n\tthis._drag_start=null;\r\n};\r\n\r\n\r\nscheduler._get_private_properties = function(event){\r\n\tvar fields = {};\r\n\tfor(var i in event){\r\n\t\tif(i.indexOf(\"_\") === 0){\r\n\t\t\tfields[i] = true;\r\n\t\t}\r\n\t}\r\n\treturn fields;\r\n};\r\nscheduler._clear_temporary_properties = function(clean, flagged_event){\r\n\tvar initial = this._get_private_properties(clean);\r\n\tvar current_state = this._get_private_properties(flagged_event);\r\n\tfor(var i in current_state){\r\n\t\tif(!initial[i]){\r\n\t\t\tdelete flagged_event[i];\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nscheduler._on_mouse_up=function(e){\r\n\tif (e && e.button == 2 && this._mobile) return;\r\n\tif (this._drag_mode && this._drag_id){\r\n\t\tthis._els[\"dhx_cal_data\"][0].style.cursor=\"default\";\r\n\t\t//drop\r\n\r\n\t\tvar drag_id = this._drag_id;\r\n\t\tvar mode = this._drag_mode;\r\n\r\n\t\tvar moved = !this._drag_pos || this._drag_pos.has_moved;\r\n\t\tdelete this._drag_event._move_event_shift;\r\n\r\n\t\tvar ev=this.getEvent(this._drag_id);\r\n\t\tif (moved && (this._drag_event._dhx_changed || !this._drag_event.start_date || ev.start_date.valueOf()!=this._drag_event.start_date.valueOf() || ev.end_date.valueOf()!=this._drag_event.end_date.valueOf())){\r\n\t\t\tvar is_new=(this._drag_mode==\"new-size\");\r\n\t\t\tif (!this.callEvent(\"onBeforeEventChanged\",[ev, e, is_new, this._drag_event])){\r\n\t\t\t\tif (is_new)\r\n\t\t\t\t\tthis.deleteEvent(ev.id, true);\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis._drag_event._dhx_changed = false;\r\n\t\t\t\t\tthis._clear_temporary_properties(ev, this._drag_event);\r\n\t\t\t\t\tscheduler._lame_copy(ev, this._drag_event);\r\n\t\t\t\t\tthis.updateEvent(ev.id);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._drag_id = this._drag_mode = null;\r\n\t\t\t\tif (is_new && this.config.edit_on_create){\r\n\t\t\t\t\tthis.unselect();\r\n\t\t\t\t\tthis._new_event=new Date();//timestamp of creation\r\n\t\t\t\t\t//if selection disabled - force lightbox usage\r\n\t\t\t\t\tif (this._table_view || this.config.details_on_create || !this.config.select || !this.isOneDayEvent(this.getEvent(drag_id))) {\r\n\t\t\t\t\t\tscheduler.callEvent(\"onDragEnd\", [drag_id, mode, e]);\r\n\t\t\t\t\t\treturn this.showLightbox(drag_id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._drag_pos = true; //set flag to trigger full redraw\r\n\t\t\t\t\tthis._select_id = this._edit_id = drag_id;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!this._new_event)\r\n\t\t\t\t\t\tthis.callEvent(is_new?\"onEventAdded\":\"onEventChanged\",[drag_id,this.getEvent(drag_id)]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._drag_pos && (this._drag_pos.has_moved || this._drag_pos === true)) {\r\n\t\t\tthis._drag_id = this._drag_mode = null; // set null to prevent _sorder recalculation for drag event\r\n\t\t\tthis.render_view_data(); //redraw even if there is no real changes - necessary for correct positioning item after drag\r\n\t\t}\r\n\t\tscheduler.callEvent(\"onDragEnd\", [drag_id, mode, e]);\r\n\t}\r\n\tthis._drag_id = null;\r\n\tthis._drag_mode=null;\r\n\tthis._drag_pos=null;\r\n\tthis._drag_event = null;\r\n\tthis._drag_from_start = null;\r\n};\r\n\r\nscheduler._trigger_dyn_loading = function(){\r\n\tif (this._load_mode && this._load()){\r\n\t\tthis._render_wait = true;\r\n\t\treturn true;\r\n\t}else{\r\n\t\treturn false;\r\n\t}\r\n};\r\nscheduler.update_view=function(){\r\n\tthis._reset_ignores();\r\n\tthis._update_nav_bar(\r\n\t\tthis.config.header,\r\n\t\tthis.$container.querySelector(\".dhx_cal_navline\"));\r\n\r\n\tvar view = this[this._mode + \"_view\"];\r\n\tif(view){\r\n\t\tview.call(this, true);\r\n\t}else{\r\n\t\tthis._reset_scale();\r\n\t}\r\n\r\n\tif (this._trigger_dyn_loading()){\r\n\t\treturn true;\r\n\t}\r\n\tthis.render_view_data();\r\n};\r\n\r\nscheduler.isViewExists = function(mode){\r\n\treturn !!(scheduler[mode+ \"_view\"] ||\r\n\t\t(scheduler.date[mode+ \"_start\"] && scheduler.templates[mode+ \"_date\"] && scheduler.templates[mode+ \"_scale_date\"]));\r\n};\r\n\r\nscheduler._set_aria_buttons_attrs = function(){\r\n\tvar buttonGroups = [\"dhx_cal_next_button\", \"dhx_cal_prev_button\", \"dhx_cal_tab\", \"dhx_cal_today_button\"];\r\n\tfor(var i = 0; i < buttonGroups.length; i++){\r\n\t\tvar group = this._els[buttonGroups[i]];\r\n\t\tfor(var j = 0; group && j < group.length; j++ ){\r\n\t\t\tvar name = group[j].getAttribute(\"data-tab\") || group[j].getAttribute(\"name\");\r\n\t\t\tvar label = this.locale.labels[buttonGroups[i]];\r\n\t\t\tif(name){\r\n\t\t\t\tlabel = this.locale.labels[name + \"_tab\"] || this.locale.labels[name] || label;\r\n\t\t\t}\r\n\t\t\tif(buttonGroups[i] == \"dhx_cal_next_button\"){\r\n\t\t\t\tlabel = this.locale.labels.next;\r\n\t\t\t}else if(buttonGroups[i] == \"dhx_cal_prev_button\"){\r\n\t\t\t\tlabel = this.locale.labels.prev;\r\n\t\t\t}\r\n\t\t\tthis._waiAria.headerButtonsAttributes(group[j], label || \"\");\r\n\t\t}\r\n\t}\r\n};\r\n\r\nscheduler.updateView = function(date, mode) {\r\n\r\n\tif (!this.$container) {\r\n\t\tthrow new Error(\"The scheduler is not initialized. \\n **scheduler.updateView** or **scheduler.setCurrentView** can be called only after **scheduler.init**\");\r\n\t}\r\n\r\n\tdate = date || this._date;\r\n\tmode = mode || this._mode;\r\n\tvar dhx_cal_data = 'dhx_cal_data';\r\n\r\n\tif(!this.locale.labels.icon_form){\r\n\t\tthis.locale.labels.icon_form = this.locale.labels.icon_edit;\r\n\t}\r\n\r\n\tvar container = this._obj;\r\n\tvar oldClass = \"dhx_scheduler_\" + this._mode;\r\n\tvar newClass = \"dhx_scheduler_\" + mode;\r\n\r\n\tif (!this._mode || (container.className.indexOf(oldClass) == -1)){\r\n\t\tcontainer.className += \" \" + newClass;\r\n\t} else {\r\n\t\tcontainer.className = container.className.replace(oldClass, newClass);\r\n\t}\r\n\r\n\tvar dhx_multi_day = 'dhx_multi_day';\r\n\r\n\tvar prev_scroll = (this._mode == mode && this.config.preserve_scroll) ? this._els[dhx_cal_data][0].scrollTop : false; // saving current scroll\r\n\r\n\tvar multidayScroll;\r\n\tif(this._els[dhx_multi_day] && this._els[dhx_multi_day][0]){\r\n\t\tmultidayScroll = this._els[dhx_multi_day][0].scrollTop;\r\n\t}\r\n\r\n\t//hide old custom view\r\n\tif (this[this._mode + \"_view\"] && mode && this._mode != mode)\r\n\t\tthis[this._mode + \"_view\"](false);\r\n\r\n\tthis._close_not_saved();\r\n\r\n\tif (this._els[dhx_multi_day]) {\r\n\t\tthis._els[dhx_multi_day][0].parentNode.removeChild(this._els[dhx_multi_day][0]);\r\n\t\tthis._els[dhx_multi_day] = null;\r\n\t}\r\n\r\n\tthis._mode = mode;\r\n\tthis._date = date;\r\n\tthis._table_view = (this._mode == \"month\");\r\n\r\n\tthis._dy_shift = 0;//correction for multiday section in week/day views\r\n\r\n\t//show new view\r\n\tthis.update_view();\r\n\r\n\tthis._set_aria_buttons_attrs();\r\n\r\n\tvar tabs = this._els[\"dhx_cal_tab\"];\r\n\tif(tabs){//calendar can work without view tabs\r\n\t\tfor (var i = 0; i < tabs.length; i++) {\r\n\t\t\tvar tab = tabs[i];\r\n\r\n\t\t\tif (tab.getAttribute(\"data-tab\") == this._mode || tab.getAttribute(\"name\") == this._mode + \"_tab\"){\r\n\t\t\t\ttab.classList.add(\"active\");\r\n\t\t\t\tthis._waiAria.headerToggleState(tab, true);\r\n\t\t\t}else{\r\n\t\t\t\ttab.classList.remove(\"active\");\r\n\t\t\t\tthis._waiAria.headerToggleState(tab, false);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (typeof prev_scroll == \"number\") // if we are updating or working with the same view scrollTop should be saved\r\n\t\tthis._els[dhx_cal_data][0].scrollTop = prev_scroll; // restoring original scroll\r\n\r\n\tif(typeof multidayScroll == \"number\" && this._els[dhx_multi_day] && this._els[dhx_multi_day][0]){\r\n\t\tthis._els[dhx_multi_day][0].scrollTop = multidayScroll;\r\n\t}\r\n\r\n};\r\nscheduler.setCurrentView = function(date, mode) {\r\n\tif (!this.callEvent(\"onBeforeViewChange\", [this._mode, this._date, mode || this._mode, date || this._date])) return;\r\n\tthis.updateView(date, mode);\r\n\tthis.callEvent(\"onViewChange\", [this._mode, this._date]);\r\n};\r\n\r\nscheduler.render = function(date, mode){\r\n\tscheduler.setCurrentView(date, mode);\r\n};\r\n\r\nscheduler._render_x_header = function(i,left,date,container, offset_top){\r\n\toffset_top = offset_top || 0;\r\n\t//header scale\r\n\tvar head=document.createElement(\"div\");\r\n\thead.className = \"dhx_scale_bar\";\r\n\r\n\tif(this.templates[this._mode+\"_scalex_class\"]){\r\n\t\t//'_scalex_class' - timeline already have similar template, use the same name\r\n\t\thead.className += ' ' + this.templates[this._mode+\"_scalex_class\"](date);\r\n\t}\r\n\r\n\tvar width = this._cols[i];\r\n\r\n\tif (this._mode == \"month\" && i === 0 && this.config.left_border) {\r\n\t\thead.className += \" dhx_scale_bar_border\";\r\n\t\tleft = left+1;\r\n\t}\r\n\r\n\tthis.set_xy(head, width, this.xy.scale_height-1, left, offset_top);\r\n\r\n\tvar columnHeaderText = this.templates[this._mode+\"_scale_date\"](date,this._mode); //TODO - move in separate method\r\n\thead.innerHTML = columnHeaderText;\r\n\r\n\tthis._waiAria.dayHeaderAttr(head, columnHeaderText);\r\n\r\n\tcontainer.appendChild(head);\r\n};\r\n\r\nscheduler._get_columns_num = function(from, to){\r\n\tvar count = 7;\r\n\tif (!scheduler._table_view){\r\n\t\tvar count_n = scheduler.date[\"get_\"+scheduler._mode+\"_end\"];\r\n\t\tif (count_n) to = count_n(from);\r\n\t\tcount = Math.round((to.valueOf()-from.valueOf())/(1000*60*60*24));\r\n\t}\r\n\treturn count;\r\n};\r\nscheduler._get_timeunit_start = function(){\r\n\t//start date of currently displayed time unit(day, week,...)\r\n\treturn this.date[this._mode+\"_start\"](new Date(this._date.valueOf()));\r\n};\r\n\r\nscheduler._get_view_end = function(){\r\n\tvar dd = this._get_timeunit_start();\r\n\tvar ed = scheduler.date.add(dd, 1, this._mode);\r\n\tif (!scheduler._table_view){\r\n\t\tvar count_n = scheduler.date[\"get_\"+scheduler._mode+\"_end\"];\r\n\t\tif (count_n) ed = count_n(dd);\r\n\t}\r\n\treturn ed;\r\n};\r\nscheduler._calc_scale_sizes = function(width, from, to){//\r\n\t//calculates number of displayed columns(days/units/month view cols) and their widths\r\n\tvar rtl = this.config.rtl;\r\n\tvar summ = width; //border delta\r\n\tvar count = this._get_columns_num(from, to);\r\n\t//if (this.config.rtl) this._process_ignores(scheduler.date.add(to, -1, \"day\"), count, \"day\", -1);\r\n\t//else\r\n\tthis._process_ignores(from, count, \"day\", 1);\r\n\tvar realcount = count - this._ignores_detected;\r\n\tfor (var i=0; i<count; i++){\r\n\t\tif (this._ignores[i]){\r\n\t\t\tthis._cols[i] = 0;\r\n\t\t\trealcount++;\r\n\t\t} else {\r\n\t\t\tthis._cols[i]=Math.floor(summ/(realcount-i));\r\n\t\t}\r\n\t\tsumm-=this._cols[i];\r\n\t\tthis._colsS[i]=(this._cols[i-1]||0)+(this._colsS[i-1]||(this._table_view?0:(rtl ? this.xy.scroll_width : this.xy.scale_width)));\r\n\t\t//this._colsS[j]=(this._cols[rtl ? j+1 : (i-1)]||0)+(this._colsS[rtl ? j+1 : (i-1)]||(this._table_view?0:(rtl?this.xy.scroll_width:this.xy.scale_width)+2));\r\n\t}\r\n\tthis._colsS['col_length'] = count;\r\n\tthis._colsS[count] = (this._cols[count-1]+this._colsS[count-1]) || 0;\r\n\t//this._colsS[count] = (this._cols[rtl ? 0 : count-1]+this._colsS[rtl ? 0 : count-1]) || 0;\r\n};\r\n\r\nscheduler._set_scale_col_size = function(div, width, left){\r\n\tvar c = this.config;\r\n\tthis.set_xy(div, width, c.hour_size_px*(c.last_hour-c.first_hour), left+this.xy.scale_width + 1, 0);//-1 for border\r\n};\r\n\r\nscheduler._render_scales = function(header, data_area){\r\n\t//render columns in week/units view, or header in month view\r\n\tvar sd = new Date(scheduler._min_date),\r\n\t\ted = new Date(scheduler._max_date),\r\n\t\ttoday = this.date.date_part( scheduler._currentDate());\r\n\r\n\tvar summ = parseInt(header.style.width,10) - 1;\r\n\tvar d = new Date(this._min_date);\r\n\t// if (this.config.rtl) {\r\n\t// \td = new Date(scheduler.date.add(this._max_date, -1, \"day\"));\r\n\t// }\r\n\tvar count = this._get_columns_num(sd, ed);\r\n\tthis._calc_scale_sizes(summ, sd, ed);\r\n\tvar left=0;\r\n\r\n\theader.innerHTML = \"\";\r\n\tfor (var i=0; i<count; i++){\r\n\t\tif (!this._ignores[i]){\r\n\t\t\tthis._render_x_header(i,left,d,header);\r\n\t\t}\r\n\t\tif (!this._table_view){\r\n\t\t\tvar scales=document.createElement(\"div\");\r\n\t\t\tvar cls = \"dhx_scale_holder\";\r\n\t\t\tif (d.valueOf() == today.valueOf()) cls += \" dhx_scale_holder_now\";\r\n\r\n\t\t\tscales.setAttribute(\"data-column-index\", i);\r\n\t\t\tif (this._ignores_detected && this._ignores[i]){\r\n\t\t\t\tcls += \" dhx_scale_ignore\";\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i=this.config.first_hour*1; i < this.config.last_hour; i++) {\r\n\t\t\t\tconst firstHalf = document.createElement(\"div\");\r\n\t\t\t\tfirstHalf.className=\"dhx_scale_time_slot dhx_scale_time_slot_hour_start\";\r\n\t\t\t\tfirstHalf.style.height=this.config.hour_size_px/2+\"px\";\r\n\t\t\t\t\r\n\t\t\t\tlet slotDate = new Date(d.getFullYear(), d.getMonth(), d.getDate(), i, 0);\r\n\t\t\t\tfirstHalf.setAttribute('data-slot-date', this.templates.format_date(slotDate));\r\n\r\n\t\t\t\tlet htmlContent = this.templates.time_slot_text(slotDate);\r\n\t\t\t\tif(htmlContent){\r\n\t\t\t\t\tfirstHalf.innerHTML = htmlContent;\r\n\t\t\t\t}\r\n\t\t\t\tlet cssClass = this.templates.time_slot_class(slotDate);\r\n\t\t\t\tif(cssClass){\r\n\t\t\t\t\tfirstHalf.classList.add(cssClass);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscales.appendChild(firstHalf);\r\n\r\n\t\t\t\tconst secondHalf = document.createElement(\"div\");\r\n\t\t\t\tsecondHalf.className=\"dhx_scale_time_slot\";\r\n\t\t\t\tslotDate = new Date(d.getFullYear(), d.getMonth(), d.getDate(), i, 30);\r\n\t\t\t\tsecondHalf.setAttribute('data-slot-date', this.templates.format_date(slotDate));\r\n\t\t\t\tsecondHalf.style.height=this.config.hour_size_px/2+\"px\";\r\n\t\t\t\thtmlContent = this.templates.time_slot_text(slotDate);\r\n\t\t\t\tif(htmlContent){\r\n\t\t\t\t\tsecondHalf.innerHTML = htmlContent;\r\n\t\t\t\t}\r\n\t\t\t\tcssClass = this.templates.time_slot_class(slotDate);\r\n\t\t\t\tif(cssClass){\r\n\t\t\t\t\tsecondHalf.classList.add(cssClass);\r\n\t\t\t\t}\r\n\t\t\t\tscales.appendChild(secondHalf);\r\n\t\t\t}\r\n\r\n\t\t\tscales.className = cls+\" \"+this.templates.week_date_class(d,today);\r\n\t\t\tthis._waiAria.dayColumnAttr(scales, d);\r\n\t\t\tthis._set_scale_col_size(scales, this._cols[i], left);\r\n\r\n\t\t\tdata_area.appendChild(scales);\r\n\t\t\tthis.callEvent(\"onScaleAdd\",[scales, d]);\r\n\t\t}\r\n\t\tleft+=this._cols[i];\r\n\t\t//if (this.config.rtl) d=this.date.add(d,-1,\"day\");\r\n\t\t//else\r\n\t\td=this.date.add(d,1,\"day\");\r\n\t\td = this.date.day_start(d);\r\n\t}\r\n};\r\n\r\nscheduler._getNavDateElement = function(){\r\n\treturn this.$container.querySelector(\".dhx_cal_date\");\r\n};\r\n\r\nscheduler._reset_scale=function(){\r\n\t//current mode doesn't support scales\r\n\t//we mustn't call reset_scale for such modes, so it just to be sure\r\n\tif (!this.templates[this._mode + \"_date\"]) return;\r\n\r\n\tvar header = this._els[\"dhx_cal_header\"][0];\r\n\tvar data_area = this._els[\"dhx_cal_data\"][0];\r\n\tvar c = this.config;\r\n\r\n\theader.innerHTML = \"\";\r\n\t//data_area.scrollTop = 0; //fix flickering in FF; makes IE8 flicker instead\r\n\tdata_area.innerHTML = \"\";\r\n\r\n\tvar str = ((c.readonly || (!c.drag_resize)) ? \" dhx_resize_denied\" : \"\") + ((c.readonly || (!c.drag_move)) ? \" dhx_move_denied\" : \"\");\r\n\tdata_area.className = \"dhx_cal_data\" + str;\r\n\r\n\tthis._scales = {};\r\n\tthis._cols = [];\t//store for data section\r\n\tthis._colsS = {height: 0};\r\n\tthis._dy_shift = 0;\r\n\r\n\tthis.set_sizes();\r\n\r\n\tvar d,sd;\r\n\tvar dd = this._get_timeunit_start(),\r\n\t\ted = scheduler._get_view_end();\r\n\r\n\td = sd = this._table_view ? scheduler.date.week_start(dd) : dd;\r\n\r\n\r\n\tthis._min_date=d;\r\n\r\n\tvar navBarDateStr = this.templates[this._mode+\"_date\"](dd,ed,this._mode);\r\n\r\n\tvar scaleElement = this._getNavDateElement();\r\n\tif(scaleElement){\r\n\t\tscaleElement.innerHTML = navBarDateStr;\r\n\t\tthis._waiAria.navBarDateAttr(scaleElement, navBarDateStr);\r\n\t}\r\n\r\n\tthis._max_date = ed;\r\n\tscheduler._render_scales(header, data_area);\r\n\r\n\tif (this._table_view) // month view\r\n\t\tthis._reset_month_scale(data_area,dd,sd);\r\n\telse{\r\n\t\tthis._reset_hours_scale(data_area,dd,sd);\r\n\t\tif (c.multi_day) {\r\n\t\t\tvar dhx_multi_day = 'dhx_multi_day';\r\n\r\n\t\t\tif(this._els[dhx_multi_day]) {\r\n\t\t\t\tthis._els[dhx_multi_day][0].parentNode.removeChild(this._els[dhx_multi_day][0]);\r\n\t\t\t\tthis._els[dhx_multi_day] = null;\r\n\t\t\t}\r\n\r\n\t\t\tvar c1 = document.createElement(\"div\");\r\n\t\t\tc1.className = dhx_multi_day;\r\n\t\t\tc1.style.visibility=\"hidden\";\r\n\t\t\tc1.style.display=\"none\";\r\n\t\t\tvar totalWidth = this._colsS[this._colsS.col_length];\r\n\t\t\tvar offset = c.rtl ? this.xy.scale_width : this.xy.scroll_width;\r\n\t\t\tvar hiddenWidth = Math.max(totalWidth + offset, 0);\r\n\t\t\tthis.set_xy(c1, hiddenWidth, 0, 0); // 2 extra borders, dhx_header has -1 bottom margin\r\n\t\t\tdata_area.parentNode.insertBefore(c1,data_area);\r\n\r\n\t\t\tvar c2 = c1.cloneNode(true);\r\n\t\t\tc2.className = dhx_multi_day+\"_icon\";\r\n\t\t\tc2.style.visibility=\"hidden\";\r\n\t\t\tc2.style.display=\"none\";\r\n\t\t\tthis.set_xy(c2, this.xy.scale_width + 1, 0, 0); // dhx_header has -1 bottom margin\r\n\r\n\t\t\tc1.appendChild(c2);\r\n\t\t\tthis._els[dhx_multi_day]=[c1,c2];\r\n\t\t\tscheduler.event(this._els[dhx_multi_day][0], \"click\", this._click.dhx_cal_data);\r\n\t\t}\r\n\t}\r\n};\r\nscheduler._reset_hours_scale=function(b,dd,sd){\r\n\tvar c=document.createElement(\"div\");\r\n\tc.className=\"dhx_scale_holder\";\r\n\r\n\tvar date = new Date(1980,1,1,this.config.first_hour,0,0);\r\n\tfor (var i=this.config.first_hour*1; i < this.config.last_hour; i++) {\r\n\t\tvar cc=document.createElement(\"div\");\r\n\t\tcc.className=\"dhx_scale_hour\";\r\n\t\tcc.style.height=this.config.hour_size_px+\"px\";\r\n\t\tvar width = this.xy.scale_width;\r\n\t\tif (this.config.left_border) {\r\n\t\t\tcc.className += \" dhx_scale_hour_border\";\r\n\t\t}\r\n\t\tcc.style.width = width + \"px\";\r\n\r\n\t\tvar content = scheduler.templates.hour_scale(date);\r\n\t\tcc.innerHTML = content;\r\n\t\tthis._waiAria.hourScaleAttr(cc, content);\r\n\r\n\t\tc.appendChild(cc);\r\n\t\tdate=this.date.add(date,1,\"hour\");\r\n\t}\r\n\tb.appendChild(c);\r\n\tif (this.config.scroll_hour)\r\n\t\tb.scrollTop = this.config.hour_size_px*(this.config.scroll_hour-this.config.first_hour);\r\n};\r\n\r\nscheduler._currentDate = function(){\r\n\tif(scheduler.config.now_date){\r\n\t\treturn new Date(scheduler.config.now_date);\r\n\t}\r\n\treturn new Date();\r\n};\r\n\r\nscheduler._reset_ignores = function(){\r\n\tthis._ignores={};\r\n\tthis._ignores_detected = 0;\r\n};\r\n\r\nscheduler._process_ignores = function(sd, n, mode, step, preserve){\r\n\tthis._reset_ignores();\r\n\tvar ignore = scheduler[\"ignore_\"+this._mode];\r\n\tif (ignore){\r\n\t\tvar ign_date = new Date(sd);\r\n\t\tfor (var i=0; i<n; i++){\r\n\t\t\tif (ignore(ign_date)){\r\n\t\t\t\tthis._ignores_detected += 1;\r\n\t\t\t\tthis._ignores[i] = true;\r\n\t\t\t\tif (preserve)\r\n\t\t\t\t\tn++;\r\n\t\t\t}\r\n\t\t\tign_date = scheduler.date.add(ign_date, step, mode);\r\n\t\t\tif(scheduler.date[mode + '_start'])\r\n\t\t\t\tign_date = scheduler.date[mode + '_start'](ign_date);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nscheduler._render_month_scale = function(div, dd/*month start*/, sd/*view start*/, rows ){\r\n\t//renders month view layout\r\n\r\n\tvar ed=scheduler.date.add(dd,1,\"month\"),\r\n\t\tview_start = new Date(sd);\r\n\tvar cd = scheduler._currentDate();\r\n\tthis.date.date_part(cd);\r\n\tthis.date.date_part(sd);\r\n\r\n\trows = rows || Math.ceil(Math.round((ed.valueOf()-sd.valueOf()) / (60*60*24*1000) ) / 7);\r\n\tvar tdwidths=[];\r\n\r\n\tfor (var i=0; i<=7; i++) {\r\n\t\tvar cell_width = this._cols[i] || 0;\r\n\t\tif(!isNaN(Number(cell_width))){\r\n\t\t\tcell_width = cell_width + \"px\";\r\n\t\t}\r\n\t\ttdwidths[i] = cell_width;\r\n\t}\r\n\r\n\tfunction getCellHeight(row){\r\n\t\tvar h = scheduler._colsS.height;\r\n\t\tif(scheduler._colsS.heights[row + 1] !== undefined ){\r\n\t\t\th = scheduler._colsS.heights[row + 1] - (scheduler._colsS.heights[row]||0);\r\n\t\t}\r\n\t\treturn h;\r\n\t}\r\n\r\n\r\n\tvar cellheight = 0;\r\n\r\n\tconst table = document.createElement(\"div\");\r\n\ttable.classList.add(\"dhx_cal_month_table\");\r\n\r\n\tvar rendered_dates = [];\r\n\tfor (var i=0; i<rows; i++){\r\n\t\tvar row = document.createElement(\"div\");\r\n\t\trow.classList.add(\"dhx_cal_month_row\");\r\n\t\trow.style.height = getCellHeight(i) + \"px\";\r\n\t\ttable.appendChild(row);\r\n\t\t// var row_height = Math.max(getCellHeight(i) - scheduler.xy.month_head_height, 0);\r\n\t\tfor (var j=0; j<7; j++) {\r\n\t\t\tvar cell = document.createElement(\"div\");\r\n\t\t\trow.appendChild(cell);\r\n\r\n\t\t\tvar cls = \"dhx_cal_month_cell\";\r\n\t\t\tif (sd<dd)\r\n\t\t\t\tcls += ' dhx_before';\r\n\t\t\telse if (sd>=ed)\r\n\t\t\t\tcls += ' dhx_after';\r\n\t\t\telse if (sd.valueOf()==cd.valueOf())\r\n\t\t\t\tcls += ' dhx_now';\r\n\r\n\t\t\tif (this._ignores_detected && this._ignores[j]){\r\n\t\t\t\tcls += \" dhx_scale_ignore\";\r\n\t\t\t}\r\n\r\n\t\t\tcell.className = cls + \" \" + this.templates.month_date_class(sd, cd);\r\n\r\n\t\t\tcell.setAttribute(\"data-cell-date\", scheduler.templates.format_date(sd));\r\n\t\t\tvar body_class = \"dhx_month_body\";\r\n\t\t\tvar head_class = \"dhx_month_head\";\r\n\t\t\tif (j === 0 && this.config.left_border) {\r\n\t\t\t\tbody_class += \" dhx_month_body_border\";\r\n\t\t\t\thead_class += \" dhx_month_head_border\";\r\n\t\t\t}\r\n\t\t\tif (!this._ignores_detected || !this._ignores[j]){\r\n\t\t\t\tcell.style.width = tdwidths[j];\r\n\t\t\t\tthis._waiAria.monthCellAttr(cell, sd);\r\n\r\n\t\t\t\tvar cellHead = document.createElement(\"div\");\r\n\t\t\t\tcellHead.style.height = scheduler.xy.month_head_height + \"px\";\r\n\t\t\t\tcellHead.className = head_class;\r\n\t\t\t\tcellHead.innerHTML = this.templates.month_day(sd);\r\n\t\t\t\tcell.appendChild(cellHead);\r\n\r\n\t\t\t\tvar cellBody = document.createElement(\"div\");\r\n\t\t\t\tcellBody.className = body_class;\r\n\t\t\t\t// cellBody.style.height = row_height + \"px\";\r\n\t\t\t\t// cellBody.style.width = tdwidths[j];\r\n\t\t\t\tcell.appendChild(cellBody);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tcell.appendChild(document.createElement(\"div\"));\r\n\t\t\t\tcell.appendChild(document.createElement(\"div\"));\r\n\t\t\t}\r\n\t\t\trendered_dates.push(sd);\r\n\t\t\tvar bf1 = sd.getDate();\r\n\t\t\tsd=this.date.add(sd,1,\"day\");\r\n\t\t\tif (sd.getDate() - bf1 > 1)\r\n\t\t\t\tsd = new Date(sd.getFullYear(), sd.getMonth(), bf1 + 1, 12, 0);\r\n\t\t}\r\n\r\n\t\tscheduler._colsS.heights[i] = cellheight;\r\n\t\tcellheight += getCellHeight(i);\r\n\t}\r\n\r\n\tthis._min_date = view_start;\r\n\tthis._max_date = sd;\r\n\r\n\tdiv.innerHTML = \"\";\r\n\tdiv.appendChild(table);\r\n\r\n\tthis._scales = {};\r\n\tvar cells = div.querySelectorAll('[data-cell-date]');\r\n\tcells.forEach((cell) => {\r\n\t\tconst date = scheduler.templates.parse_date(cell.getAttribute(\"data-cell-date\"));\r\n\t\tconst body = cell.querySelector(\".dhx_month_body\");\r\n\t\tthis._scales[+date] = body;\r\n\t\tthis.callEvent(\"onScaleAdd\", [this._scales[+date], date]);\r\n\t});\r\n\r\n\treturn this._max_date;\r\n};\r\n\r\nscheduler._reset_month_scale=function(b,dd,sd,rows){\r\n\t//recalculates rows height and redraws month layout\r\n\tvar ed=scheduler.date.add(dd,1,\"month\");\r\n\r\n\t//trim time part for comparison reasons\r\n\tvar cd = scheduler._currentDate();\r\n\tthis.date.date_part(cd);\r\n\tthis.date.date_part(sd);\r\n\r\n\trows = rows || Math.ceil(Math.round((ed.valueOf()-sd.valueOf()) / (60*60*24*1000) ) / 7);\r\n\r\n\tvar height = (Math.floor(b.clientHeight/rows) - this.xy.month_head_height);\r\n\r\n\tthis._colsS.height = height + this.xy.month_head_height;\r\n\tthis._colsS.heights = [];\r\n\r\n\treturn scheduler._render_month_scale(b, dd, sd, rows);\r\n\r\n};\r\n\r\nscheduler.getView = function (viewName) {\r\n\tif (!viewName) {\r\n\t\tviewName = scheduler.getState().mode;\r\n\t}\r\n\tif (scheduler.matrix && scheduler.matrix[viewName]) {\r\n\t\treturn scheduler.matrix[viewName];\r\n\t}\r\n\r\n\tif (scheduler._props && scheduler._props[viewName]) {\r\n\t\treturn scheduler._props[viewName];\r\n\t}\r\n\r\n\treturn null;\r\n};\r\n\r\nscheduler.getLabel = function(property, key) {\r\n\tvar sections = this.config.lightbox.sections;\r\n\tfor (var i=0; i<sections.length; i++) {\r\n\t\tif(sections[i].map_to == property) {\r\n\t\t\tvar options = sections[i].options;\r\n\t\t\tfor (var j=0; j<options.length; j++) {\r\n\t\t\t\tif(options[j].key == key) {\r\n\t\t\t\t\treturn options[j].label;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn \"\";\r\n};\r\nscheduler.updateCollection = function(list_name, collection) {\r\n\tvar list = scheduler.serverList(list_name);\r\n\tif (!list) return false;\r\n\tlist.splice(0, list.length);\r\n\tlist.push.apply(list, collection || []);\r\n\tscheduler.callEvent(\"onOptionsLoad\", []);\r\n\tscheduler.resetLightbox();\r\n\tscheduler.hideCover();\r\n\treturn true;\r\n};\r\nscheduler._lame_clone = function(object, cache) {\r\n\tvar i, t, result; // iterator, types array, result\r\n\r\n\tcache = cache || [];\r\n\r\n\tfor (i=0; i<cache.length; i+=2)\r\n\t\tif(object === cache[i])\r\n\t\t\treturn cache[i+1];\r\n\r\n\tif (object && typeof object == \"object\") {\r\n\t\tresult = Object.create(object); // preserve prototype methods\r\n\t\tt = [Array,Date,Number,String,Boolean];\r\n\t\tfor (i=0; i<t.length; i++) {\r\n\t\t\tif (object instanceof t[i])\r\n\t\t\t\tresult = i ? new t[i](object) : new t[i](); // first one is array\r\n\t\t}\r\n\t\tcache.push(object, result);\r\n\t\tfor (i in object) {\r\n\t\t\tif (Object.prototype.hasOwnProperty.apply(object, [i]))\r\n\t\t\t\tresult[i] = scheduler._lame_clone(object[i], cache);\r\n\t\t}\r\n\t}\r\n\treturn result || object;\r\n};\r\nscheduler._lame_copy = function(target, source) {\r\n\tfor (var key in source) {\r\n\t\tif (source.hasOwnProperty(key)) {\r\n\t\t\ttarget[key] = source[key];\r\n\t\t}\r\n\t}\r\n\treturn target;\r\n};\r\nscheduler._get_date_from_pos = function(pos) {\r\n\tvar start=this._min_date.valueOf()+(pos.y*this.config.time_step+(this._table_view?0:pos.x)*24*60)*60000;\r\n\t//if (this.config.rtl) start=scheduler.date.add(this._max_date, -1, \"day\").valueOf()+(pos.y*this.config.time_step-(this._table_view?0:pos.x)*24*60)*60000;\r\n\treturn new Date(this._correct_shift(start));\r\n};\r\n// n_ev - native event\r\nscheduler.getActionData = function(n_ev) {\r\n\tvar pos = this._mouse_coords(n_ev);\r\n\treturn {\r\n\t\tdate:this._get_date_from_pos(pos),\r\n\t\tsection:pos.section\r\n\t};\r\n};\r\nscheduler._focus = function(node, select){\r\n\tif (node && node.focus){\r\n\t\tif (this._mobile){\r\n\t\t\twindow.setTimeout(function(){\r\n\t\t\t\tnode.focus();\r\n\t\t\t},10);\r\n\t\t} else {\r\n\t\t\ttry {\r\n\t\t\t\tif (select && node.select && node.offsetWidth) {\r\n\t\t\t\t\tnode.select();\r\n\t\t\t\t}\r\n\t\t\t\tnode.focus();\r\n\t\t\t} catch (e) {\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction getDaysDifference(startDate, endDate) {\r\n\tconst start = new Date(startDate);\r\n\tconst end = new Date(endDate);\r\n\tconst differenceInTime = end.getTime() - start.getTime();\r\n\tconst differenceInDays = differenceInTime / (1000 * 3600 * 24);\r\n\treturn Math.abs(differenceInDays);\r\n}\r\n\r\n//non-linear scales\r\nscheduler._get_real_event_length=function(startDate, endDate, config){ // config may be a timeline view or a configuration object\r\n\tvar eventLength = endDate - startDate;\r\n\r\n\t// excludedDuration - duration between [00:00, first_hour] and [last_hour, 23:59]\r\n\t// var excludedDuration = (config._start_correction + config._end_correction)||0;\r\n\tvar ignore = this[\"ignore_\"+this._mode];\r\n\r\n\tvar startColumnIndex = 0,\r\n\t\tendColumnIndex;\r\n\tif (config.render){\r\n\t\tstartColumnIndex = this._get_date_index(config, startDate);\r\n\t\tendColumnIndex = this._get_date_index(config, endDate);\r\n\r\n\t\tif(startDate.valueOf() < scheduler.getState().min_date.valueOf()){\r\n\t\t\tstartColumnIndex = -getDaysDifference(startDate, scheduler.getState().min_date);\r\n\t\t}\r\n\t\tif(endDate.valueOf() > scheduler.getState().max_date.valueOf()){\r\n\t\t\tendColumnIndex += getDaysDifference(endDate, scheduler.getState().max_date);\r\n\t\t}\r\n\t} else{\r\n\t\tendColumnIndex = Math.round(eventLength/60/60/1000/24);\r\n\t}\r\n\r\n\tvar last_column = true;\r\n\twhile (startColumnIndex < endColumnIndex){\r\n\t\tvar check = scheduler.date.add(endDate, -config.x_step, config.x_unit);\r\n\t\tif (ignore && ignore(endDate) && (!last_column || (last_column && ignore(check) ))){\r\n\t\t\teventLength -= (endDate-check);\r\n\r\n\t\t}else{\r\n\t\t\tlet excludedDuration = 0;\r\n\t\t\tconst intervalStart = new Date(Math.max(check.valueOf(), startDate.valueOf()));\r\n\t\t\tconst intervalEnd = endDate;\r\n\t\t\tconst leftCellCutOffStart = new Date(intervalStart.getFullYear(), intervalStart.getMonth(), intervalStart.getDate(), config.first_hour);\r\n\t\t\tconst leftCellCutOffEnd = new Date(intervalStart.getFullYear(), intervalStart.getMonth(), intervalStart.getDate(), config.last_hour||24);\r\n\t\t\tconst rightCellCutOffStart = new Date(endDate.getFullYear(), endDate.getMonth(), endDate.getDate(), config.first_hour);\r\n\t\t\tconst rightCellCutOffEnd = new Date(endDate.getFullYear(), endDate.getMonth(), endDate.getDate(), config.last_hour||24);\r\n\r\n\t\t\tif(intervalEnd.valueOf() > rightCellCutOffEnd.valueOf()){\r\n\t\t\t\texcludedDuration += intervalEnd - rightCellCutOffEnd;\r\n\t\t\t}\r\n\r\n\t\t\tif(intervalEnd.valueOf() > rightCellCutOffStart.valueOf()){\r\n\t\t\t\texcludedDuration += config._start_correction;\r\n\t\t\t} else {\r\n\t\t\t\texcludedDuration += intervalEnd.getHours()*60*60*1000 + intervalEnd.getMinutes()*60*1000;\r\n\t\t\t}\r\n\r\n\t\t\tif(intervalStart.valueOf() < leftCellCutOffEnd.valueOf()){\r\n\t\t\t\texcludedDuration += config._end_correction;\r\n\t\t\t}\r\n\r\n\t\t\tif(intervalStart.valueOf() < leftCellCutOffStart.valueOf()){\r\n\t\t\t\texcludedDuration += (leftCellCutOffStart.valueOf() - intervalStart.valueOf());\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\teventLength -= excludedDuration;\r\n\t\t\tlast_column = false;\r\n\t\t}\r\n\t\tendDate = check;\r\n\t\tendColumnIndex--;\r\n\t}\r\n\treturn eventLength;\r\n};\r\nscheduler._get_fictional_event_length=function(end_date, ev_length, obj, back){\r\n\tvar sd = new Date(end_date);\r\n\tvar dir = back ? -1 : 1;\r\n\r\n\t//get difference caused by first|last hour\r\n\tif (obj._start_correction || obj._end_correction){\r\n\t\tvar today;\r\n\t\tif (back)\r\n\t\t\ttoday = (sd.getHours()*60+sd.getMinutes()) - (obj.first_hour||0)*60;\r\n\t\telse\r\n\t\t\ttoday = (obj.last_hour||0)*60 - (sd.getHours()*60+sd.getMinutes());\r\n\t\tvar per_day = (obj.last_hour - obj.first_hour)*60;\r\n\t\tvar days = Math.ceil( (ev_length / (60*1000) - today ) / per_day);\r\n\t\tif(days < 0) days = 0;\r\n\t\tev_length += days * (24*60 - per_day) * 60 * 1000;\r\n\t}\r\n\r\n\tvar fd = new Date(end_date*1+ev_length*dir);\r\n\tvar ignore = this[\"ignore_\"+this._mode];\r\n\r\n\tvar start_slot = 0,\r\n\t\tend_slot;\r\n\tif (obj.render){\r\n\t\tstart_slot = this._get_date_index(obj, sd);\r\n\t\tend_slot = this._get_date_index(obj, fd);\r\n\t} else{\r\n\t\tend_slot = Math.round(ev_length/60/60/1000/24);\r\n\t}\r\n\r\n\twhile (start_slot*dir <= end_slot*dir){\r\n\t\tvar check = scheduler.date.add(sd, obj.x_step*dir, obj.x_unit);\r\n\t\tif (ignore && ignore(sd)){\r\n\t\t\tev_length += (check-sd)*dir;\r\n\t\t\tend_slot += dir;\r\n\t\t}\r\n\r\n\t\tsd = check;\r\n\t\tstart_slot+=dir;\r\n\t}\r\n\r\n\treturn ev_length;\r\n};\r\n\r\nscheduler._get_section_view = function(){\r\n\treturn this.getView();\r\n};\r\n\r\nscheduler._get_section_property = function(){\r\n\tif(this.matrix && this.matrix[this._mode]){\r\n\t\treturn this.matrix[this._mode].y_property;\r\n\t}else if(this._props && this._props[this._mode]){\r\n\t\treturn this._props[this._mode].map_to;\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nscheduler._is_initialized = function(){\r\n\tvar state = this.getState();\r\n\treturn (this._obj && state.date && state.mode);\r\n};\r\nscheduler._is_lightbox_open = function(){\r\n\tvar state = this.getState();\r\n\treturn state.lightbox_id !== null && state.lightbox_id !== undefined;\r\n};\r\n\r\n}","export default function extend(scheduler) {\r\n\r\n(function(){\r\n\r\n\t// eslint-disable-next-line no-control-regex\r\n\tvar htmlTags = new RegExp(\"<(?:.|\\n)*?>\", \"gm\");\r\n\tvar extraSpaces = new RegExp(\" +\", \"gm\");\r\n\r\n\tfunction stripHTMLLite(htmlText){\r\n\t\treturn (htmlText + \"\")\r\n\t\t\t.replace(htmlTags, \" \").\r\n\t\t\treplace(extraSpaces, \" \");\r\n\t}\r\n\r\n\tvar singleQuotes = new RegExp(\"'\", \"gm\");\r\n\tfunction escapeQuotes(text){\r\n\t\treturn (text + \"\").replace(singleQuotes, \"&#39;\");\r\n\t}\r\n\r\n\tscheduler._waiAria = {\r\n\t\tgetAttributeString: function(attr){\r\n\t\t\tvar attributes = [\" \"];\r\n\t\t\tfor(var i in attr){\r\n\t\t\t\tif(typeof attr[i] != \"function\" && typeof attr[i] != \"object\") {\r\n\t\t\t\t\tvar text = escapeQuotes(stripHTMLLite(attr[i]));\r\n\t\t\t\t\tattributes.push(i + \"='\" + text + \"'\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tattributes.push(\" \");\r\n\t\t\treturn attributes.join(\" \");\r\n\t\t},\r\n\t\tsetAttributes: function(div, values){\r\n\t\t\tfor(var i in values){\r\n\t\t\t\tdiv.setAttribute(i, stripHTMLLite(values[i]));\r\n\t\t\t}\r\n\t\t\treturn div;\r\n\t\t},\r\n\r\n\t\tlabelAttr: function(div, content){\r\n\t\t\treturn this.setAttributes(div, {\"aria-label\": content});\r\n\t\t},\r\n\t\tlabel: function(label){\r\n\t\t\treturn scheduler._waiAria.getAttributeString({\"aria-label\": label});\r\n\t\t},\r\n\r\n\t\t// day/week/units\r\n\r\n\t\thourScaleAttr: function(div, content){\r\n\t\t\tthis.labelAttr(div, content);\r\n\r\n\t\t},\r\n\t\tmonthCellAttr: function(div, date){\r\n\t\t\tthis.labelAttr(div, scheduler.templates.day_date(date));\r\n\t\t},\r\n\r\n\t\tnavBarDateAttr: function(div, content){\r\n\t\t\tthis.labelAttr(div, content);\r\n\t\t},\r\n\t\tdayHeaderAttr: function(div, content){\r\n\t\t\tthis.labelAttr(div, content);\r\n\t\t},\r\n\r\n\t\tdayColumnAttr: function(div, date){\r\n\t\t\tthis.dayHeaderAttr(div, scheduler.templates.day_date(date));\r\n\t\t},\r\n\r\n\t\theaderButtonsAttributes: function(div, label){\r\n\t\t\treturn this.setAttributes(div, {\"role\":\"button\", \"aria-label\":label});\r\n\t\t},\r\n\r\n\t\theaderToggleState: function(div, isActive){\r\n\t\t\treturn this.setAttributes(div, {\"aria-pressed\": isActive ? \"true\" : \"false\"});\r\n\t\t},\r\n\r\n\r\n\t\tgetHeaderCellAttr:function(dateString){\r\n\r\n\t\t\treturn scheduler._waiAria.getAttributeString({\"aria-label\": dateString});\r\n\t\t},\r\n\r\n\r\n\t\teventAttr: function(event, div){\r\n\t\t\tthis._eventCommonAttr(event, div);\r\n\t\t},\r\n\r\n\r\n\t\t_eventCommonAttr: function(event, div){\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(scheduler.templates.event_text(event.start_date, event.end_date, event)));\r\n\r\n\t\t\tif(scheduler.config.readonly){\r\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(event.$dataprocessor_class){\r\n\t\t\t\tdiv.setAttribute(\"aria-busy\", true);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tdiv.setAttribute(\"aria-selected\",\r\n\t\t\t\t(scheduler.getState().select_id == event.id) ? \"true\" : \"false\");\r\n\t\t},\r\n\r\n\t\tsetEventBarAttr: function(event, div){\r\n\t\t\tthis._eventCommonAttr(event, div);\r\n\t\t},\r\n\r\n\t\t_getAttributes: function(attributeSetter, arg){\r\n\t\t\tvar result = {\r\n\t\t\t\tsetAttribute:function(name, value){\r\n\t\t\t\t\tthis[name] = value;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tattributeSetter.apply(this, [arg, result]);\r\n\t\t\treturn result;\r\n\r\n\t\t},\r\n\r\n\t\teventBarAttrString: function(event){\r\n\t\t\treturn this.getAttributeString(this._getAttributes(this.setEventBarAttr, event));\r\n\t\t},\r\n\r\n\r\n\r\n\t\tagendaHeadAttrString :function(){\r\n\t\t\treturn this.getAttributeString({role: \"row\"});\r\n\t\t},\r\n\t\tagendaHeadDateString :function(label){\r\n\t\t\treturn this.getAttributeString({role: \"columnheader\", \"aria-label\": label});\r\n\t\t},\r\n\t\tagendaHeadDescriptionString :function(label){\r\n\t\t\treturn this.agendaHeadDateString(label);\r\n\t\t},\r\n\t\tagendaDataAttrString: function(){\r\n\t\t\treturn this.getAttributeString({role: \"grid\"});\r\n\t\t},\r\n\t\tagendaEventAttrString: function(event){\r\n\t\t\tvar attrs = this._getAttributes(this._eventCommonAttr, event);\r\n\r\n\t\t\tattrs[\"role\"] = \"row\";\r\n\r\n\t\t\treturn this.getAttributeString(attrs);\r\n\r\n\t\t},\r\n\t\tagendaDetailsBtnString: function(){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":scheduler.locale.labels.icon_details});\r\n\t\t},\r\n\r\n\r\n\t\tgridAttrString: function(){\r\n\t\t\treturn this.getAttributeString({role: \"grid\"});\r\n\t\t},\r\n\r\n\t\tgridRowAttrString: function(event){\r\n\t\t\treturn this.agendaEventAttrString(event);\r\n\t\t},\r\n\r\n\t\tgridCellAttrString: function(event, column, value){\r\n\t\t\treturn this.getAttributeString({\"role\":\"gridcell\", \"aria-label\": [\r\n\t\t\t\t(column.label === undefined ? column.id : column.label),\r\n\t\t\t\t\": \",\r\n\t\t\t\tvalue\r\n\t\t\t]});\r\n\t\t},\r\n\r\n\t\tmapAttrString: function(){\r\n\t\t\treturn this.gridAttrString();\r\n\t\t},\r\n\t\tmapRowAttrString: function(event){\r\n\t\t\treturn this.gridRowAttrString(event);\r\n\t\t},\r\n\t\tmapDetailsBtnString: function(){\r\n\t\t\treturn this.agendaDetailsBtnString();\r\n\t\t},\r\n\r\n\t\tminicalHeader: function(div, headerId){\r\n\t\t\tthis.setAttributes(div, {\r\n\t\t\t\t\"id\":headerId+\"\",\r\n\t\t\t\t\"aria-live\":\"assertice\",\r\n\t\t\t\t\"aria-atomic\":\"true\"\r\n\r\n\t\t\t});\r\n\t\t},\r\n\t\tminicalGrid: function(div, headerId){\r\n\t\t\tthis.setAttributes(div, {\r\n\t\t\t\t\"aria-labelledby\":headerId+\"\",\r\n\t\t\t\t\"role\":\"grid\"\r\n\t\t\t});\r\n\t\t},\r\n\t\tminicalRow: function(div){\r\n\t\t\tthis.setAttributes(div, {\r\n\t\t\t\t\"role\":\"row\"\r\n\t\t\t});\r\n\t\t},\r\n\t\tminicalDayCell: function(div, date){\r\n\t\t\tvar selected = (date.valueOf() < scheduler._max_date.valueOf() && date.valueOf() >= scheduler._min_date.valueOf());\r\n\t\t\tthis.setAttributes(div, {\r\n\t\t\t\t\"role\":\"gridcell\",\r\n\t\t\t\t\"aria-label\": scheduler.templates.day_date(date),\r\n\t\t\t\t\"aria-selected\": selected ? \"true\" : \"false\"\r\n\t\t\t});\r\n\t\t},\r\n\t\tminicalHeadCell: function(div){\r\n\t\t\tthis.setAttributes(div, {\r\n\t\t\t\t\"role\":\"columnheader\"\r\n\t\t\t});\r\n\t\t},\r\n\r\n\r\n\t\tweekAgendaDayCell: function(div, date){\r\n\t\t\tvar header = div.querySelector(\".dhx_wa_scale_bar\");\r\n\t\t\tvar content = div.querySelector(\".dhx_wa_day_data\");\r\n\t\t\tvar headerId = scheduler.uid() + \"\";\r\n\t\t\tthis.setAttributes(header, { \"id\": headerId});\r\n\t\t\tthis.setAttributes(content, { \"aria-labelledby\": headerId});\r\n\r\n\t\t},\r\n\t\tweekAgendaEvent: function(div, event){\r\n\t\t\tthis.eventAttr(event, div);\r\n\t\t},\r\n\r\n\t\tlightboxHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t},\r\n\r\n\t\tlightboxVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\tlightboxSectionButtonAttrString: function(label){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":label, \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\tyearHeader: function(div, headerId){\r\n\t\t\tthis.setAttributes(div, {\r\n\t\t\t\t\"id\":headerId+\"\"\r\n\t\t\t});\r\n\t\t},\r\n\t\tyearGrid: function(div, headerId){\r\n\t\t\tthis.minicalGrid(div, headerId);\r\n\t\t},\r\n\t\tyearHeadCell: function(div){\r\n\t\t\treturn this.minicalHeadCell(div);\r\n\t\t},\r\n\t\tyearRow: function(div){\r\n\t\t\treturn this.minicalRow(div);\r\n\t\t},\r\n\t\tyearDayCell: function(div){\r\n\t\t\tthis.setAttributes(div, {\r\n\t\t\t\t\"role\":\"gridcell\"\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tlightboxAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t\tdiv.firstChild.setAttribute(\"role\", \"heading\");\r\n\t\t},\r\n\r\n\t\tlightboxButtonAttrString:function(buttonName){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":scheduler.locale.labels[buttonName], \"tabindex\":\"0\"});\r\n\t\t},\r\n\t\teventMenuAttrString: function(iconName){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":scheduler.locale.labels[iconName]});\r\n\t\t},\r\n\t\tlightboxHeader: function(div, headerText){\r\n\t\t\tdiv.setAttribute(\"aria-label\", headerText);\r\n\t\t},\r\n\r\n\t\tlightboxSelectAttrString: function(time_option){\r\n\t\t\tvar label = \"\";\r\n\r\n\t\t\tswitch (time_option) {\r\n\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\tlabel = scheduler.locale.labels.year;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%m\":\r\n\t\t\t\t\tlabel = scheduler.locale.labels.month;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%d\":\r\n\t\t\t\t\tlabel = scheduler.locale.labels.day;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\tlabel = scheduler.locale.labels.hour + \" \" + scheduler.locale.labels.minute;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn scheduler._waiAria.getAttributeString({\"aria-label\": label});\r\n\t\t},\r\n\r\n\r\n\t\tmessageButtonAttrString: function(buttonLabel){\r\n\t\t\treturn \"tabindex='0' role='button' aria-label='\"+buttonLabel+\"'\";\r\n\t\t},\r\n\r\n\t\tmessageInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"alert\");\r\n\t\t\t//div.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tmessageModalAttr: function(div, uid){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tif(uid){\r\n\t\t\t\tdiv.setAttribute(\"aria-labelledby\", uid);\r\n\t\t\t}\r\n\r\n\t\t\t//\tdiv.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tquickInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t},\r\n\r\n\t\tquickInfoHeaderAttrString: function(){\r\n\t\t\treturn \" role='heading' \";\r\n\t\t},\r\n\r\n\t\tquickInfoHeader: function(div, header){\r\n\t\t\tdiv.setAttribute(\"aria-label\", header);\r\n\t\t},\r\n\r\n\t\tquickInfoButtonAttrString: function(label){\r\n\t\t\treturn scheduler._waiAria.getAttributeString({\"role\":\"button\", \"aria-label\":label, \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\ttooltipAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"tooltip\");\r\n\t\t},\r\n\r\n\t\ttooltipVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\ttooltipHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t}\r\n\t};\r\n\r\n\tfunction isDisabled(){\r\n\t\treturn !scheduler.config.wai_aria_attributes;\r\n\t}\r\n\r\n\tfor(var i in scheduler._waiAria){\r\n\t\tscheduler._waiAria[i] = (function(payload){\r\n\t\t\treturn function(){\r\n\t\t\t\tif(isDisabled()){\r\n\t\t\t\t\treturn \" \";\r\n\t\t\t\t}\r\n\t\t\t\treturn payload.apply(this, arguments);\r\n\t\t\t};\r\n\t\t})(scheduler._waiAria[i]);\r\n\t}\r\n\r\n\r\n})();\r\n\r\n}","export default function(scheduler){\r\n\treturn function assert(check, message){\r\n\t\tif (!check){\r\n\t\t\tif(scheduler.config.show_errors && scheduler.callEvent(\"onError\",[message]) !== false) {\r\n\t\t\t\tif (scheduler.message) {\r\n\t\t\t\t\tscheduler.message({type: \"error\", text: message, expire: -1});\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// eslint-disable-next-line\r\n\t\t\t\t\tconsole.log(message);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// eslint-disable-next-line no-debugger\r\n\t\t\t\tdebugger;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}","export default function extend(scheduler) {\r\n\r\nif (window.jQuery){\r\n\r\n(function( $ ){\r\n\tvar counter = 0;\r\n\tvar methods = [];\r\n\t$.fn.dhx_scheduler = function(config){\r\n\t\tif (typeof(config) === 'string') {\r\n\t\t\tif (methods[config] ) {\r\n\t\t\t\treturn methods[config].apply(this, []);\r\n\t\t\t}else {\r\n\t\t\t\t$.error('Method ' +  config + ' does not exist on jQuery.dhx_scheduler');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar views = [];\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tif (this && this.getAttribute){\r\n\t\t\t\t\tif (!this.getAttribute(\"dhxscheduler\")){\r\n\t\t\t\t\t\tvar name = \"scheduler\";\r\n\t\t\t\t\t\tif (counter){\r\n\t\t\t\t\t\t\tname = \"scheduler\" + (counter+1);\r\n\t\t\t\t\t\t\twindow[name] = Scheduler.getSchedulerInstance();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar comp  = window[name];\r\n\r\n\t\t\t\t\t\tthis.setAttribute(\"dhxscheduler\", name);\r\n\t\t\t\t\t\tfor (var key in config)\r\n\t\t\t\t\t\t\tif (key!=\"data\")\r\n\t\t\t\t\t\t\t\tcomp.config[key] = config[key];\r\n\r\n\t\t\t\t\t\tif (!this.getElementsByTagName(\"div\").length){\r\n\t\t\t\t\t\t\tthis.innerHTML = '<div class=\"dhx_cal_navline\"><div class=\"dhx_cal_prev_button\"></div><div class=\"dhx_cal_next_button\"></div><div class=\"dhx_cal_today_button\"></div><div class=\"dhx_cal_date\"></div><div class=\"dhx_cal_tab\" name=\"day_tab\" data-tab=\"day\" style=\"right:204px;\"></div><div class=\"dhx_cal_tab\" name=\"week_tab\" data-tab=\"week\" style=\"right:140px;\"></div><div class=\"dhx_cal_tab\" name=\"month_tab\" data-tab=\"month\" style=\"right:76px;\"></div></div><div class=\"dhx_cal_header\"></div><div class=\"dhx_cal_data\"></div>';\r\n\t\t\t\t\t\t\tthis.className += \" dhx_cal_container\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcomp.init(this, comp.config.date, comp.config.mode);\r\n\t\t\t\t\t\tif (config.data)\r\n\t\t\t\t\t\t\tcomp.parse(config.data);\r\n\r\n\t\t\t\t\t\tviews.push(comp);\r\n\t\t\t\t\t\tcounter++;\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t\tviews.push(window[this.getAttribute(\"dhxscheduler\")]);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (views.length === 1) return views[0];\r\n\t\t\treturn views;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\r\n})(window.jQuery);\r\n\r\n}\r\n\r\n}","export default function extend(scheduler) {\r\n\r\nscheduler.destructor = function(){\r\n\tscheduler.callEvent(\"onDestroy\", []);\r\n\tthis.clearAll();\r\n\r\n\tif(this.$container){\r\n\t\t// FIXME: clear container or remove container\r\n\t\tthis.$container.innerHTML = \"\";\r\n\t\t// scheduler.$domHelpers.remove(this.$container);\r\n\t}\r\n\r\n\tif(this._eventRemoveAll){\r\n\t\tthis._eventRemoveAll();\r\n\t}\r\n\r\n\tif(this.resetLightbox){\r\n\t\tthis.resetLightbox();\r\n\t}\r\n\r\n\tif(this._dp && this._dp.destructor){\r\n\t\tthis._dp.destructor();\r\n\t}\r\n\r\n\t// detachAllEvents should be called last, because in components may be attached events\r\n\tthis.detachAllEvents();\r\n\r\n\tfor(var i in this){\r\n\t\tif(i.indexOf(\"$\") === 0){\r\n\t\t\tdelete this[i];\r\n\t\t}\r\n\t}\r\n\tscheduler.$destroyed = true;\r\n};\r\n\r\n}","import serialize from \"../common/url_serialize.js\";\r\n\r\nexport default function extend(scheduler) {\r\n\r\nscheduler.Promise = window.Promise; \r\n\r\nfunction createConfig(method, args) {\r\n\tvar result = {\r\n\t\tmethod: method\r\n\t};\r\n\r\n\tif (args.length === 0) {\r\n\t\tthrow new Error(\"Arguments list of query is wrong.\");\r\n\t}\r\n\tif (args.length === 1) {\r\n\t\tif (typeof args[0] === \"string\") {\r\n\t\t\tresult.url = args[0];\r\n\t\t\tresult.async = true;\r\n\t\t} else {\r\n\t\t\tresult.url = args[0].url;\r\n\t\t\tresult.async = (args[0].async || true);\r\n\t\t\tresult.callback = args[0].callback;\r\n\t\t\tresult.headers = args[0].headers;\r\n\t\t}\r\n\t\tif (method === \"POST\" || \"PUT\") {\r\n\t\t\tif (args[0].data) {\r\n\t\t\t\tif (typeof args[0].data !== \"string\") {\r\n\t\t\t\t\tresult.data = serialize(args[0].data);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.data = args[0].data;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tresult.data = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tresult.url = args[0];\r\n\tswitch(method) {\r\n\t\tcase \"GET\":\r\n\t\tcase \"DELETE\":\r\n\t\t\tresult.callback = args[1];\r\n\t\t\tresult.headers = args[2];\r\n\t\tbreak;\r\n\t\tcase \"POST\":\r\n\t\tcase \"PUT\":\r\n\t\t\tif (args[1]) {\r\n\t\t\t\tif (typeof args[1] !== \"string\") {\r\n\t\t\t\t\tresult.data = serialize(args[1]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.data = args[1];\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tresult.data = \"\";\r\n\t\t\t}\r\n\t\t\tresult.callback = args[2];\r\n\t\t\tresult.headers = args[3];\r\n\t\tbreak;\r\n\t}\r\n\treturn result;\r\n}\r\nscheduler.ajax = {\r\n\t// if false - dhxr param will added to prevent caching on client side (default),\r\n\t// if true - do not add extra params\r\n\tcache: true,\r\n\r\n\t// default method for load/loadStruct, post/get allowed\r\n\tmethod: \"get\",\r\n\r\n\tserializeRequestParams: serialize,\r\n\tparse: function(data) {\r\n\t\tif (typeof data !== \"string\") return data;\r\n\r\n\t\tvar obj;\r\n\t\tdata = data.replace(/^[\\s]+/,\"\");\r\n\t\tif (typeof DOMParser !== \"undefined\" && !scheduler.$env.isIE) { // ff,ie9\r\n\t\t\tobj = (new DOMParser()).parseFromString(data, \"text/xml\");\r\n\t\t} else if (typeof window.ActiveXObject !== \"undefined\") {\r\n\t\t\tobj = new window.ActiveXObject(\"Microsoft.XMLDOM\");\r\n\t\t\tobj.async = \"false\";\r\n\t\t\tobj.loadXML(data);\r\n\t\t}\r\n\t\treturn obj;\r\n\t},\r\n\txmltop: function(tagname, xhr, obj) {\r\n\t\tif (typeof xhr.status == \"undefined\" || xhr.status < 400) {\r\n\t\t\tvar xml = (!xhr.responseXML) ? this.parse(xhr.responseText || xhr) : (xhr.responseXML || xhr);\r\n\t\t\tif (xml && xml.documentElement !== null && !xml.getElementsByTagName(\"parsererror\").length) {\r\n\t\t\t\treturn xml.getElementsByTagName(tagname)[0];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (obj !== -1) scheduler.callEvent(\"onLoadXMLError\",[\"Incorrect XML\", arguments[1], obj]);\r\n\t\treturn document.createElement(\"DIV\");\r\n\t},\r\n\txpath: function(xpathExp, docObj) {\r\n\t\tif (!docObj.nodeName) docObj = docObj.responseXML || docObj;\r\n\t\tif (scheduler.$env.isIE) {\r\n\t\t\treturn docObj.selectNodes(xpathExp)||[];\r\n\t\t} else {\r\n\t\t\tvar rows = [];\r\n\t\t\tvar first;\r\n\t\t\tvar col = (docObj.ownerDocument||docObj).evaluate(xpathExp, docObj, null, XPathResult.ANY_TYPE, null);\r\n\r\n\t\t\twhile (true){\r\n\t\t\t\tfirst = col.iterateNext();\r\n\t\t\t\tif(first){\r\n\t\t\t\t\trows.push(first);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn rows;\r\n\t\t}\r\n\t},\r\n\tquery: function(config) {\r\n\t\treturn this._call(\r\n\t\t\t(config.method || \"GET\"),\r\n\t\t\tconfig.url,\r\n\t\t\tconfig.data || \"\",\r\n\t\t\t(config.async || true),\r\n\t\t\tconfig.callback,\r\n\t\t\tconfig.headers\r\n\t\t);\r\n\t},\r\n\tget: function(url, onLoad, headers) {\r\n\t\tvar config = createConfig(\"GET\", arguments);\r\n\t\treturn this.query(config);\r\n\t},\r\n\tgetSync: function(url, headers) {\r\n\t\tvar config = createConfig(\"GET\", arguments);\r\n\t\tconfig.async = false;\r\n\t\treturn this.query(config);\r\n\t},\r\n\tput: function(url, postData, onLoad, headers) {\r\n\t\tvar config = createConfig(\"PUT\", arguments);\r\n\t\treturn this.query(config);\r\n\t},\r\n\tdel: function(url, onLoad, headers) {\r\n\t\t/**\r\n\t\t * https://tools.ietf.org/html/rfc7231#section-4.3.5\r\n\t\t * A payload within a DELETE request message has no defined semantics;\r\n\t\t * sending a payload body on a DELETE request might cause some existing\r\n\t\t * implementations to reject the request.\r\n\t\t */\r\n\t\tvar config = createConfig(\"DELETE\", arguments);\r\n\t\treturn this.query(config);\r\n\t},\r\n\tpost: function(url, postData, onLoad, headers) {\r\n\t\tif (arguments.length == 1) {\r\n\t\t\tpostData = \"\";\r\n\t\t} else if (arguments.length == 2 && typeof(postData) == \"function\") {\r\n\t\t\tonLoad = postData;\r\n\t\t\tpostData = \"\";\r\n\t\t}\r\n\t\tvar config = createConfig(\"POST\", arguments);\r\n\t\treturn this.query(config);\r\n\t},\r\n\tpostSync: function(url, postData, headers) {\r\n\t\tpostData = (postData === null ? \"\" : String(postData));\r\n\r\n\t\tvar config = createConfig(\"POST\", arguments);\r\n\t\tconfig.async = false;\r\n\t\treturn this.query(config);\r\n\t},\r\n\t_call: function(method, url, postData, async, onLoad, headers) {\r\n\t\treturn new scheduler.Promise((function(resolve, reject) {\r\n\t\t\tvar t = (typeof XMLHttpRequest !== undefined && !scheduler.$env.isIE ? new XMLHttpRequest() : new window.ActiveXObject(\"Microsoft.XMLHTTP\"));\r\n\t\t\tvar isQt = (navigator.userAgent.match(/AppleWebKit/) !== null && navigator.userAgent.match(/Qt/) !== null && navigator.userAgent.match(/Safari/) !== null);\r\n\r\n\t\t\tif (!!async) {\r\n\t\t\t\tt.addEventListener(\"readystatechange\", function() {\r\n\t\t\t\t\tif ((t.readyState == 4) || (isQt && t.readyState == 3)) { // what for long response and status 404?\r\n\t\t\t\t\t\tif (t.status != 200 || t.responseText === \"\")\r\n\t\t\t\t\t\t\tif (!scheduler.callEvent(\"onAjaxError\", [t])) return;\r\n\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tif (typeof(onLoad) == \"function\") {\r\n\t\t\t\t\t\t\t\tonLoad.apply(window, [{xmlDoc:t, filePath:url}]); // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresolve(t);\r\n\t\t\t\t\t\t\tif (typeof(onLoad) == \"function\") {\r\n\t\t\t\t\t\t\t\tonLoad = null;\r\n\t\t\t\t\t\t\t\tt = null;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (method == \"GET\" && !this.cache) {\r\n\t\t\t\turl += (url.indexOf(\"?\")>=0?\"&\":\"?\")+\"dhxr\"+new Date().getTime()+\"=1\";\r\n\t\t\t}\r\n\r\n\t\t\tt.open(method, url, async);\r\n\r\n\t\t\tif (headers){\r\n\t\t\t\tfor (var key in headers)\r\n\t\t\t\t\tt.setRequestHeader(key, headers[key]);\r\n\t\t\t} else if (method.toUpperCase() == \"POST\" || method == \"PUT\" || method == \"DELETE\") {\r\n\t\t\t\tt.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\t\t\t} else if (method == \"GET\") {\r\n\t\t\t\tpostData = null;\r\n\t\t\t}\r\n\r\n\t\t\tt.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n\r\n\t\t\tt.send(postData);\r\n\r\n\t\t\tif (!async) return {xmlDoc:t, filePath:url}; // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\t\t}.bind(this)));\r\n\t},\r\n\turlSeparator: function(str){\r\n\t\tif (str.indexOf(\"?\") != -1)\r\n\t\t\treturn \"&\";\r\n\t\telse\r\n\t\t\treturn \"?\";\r\n\t}\r\n};\r\n\r\nscheduler.$ajax = scheduler.ajax; // for old\r\n\r\n}","export default function extend(scheduler) {\r\n\r\n/*\r\n%e\tDay of the month without leading zeros (01..31)\r\n%d\tDay of the month, 2 digits with leading zeros (01..31)\r\n%j\tDay of the year, 3 digits with leading zeros (001..366)\r\n%a\tA textual representation of a day, two letters\r\n%W\tA full textual representation of the day of the week\r\n\r\n%c\tNumeric representation of a month, without leading zeros (0..12)\r\n%m\tNumeric representation of a month, with leading zeros (00..12)\r\n%b\tA short textual representation of a month, three letters (Jan..Dec)\r\n%M\tA full textual representation of a month, such as January or March (January..December)\r\n\r\n%y\tA two digit representation of a year (93..03)\r\n%Y\tA full numeric representation of a year, 4 digits (1993..03)\r\n*/\r\n\r\nscheduler.config={\r\n\tdefault_date: \"%j %M %Y\",\r\n\tmonth_date: \"%F %Y\",\r\n\tload_date: \"%Y-%m-%d\",\r\n\tweek_date: \"%l\",\r\n\tday_date: \"%D %j\",\r\n\thour_date: \"%H:%i\",\r\n\tmonth_day: \"%d\",\r\n\t//xml_date: \"%m/%d/%Y %H:%i\",\r\n\tdate_format: \"%Y-%m-%d %H:%i\",\r\n\tapi_date: \"%d-%m-%Y %H:%i\",\r\n\tparse_exact_format: false,\r\n\tpreserve_length:true,\r\n\ttime_step: 5,\r\n\tdisplayed_event_color: \"#ff4a4a\",\r\n\tdisplayed_event_text_color: \"#ffef80\",\r\n\twide_form: 0,\r\n\tday_column_padding: 8,\r\n\tuse_select_menu_space: true,\r\n\tfix_tab_position: true,\r\n\tstart_on_monday: true,\r\n\tfirst_hour: 0,\r\n\tlast_hour: 24,\r\n\treadonly: false,\r\n\tdrag_resize: true,\r\n\tdrag_move: true,\r\n\tdrag_create: true,\r\n\tdrag_event_body: true,\r\n\tdblclick_create: true,\r\n\tdetails_on_dblclick: true,\r\n\tedit_on_create: true,\r\n\tdetails_on_create: true,\r\n\theader: null,\r\n\thour_size_px: 44,\r\n\tresize_month_events:false,\r\n\tresize_month_timed:false,\r\n\t\r\n\tresponsive_lightbox: false,\r\n\tseparate_short_events: true,\r\n\trtl:false,\r\n\r\n\tcascade_event_display: false,\r\n\tcascade_event_count: 4,\r\n\tcascade_event_margin: 30,\r\n\r\n\tmulti_day:true,\r\n\tmulti_day_height_limit: 200,\r\n\r\n\tdrag_lightbox: true,\r\n\tpreserve_scroll: true,\r\n\tselect: true,\r\n\r\n\tserver_utc: false,\r\n\ttouch:true,\r\n\ttouch_tip:true,\r\n\ttouch_drag:500,\r\n\ttouch_swipe_dates: false,\r\n\tquick_info_detached:true,\r\n\r\n\tpositive_closing: false,\r\n\t//header_datepicker: true,\r\n\tdrag_highlight: true,\r\n\tlimit_drag_out: false,\r\n\ticons_edit: [\"icon_save\", \"icon_cancel\"],\r\n\ticons_select: [\"icon_details\", \"icon_edit\", \"icon_delete\"],\r\n\tbuttons_left: [\"dhx_save_btn\", \"dhx_cancel_btn\"],\r\n\tbuttons_right: [\"dhx_delete_btn\"],\r\n\tlightbox: {\r\n\t\tsections: [\r\n\t\t\t{name: \"description\", map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t{name: \"time\", height: 72, type: \"time\", map_to: \"auto\"}\r\n\t\t]\r\n\t},\r\n\thighlight_displayed_event: true,\r\n\tleft_border: false,\r\n\r\n\tajax_error: \"alert\",//\"ignore\"|\"console\"\r\n\tdelay_render: 0,\r\n\ttimeline_swap_resize: true,\r\n\twai_aria_attributes: true,\r\n\twai_aria_application_role: true,\r\n\r\n\tcsp: \"auto\",\r\n\tevent_attribute: \"data-event-id\",\r\n\tshow_errors: true\r\n};\r\n\r\nscheduler.config.buttons_left.$initial = scheduler.config.buttons_left.join();\r\nscheduler.config.buttons_right.$initial = scheduler.config.buttons_right.join();\r\n\r\nscheduler._helpers = {\r\n\tparseDate: function parseDate(date) {\r\n\t\tvar parse = scheduler.templates.xml_date || scheduler.templates.parse_date;\r\n\t\treturn parse(date);\r\n\t},\r\n\tformatDate: function formatDate(date) {\r\n\t\tvar format = scheduler.templates.xml_format || scheduler.templates.format_date;\r\n\t\treturn format(date);\r\n\t}\r\n};\r\n\r\nscheduler.templates={};\r\nscheduler.init_templates=function(){\r\n\r\n\r\n\r\n\tvar d=scheduler.date.date_to_str;\r\n\tvar c=scheduler.config;\r\n\tvar f = function(a,b){\r\n\t\tfor (var c in b)\r\n\t\t\tif (!a[c]) a[c]=b[c];\r\n\t};\r\n\tf(scheduler.templates,{\r\n\t\tday_date:d(c.default_date),\r\n\t\tmonth_date:d(c.month_date),\r\n\t\tweek_date:function(d1,d2){\r\n\t\t\tif(c.rtl) {\r\n\t\t\t\treturn scheduler.templates.day_date(scheduler.date.add(d2,-1,\"day\"))+\" &ndash; \"+scheduler.templates.day_date(d1);\r\n\t\t\t} \r\n\t\t\treturn scheduler.templates.day_date(d1)+\" &ndash; \"+scheduler.templates.day_date(scheduler.date.add(d2,-1,\"day\"));\r\n\t\t},\r\n\t\tday_scale_date:d(c.default_date),\r\n\t\ttime_slot_text: function(date){\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\ttime_slot_class: function(date){\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\r\n\t\tmonth_scale_date:d(c.week_date),\r\n\t\tweek_scale_date:d(c.day_date),\r\n\t\thour_scale:d(c.hour_date),\r\n\t\ttime_picker:d(c.hour_date),\r\n\t\tevent_date:d(c.hour_date),\r\n\t\tmonth_day:d(c.month_day),\r\n\r\n\t\tload_format: d(c.load_date),\r\n\t//\txml_date:scheduler.date.str_to_date(c.xml_date,c.server_utc),\r\n\t//\txml_format:d(c.date_format,c.server_utc),\r\n\t\tformat_date: d(c.date_format, c.server_utc),\r\n\t\tparse_date:scheduler.date.str_to_date(c.date_format,c.server_utc),\r\n\t\tapi_date:scheduler.date.str_to_date(c.api_date, false, false),\r\n\t\tevent_header:function(start,end,ev){\r\n\r\n\t\t\tif(ev._mode === \"small\" || ev._mode === \"smallest\"){\r\n\t\t\t\treturn scheduler.templates.event_date(start);\r\n\t\t\t}else{\r\n\t\t\t\treturn scheduler.templates.event_date(start)+\" - \"+scheduler.templates.event_date(end);\r\n\t\t\t}\r\n\t\t},\r\n\t\tevent_text:function(start,end,ev){\r\n\t\t\treturn ev.text;\r\n\t\t},\r\n\t\tevent_class:function(start,end,ev){\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\tmonth_date_class:function(d){\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\tweek_date_class:function(d){\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\tevent_bar_date:function(start,end,ev) {\r\n\t\t\treturn scheduler.templates.event_date(start);\r\n\t\t},\r\n\t\tevent_bar_text:function(start,end,ev){\r\n\t\t\treturn ev.text;\r\n\t\t},\r\n\t\tmonth_events_link : function(date, count){\r\n\t\t\treturn \"<a>View more(\"+count+\" events)</a>\";\r\n\t\t},\r\n\t\tdrag_marker_class : function(start, end, event){\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\tdrag_marker_content : function(start, end, event){\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\t/* Could be redifined */\r\n\t\ttooltip_date_format: scheduler.date.date_to_str(\"%Y-%m-%d %H:%i\"),\r\n\t\ttooltip_text: function(start, end, event) {\r\n\t\t\treturn \"<b>Event:</b> \" + event.text + \"<br/><b>Start date:</b> \" + scheduler.templates.tooltip_date_format(start) + \"<br/><b>End date:</b> \" + scheduler.templates.tooltip_date_format(end);\r\n\t\t},\r\n\r\n\t\tcalendar_month: d(\"%F %Y\"),\r\n\t\tcalendar_scale_date: d(\"%D\"),\r\n\t\tcalendar_date: d(\"%d\"),\r\n\t\tcalendar_time: d(\"%d-%m-%Y\")\r\n\r\n\t});\r\n\tthis.callEvent(\"onTemplatesReady\",[]);\r\n};\r\n\r\n\r\n}","export default function extend(scheduler) {\r\n\r\nscheduler._events = {};\r\nscheduler.clearAll = function() {\r\n\tthis._events = {};\r\n\tthis._loaded = {};\r\n\r\n\tthis._edit_id = null;\r\n\tthis._select_id = null;\r\n\tthis._drag_id = null;\r\n\tthis._drag_mode = null;\r\n\tthis._drag_pos = null;\r\n\tthis._new_event = null;\r\n\r\n\tthis.clear_view();\r\n\tthis.callEvent(\"onClearAll\", []);\r\n};\r\nscheduler.addEvent = function(start_date, end_date, text, id, extra_data) {\r\n\tif (!arguments.length)\r\n\t\treturn this.addEventNow();\r\n\tvar ev = start_date;\r\n\tif (arguments.length != 1) {\r\n\t\tev = extra_data || {};\r\n\t\tev.start_date = start_date;\r\n\t\tev.end_date = end_date;\r\n\t\tev.text = text;\r\n\t\tev.id = id;\r\n\t}\r\n\tev.id = ev.id || scheduler.uid();\r\n\tev.text = ev.text || \"\";\r\n\r\n\tif (typeof ev.start_date == \"string\")  ev.start_date = this.templates.api_date(ev.start_date);\r\n\tif (typeof ev.end_date == \"string\")  ev.end_date = this.templates.api_date(ev.end_date);\r\n\tvar d = (this.config.event_duration || this.config.time_step) * 60000;\r\n\tif (ev.start_date.valueOf() == ev.end_date.valueOf())\r\n\t\tev.end_date.setTime(ev.end_date.valueOf() + d);\r\n\r\n\tev.start_date.setMilliseconds(0);\r\n\tev.end_date.setMilliseconds(0);\r\n\r\n\tev._timed = this.isOneDayEvent(ev);\r\n\r\n\tvar is_new = !this._events[ev.id];\r\n\tthis._events[ev.id] = ev;\r\n\tthis.event_updated(ev);\r\n\tif (!this._loading)\r\n\t\tthis.callEvent(is_new ? \"onEventAdded\" : \"onEventChanged\", [ev.id, ev]);\r\n\treturn ev.id;\r\n};\r\nscheduler.deleteEvent = function(id, silent) {\r\n\tvar ev = this._events[id];\r\n\tif (!silent && (!this.callEvent(\"onBeforeEventDelete\", [id, ev]) || !this.callEvent(\"onConfirmedBeforeEventDelete\", [id, ev])))\r\n\t\treturn;\r\n\tif (ev) {\r\n\t\tif(scheduler.getState().select_id == id){\r\n\t\t\tscheduler.unselect();\r\n\t\t}\r\n\t\tdelete this._events[id];\r\n\t\tthis.event_updated(ev);\r\n\r\n\t\tif(this._drag_id == ev.id){\r\n\t\t\tthis._drag_id = null;\r\n\t\t\tthis._drag_mode=null;\r\n\t\t\tthis._drag_pos=null;\r\n\t\t}\r\n\t}\r\n\r\n\tthis.callEvent(\"onEventDeleted\", [id, ev]);\r\n};\r\nscheduler.getEvent = function(id) {\r\n\treturn this._events[id];\r\n};\r\nscheduler.setEvent = function(id, hash) {\r\n\tif(!hash.id)\r\n\t\thash.id = id;\r\n\r\n\tthis._events[id] = hash;\r\n};\r\nscheduler.for_rendered = function(id, method) {\r\n\tfor (var i = this._rendered.length - 1; i >= 0; i--)\r\n\t\tif (this._rendered[i].getAttribute(this.config.event_attribute) == id)\r\n\t\t\tmethod(this._rendered[i], i);\r\n};\r\nscheduler.changeEventId = function(id, new_id) {\r\n\tif (id == new_id) return;\r\n\tvar ev = this._events[id];\r\n\tif (ev) {\r\n\t\tev.id = new_id;\r\n\t\tthis._events[new_id] = ev;\r\n\t\tdelete this._events[id];\r\n\t}\r\n\tthis.for_rendered(id, function(r) {\r\n\t\tr.setAttribute(\"event_id\", new_id); // for backward compatibility\r\n\t\tr.setAttribute(scheduler.config.event_attribute, new_id);\r\n\t});\r\n\tif (this._select_id == id) this._select_id = new_id;\r\n\tif (this._edit_id == id) this._edit_id = new_id;\r\n\t//if (this._drag_id==id) this._drag_id=new_id;\r\n\tthis.callEvent(\"onEventIdChange\", [id, new_id]);\r\n};\r\n\r\n(function() {\r\n\tvar attrs = [\"text\", \"Text\", \"start_date\", \"StartDate\", \"end_date\", \"EndDate\"];\r\n\tvar create_getter = function(name) {\r\n\t\treturn function(id) { return (scheduler.getEvent(id))[name]; };\r\n\t};\r\n\tvar create_setter = function(name) {\r\n\t\treturn function(id, value) {\r\n\t\t\tvar ev = scheduler.getEvent(id);\r\n\t\t\tev[name] = value;\r\n\t\t\tev._changed = true;\r\n\t\t\tev._timed = this.isOneDayEvent(ev);\r\n\t\t\tscheduler.event_updated(ev, true);\r\n\t\t};\r\n\t};\r\n\tfor (var i = 0; i < attrs.length; i += 2) {\r\n\t\tscheduler[\"getEvent\" + attrs[i + 1]] = create_getter(attrs[i]);\r\n\t\tscheduler[\"setEvent\" + attrs[i + 1]] = create_setter(attrs[i]);\r\n\t}\r\n})();\r\n\r\nscheduler.event_updated = function(ev, force) {\r\n\tif (this.is_visible_events(ev))\r\n\t\tthis.render_view_data();\r\n\telse\r\n\t\tthis.clear_event(ev.id);\r\n};\r\nscheduler.is_visible_events = function(ev) {\r\n\tif(!this._min_date || !this._max_date){\r\n\t\treturn false;\r\n\t}\r\n\r\n\t//if in displayed dates\r\n\tvar in_visible_range = (ev.start_date.valueOf() < this._max_date.valueOf() && this._min_date.valueOf() < ev.end_date.valueOf());\r\n\r\n\tif(in_visible_range){\r\n\r\n\t\t//end dates are not between last/first hours\r\n\t\tvar evFirstHour = ev.start_date.getHours(),\r\n\t\t\tevLastHour = ev.end_date.getHours() + (ev.end_date.getMinutes()/60),\r\n\t\t\tlastHour = this.config.last_hour,\r\n\t\t\tfirstHour = this.config.first_hour;\r\n\r\n\t\tvar end_dates_visible = (this._table_view || !((evLastHour > lastHour || evLastHour <= firstHour) && (evFirstHour >= lastHour || evFirstHour < firstHour)));\r\n\r\n\t\tif(end_dates_visible){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\r\n\t\t\t//event is bigger than area hidden between last/first hours\r\n\t\t\tvar event_duration = (ev.end_date.valueOf() - ev.start_date.valueOf()) / (1000*60*60),//hours\r\n\t\t\t\thidden_duration = 24 - (this.config.last_hour - this.config.first_hour);\r\n\r\n\t\t\treturn !!((event_duration > hidden_duration) || (evFirstHour < lastHour && evLastHour > firstHour));\r\n\r\n\t\t}\r\n\t}else{\r\n\t\treturn false;\r\n\t}\r\n};\r\nscheduler.isOneDayEvent = function(ev) {\r\n\t// decrease by one ms so events that ends on midnight on the next day were still considered one day events\r\n\t// e.g. (09-02-2018 19:00 - 10-02-2018 00:00)\r\n\t// events >= 24h long are considered multiday\r\n\tvar checkEndDate = new Date(ev.end_date.valueOf() - 1);\r\n\treturn (\r\n\t\tev.start_date.getFullYear() === checkEndDate.getFullYear() &&\r\n\t\tev.start_date.getMonth() === checkEndDate.getMonth() &&\r\n\t\tev.start_date.getDate() === checkEndDate.getDate()\r\n\t) && ((ev.end_date.valueOf() - ev.start_date.valueOf()) < (1000 * 60 * 60 * 24));\r\n};\r\n\r\nscheduler.get_visible_events = function(only_timed) {\r\n\t//not the best strategy for sure\r\n\tvar stack = [];\r\n\r\n\tfor (var id in this._events)\r\n\t\tif (this.is_visible_events(this._events[id]))\r\n\t\t\tif (!only_timed || this._events[id]._timed)\r\n\t\t\t\tif (this.filter_event(id, this._events[id]))\r\n\t\t\t\t\tstack.push(this._events[id]);\r\n\r\n\treturn stack;\r\n};\r\nscheduler.filter_event = function(id, ev) {\r\n\tvar filter = this[\"filter_\" + this._mode];\r\n\treturn (filter) ? filter(id, ev) : true;\r\n};\r\nscheduler._is_main_area_event = function(ev){\r\n\treturn !!ev._timed;\r\n};\r\nscheduler.render_view_data = function(evs, hold) {\r\n\tvar full = false;\r\n\tif (!evs) {\r\n\t\tfull = true;\r\n\t\tif (this._not_render) {\r\n\t\t\tthis._render_wait = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._render_wait = false;\r\n\r\n\t\tthis.clear_view();\r\n\t\tevs = this.get_visible_events(!(this._table_view || this.config.multi_day));\r\n\t}\r\n\tfor(var i= 0, len = evs.length; i < len; i++){\r\n\t\tthis._recalculate_timed(evs[i]);\r\n\t}\r\n\r\n\tif (this.config.multi_day && !this._table_view) {\r\n\r\n\t\tvar tvs = [];\r\n\t\tvar tvd = [];\r\n\t\tfor (var i = 0; i < evs.length; i++) {\r\n\t\t\tif (this._is_main_area_event(evs[i]))\r\n\t\t\t\ttvs.push(evs[i]);\r\n\t\t\telse\r\n\t\t\t\ttvd.push(evs[i]);\r\n\t\t}\r\n\r\n\t\tif(!this._els['dhx_multi_day']){\r\n\t\t\tvar message = scheduler._commonErrorMessages.unknownView(this._mode);\r\n\t\t\tthrow new Error(message);\r\n\t\t}\r\n\r\n\t\t// multiday events\r\n\t\tthis._rendered_location = this._els['dhx_multi_day'][0];\r\n\t\tthis._table_view = true;\r\n\t\tthis.render_data(tvd, hold);\r\n\t\tthis._table_view = false;\r\n\r\n\t\t// normal events\r\n\t\tthis._rendered_location = this._els['dhx_cal_data'][0];\r\n\t\tthis._table_view = false;\r\n\t\tthis.render_data(tvs, hold);\r\n\r\n\t} else {\r\n\t\tvar buffer = document.createDocumentFragment();\r\n\t\tvar renderedLocation = this._els['dhx_cal_data'][0];\r\n\t\tthis._rendered_location = buffer;\r\n\t\tthis.render_data(evs, hold);\r\n\t\trenderedLocation.appendChild(buffer);\r\n\t\tthis._rendered_location = renderedLocation;\r\n\r\n\t}\r\n\r\n\tif(full){\r\n\t\tthis.callEvent(\"onDataRender\", []);\r\n\t}\r\n};\r\n\r\n\r\nscheduler._view_month_day = function(e){\r\n\tvar date = scheduler.getActionData(e).date;\r\n\tif(!scheduler.callEvent(\"onViewMoreClick\", [date]))\r\n\t\treturn;\r\n\tscheduler.setCurrentView(date, \"day\");\r\n};\r\n\r\nscheduler._render_month_link = function(ev){\r\n\tvar parent = this._rendered_location;\r\n\tvar toRender = this._lame_clone(ev);\r\n\r\n\t//render links in each cell of multiday events\r\n\tfor(var d = ev._sday; d < ev._eday; d++){\r\n\r\n\t\ttoRender._sday = d;\r\n\t\ttoRender._eday = d+1;\r\n\r\n\t\tvar date = scheduler.date;\r\n\t\tvar curr = scheduler._min_date;\r\n\t\tcurr = date.add(curr, toRender._sweek, \"week\");\r\n\t\tcurr = date.add(curr, toRender._sday, \"day\");\r\n\t\tvar count = scheduler.getEvents(curr, date.add(curr, 1, \"day\")).length;\r\n\r\n\t\tvar pos = this._get_event_bar_pos(toRender);\r\n\t\tvar widt = (pos.x2 - pos.x);\r\n\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tscheduler.event(el, \"click\", function(e){scheduler._view_month_day(e);});\r\n\t\tel.className = \"dhx_month_link\";\r\n\t\tel.style.top = pos.y + \"px\";\r\n\t\tel.style.left = pos.x + \"px\";\r\n\t\tel.style.width = widt + \"px\";\r\n\t\tel.innerHTML = scheduler.templates.month_events_link(curr, count);\r\n\t\tthis._rendered.push(el);\r\n\r\n\t\tparent.appendChild(el);\r\n\t}\r\n};\r\n\r\nscheduler._recalculate_timed = function(id){\r\n\tif(!id) return;\r\n\tvar ev;\r\n\tif(typeof(id) != \"object\")\r\n\t\tev = this._events[id];\r\n\telse\r\n\t\tev = id;\r\n\tif(!ev) return;\r\n\tev._timed = scheduler.isOneDayEvent(ev);\r\n};\r\nscheduler.attachEvent(\"onEventChanged\", scheduler._recalculate_timed);\r\nscheduler.attachEvent(\"onEventAdded\", scheduler._recalculate_timed);\r\n\r\nscheduler.render_data = function(evs, hold) {\r\n\tevs = this._pre_render_events(evs, hold);\r\n\tvar containers = {};\r\n\tfor (var i = 0; i < evs.length; i++)\r\n\t\tif (this._table_view){\r\n\t\t\tif(scheduler._mode != 'month'){\r\n\t\t\t\tthis.render_event_bar(evs[i]);//may be multiday section on other views\r\n\t\t\t}else{\r\n\r\n\t\t\t\tvar max_evs = scheduler.config.max_month_events;\r\n\t\t\t\tif(max_evs !== max_evs*1 || evs[i]._sorder < max_evs){\r\n\t\t\t\t\t//of max number events per month cell is set and event can be rendered\r\n\t\t\t\t\tthis.render_event_bar(evs[i]);\r\n\t\t\t\t}else if(max_evs !== undefined && evs[i]._sorder == max_evs){\r\n\t\t\t\t\t//render 'view more' links\r\n\t\t\t\t\tscheduler._render_month_link(evs[i]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//do not render events with ordinal number > maximum events per cell\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t}else{\r\n\t\t\tvar ev = evs[i];\r\n\t\t\tvar parent = scheduler.locate_holder(ev._sday);\r\n\t\t\tif (!parent) continue; //attempt to render non-visible event\r\n\r\n\t\t\tif(!containers[ev._sday]){\r\n\t\t\t\tcontainers[ev._sday] = {\r\n\t\t\t\t\treal: parent,\r\n\t\t\t\t\tbuffer: document.createDocumentFragment(),\r\n\t\t\t\t\twidth: parent.clientWidth\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tvar container = containers[ev._sday];\r\n\t\t\tthis.render_event(ev, container.buffer, container.width);\r\n\t\t}\r\n\r\n\t\tfor(var i in containers){\r\n\t\t\tvar container = containers[i];\r\n\t\t\tif(container.real && container.buffer){\r\n\t\t\t\tcontainer.real.appendChild(container.buffer);\r\n\t\t\t}\r\n\t\t}\r\n};\r\n\r\nscheduler._get_first_visible_cell = function(cells) {\r\n\tfor (var i = 0; i < cells.length; i++) {\r\n\t\tif ((cells[i].className || \"\").indexOf(\"dhx_scale_ignore\") == -1) {\r\n\t\t\treturn cells[i];\r\n\t\t}\r\n\t}\r\n\t// if no visible cell found, return cells[0] to be more tolerant, since it's the original logic\r\n\treturn cells[0];\r\n};\r\n\r\nscheduler._pre_render_events = function(evs, hold) {\r\n\tvar hb = this.xy.bar_height;\r\n\tvar h_old = this._colsS.heights;\r\n\tvar h = this._colsS.heights = [0, 0, 0, 0, 0, 0, 0];\r\n\tvar data = this._els[\"dhx_cal_data\"][0];\r\n\r\n\tif (!this._table_view) {\r\n\t\tevs = this._pre_render_events_line(evs, hold); //ignore long events for now\r\n\t}\r\n\telse {\r\n\t\tevs = this._pre_render_events_table(evs, hold);\r\n\t}\r\n\tif (this._table_view) {\r\n\t\tif (hold)\r\n\t\t\tthis._colsS.heights = h_old;\r\n\t\telse {\r\n\t\t\tvar monthRows = data.querySelectorAll(\".dhx_cal_month_row\");\r\n\t\t\tif (monthRows.length) {\r\n\t\t\t\tfor (var i = 0; i < monthRows.length; i++) {\r\n\t\t\t\t\th[i]++;\r\n\t\t\t\t\tvar cells = monthRows[i].querySelectorAll(\".dhx_cal_month_cell\");\r\n\t\t\t\t\tvar cellHeight = this._colsS.height - this.xy.month_head_height;\r\n\t\t\t\t\tif ((h[i]) * hb > cellHeight) { // 22 - height of cell's header\r\n\t\t\t\t\t\t//we have overflow, update heights\r\n\r\n\t\t\t\t\t\tvar cHeight = cellHeight;\r\n\t\t\t\t\t\tif(this.config.max_month_events*1 !== this.config.max_month_events || h[i] <= this.config.max_month_events){\r\n\t\t\t\t\t\t\tcHeight = h[i] * hb;\r\n\t\t\t\t\t\t}else if( (this.config.max_month_events + 1) * hb > cellHeight){\r\n\t\t\t\t\t\t\tcHeight = (this.config.max_month_events + 1) * hb;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tmonthRows[i].style.height = (cHeight + this.xy.month_head_height) + \"px\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\th[i] = (h[i - 1] || 0) + scheduler._get_first_visible_cell(cells).offsetHeight;\r\n\t\t\t\t}\r\n\t\t\t\th.unshift(0);\r\n\t\t\t\tconst dataArea = this.$container.querySelector(\".dhx_cal_data\");\r\n\t\t\t\tif (dataArea.offsetHeight < dataArea.scrollHeight && !scheduler._colsS.scroll_fix && scheduler.xy.scroll_width) {\r\n\r\n\t\t\t\t\tvar scale_settings = scheduler._colsS,\r\n\t\t\t\t\t\tsum_width = scale_settings[scale_settings.col_length],\r\n\t\t\t\t\t\trow_heights = scale_settings.heights.slice();\r\n\r\n\t\t\t\t\tsum_width -= (scheduler.xy.scroll_width || 0);\r\n\t\t\t\t\tthis._calc_scale_sizes(sum_width, this._min_date, this._max_date);\r\n\t\t\t\t\tscheduler._colsS.heights = row_heights;\r\n\r\n\t\t\t\t\tthis.set_xy(this._els[\"dhx_cal_header\"][0], sum_width/*, this.xy.scale_height*/);\r\n\t\t\t\t\tscheduler._render_scales(this._els[\"dhx_cal_header\"][0]);\r\n\t\t\t\t\tscheduler._render_month_scale(this._els[\"dhx_cal_data\"][0], this._get_timeunit_start(), this._min_date);\r\n\r\n\t\t\t\t\tscale_settings.scroll_fix = true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (!evs.length && this._els[\"dhx_multi_day\"][0].style.visibility == \"visible\")\r\n\t\t\t\t\th[0] = -1;\r\n\t\t\t\tif (evs.length || h[0] == -1) {\r\n\t\t\t\t\t//shift days to have space for multiday events\r\n\t\t\t\t\t//var childs = evl.parentNode.childNodes;\r\n\r\n\t\t\t\t\t// +1 so multiday events would have 2px from top and 2px from bottom by default\r\n\t\t\t\t\tvar full_multi_day_height = (h[0] + 1) * hb + 4;\r\n\r\n\t\t\t\t\tvar used_multi_day_height = full_multi_day_height;\r\n\t\t\t\t\tvar used_multi_day_height_css = full_multi_day_height + \"px\";\r\n\t\t\t\t\tif (this.config.multi_day_height_limit) {\r\n\t\t\t\t\t\tused_multi_day_height = Math.min(full_multi_day_height, this.config.multi_day_height_limit) ;\r\n\t\t\t\t\t\tused_multi_day_height_css = used_multi_day_height + \"px\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar multi_day_section = this._els[\"dhx_multi_day\"][0];\r\n\t\t\t\t\tmulti_day_section.style.height = used_multi_day_height_css;\r\n\t\t\t\t\tmulti_day_section.style.visibility = (h[0] == -1 ? \"hidden\" : \"visible\");\r\n\t\t\t\t\tmulti_day_section.style.display = (h[0] == -1 ? \"none\" : \"\");\r\n\r\n\t\t\t\t\t// icon\r\n\t\t\t\t\tvar multi_day_icon = this._els[\"dhx_multi_day\"][1];\r\n\t\t\t\t\tmulti_day_icon.style.height = used_multi_day_height_css;\r\n\t\t\t\t\tmulti_day_icon.style.visibility = (h[0] == -1 ? \"hidden\" : \"visible\");\r\n\t\t\t\t\tmulti_day_icon.style.display = (h[0] == -1 ? \"none\" : \"\");\r\n\t\t\t\t\tmulti_day_icon.className = h[0] ? \"dhx_multi_day_icon\" : \"dhx_multi_day_icon_small\";\r\n\t\t\t\t\tthis._dy_shift = (h[0] + 1) * hb;\r\n\t\t\t\t\tif(this.config.multi_day_height_limit){\r\n\t\t\t\t\t\tthis._dy_shift = Math.min(this.config.multi_day_height_limit, this._dy_shift);\r\n\t\t\t\t\t}\r\n\t\t\t\t\th[0] = 0;\r\n\r\n\t\t\t\t\tif (used_multi_day_height != full_multi_day_height) {\r\n\r\n\t\t\t\t\t\tmulti_day_section.style.overflowY = \"auto\";\r\n\t\t\t\t\t//\tmulti_day_section.style.width = (parseInt(this._els[\"dhx_cal_navline\"][0].style.width)) + \"px\";\r\n\r\n\t\t\t\t\t\tmulti_day_icon.style.position = \"fixed\";\r\n\t\t\t\t\t\tmulti_day_icon.style.top = \"\";\r\n\t\t\t\t\t\tmulti_day_icon.style.left = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn evs;\r\n};\r\nscheduler._get_event_sday = function(ev) {\r\n\t// get day in current view\r\n\t// use rounding for 23 or 25 hour days on DST\r\n\tvar datePart = this.date.day_start(new Date(ev.start_date));\r\n\treturn Math.round((datePart.valueOf() - this._min_date.valueOf()) / (24 * 60 * 60 * 1000));\r\n};\r\nscheduler._get_event_mapped_end_date = function(ev) {\r\n\tvar end_date = ev.end_date;\r\n\tif (this.config.separate_short_events) {\r\n\t\tvar ev_duration = (ev.end_date - ev.start_date) / 60000; // minutes\r\n\t\tif (ev_duration < this._min_mapped_duration) {\r\n\t\t\tend_date = this.date.add(end_date, this._min_mapped_duration - ev_duration, \"minute\");\r\n\t\t}\r\n\t}\r\n\treturn end_date;\r\n};\r\nscheduler._pre_render_events_line = function(evs, hold){\r\n\tevs.sort(function(a, b) {\r\n\t\tif (a.start_date.valueOf() == b.start_date.valueOf())\r\n\t\t\treturn a.id > b.id ? 1 : -1;\r\n\t\treturn a.start_date > b.start_date ? 1 : -1;\r\n\t});\r\n\tvar days = []; //events by weeks\r\n\tvar evs_originals = [];\r\n\r\n\tthis._min_mapped_duration = Math.floor(this.xy.min_event_height * 60 / this.config.hour_size_px);  // values could change along the way\r\n\r\n\tfor (var i = 0; i < evs.length; i++) {\r\n\t\tvar ev = evs[i];\r\n\r\n\t\t//check date overflow\r\n\t\tvar sd = ev.start_date;\r\n\t\tvar ed = ev.end_date;\r\n\t\t//check scale overflow\r\n\t\tvar sh = sd.getHours();\r\n\t\tvar eh = ed.getHours();\r\n\t\tev._sday = this._get_event_sday(ev); // sday based on event start_date\r\n\t\tif (this._ignores[ev._sday]){\r\n\t\t\t//ignore event\r\n\t\t\tevs.splice(i,1);\r\n\t\t\ti--;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tif (!days[ev._sday]) days[ev._sday] = [];\r\n\r\n\t\tif (!hold) {\r\n\t\t\tev._inner = false;\r\n\r\n\t\t\tvar stack = days[ev._sday];\r\n\r\n\t\t\twhile (stack.length) {\r\n\t\t\t\tvar t_ev = stack[stack.length - 1];\r\n\t\t\t\tvar t_end_date = this._get_event_mapped_end_date(t_ev);\r\n\t\t\t\tif (t_end_date.valueOf() <= ev.start_date.valueOf()) {\r\n\t\t\t\t\tstack.splice(stack.length - 1, 1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar slot_index = stack.length;\r\n\t\t\tvar sorderSet = false;\r\n\t\t\tfor (var j = 0; j < stack.length; j++) {\r\n\t\t\t\tvar t_ev = stack[j];\r\n\t\t\t\tvar t_end_date = this._get_event_mapped_end_date(t_ev);\r\n\t\t\t\tif (t_end_date.valueOf() <= ev.start_date.valueOf()) {\r\n\t\t\t\t\tsorderSet = true;\r\n\t\t\t\t\tev._sorder = t_ev._sorder;\r\n\t\t\t\t\tslot_index = j;\r\n\t\t\t\t\tev._inner = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (stack.length)\r\n\t\t\t\tstack[stack.length - 1]._inner = true;\r\n\r\n\t\t\tif (!sorderSet) {\r\n\t\t\t\tif (stack.length) {\r\n\t\t\t\t\tif (stack.length <= stack[stack.length - 1]._sorder) {\r\n\t\t\t\t\t\tif (!stack[stack.length - 1]._sorder)\r\n\t\t\t\t\t\t\tev._sorder = 0;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tfor (j = 0; j < stack.length; j++) {\r\n\t\t\t\t\t\t\t\tvar _is_sorder = false;\r\n\t\t\t\t\t\t\t\tfor (var k = 0; k < stack.length; k++) {\r\n\t\t\t\t\t\t\t\t\tif (stack[k]._sorder == j) {\r\n\t\t\t\t\t\t\t\t\t\t_is_sorder = true;\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (!_is_sorder) {\r\n\t\t\t\t\t\t\t\t\tev._sorder = j;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\tev._inner = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar _max_sorder = stack[0]._sorder;\r\n\t\t\t\t\t\tfor (j = 1; j < stack.length; j++) {\r\n\t\t\t\t\t\t\tif (stack[j]._sorder > _max_sorder)\r\n\t\t\t\t\t\t\t\t_max_sorder = stack[j]._sorder;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tev._sorder = _max_sorder + 1;\r\n\t\t\t\t\t\tev._inner = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else\r\n\t\t\t\t\tev._sorder = 0;\r\n\t\t\t}\r\n\r\n\t\t\tstack.splice(slot_index, slot_index == stack.length ? 0 : 1, ev);\r\n\r\n\t\t\tif (stack.length > (stack.max_count || 0)) {\r\n\t\t\t\tstack.max_count = stack.length;\r\n\t\t\t\tev._count = stack.length;\r\n\t\t\t} else {\r\n\t\t\t\tev._count = (ev._count) ? ev._count : 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (sh < this.config.first_hour || eh >= this.config.last_hour) {\r\n\t\t\t// Need to create copy of event as we will be changing it's start/end date\r\n\t\t\t// e.g. first_hour = 11 and event.start_date hours = 9. Need to preserve that info\r\n\t\t\tevs_originals.push(ev);\r\n\t\t\tevs[i] = ev = this._copy_event(ev);\r\n\r\n\t\t\tif (sh < this.config.first_hour) {\r\n\t\t\t\tev.start_date.setHours(this.config.first_hour);\r\n\t\t\t\tev.start_date.setMinutes(0);\r\n\t\t\t}\r\n\t\t\tif (eh >= this.config.last_hour) {\r\n\t\t\t\tev.end_date.setMinutes(0);\r\n\t\t\t\tev.end_date.setHours(this.config.last_hour);\r\n\t\t\t}\r\n\r\n\t\t\tif (ev.start_date > ev.end_date || sh == this.config.last_hour) {\r\n\t\t\t\tevs.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (!hold) {\r\n\t\tfor (var i = 0; i < evs.length; i++) {\r\n\t\t\tevs[i]._count = days[evs[i]._sday].max_count;\r\n\t\t}\r\n\t\tfor (var i = 0; i < evs_originals.length; i++)\r\n\t\t\tevs_originals[i]._count = days[evs_originals[i]._sday].max_count;\r\n\t}\r\n\r\n\treturn evs;\r\n};\r\nscheduler._time_order = function(evs) {\r\n\tevs.sort(function(a, b) {\r\n\t\tif (a.start_date.valueOf() == b.start_date.valueOf()) {\r\n\t\t\tif (a._timed && !b._timed) return 1;\r\n\t\t\tif (!a._timed && b._timed) return -1;\r\n\t\t\treturn a.id > b.id ? 1 : -1;\r\n\t\t}\r\n\t\treturn a.start_date > b.start_date ? 1 : -1;\r\n\t});\r\n};\r\n\r\nscheduler._is_any_multiday_cell_visible = function(from, to, event){\r\n\tvar cols = this._cols.length;\r\n\tvar isAnyCellVisible = false;\r\n\tvar checkDate = from;\r\n\tvar noCells = true;\r\n\tvar lastDayEnd = new Date(to);\r\n\tif(scheduler.date.day_start(new Date(to)).valueOf() != to.valueOf()){\r\n\t\tlastDayEnd = scheduler.date.day_start(lastDayEnd);\r\n\t\tlastDayEnd = scheduler.date.add(lastDayEnd, 1, \"day\");\r\n\t}\r\n\twhile(checkDate < lastDayEnd){\r\n\t\tnoCells = false;\r\n\t\tvar cellIndex = this.locate_holder_day(checkDate, false, event);\r\n\t\tvar weekCellIndex = cellIndex % cols;\r\n\t\tif(!this._ignores[weekCellIndex]){\r\n\t\t\tisAnyCellVisible = true;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcheckDate = scheduler.date.add(checkDate, 1, \"day\");\r\n\t}\r\n\treturn noCells || isAnyCellVisible;\r\n};\r\n\r\nscheduler._pre_render_events_table = function(evs, hold) { // max - max height of week slot\r\n\tthis._time_order(evs);\r\n\tvar out = [];\r\n\tvar weeks = [\r\n\t\t[],\r\n\t\t[],\r\n\t\t[],\r\n\t\t[],\r\n\t\t[],\r\n\t\t[],\r\n\t\t[]\r\n\t]; //events by weeks\r\n\tvar max = this._colsS.heights;\r\n\tvar start_date;\r\n\tvar cols = this._cols.length;\r\n\tvar chunks_info = {};\r\n\r\n\tfor (var i = 0; i < evs.length; i++) {\r\n\t\tvar ev = evs[i];\r\n\t\tvar id = ev.id;\r\n\t\tif (!chunks_info[id]) {\r\n\t\t\tchunks_info[id] = {\r\n\t\t\t\tfirst_chunk: true,\r\n\t\t\t\tlast_chunk: true\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar chunk_info = chunks_info[id];\r\n\t\tvar sd = (start_date || ev.start_date);\r\n\t\tvar ed = ev.end_date;\r\n\t\t//trim events which are crossing through current view\r\n\t\tif (sd < this._min_date) {\r\n\t\t\tchunk_info.first_chunk = false;\r\n\t\t\tsd = this._min_date;\r\n\t\t}\r\n\t\tif (ed > this._max_date) {\r\n\t\t\tchunk_info.last_chunk = false;\r\n\t\t\ted = this._max_date;\r\n\t\t}\r\n\r\n\t\tvar locate_s = this.locate_holder_day(sd, false, ev);\r\n\t\tev._sday = locate_s % cols;\r\n\t\t//skip single day events for ignored dates\r\n\t\tif (this._ignores[ev._sday] && ev._timed) continue;\r\n\r\n\t\tvar locate_e = this.locate_holder_day(ed, true, ev) || cols;\r\n\t\tev._eday = (locate_e % cols) || cols; //cols used to fill full week, when event end on monday\r\n\t\tev._length = locate_e - locate_s;\r\n\t\t//3600000 - compensate 1 hour during winter|summer time shift\r\n\t\tev._sweek = Math.floor((this._correct_shift(sd.valueOf(), 1) - this._min_date.valueOf()) / (60 * 60 * 1000 * 24 * cols));\r\n\r\n\t\tvar isAnyCellVisible = scheduler._is_any_multiday_cell_visible(sd, ed, ev);\r\n\r\n\t\tif(!isAnyCellVisible){\r\n\t\t\tstart_date = null;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\t//current slot\r\n\t\tvar stack = weeks[ev._sweek];\r\n\t\t//check order position\r\n\t\tvar stack_line;\r\n\r\n\t\tfor (stack_line = 0; stack_line < stack.length; stack_line++)\r\n\t\t\tif (stack[stack_line]._eday <= ev._sday)\r\n\t\t\t\tbreak;\r\n\r\n\t\tif (!ev._sorder || !hold) {\r\n\t\t\tev._sorder = stack_line;\r\n\t\t}\r\n\r\n\t\tif (ev._sday + ev._length <= cols) {\r\n\t\t\tstart_date = null;\r\n\t\t\tout.push(ev);\r\n\t\t\tstack[stack_line] = ev;\r\n\t\t\t//get max height of slot\r\n\t\t\tmax[ev._sweek] = stack.length - 1;\r\n\t\t\tev._first_chunk = chunk_info.first_chunk;\r\n\t\t\tev._last_chunk = chunk_info.last_chunk;\r\n\t\t} else { // split long event in chunks\r\n\t\t\tvar copy = this._copy_event(ev);\r\n\t\t\tcopy.id = ev.id;\r\n\t\t\tcopy._length = cols - ev._sday;\r\n\t\t\tcopy._eday = cols;\r\n\t\t\tcopy._sday = ev._sday;\r\n\t\t\tcopy._sweek = ev._sweek;\r\n\t\t\tcopy._sorder = ev._sorder;\r\n\t\t\tcopy.end_date = this.date.add(sd, copy._length, \"day\");\r\n\t\t\tcopy._first_chunk = chunk_info.first_chunk;\r\n\t\t\tif (chunk_info.first_chunk) {\r\n\t\t\t\tchunk_info.first_chunk = false;\r\n\t\t\t}\r\n\r\n\t\t\tout.push(copy);\r\n\t\t\tstack[stack_line] = copy;\r\n\t\t\tstart_date = copy.end_date;\r\n\t\t\t//get max height of slot\r\n\t\t\tmax[ev._sweek] = stack.length - 1;\r\n\t\t\ti--;\r\n\t\t\tcontinue;  //repeat same step\r\n\t\t}\r\n\t}\r\n\treturn out;\r\n};\r\nscheduler._copy_dummy = function() {\r\n\tvar a = new Date(this.start_date);\r\n\tvar b = new Date(this.end_date);\r\n\tthis.start_date = a;\r\n\tthis.end_date = b;\r\n};\r\nscheduler._copy_event = function(ev) {\r\n\tthis._copy_dummy.prototype = ev;\r\n\treturn new this._copy_dummy();\r\n\t//return {start_date:ev.start_date, end_date:ev.end_date, text:ev.text, id:ev.id}\r\n};\r\nscheduler._rendered = [];\r\nscheduler.clear_view = function() {\r\n\tfor (var i = 0; i < this._rendered.length; i++) {\r\n\t\tvar obj = this._rendered[i];\r\n\t\tif (obj.parentNode) obj.parentNode.removeChild(obj);\r\n\t}\r\n\tthis._rendered = [];\r\n};\r\nscheduler.updateEvent = function(id) {\r\n\tvar ev = this.getEvent(id);\r\n\tthis.clear_event(id);\r\n\r\n\tif (ev && this.is_visible_events(ev) && this.filter_event(id, ev) && (this._table_view || this.config.multi_day || ev._timed)) {\r\n\t\tif (this.config.update_render){\r\n\t\t\tthis.render_view_data();\r\n\t\t}else{\r\n\t\t\tif(this.getState().mode == \"month\" && !this.getState().drag_id && !this.isOneDayEvent(ev)){\r\n\t\t\t\tthis.render_view_data();\r\n\t\t\t}else{\r\n\t\t\t\tthis.render_view_data([ev], true);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\nscheduler.clear_event = function(id) {\r\n\tthis.for_rendered(id, function(node, i) {\r\n\t\tif (node.parentNode)\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\tscheduler._rendered.splice(i, 1);\r\n\t});\r\n};\r\nscheduler._y_from_date = function(date){\r\n\tvar sm = date.getHours() * 60 + date.getMinutes();\r\n\treturn ((Math.round((sm * 60 * 1000 - this.config.first_hour * 60 * 60 * 1000) * this.config.hour_size_px / (60 * 60 * 1000))) % (this.config.hour_size_px * 24)); //42px/hour\r\n};\r\nscheduler._calc_event_y = function(ev, min_height){\r\n\tmin_height = min_height || 0;\r\n\tvar sm = ev.start_date.getHours() * 60 + ev.start_date.getMinutes();\r\n\tvar em = (ev.end_date.getHours() * 60 + ev.end_date.getMinutes()) || (scheduler.config.last_hour * 60);\r\n\tvar top = this._y_from_date(ev.start_date);\r\n\r\n\tvar height = Math.max(min_height, (em - sm) * this.config.hour_size_px / 60); //42px/hour\r\n\treturn {\r\n\t\ttop: top,\r\n\t\theight: height\r\n\t};\r\n};\r\nscheduler.render_event = function(ev, buffer, parentWidth) {\r\n\tvar menu = scheduler.xy.menu_width;\r\n\tvar menu_offset = (this.config.use_select_menu_space) ? 0 : menu;\r\n\tif (ev._sday < 0) return; //can occur in case of recurring event during time shift\r\n\r\n\tvar parent = scheduler.locate_holder(ev._sday);\r\n\tif (!parent) return; //attempt to render non-visible event\r\n\r\n\tbuffer = buffer || parent;\r\n\r\n\tvar pos_y = this._calc_event_y(ev, scheduler.xy.min_event_height);\r\n\tvar top = pos_y.top,\r\n\t\theight = pos_y.height;\r\n\r\n\tvar ev_count = ev._count || 1;\r\n\tvar ev_sorder = ev._sorder || 0;\r\n\r\n\tparentWidth = parentWidth || parent.clientWidth;\r\n\tif(this.config.day_column_padding){\r\n\t\tparentWidth -= this.config.day_column_padding;\r\n\t}\r\n\r\n\tvar width = Math.floor((parentWidth - menu_offset) / ev_count);\r\n\tvar left = ev_sorder * width + 1;\r\n\tif (!ev._inner) width = width * (ev_count - ev_sorder);\r\n\tif (this.config.cascade_event_display) {\r\n\t\tvar limit = this.config.cascade_event_count;\r\n\t\tvar margin = this.config.cascade_event_margin;\r\n\t\tleft = ev_sorder % limit * margin;\r\n\t\tvar right = (ev._inner) ? (ev_count - ev_sorder - 1) % limit * margin / 2 : 0;\r\n\t\twidth = Math.floor(parentWidth - menu_offset - left - right);\r\n\t}\r\n\r\n\tif(height < 30){\r\n\t\tev._mode = \"smallest\";\r\n\t}else if(height < 42){\r\n\t\tev._mode = \"small\";\r\n\t}else{\r\n\t\tev._mode = null;\r\n\t}\r\n\r\n\tvar d = this._render_v_bar(ev, menu_offset + left, top, width, height, ev._text_style, scheduler.templates.event_header(ev.start_date, ev.end_date, ev), scheduler.templates.event_text(ev.start_date, ev.end_date, ev));\r\n\t\r\n\tif(ev._mode === \"smallest\"){\r\n\t\td.classList.add(\"dhx_cal_event--xsmall\");\r\n\t}else if (ev._mode === \"small\"){\r\n\t\td.classList.add(\"dhx_cal_event--small\");\r\n\t}\r\n\r\n\tthis._waiAria.eventAttr(ev, d);\r\n\tthis._rendered.push(d);\r\n\tbuffer.appendChild(d);\r\n\r\n\tvar parentPosition = parseInt( this.config.rtl ? parent.style.right : parent.style.left, 10);\r\n\r\n\tleft = left + parentPosition + menu_offset;\r\n\r\n\tif (this._edit_id == ev.id) {\r\n\r\n\t\td.style.zIndex = 1; //fix overlapping issue\r\n\t\twidth = Math.max(width, scheduler.xy.editor_width);\r\n\t\td = document.createElement(\"div\");\r\n\t\td.setAttribute(\"event_id\", ev.id); // for backward compatibility\r\n\t\td.setAttribute(this.config.event_attribute, ev.id);\r\n\r\n\t\tthis._waiAria.eventAttr(ev, d);\r\n\r\n\t\td.className = \"dhx_cal_event dhx_cal_editor\";\r\n\t\tif (this.config.rtl) left++;\r\n\t\tthis.set_xy(d, width, height, left, top);\r\n\r\n\r\n\t\tif(ev.color){\r\n\t\t\td.style.setProperty(\"--dhx-scheduler-event-background\", ev.color);\r\n\t\t}\r\n\t\tvar tplClass = scheduler.templates.event_class(ev.start_date, ev.end_date, ev);\r\n\r\n\t\tif(tplClass){\r\n\t\t\td.className += \" \" + tplClass;\r\n\t\t}\r\n\t\tvar d2 = document.createElement(\"div\");\r\n\t\td2.style.cssText += \"overflow:hidden;height:100%\";\r\n\r\n\t\td.appendChild(d2);\r\n\t\tthis._els[\"dhx_cal_data\"][0].appendChild(d);\r\n\t\tthis._rendered.push(d);\r\n\r\n\t\td2.innerHTML = \"<textarea class='dhx_cal_editor'>\" + ev.text + \"</textarea>\";\r\n\t\tthis._editor = d2.querySelector(\"textarea\");\r\n\t\t\r\n\t\tscheduler.event(this._editor, \"keydown\", function(e) {\r\n\t\t\tif (e.shiftKey) return true;\r\n\t\t\tvar code = e.keyCode;\r\n\t\t\tif (code == scheduler.keys.edit_save) scheduler.editStop(true);\r\n\t\t\tif (code == scheduler.keys.edit_cancel) scheduler.editStop(false);\r\n\r\n\t\t\tif(code == scheduler.keys.edit_save || code == scheduler.keys.edit_cancel){\r\n\t\t\t\tif(e.preventDefault) e.preventDefault();\r\n\t\t\t}\r\n\t\t});\r\n\t\tscheduler.event(this._editor, \"selectstart\", function (e) {\r\n\t\t\te.cancelBubble = true;\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tscheduler._focus(this._editor, true);\r\n\t\t//IE and opera can add x-scroll during focusing\r\n\t\tthis._els[\"dhx_cal_data\"][0].scrollLeft = 0;\r\n\t}\r\n\tif (this.xy.menu_width !== 0 && this._select_id == ev.id) {\r\n\r\n\t\tif (this.config.cascade_event_display && this._drag_mode)\r\n\t\t\td.style.zIndex = 1; //fix overlapping issue for cascade view in case of dnd of selected event\r\n\t\tvar icons = this.config[\"icons_\" + ((this._edit_id == ev.id) ? \"edit\" : \"select\")];\r\n\t\tvar icons_str = \"\";\r\n\r\n\t\tvar ariaAttr;\r\n\r\n\t\tfor (var i = 0; i < icons.length; i++) {\r\n\t\t\tconst currentIcon = icons[i];\r\n\t\t\tariaAttr = this._waiAria.eventMenuAttrString(currentIcon);\r\n\t\t\ticons_str += `<div class='dhx_menu_icon ${currentIcon}' title='${this.locale.labels[currentIcon]}' ${ariaAttr}></div>`;\r\n\t\t}\r\n\t\tvar obj = this._render_v_bar(ev, left - menu - 1, top, menu, null, \"\", \"<div class='dhx_menu_head'></div>\", icons_str, true);\r\n\r\n\t\tif(ev.color){\r\n\t\t\tobj.style.setProperty(\"--dhx-scheduler-event-background\", ev.color);\r\n\t\t}\r\n\t\tif(ev.textColor){\r\n\t\t\tobj.style.setProperty(\"--dhx-scheduler-event-color\", ev.textColor);\r\n\t\t}\r\n\r\n\t\t//obj.style.left = left - menu + 1;\r\n\t\tthis._els[\"dhx_cal_data\"][0].appendChild(obj);\r\n\t\tthis._rendered.push(obj);\r\n\t}\r\n\tif(this.config.drag_highlight && this._drag_id == ev.id){\r\n\t\tthis.highlightEventPosition(ev);\r\n\t}\r\n};\r\nscheduler._render_v_bar = function (ev, x, y, w, h, style, contentA, contentB, bottom) {\r\n\tvar d = document.createElement(\"div\");\r\n\tvar id = ev.id;\r\n\tvar cs = (bottom) ? \"dhx_cal_event dhx_cal_select_menu\" : \"dhx_cal_event\";\r\n\r\n\tvar state = scheduler.getState();\r\n\tif(state.drag_id == ev.id){\r\n\t\tcs += \" dhx_cal_event_drag\";\r\n\t}\r\n\r\n\tif(state.select_id == ev.id){\r\n\t\tcs += \" dhx_cal_event_selected\";\r\n\t}\r\n\r\n\tvar cse = scheduler.templates.event_class(ev.start_date, ev.end_date, ev);\r\n\tif (cse) cs = cs + \" \" + cse;\r\n\r\n\tif(this.config.cascade_event_display) {\r\n\t\tcs += \" dhx_cal_event_cascade\";\r\n\t}\r\n\r\n\tvar boxWidth = w - 1;\r\n\r\n\tvar html = '<div event_id=\"' + id + '\" ' + this.config.event_attribute + '=\"' + id + '\" class=\"' + cs +\r\n\t\t\t\t'\" style=\"position:absolute; top:' + y + 'px; ' +\r\n\t\t\t\t((this.config.rtl) ? 'right:':'left:') + x + 'px; width:' + boxWidth + 'px; height:' + h + 'px;' +\r\n\t\t\t\t(style || \"\") + '\"></div>';\r\n\td.innerHTML = html;\r\n\r\n\tvar container = d.cloneNode(true).firstChild;\r\n\r\n\tif (!bottom && scheduler.renderEvent(container, ev, w, h, contentA, contentB)) {\r\n\t\tif(ev.color){\r\n\t\t\tcontainer.style.setProperty(\"--dhx-scheduler-event-background\", ev.color);\r\n\t\t}\r\n\t\tif(ev.textColor){\r\n\t\t\tcontainer.style.setProperty(\"--dhx-scheduler-event-color\", ev.textColor);\r\n\t\t}\r\n\r\n\t\treturn container;\r\n\t} else {\r\n\t\tcontainer = d.firstChild;\r\n\t\tif(ev.color){\r\n\t\t\tcontainer.style.setProperty(\"--dhx-scheduler-event-background\", ev.color);\r\n\t\t}\r\n\t\tif(ev.textColor){\r\n\t\t\tcontainer.style.setProperty(\"--dhx-scheduler-event-color\", ev.textColor);\r\n\t\t}\r\n\r\n\t\tvar inner_html = '<div class=\"dhx_event_move dhx_header\" >&nbsp;</div>';\r\n\t\tinner_html += '<div class=\"dhx_event_move dhx_title\">' + contentA + '</div>';\r\n\t\tinner_html += '<div class=\"dhx_body\">' + contentB + '</div>'; // +2 css specific, moved from render_event\r\n\r\n\t\tvar footer_class = \"dhx_event_resize dhx_footer\";\r\n\t\tif (bottom || ev._drag_resize === false)\r\n\t\t\tfooter_class = \"dhx_resize_denied \" + footer_class;\r\n\r\n\t\tinner_html += '<div class=\"' + footer_class + '\" style=\" width:' + (bottom ? ' margin-top:-1px;' : '') + '\" ></div>';\r\n\r\n\t\tcontainer.innerHTML = inner_html;\r\n\t}\r\n\r\n\treturn container;\r\n};\r\nscheduler.renderEvent = function(){\r\n\treturn false;\r\n};\r\nscheduler.locate_holder = function(day) {\r\n\tif (this._mode == \"day\") return this._els[\"dhx_cal_data\"][0].firstChild; //dirty\r\n\treturn this._els[\"dhx_cal_data\"][0].childNodes[day];\r\n};\r\nscheduler.locate_holder_day = function(date, past) {\r\n\tvar day = Math.floor((this._correct_shift(date, 1) - this._min_date) / (60 * 60 * 24 * 1000));\r\n\t//when locating end data of event , we need to use next day if time part was defined\r\n\tif (past && this.date.time_part(date)) day++;\r\n\treturn day;\r\n};\r\n\r\n\r\n\r\nscheduler._get_dnd_order = function(order, ev_height, max_height){\r\n\tif(!this._drag_event)\r\n\t\treturn order;\r\n\tif(!this._drag_event._orig_sorder)\r\n\t\tthis._drag_event._orig_sorder = order;\r\n\telse\r\n\t\torder = this._drag_event._orig_sorder;\r\n\r\n\tvar evTop = ev_height * order;\r\n\twhile((evTop + ev_height) > max_height){\r\n\t\torder--;\r\n\t\tevTop -= ev_height;\r\n\t}\r\n\torder = Math.max(order, 0);\r\n\treturn order;\r\n};\r\n//scheduler._get_event_bar_pos = function(sday, eday, week, drag){\r\nscheduler._get_event_bar_pos = function(ev){\r\n\tvar rtl = this.config.rtl;\r\n\tvar columns = this._colsS;\r\n\tvar x = columns[ev._sday];\r\n\tvar x2 = columns[ev._eday];\r\n\tif (rtl) {\r\n\t\tx = columns[columns.col_length] - columns[ev._eday] + columns[0];\r\n\t\tx2 = columns[columns.col_length] - columns[ev._sday] + columns[0];\r\n\t}\r\n\r\n\tif (x2 == x) x2 = columns[ev._eday + 1];\r\n\tvar hb = this.xy.bar_height;\r\n\r\n\tvar order = ev._sorder;\r\n\tif(ev.id == this._drag_id){\r\n\t\tvar cellHeight = columns.heights[ev._sweek + 1] - columns.heights[ev._sweek]- this.xy.month_head_height;//22 for month head height\r\n\t\torder = scheduler._get_dnd_order(order, hb, cellHeight);\r\n\t}\r\n\tvar y_event_offset =  order * hb;\r\n\tvar y = columns.heights[ev._sweek] + (columns.height ? (this.xy.month_scale_height + 2) : 2 ) + y_event_offset;\r\n\treturn {x:x, x2:x2, y:y};\r\n};\r\n\r\nscheduler.render_event_bar = function (ev) {\r\n\tvar parent = this._rendered_location;\r\n\tvar pos = this._get_event_bar_pos(ev);\r\n\tvar y = pos.y;\r\n\tvar x = pos.x;\r\n\tvar x2 = pos.x2;\r\n\t// resize for month mutliday events\r\n\tvar resize_handle = \"\";\r\n\r\n\t//events in ignored dates\r\n\r\n\tif (!x2) return;\r\n\r\n\tvar resizable = scheduler.config.resize_month_events && this._mode == \"month\" &&\r\n\t\t(!ev._timed || scheduler.config.resize_month_timed);\r\n\r\n\tvar d = document.createElement(\"div\");\r\n\tvar left_chunk = (ev.hasOwnProperty(\"_first_chunk\") && ev._first_chunk),\r\n\t\tright_chunk = (ev.hasOwnProperty(\"_last_chunk\") && ev._last_chunk);\r\n\r\n\tvar resize_left = resizable && (ev._timed || left_chunk);\r\n\tvar resize_right = resizable && (ev._timed || right_chunk);\r\n\r\n\tvar timed = true;\r\n\tvar cs = \"dhx_cal_event_clear\";\r\n\tif (!ev._timed || resizable) {\r\n\t\ttimed = false;\r\n\t\tcs = \"dhx_cal_event_line\";\r\n\t}\r\n\tif(left_chunk){\r\n\t\tcs += \" dhx_cal_event_line_start\";\r\n\t}\r\n\tif(right_chunk){\r\n\t\tcs += \" dhx_cal_event_line_end\";\r\n\t}\r\n\tif(resize_left){\r\n\t\tresize_handle += \"<div class='dhx_event_resize dhx_event_resize_start'></div>\";\r\n\t}\r\n\tif(resize_right){\r\n\t\tresize_handle += \"<div class='dhx_event_resize dhx_event_resize_end'></div>\";\r\n\t}\r\n\r\n\tvar cse = scheduler.templates.event_class(ev.start_date, ev.end_date, ev);\r\n\tif (cse){\r\n\t\tcs += \" \" + cse;\r\n\t}\r\n\r\n\tvar bg_color = (ev.color ? (\"--dhx-scheduler-event-background:\" + ev.color + \";\") : \"\");\r\n\tvar color = (ev.textColor ? (\"--dhx-scheduler-event-color:\" + ev.textColor + \";\") : \"\");\r\n\r\n\tvar style_text = [\r\n\t\t\"position:absolute\",\r\n\t\t\"top:\" + y + \"px\",\r\n\t\t\"left:\" + x + \"px\",\r\n\t\t\"width:\" + (x2 - x - (timed ? 1 : 0)) + \"px\",\r\n\t\t\"height:\" + (this.xy.bar_height - 2) + \"px\",\r\n\t\tcolor,\r\n\t\tbg_color,\r\n\t\t(ev._text_style || \"\")\r\n\t].join(\";\");\r\n\r\n\tvar html = \"<div event_id='\" + ev.id + \"' \" + this.config.event_attribute + \"='\" + ev.id + \"' class='\"+ cs + \"' style='\"+style_text+\"'\"+this._waiAria.eventBarAttrString(ev)+\">\";\r\n\tif (resizable) {\r\n\t\thtml += resize_handle;\r\n\t}\r\n\tif(scheduler.getState().mode == \"month\"){\r\n\t\tev = scheduler.getEvent(ev.id); // ev at this point could be a part (row in a month view) of a larger event\r\n\t}\r\n\r\n\tif (ev._timed){\r\n\t\thtml += `<span class='dhx_cal_event_clear_date'>${scheduler.templates.event_bar_date(ev.start_date, ev.end_date, ev)}</span>`;\r\n\t}\r\n\r\n\thtml += \"<div class='dhx_cal_event_line_content'>\";\r\n\thtml += scheduler.templates.event_bar_text(ev.start_date, ev.end_date, ev) + '</div>';\r\n\thtml += \"</div>\";\r\n\thtml += '</div>';\r\n\r\n\td.innerHTML = html;\r\n\r\n\tthis._rendered.push(d.firstChild);\r\n\tparent.appendChild(d.firstChild);\r\n};\r\n\r\nscheduler._locate_event = function(node) {\r\n\tvar id = null;\r\n\twhile (node && !id && node.getAttribute) {\r\n\t\tid = node.getAttribute(this.config.event_attribute);\r\n\t\tnode = node.parentNode;\r\n\t}\r\n\treturn id;\r\n};\r\n\r\nscheduler.edit = function(id) {\r\n\tif (this._edit_id == id) return;\r\n\tthis.editStop(false, id);\r\n\tthis._edit_id = id;\r\n\tthis.updateEvent(id);\r\n};\r\nscheduler.editStop = function(mode, id) {\r\n\tif (id && this._edit_id == id) return;\r\n\tvar ev = this.getEvent(this._edit_id);\r\n\tif (ev) {\r\n\t\tif (mode) ev.text = this._editor.value;\r\n\t\tthis._edit_id = null;\r\n\t\tthis._editor = null;\r\n\t\tthis.updateEvent(ev.id);\r\n\t\tthis._edit_stop_event(ev, mode);\r\n\t}\r\n};\r\nscheduler._edit_stop_event = function(ev, mode) {\r\n\tif (this._new_event) {\r\n\t\tif (!mode) {\r\n\t\t\tif (ev) // in case of custom lightbox user can already delete event\r\n\t\t\t\tthis.deleteEvent(ev.id, true);\r\n\t\t} else {\r\n\t\t\tthis.callEvent(\"onEventAdded\", [ev.id, ev]);\r\n\t\t}\r\n\t\tthis._new_event = null;\r\n\t} else {\r\n\t\tif (mode){\r\n\t\t\tthis.callEvent(\"onEventChanged\", [ev.id, ev]);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nscheduler.getEvents = function(from, to) {\r\n\tvar result = [];\r\n\tfor (var a in this._events) {\r\n\t\tvar ev = this._events[a];\r\n\t\tif (ev && ( (!from && !to) || (ev.start_date < to && ev.end_date > from) ))\r\n\t\t\tresult.push(ev);\r\n\t}\r\n\treturn result;\r\n};\r\nscheduler.getRenderedEvent = function(id) {\r\n\tif (!id)\r\n\t\treturn;\r\n\tvar rendered_events = scheduler._rendered;\r\n\tfor (var i=0; i<rendered_events.length; i++) {\r\n\t\tvar rendered_event = rendered_events[i];\r\n\t\tif (rendered_event.getAttribute(scheduler.config.event_attribute) == id) {\r\n\t\t\treturn rendered_event;\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\nscheduler.showEvent = function(id, mode) {\r\n\tvar section;\r\n\tif(id && typeof id === \"object\"){\r\n\t\tmode = id.mode;\r\n\t\tsection = id.section;\r\n\t\tid = id.section;\r\n\t}\r\n\tvar ev = (typeof id == \"number\" || typeof id == \"string\") ? scheduler.getEvent(id) : id;\r\n\tmode = mode||scheduler._mode;\r\n\r\n\tif (!ev || (this.checkEvent(\"onBeforeEventDisplay\") && !this.callEvent(\"onBeforeEventDisplay\", [ev, mode])))\r\n\t\treturn;\r\n\r\n\tvar scroll_hour = scheduler.config.scroll_hour;\r\n\tscheduler.config.scroll_hour = ev.start_date.getHours();\r\n\tvar preserve_scroll = scheduler.config.preserve_scroll;\r\n\tscheduler.config.preserve_scroll = false;\r\n\r\n\tvar original_color = ev.color;\r\n\tvar original_text_color = ev.textColor;\r\n\tif (scheduler.config.highlight_displayed_event) {\r\n\t\tev.color = scheduler.config.displayed_event_color;\r\n\t\tev.textColor = scheduler.config.displayed_event_text_color;\r\n\t}\r\n\r\n\tscheduler.setCurrentView(new Date(ev.start_date), mode);\r\n\r\n\tfunction restoreOriginalColors(){\r\n\t\tev.color = original_color;\r\n\t\tev.textColor = original_text_color;\r\n\t}\r\n\r\n\tscheduler.config.scroll_hour = scroll_hour;\r\n\tscheduler.config.preserve_scroll = preserve_scroll;\r\n\r\n\tif (scheduler.matrix && scheduler.matrix[mode]) {\r\n\t\tvar timeline = scheduler.getView();\r\n\t\tvar property = timeline.y_property;\r\n\r\n\t\tvar event = scheduler.getEvent(ev.id);\r\n\r\n\t\tif(event){\r\n\t\t\tif(!section){\r\n\t\t\t\tvar section = event[property];\r\n\t\t\t\tif(Array.isArray(section)){\r\n\t\t\t\t\tsection = section[0];\r\n\t\t\t\t}else if(typeof section === \"string\" && scheduler.config.section_delimiter && section.indexOf(scheduler.config.section_delimiter) > -1){\r\n\t\t\t\t\tsection = section.split(scheduler.config.section_delimiter)[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar top = timeline.getSectionTop(section);\r\n\t\t\tvar left = timeline.posFromDate(event.start_date);\r\n\t\t\tvar container = scheduler.$container.querySelector(\".dhx_timeline_data_wrapper\");\r\n\t\t\tleft = left - (container.offsetWidth - timeline.dx) / 2;\r\n\t\t\ttop = top - container.offsetHeight / 2 + timeline.dy/2;\r\n\r\n\t\t\tif (timeline._smartRenderingEnabled()) {\r\n\t\t\t\tvar handlerId = timeline.attachEvent(\"onScroll\", function(){\r\n\t\t\t\t\trestoreOriginalColors();\r\n\t\t\t\t\ttimeline.detachEvent(handlerId);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\ttimeline.scrollTo({\r\n\t\t\t\tleft: left,\r\n\t\t\t\ttop: top\r\n\t\t\t});\r\n\t\t\tif (!timeline._smartRenderingEnabled()) {\r\n\t\t\t\trestoreOriginalColors();\r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\trestoreOriginalColors();\r\n\t}\r\n\r\n\tscheduler.callEvent(\"onAfterEventDisplay\", [ev, mode]);\r\n};\r\n\r\n\r\n}","export default function extend(scheduler) {\r\n\r\n\r\nscheduler._append_drag_marker = function(m){\r\n\tif(m.parentNode) return;\r\n\tvar zone = scheduler._els[\"dhx_cal_data\"][0];\r\n\r\n\tvar scale = zone.lastChild;\r\n\tvar className = scheduler._getClassName(scale);\r\n\tif(className.indexOf(\"dhx_scale_holder\") < 0 && scale.previousSibling){\r\n\t\tscale = scale.previousSibling;\r\n\t}\r\n\r\n\tclassName = scheduler._getClassName(scale);\r\n\tif (scale && className.indexOf(\"dhx_scale_holder\") === 0) {\r\n\t\tscale.appendChild(m);\r\n\t}\r\n};\r\n\r\nscheduler._update_marker_position = function(m, event){\r\n\tvar size = scheduler._calc_event_y(event, 0);\r\n\tm.style.top = size.top + \"px\";\r\n\tm.style.height = size.height + \"px\";\r\n};\r\n\r\nscheduler.highlightEventPosition = function(event){\r\n\tvar m = document.createElement(\"div\");\r\n\r\n\tm.setAttribute(\"event_id\", event.id); // for backward compatibility\r\n\tm.setAttribute(this.config.event_attribute, event.id);\r\n\tthis._rendered.push(m);\r\n\tthis._update_marker_position(m, event);\r\n\r\n\tvar css = this.templates.drag_marker_class(event.start_date, event.end_date, event);\r\n\tvar html = this.templates.drag_marker_content(event.start_date, event.end_date, event);\r\n\tm.className = \"dhx_drag_marker\";\r\n\tif(css)\r\n\t\tm.className += \" \" + css;\r\n\tif(html)\r\n\t\tm.innerHTML = html;\r\n\tthis._append_drag_marker(m);\r\n};\r\n\r\n}","export default function extend(scheduler) {\r\n\r\nscheduler._lightbox_controls = {};\r\nscheduler.formSection = function(name){\r\n\tvar config = this.config.lightbox.sections;\r\n\tvar i = 0;\r\n\tfor (i; i < config.length; i++) {\r\n\t\tif (config[i].name == name) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tif (i === config.length) {\r\n\t\t// GS-1662 section not found, should exit here instead of throwing an error\r\n\t\treturn null;\r\n\t}\r\n\r\n\tvar section = config[i];\r\n\tif (!scheduler._lightbox) {\r\n\t\tscheduler.getLightbox();\r\n\t}\r\n\tvar header = scheduler._lightbox.querySelector(`#${section.id}`);\r\n\tvar node = header.nextSibling;\r\n\r\n\tvar result = {\r\n\t\tsection: section,\r\n\t\theader: header,\r\n\t\tnode: node,\r\n\t\tgetValue:function(ev){\r\n\t\t\treturn scheduler.form_blocks[section.type].get_value(node, (ev||{}), section);\r\n\t\t},\r\n\t\tsetValue:function(value, ev){\r\n\t\t\treturn scheduler.form_blocks[section.type].set_value(node, value, (ev||{}), section);\r\n\t\t}\r\n\t};\r\n\r\n\tvar handler = scheduler._lightbox_controls[\"get_\"+section.type+\"_control\"];\r\n\treturn handler?handler(result):result;\r\n};\r\nscheduler._lightbox_controls.get_template_control = function(result) {\r\n\tresult.control = result.node;\r\n\treturn result;\r\n};\r\nscheduler._lightbox_controls.get_select_control = function(result) {\r\n\tresult.control = result.node.getElementsByTagName('select')[0];\r\n\treturn result;\r\n};\r\nscheduler._lightbox_controls.get_textarea_control = function(result) {\r\n\tresult.control = result.node.getElementsByTagName('textarea')[0];\r\n\treturn result;\r\n};\r\nscheduler._lightbox_controls.get_time_control = function(result) {\r\n\tresult.control = result.node.getElementsByTagName('select'); // array\r\n\treturn result;\r\n};\r\n\r\nscheduler._lightbox_controls.defaults = {\r\n\ttemplate: {\r\n\t\theight:30\r\n\t},\r\n\ttextarea: {\r\n\t\theight: 200\r\n\t},\r\n\tselect: {\r\n\t\theight: 23\r\n\t},\r\n\ttime: {\r\n\t\theight: 20\r\n\t}\r\n};\r\n\r\n\r\nscheduler.form_blocks={\r\n\ttemplate:{\r\n\t\trender: function(sns){\r\n\t\t\treturn \"<div class='dhx_cal_ltext dhx_cal_template' ></div>\";\r\n\t\t},\r\n\t\tset_value:function(node,value,ev,config){\r\n\t\t\tnode.innerHTML = value||\"\";\r\n\t\t},\r\n\t\tget_value:function(node,ev,config){\r\n\t\t\treturn node.innerHTML||\"\";\r\n\t\t},\r\n\t\tfocus: function(node){\r\n\t\t}\r\n\t},\r\n\ttextarea:{\r\n\t\trender:function(sns){\r\n\t\t\tconst placeholder = sns.placeholder ? `placeholder='${sns.placeholder}'` : \"\";\r\n\t\t\treturn `<div class='dhx_cal_ltext'><textarea ${placeholder}></textarea></div>`;\r\n\t\t},\r\n\t\tset_value:function(node,value,ev){\r\n\t\t\tscheduler.form_blocks.textarea._get_input(node).value=value||\"\";\r\n\t\t},\r\n\t\tget_value:function(node,ev){\r\n\t\t\treturn scheduler.form_blocks.textarea._get_input(node).value;\r\n\t\t},\r\n\t\tfocus:function(node){\r\n\t\t\tvar a = scheduler.form_blocks.textarea._get_input(node);\r\n\t\t\tscheduler._focus(a, true);\r\n\t\t},\r\n\t\t_get_input: function(node){\r\n\t\t\treturn node.getElementsByTagName(\"textarea\")[0];\r\n\t\t}\r\n\t},\r\n\tselect:{\r\n\t\trender:function(sns){\r\n\t\t\t//var defaults = scheduler._lightbox_controls.defaults.select;\r\n\t\t\tvar html=\"<div class='dhx_cal_ltext dhx_cal_select'><select style='width:100%;'>\";\r\n\t\t\tfor (var i=0; i < sns.options.length; i++)\r\n\t\t\t\thtml+=\"<option value='\"+sns.options[i].key+\"'>\"+sns.options[i].label+\"</option>\";\r\n\t\t\thtml+=\"</select></div>\";\r\n\t\t\treturn html;\r\n\t\t},\r\n\t\tset_value:function(node,value,ev,sns){\r\n\t\t\tvar select = node.firstChild;\r\n\t\t\tif (!select._dhx_onchange && sns.onchange) {\r\n\t\t\t\tscheduler.event(select, \"change\", sns.onchange);\r\n\t\t\t\tselect._dhx_onchange = true;\r\n\t\t\t}\r\n\t\t\tif (typeof value == \"undefined\")\r\n\t\t\t\tvalue = (select.options[0]||{}).value;\r\n\t\t\tselect.value=value||\"\";\r\n\t\t},\r\n\t\tget_value:function(node,ev){\r\n\t\t\treturn node.firstChild.value;\r\n\t\t},\r\n\t\tfocus:function(node){\r\n\t\t\tvar a=node.firstChild; scheduler._focus(a, true);\r\n\t\t}\r\n\t},\r\n\ttime:{\r\n\t\trender:function(sns) {\r\n\t\t\tif (!sns.time_format) {\r\n\t\t\t\t// default order\r\n\t\t\t\tsns.time_format = [\"%H:%i\", \"%d\", \"%m\", \"%Y\"];\r\n\t\t\t}\r\n\t\t\t// map: default order => real one\r\n\t\t\tsns._time_format_order = {};\r\n\t\t\tvar time_format = sns.time_format;\r\n\r\n\t\t\tvar cfg = scheduler.config;\r\n\t\t\tvar dt = scheduler.date.date_part(scheduler._currentDate());\r\n\t\t\tvar last = 24*60, first = 0;\r\n\t\t\tif(scheduler.config.limit_time_select){\r\n\t\t\t\tlast = 60*cfg.last_hour+1;\r\n\t\t\t\tfirst = 60*cfg.first_hour;\r\n\t\t\t\tdt.setHours(cfg.first_hour);\r\n\t\t\t}\r\n\t\t\tvar html = \"\";\r\n\r\n\t\t\tfor (var p = 0; p < time_format.length; p++) {\r\n\t\t\t\tvar time_option = time_format[p];\r\n\r\n\t\t\t\t// adding spaces between selects\r\n\t\t\t\tif (p > 0) {\r\n\t\t\t\t\thtml += \" \";\r\n\t\t\t\t}\r\n\t\t\t\tvar selectBoxClass = \"\";\r\n\t\t\t\tvar options = \"\";\r\n\t\t\t\tswitch (time_option) {\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\tselectBoxClass = \"dhx_lightbox_year_select\";\r\n\t\t\t\t\t\tsns._time_format_order[3] = p;\r\n\t\t\t\t\t\t//year\r\n\t\t\t\t\t\tvar range;\r\n\t\t\t\t\t\tvar start_year;\r\n\t\t\t\t\t\tvar end_year;\r\n\t\t\t\t\t\tif(sns.year_range){\r\n\t\t\t\t\t\t\tif (!isNaN(sns.year_range)) {\r\n\t\t\t\t\t\t\t\trange = sns.year_range;\r\n\t\t\t\t\t\t\t} else if (sns.year_range.push) {\r\n\t\t\t\t\t\t\t\t// if\r\n\t\t\t\t\t\t\t\tstart_year = sns.year_range[0];\r\n\t\t\t\t\t\t\t\tend_year = sns.year_range[1];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\trange = range || 10;\r\n\t\t\t\t\t\tvar offset = offset || Math.floor(range / 2);\r\n\t\t\t\t\t\tstart_year = start_year || dt.getFullYear() - offset;\r\n\t\t\t\t\t\tend_year = end_year || start_year + range;\r\n\r\n\t\t\t\t\t\tfor (var i = start_year; i < end_year; i++)\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + (i) + \"'>\" + (i) + \"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\tselectBoxClass = \"dhx_lightbox_month_select\";\r\n\t\t\t\t\t\tsns._time_format_order[2] = p;\r\n\t\t\t\t\t\t//month\r\n\t\t\t\t\t\tfor (var i=0; i < 12; i++)\r\n\t\t\t\t\t\t\toptions+=\"<option value='\"+i+\"'>\"+this.locale.date.month_full[i]+\"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\tselectBoxClass = \"dhx_lightbox_day_select\";\r\n\t\t\t\t\t\tsns._time_format_order[1] = p;\r\n\t\t\t\t\t\t//days\r\n\t\t\t\t\t\tfor (var i=1; i < 32; i++)\r\n\t\t\t\t\t\t\toptions+=\"<option value='\"+i+\"'>\"+i+\"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\t\tselectBoxClass = \"dhx_lightbox_time_select\";\r\n\t\t\t\t\t\tsns._time_format_order[0] = p;\r\n\t\t\t\t\t\t//hours\r\n\t\t\t\t\t\tvar i = first;\r\n\t\t\t\t\t\tvar tdate = dt.getDate();\r\n\t\t\t\t\t\tsns._time_values = [];\r\n\r\n\t\t\t\t\t\twhile(i<last){\r\n\t\t\t\t\t\t\tvar time=this.templates.time_picker(dt);\r\n\t\t\t\t\t\t\toptions+=\"<option value='\"+i+\"'>\"+time+\"</option>\";\r\n\t\t\t\t\t\t\tsns._time_values.push(i);\r\n\t\t\t\t\t\t\tdt.setTime(dt.valueOf()+this.config.time_step*60*1000);\r\n\t\t\t\t\t\t\tvar diff = (dt.getDate()!=tdate)?1:0; // moved or not to the next day\r\n\t\t\t\t\t\t\ti=diff*24*60+dt.getHours()*60+dt.getMinutes();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(options){\r\n\r\n\t\t\t\t\tvar ariaAttrs = scheduler._waiAria.lightboxSelectAttrString(time_option);\r\n\t\t\t\t\tvar readonly = sns.readonly ? \"disabled='disabled'\" : \"\";\r\n\t\t\t\t\thtml += \"<select class='\"+selectBoxClass+\"' \"+readonly + ariaAttrs+\">\"+options+\"</select> \";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//var defaults = scheduler._lightbox_controls.defaults.select;\r\n\r\n\t\t\treturn \"<div class='dhx_section_time'>\"+html+\"<span style='font-weight:normal; font-size:10pt;' class='dhx_section_time_spacer'> &nbsp;&ndash;&nbsp; </span>\"+html+\"</div>\";\r\n\t\t},\r\n\t\tset_value:function(node,value,ev,config){\r\n\t\t\tvar cfg = scheduler.config;\r\n\t\t\tvar s=node.getElementsByTagName(\"select\");\r\n\t\t\tvar map = config._time_format_order;\r\n\t\t\tvar start_date, end_date;\r\n\r\n\t\t\tif(cfg.full_day) {\r\n\t\t\t\tif (!node._full_day){\r\n\t\t\t\t\tvar html = \"<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> \"+scheduler.locale.labels.full_day+\"&nbsp;</label></input>\";\r\n\t\t\t\t\tif (!scheduler.config.wide_form)\r\n\t\t\t\t\t\thtml = node.previousSibling.innerHTML+html;\r\n\t\t\t\t\tnode.previousSibling.innerHTML=html;\r\n\t\t\t\t\tnode._full_day=true;\r\n\t\t\t\t}\r\n\t\t\t\tvar input=node.previousSibling.getElementsByTagName(\"input\")[0];\r\n\t\t\t\tinput.checked = (scheduler.date.time_part(ev.start_date)===0 && scheduler.date.time_part(ev.end_date)===0);\r\n\r\n\t\t\t\ts[map[0]].disabled=input.checked;\r\n\t\t\t\ts[ map[0] + s.length/2 ].disabled=input.checked;\r\n\r\n\t\t\t\tif(!input.$_eventAttached){\r\n\t\t\t\t\tinput.$_eventAttached = true;\r\n\r\n\t\t\t\t\t\tscheduler.event(input, \"click\", function(){\r\n\t\t\t\t\t\tif(input.checked) {\r\n\t\t\t\t\t\t\tvar obj = {};\r\n\t\t\t\t\t\t\tscheduler.form_blocks.time.get_value(node,obj,config);\r\n\r\n\t\t\t\t\t\t\tstart_date = scheduler.date.date_part(obj.start_date);\r\n\t\t\t\t\t\t\tend_date = scheduler.date.date_part(obj.end_date);\r\n\r\n\t\t\t\t\t\t\tif (+end_date == +start_date || (+end_date >= +start_date && (ev.end_date.getHours() !== 0 || ev.end_date.getMinutes() !== 0)))\r\n\t\t\t\t\t\t\t\tend_date = scheduler.date.add(end_date, 1, \"day\");\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tstart_date = null;\r\n\t\t\t\t\t\t\tend_date = null;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ts[map[0]].disabled=input.checked;\r\n\t\t\t\t\t\ts[ map[0] + s.length/2 ].disabled=input.checked;\r\n\r\n\t\t\t\t\t\t_fill_lightbox_select(s,0,start_date||ev.start_date);\r\n\t\t\t\t\t\t_fill_lightbox_select(s,4,end_date||ev.end_date);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(cfg.auto_end_date && cfg.event_duration) {\r\n\t\t\t\tvar _update_lightbox_select = function () {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!(cfg.auto_end_date && cfg.event_duration)){\r\n\t\t\t\t\t\t// setting may be disabled after the handler is attached\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstart_date = new Date(s[map[3]].value,s[map[2]].value,s[map[1]].value,0,s[map[0]].value);\r\n\t\t\t\t\tend_date = new Date(start_date.getTime() + (scheduler.config.event_duration * 60 * 1000));\r\n\t\t\t\t\t_fill_lightbox_select(s, 4, end_date);\r\n\t\t\t\t};\r\n\t\t\t\tfor(var i=0; i<4; i++) {\r\n\t\t\t\t\tif(!s[i].$_eventAttached) {\r\n\t\t\t\t\t\ts[i].$_eventAttached = true;\r\n\t\t\t\t\t\tscheduler.event(s[i], \"change\", _update_lightbox_select);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction _fill_lightbox_select(s,i,d) {\r\n\t\t\t\tvar time_values = config._time_values;\r\n\t\t\t\tvar direct_value = d.getHours()*60+d.getMinutes();\r\n\t\t\t\tvar fixed_value = direct_value;\r\n\t\t\t\tvar value_found = false;\r\n\t\t\t\tfor (var k=0; k<time_values.length; k++) {\r\n\t\t\t\t\tvar t_v = time_values[k];\r\n\t\t\t\t\tif (t_v === direct_value) {\r\n\t\t\t\t\t\tvalue_found = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (t_v < direct_value)\r\n\t\t\t\t\t\tfixed_value = t_v;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ts[i+map[0]].value=(value_found)?direct_value:fixed_value;\r\n\t\t\t\tif(!(value_found || fixed_value)){\r\n\t\t\t\t\ts[i+map[0]].selectedIndex = -1;//show empty select in FF\r\n\t\t\t\t}\r\n\t\t\t\ts[i+map[1]].value=d.getDate();\r\n\t\t\t\ts[i+map[2]].value=d.getMonth();\r\n\t\t\t\ts[i+map[3]].value=d.getFullYear();\r\n\t\t\t}\r\n\r\n\t\t\t_fill_lightbox_select(s,0,ev.start_date);\r\n\t\t\t_fill_lightbox_select(s,4,ev.end_date);\r\n\t\t},\r\n\t\tget_value:function(node, ev, config) {\r\n\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\t\tvar map = config._time_format_order;\r\n\r\n\t\t\tev.start_date=new Date(s[map[3]].value,s[map[2]].value,s[map[1]].value,0,s[map[0]].value);\r\n\t\t\tev.end_date=new Date(s[map[3]+4].value,s[map[2]+4].value,s[map[1]+4].value,0,s[map[0]+4].value);\r\n\r\n\t\t\tif(!(s[map[3]].value && s[map[3]+4].value)){\r\n\t\t\t\t// use the previous date if start/end years are empty (outside lightbox range)\r\n\t\t\t\tvar original = scheduler.getEvent(scheduler._lightbox_id);\r\n\t\t\t\tif(original){\r\n\t\t\t\t\tev.start_date = original.start_date;\r\n\t\t\t\t\tev.end_date = original.end_date;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (ev.end_date<=ev.start_date)\r\n\t\t\t\tev.end_date=scheduler.date.add(ev.start_date,scheduler.config.time_step,\"minute\");\r\n\t\t\treturn {\r\n\t\t\t\tstart_date: new Date(ev.start_date),\r\n\t\t\t\tend_date: new Date(ev.end_date)\r\n\t\t\t};\r\n\t\t},\r\n\t\tfocus:function(node){\r\n\t\t\tscheduler._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t\t}\r\n\t}\r\n\r\n};\r\n\r\n\t// GS-2214. Attaching the lightbox to the BODY element is not considered secure.\r\n\t// Attach it to Scheduler container for Salesforce and other secure environments\r\n\tfunction getLightboxRoot(){\r\n\t\tconst cspEnvironment = scheduler.config.csp === true;\r\n\t\tconst salesforceEnvironment = !!window[\"Sfdc\"] || !!window[\"$A\"] || window[\"Aura\"] || ('$shadowResolver$' in document.body);\r\n\t\tif (cspEnvironment || salesforceEnvironment) {\r\n\t\t\treturn scheduler.$root;\r\n\t\t} else {\r\n\t\t\treturn document.body;\r\n\t\t}\r\n\t}\r\n\r\nscheduler._setLbPosition = function(box) {\r\n\tif(!box){\r\n\t\treturn;\r\n\t}\r\n\r\n\tbox.style.top = Math.max(getLightboxRoot().offsetHeight / 2 - box.offsetHeight/2, 0) + \"px\";\r\n\tbox.style.left = Math.max(getLightboxRoot().offsetWidth / 2 - box.offsetWidth/2, 0) + \"px\";\r\n\r\n};\r\n\r\nscheduler.showCover=function(box){\r\n\tif (box){\r\n\t\tbox.style.display=\"block\";\r\n\r\n\t\tthis._setLbPosition(box);\r\n\t}\r\n\tif(scheduler.config.responsive_lightbox){\r\n\t\tdocument.documentElement.classList.add(\"dhx_cal_overflow_container\");\r\n\t\tgetLightboxRoot().classList.add(\"dhx_cal_overflow_container\");\r\n\t}\r\n\tthis.show_cover();\r\n\tthis._cover.style.display = \"\";\r\n};\r\nscheduler.showLightbox=function(id){\r\n\tif (!id) return;\r\n\tif (!this.callEvent(\"onBeforeLightbox\",[id])) {\r\n\t\tif (this._new_event)\r\n\t\t\tthis._new_event = null;\r\n\t\treturn;\r\n\t}\r\n\tthis.showCover(box);\r\n\tvar box = this.getLightbox();\r\n\tthis._setLbPosition(box);\r\n\tthis._fill_lightbox(id,box);\r\n\tthis._waiAria.lightboxVisibleAttr(box);\r\n\t\r\n\tthis.callEvent(\"onLightbox\",[id]);\r\n};\r\nscheduler._fill_lightbox = function(id, box) {\r\n\tvar ev = this.getEvent(id);\r\n\tvar s = box.getElementsByTagName(\"span\");\r\n\tvar lightboxHeader = [];\r\n\r\n\tif (scheduler.templates.lightbox_header) {\r\n\t\tlightboxHeader.push(\"\");\r\n\t\tvar headerContent = scheduler.templates.lightbox_header(ev.start_date, ev.end_date, ev);\r\n\t\tlightboxHeader.push(headerContent);\r\n\t\ts[1].innerHTML = \"\";\r\n\t\ts[2].innerHTML = headerContent;\r\n\t} else {\r\n\t\tvar headerDate = this.templates.event_header(ev.start_date, ev.end_date, ev);\r\n\t\tvar headerTitle = (this.templates.event_bar_text(ev.start_date, ev.end_date, ev) || \"\").substr(0, 70); //IE6 fix;\r\n\r\n\t\tlightboxHeader.push(headerDate);\r\n\t\tlightboxHeader.push(headerTitle);\r\n\t\ts[1].innerHTML = headerDate;\r\n\t\ts[2].innerHTML = headerTitle;\r\n\t}\r\n\r\n\tthis._waiAria.lightboxHeader(box,  lightboxHeader.join(\" \"));\r\n\r\n\tvar sns = this.config.lightbox.sections;\r\n\tfor (var i = 0; i < sns.length; i++) {\r\n\t\tvar current_sns = sns[i];\r\n\t\tvar node = scheduler._get_lightbox_section_node(current_sns);\r\n\t\tvar block = this.form_blocks[current_sns.type];\r\n\t\tvar value = (ev[current_sns.map_to] !== undefined) ? ev[current_sns.map_to] : current_sns.default_value;\r\n\t\tblock.set_value.call(this, node, value, ev, current_sns);\r\n\t\tif (sns[i].focus)\r\n\t\t\tblock.focus.call(this, node);\r\n\t}\r\n\r\n\tscheduler._lightbox_id = id;\r\n};\r\n\r\nscheduler._get_lightbox_section_node = function(section){\r\n\treturn scheduler._lightbox.querySelector(`#${section.id}`).nextSibling;\r\n};\r\n\r\nscheduler._lightbox_out=function(ev){\r\n\tvar sns = this.config.lightbox.sections;\r\n\tfor (var i=0; i < sns.length; i++) {\r\n\t\tvar node = scheduler._lightbox.querySelector(`#${sns[i].id}`);\r\n\t\tnode=(node?node.nextSibling:node);\r\n\t\tvar block=this.form_blocks[sns[i].type];\r\n\t\tvar res=block.get_value.call(this,node,ev, sns[i]);\r\n\t\tif (sns[i].map_to!=\"auto\")\r\n\t\t\tev[sns[i].map_to]=res;\r\n\t}\r\n\treturn ev;\r\n};\r\nscheduler._empty_lightbox=function(data){\r\n\tvar id=scheduler._lightbox_id;\r\n\tvar ev=this.getEvent(id);\r\n\t//var box=this.getLightbox();\r\n\r\n\tthis._lame_copy(ev, data);\r\n\r\n\tthis.setEvent(ev.id,ev);\r\n\tthis._edit_stop_event(ev,true);\r\n\tthis.render_view_data();\r\n};\r\nscheduler.hide_lightbox=function(id){\r\n\tscheduler.endLightbox(false, this.getLightbox());\r\n};\r\n\r\nscheduler.hideCover=function(box){\r\n\tif (box) box.style.display=\"none\";\r\n\tthis.hide_cover();\r\n\tif(scheduler.config.responsive_lightbox){\r\n\t\tdocument.documentElement.classList.remove(\"dhx_cal_overflow_container\");\r\n\t\tgetLightboxRoot().classList.remove(\"dhx_cal_overflow_container\");\r\n\t}\r\n};\r\nscheduler.hide_cover=function(){\r\n\tif (this._cover)\r\n\t\tthis._cover.parentNode.removeChild(this._cover);\r\n\tthis._cover=null;\r\n};\r\n\r\nscheduler.show_cover=function(){\r\n\tif(this._cover) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tthis._cover=document.createElement(\"div\");\r\n\tthis._cover.className=\"dhx_cal_cover\";\r\n\tthis._cover.style.display = \"none\";\r\n\r\n\tscheduler.event(this._cover, \"mousemove\", scheduler._move_while_dnd);\r\n\tscheduler.event(this._cover, \"mouseup\", scheduler._finish_dnd);\r\n\r\n\tgetLightboxRoot().appendChild(this._cover);\r\n};\r\nscheduler.save_lightbox=function(){\r\n\tvar data = this._lightbox_out({}, this._lame_copy(this.getEvent(this._lightbox_id)));\r\n\tif (this.checkEvent(\"onEventSave\") && !this.callEvent(\"onEventSave\",[this._lightbox_id, data, this._new_event]))\r\n\t\treturn;\r\n\tthis._empty_lightbox(data);\r\n\tthis.hide_lightbox();\r\n};\r\nscheduler.startLightbox = function(id, box){\r\n\tthis._lightbox_id = id;\r\n\tthis._custom_lightbox = true;\r\n\r\n\tthis._temp_lightbox = this._lightbox;\r\n\tthis._lightbox = box;\r\n\tthis.showCover(box);\r\n};\r\nscheduler.endLightbox = function(mode, box){\r\n\tvar box = box || scheduler.getLightbox();\r\n\r\n\tvar event = scheduler.getEvent(this._lightbox_id);\r\n\tif(event)\r\n\t\tthis._edit_stop_event(event, mode);\r\n\tif (mode)\r\n\t\tscheduler.render_view_data();\r\n\tthis.hideCover(box);\r\n\r\n\tif (this._custom_lightbox){\r\n\t\tthis._lightbox = this._temp_lightbox;\r\n\t\tthis._custom_lightbox = false;\r\n\t}\r\n\tthis._temp_lightbox = this._lightbox_id = null; // in case of custom lightbox user only calls endLightbox so we need to reset _lightbox_id\r\n\tthis._waiAria.lightboxHiddenAttr(box);\r\n\tthis.resetLightbox();\r\n\tthis.callEvent(\"onAfterLightbox\",[]);\r\n};\r\nscheduler.resetLightbox = function(){\r\n\tif (scheduler._lightbox && !scheduler._custom_lightbox)\r\n\t\tscheduler._lightbox.parentNode.removeChild(scheduler._lightbox);\r\n\tscheduler._lightbox = null;\r\n};\r\nscheduler.cancel_lightbox=function(){\r\n\tif(this._lightbox_id){\r\n\t\tthis.callEvent(\"onEventCancel\",[this._lightbox_id, !!this._new_event]);\r\n\t}\r\n\r\n\tthis.hide_lightbox();\r\n};\r\nscheduler.hideLightbox = scheduler.cancel_lightbox;// GS-1650 need to use cancel in order to fire onEventCancel event, which is important to refresh the state of recurring series\r\n\r\nscheduler._init_lightbox_events=function(){\r\n\tif(this.getLightbox().$_eventAttached){\r\n\t\treturn;\t\r\n\t}\r\n\tconst lightbox = this.getLightbox();\r\n\tlightbox.$_eventAttached = true;\r\n\r\n\tscheduler.event(lightbox, \"click\", function(e){\r\n\r\n\t\tif(e.target.closest(\".dhx_cal_ltitle_close_btn\")){\r\n\t\t\tscheduler.cancel_lightbox();\r\n\t\t}\r\n\t\t\r\n\t\tconst buttonTarget = scheduler.$domHelpers.closest(e.target, \".dhx_btn_set\");\r\n\t\tif(!buttonTarget) {\r\n\t\t\tconst sectionButton = scheduler.$domHelpers.closest(e.target, \".dhx_custom_button[data-section-index]\");\r\n\t\t\tif(sectionButton){\r\n\t\t\t\tconst index = Number(sectionButton.getAttribute(\"data-section-index\"));\r\n\t\t\t\tconst block = scheduler.form_blocks[scheduler.config.lightbox.sections[index].type];\r\n\t\t\t\tblock.button_click(scheduler.$domHelpers.closest(sectionButton, \".dhx_cal_lsection\"), sectionButton, e);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tconst action = buttonTarget ? buttonTarget.getAttribute(\"data-action\") : null;\r\n\r\n\t\tswitch(action){\r\n\t\t\tcase \"dhx_save_btn\":\r\n\t\t\tcase \"save\":\r\n\t\t\t\tif(scheduler.config.readonly_active){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tscheduler.save_lightbox();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"dhx_delete_btn\":\r\n\t\t\tcase \"delete\":\r\n\t\t\t\tif(scheduler.config.readonly_active){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar c=scheduler.locale.labels.confirm_deleting;\r\n\r\n\t\t\t\tscheduler._dhtmlx_confirm({message: c, title: scheduler.locale.labels.title_confirm_deleting, callback: function(){\r\n\t\t\t\t\tscheduler.deleteEvent(scheduler._lightbox_id);\r\n\t\t\t\t\tscheduler._new_event = null; //clear flag, if it was unsaved event\r\n\t\t\t\t\tscheduler.hide_lightbox();\r\n\t\t\t\t},\r\n\t\t\t\tconfig: {ok: scheduler.locale.labels.icon_delete}});\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"dhx_cancel_btn\":\r\n\t\t\tcase \"cancel\":\r\n\t\t\t\tscheduler.cancel_lightbox();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tscheduler.callEvent(\"onLightboxButton\", [action, buttonTarget, e]);\r\n\t\t}\r\n\t});\r\n\tscheduler.event(lightbox, \"keydown\", function(e){\r\n\t\tvar event = e || window.event;\r\n\t\tvar target = e.target || e.srcElement;\r\n\t\tvar buttonTarget = target.querySelector(\"[dhx_button]\");\r\n\r\n\t\tif(!buttonTarget){\r\n\t\t\tbuttonTarget = target.parentNode.querySelector(\".dhx_custom_button, .dhx_readonly\");\r\n\t\t}\r\n\r\n\t\tswitch((e||event).keyCode){\r\n\t\t\tcase 32:{//space\r\n\t\t\t\tif ((e||event).shiftKey) return;\r\n\t\t\t\tif(buttonTarget && buttonTarget.click){\r\n\t\t\t\t\tbuttonTarget.click();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase scheduler.keys.edit_save:\r\n\t\t\t\tif ((e||event).shiftKey) return;\r\n\t\t\t\tif(buttonTarget && buttonTarget.click){\r\n\t\t\t\t\tbuttonTarget.click();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(scheduler.config.readonly_active){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tscheduler.save_lightbox();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase scheduler.keys.edit_cancel:\r\n\t\t\t\tscheduler.cancel_lightbox();\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t});\r\n};\r\nscheduler.setLightboxSize=function(){\r\n\treturn;\r\n/* TODO: inspect and remove in 7.0\r\n\tvar d = this._lightbox;\r\n\tif (!d) return;\r\n\r\n\tvar con = d.childNodes[1];\r\n\tcon.style.height=\"0px\";\r\n\tcon.style.height=con.scrollHeight+\"px\";\r\n\td.style.height=con.scrollHeight+scheduler.xy.lightbox_additional_height+\"px\";\r\n\tcon.style.height=con.scrollHeight+\"px\"; //it is incredible , how ugly IE can be*/\r\n};\r\n\r\nscheduler._init_dnd_events = function(){\r\n\tscheduler.event(getLightboxRoot(), \"mousemove\", scheduler._move_while_dnd);\r\n\tscheduler.event(getLightboxRoot(), \"mouseup\", scheduler._finish_dnd);\r\n\tscheduler._init_dnd_events = function(){};\r\n };\r\nscheduler._move_while_dnd = function(e){\r\n\tif (scheduler._dnd_start_lb){\r\n\t\tif (!document.dhx_unselectable){\r\n\t\t\tgetLightboxRoot().classList.add(\"dhx_unselectable\");\r\n\t\t\tdocument.dhx_unselectable = true;\r\n\t\t}\r\n\t\tvar lb = scheduler.getLightbox();\r\n\t\tvar now = [e.pageX, e.pageY];\r\n\t\tlb.style.top = scheduler._lb_start[1]+now[1]-scheduler._dnd_start_lb[1]+\"px\";\r\n\t\tlb.style.left = scheduler._lb_start[0]+now[0]-scheduler._dnd_start_lb[0]+\"px\";\r\n\t}\r\n};\r\nscheduler._ready_to_dnd = function(e){\r\n\tvar lb = scheduler.getLightbox();\r\n\tscheduler._lb_start = [lb.offsetLeft, lb.offsetTop];\r\n\tscheduler._dnd_start_lb = [e.pageX, e.pageY];\r\n};\r\nscheduler._finish_dnd = function(){\r\n\tif (scheduler._lb_start){\r\n\t\tscheduler._lb_start = scheduler._dnd_start_lb = false;\r\n\t\tgetLightboxRoot().classList.remove(\"dhx_unselectable\");\r\n\t\tdocument.dhx_unselectable = false;\r\n\t}\r\n};\r\nscheduler.getLightbox=function(){ //scheduler.config.wide_form=true;\r\n\tif (!this._lightbox){\r\n\t\tvar d=document.createElement(\"div\");\r\n\t\td.className=\"dhx_cal_light\";\r\n\t\tif (scheduler.config.wide_form)\r\n\t\t\td.className+=\" dhx_cal_light_wide\";\r\n\t\tif (scheduler.form_blocks.recurring)\r\n\t\t\td.className+=\" dhx_cal_light_rec\";\r\n\t\tif (scheduler.config.rtl)\r\n\t\t\td.className+=\" dhx_cal_light_rtl\";\r\n\t\tif (scheduler.config.responsive_lightbox)\r\n\t\t\td.className += \" dhx_cal_light_responsive\";\r\n\r\n\t\td.style.visibility=\"hidden\";\r\n\t\tvar html = this._lightbox_template;\r\n\r\n\t\tvar buttons = this.config.buttons_left;\r\n\r\n\r\n\t\thtml += \"<div class='dhx_cal_lcontrols'>\";\r\n\t\tvar ariaAttr = \"\";\r\n\t\tfor (var i = 0; i < buttons.length; i++) {\r\n\t\t\tariaAttr = this._waiAria.lightboxButtonAttrString(buttons[i]);\r\n\t\t\thtml += \"<div \"+ariaAttr+\" data-action='\"+ buttons[i]+\"' class='dhx_btn_set dhx_\"+(scheduler.config.rtl?\"right\":\"left\")+\"_btn_set \" + buttons[i] + \"_set'><div class='dhx_btn_inner \" + buttons[i] + \"'></div><div>\" + scheduler.locale.labels[buttons[i]] + \"</div></div>\";\r\n\t\t}\r\n\r\n\t\tbuttons = this.config.buttons_right;\r\n\t\tvar rtl = scheduler.config.rtl;\r\n\t\tfor (var i = 0; i < buttons.length; i++) {\r\n\t\t\tariaAttr = this._waiAria.lightboxButtonAttrString(buttons[i]);\r\n\r\n\t\t\thtml += \"<div class='dhx_cal_lcontrols_push_right'></div>\";\r\n\r\n\t\t\thtml += \"<div \"+ariaAttr+\" data-action='\"+ buttons[i]+\"' class='dhx_btn_set dhx_\"+(rtl?\"left\":\"right\")+\"_btn_set \" +\r\n\t\t\t\t\t\tbuttons[i] + \"_set'><div class='dhx_btn_inner \" +\r\n\t\t\t\t\t\tbuttons[i] + \"'></div><div>\" + scheduler.locale.labels[buttons[i]] + \"</div></div>\";\r\n\t\t}\r\n\t\thtml += \"</div>\";\r\n\t\thtml+=\"</div>\";\r\n\t\td.innerHTML=html;\r\n\t\tif (scheduler.config.drag_lightbox){\r\n\t\t\tscheduler.event(d.firstChild, \"mousedown\", scheduler._ready_to_dnd);\r\n\t\t\tscheduler.event(d.firstChild, \"selectstart\", function(e){ \r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn false; \r\n\t\t\t});\r\n\t\t\td.firstChild.style.cursor = \"move\";\r\n\t\t\tscheduler._init_dnd_events();\r\n\r\n\t\t}\r\n\r\n\t\tthis._waiAria.lightboxAttr(d);\r\n\r\n\t\tthis.show_cover();\r\n\t\tthis._cover.insertBefore(d,this._cover.firstChild);\r\n\t\t\r\n\t\tthis._lightbox=d;\r\n\r\n\t\tvar sns=this.config.lightbox.sections;\r\n\t\thtml=\"\";\r\n\t\tfor (var i=0; i < sns.length; i++) {\r\n\t\t\tvar block=this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue; //ignore incorrect blocks\r\n\t\t\tsns[i].id=\"area_\"+this.uid();\r\n\t\t\tvar button = \"\";\r\n\t\t\tif (sns[i].button){\r\n\t\t\t\tvar ariaAttr = scheduler._waiAria.lightboxSectionButtonAttrString(this.locale.labels[\"button_\"+sns[i].button]);\r\n\t\t\t\tbutton = \"<div \"+ariaAttr+\" class='dhx_custom_button' data-section-index='\"+i+\"' index='\"+i+\"'><div class='dhx_custom_button_\"+sns[i].button+\"'></div><div>\"+this.locale.labels[\"button_\"+sns[i].button]+\"</div></div>\";\r\n\t\t\t}\r\n\r\n\t\t\tif (this.config.wide_form){\r\n\t\t\t\thtml+=\"<div class='dhx_wrap_section'>\";\r\n\t\t\t}\r\n\r\n\t\t\tvar label_name = this.locale.labels[\"section_\"+sns[i].name];\r\n\t\t\tif(typeof label_name !== \"string\"){\r\n\t\t\t\tlabel_name = sns[i].name;\r\n\t\t\t}\r\n\t\t\thtml+=\"<div id='\"+sns[i].id+\"' class='dhx_cal_lsection'>\"+button+ \"<label>\"+label_name+\"</label></div>\"+block.render.call(this,sns[i]);\r\n\t\t\thtml+=\"</div>\";\r\n\t\t}\r\n\r\n\t\tvar ds=d.getElementsByTagName(\"div\");\r\n\t\tfor (var i=0; i<ds.length; i++) {\r\n\t\t\tvar t_ds = ds[i];\r\n\t\t\tvar className = scheduler._getClassName(t_ds);\r\n\t\t\tif (className == \"dhx_cal_larea\") {\r\n\t\t\t\tt_ds.innerHTML = html;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// bind labels to lightbox inputs\r\n\t\tscheduler._bindLightboxLabels(sns);\r\n\r\n\t\t//sizes\r\n\t\tthis.setLightboxSize();\r\n\r\n\t\tthis._init_lightbox_events(this);\r\n\t\t//d.style.display=\"none\";\r\n\t\td.style.visibility=\"visible\";\r\n\t}\r\n\r\n\r\n\treturn this._lightbox;\r\n};\r\n\r\nscheduler._bindLightboxLabels = function(sections){\r\n\t// link section labels to controls using label[for] attribute and label.onclick=control.focus as a fallback\r\n\t// label[for] is preferable for accessibility reasons\r\n\r\n\tfor(var i = 0; i < sections.length; i++){\r\n\t\tvar section = sections[i];\r\n\t\tif(!section.id || !scheduler._lightbox.querySelector(`#${section.id}`))\r\n\t\t\tcontinue;\r\n\r\n\t\tvar labelBlock = scheduler._lightbox.querySelector(`#${section.id}`);\r\n\t\tvar label = labelBlock.querySelector(\"label\");\r\n\r\n\t\tvar inputBlock = scheduler._get_lightbox_section_node(section);\r\n\t\twhile(inputBlock && !inputBlock.querySelector){\r\n\t\t\tinputBlock = inputBlock.nextSibling;\r\n\t\t}\r\n\r\n\t\tvar fallback = true;\r\n\r\n\t\tif(inputBlock) {\r\n\t\t\tvar input = inputBlock.querySelector(\"input, select, textarea\");\r\n\t\t\tif(input){\r\n\t\t\t\tsection.inputId = input.id || \"input_\" + scheduler.uid();\r\n\t\t\t\tif(!input.id)\r\n\t\t\t\t\tinput.id = section.inputId;\r\n\t\t\t\tlabel.setAttribute(\"for\", section.inputId);\r\n\t\t\t\tfallback = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// use control.focus if failed to bind input using label[for]\r\n\t\tif(fallback){\r\n\t\t\tvar control = scheduler.form_blocks[section.type];\r\n\t\t\tif(control.focus){\r\n\t\t\t\tscheduler.event(label, \"click\", (function(section){\r\n\t\t\t\t\treturn function(){\r\n\r\n\t\t\t\t\t\tvar block = scheduler.form_blocks[section.type];\r\n\t\t\t\t\t\tvar node = scheduler._get_lightbox_section_node(section);\r\n\r\n\t\t\t\t\t\tif(block && block.focus)\r\n\t\t\t\t\t\t\tblock.focus.call(scheduler, node);\r\n\t\t\t\t\t};\r\n\t\t\t\t})(section));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nscheduler.attachEvent(\"onEventIdChange\", function(old_id, new_id){\r\n\tif(this._lightbox_id == old_id)\r\n\t\tthis._lightbox_id = new_id;\r\n});\r\n\r\nscheduler._lightbox_template= `<div class='dhx_cal_ltitle'><div class=\"dhx_cal_ltitle_descr\"><span class='dhx_mark'>&nbsp;</span><span class='dhx_time'></span><span class='dhx_title'></span>\r\n</div>\r\n<div class=\"dhx_cal_ltitle_controls\">\r\n<a class=\"dhx_cal_ltitle_close_btn scheduler_icon close\"></a>\r\n</div></div><div class='dhx_cal_larea'></div>`;\r\n\r\n\r\n}","export default function extend(scheduler) {\r\n\r\nscheduler.getRootView = function() {\r\n\treturn {\r\n\t\tview: {\r\n\t\t\trender: function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttag: \"div\",\r\n\t\t\t\t\ttype: 1,\r\n\t\t\t\t\tattrs: {\r\n\t\t\t\t\t\tstyle: \"width:100%;height:100%;\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\thooks: {\r\n\t\t\t\t\t\t\"didInsert\": function(){\r\n\t\t\t\t\t\t\tscheduler.setCurrentView();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbody: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tel: this.el,\r\n\t\t\t\t\t\t\ttype: 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tinit: function(){\r\n\t\t\t\tvar container = document.createElement(\"DIV\");\r\n\t\t\t\tcontainer.id = \"scheduler_\"+ scheduler.uid();\r\n\t\t\t\tcontainer.style.width = \"100%\";\r\n\t\t\t\tcontainer.style.height = \"100%\";\r\n\t\t\t\tcontainer.classList.add(\"dhx_cal_container\");\r\n\t\t\t\tcontainer.cmp = \"grid\";\r\n\t\t\t\tcontainer.innerHTML = '<div class=\"dhx_cal_navline\">' +\r\n\t\t\t\t\t'<div class=\"dhx_cal_prev_button\"></div>' +\r\n\t\t\t\t\t'<div class=\"dhx_cal_next_button\"></div>' +\r\n\t\t\t\t\t'<div class=\"dhx_cal_today_button\"></div>' +\r\n\t\t\t\t\t'<div class=\"dhx_cal_date\"></div>' +\r\n\t\t\t\t\t'<div class=\"dhx_cal_tab\" data-tab=\"day\"></div>' +\r\n\t\t\t\t\t'<div class=\"dhx_cal_tab\" data-tab=\"week\"></div>' +\r\n\t\t\t\t\t'<div class=\"dhx_cal_tab\" data-tab=\"month\"></div>' +\r\n\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t'<div class=\"dhx_cal_header\">' +\r\n\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t'<div class=\"dhx_cal_data\">' +\r\n\t\t\t\t\t'</div>';\r\n\t\t\t\tscheduler.init(container);\r\n\r\n\t\t\t\tthis.el = container;\r\n\t\t\t}\r\n\t\t},\r\n\t\ttype: 4\r\n\t};\r\n};\r\n\r\n}","import global from \"../global\";\r\n\r\nexport default function extend(scheduler) {\r\n\r\n(function(){\r\n\r\n\tvar setCurrentView = scheduler.setCurrentView,\r\n\t\tupdateView = scheduler.updateView;\r\n\tvar update_view_timer = null,\r\n\t\tcurr_view_timer = null;\r\n\r\n\tvar lazy_setCurrentView = function(date, mode){\r\n\t\tvar self = this;\r\n\t\tglobal.clearTimeout(curr_view_timer);\r\n\t\tglobal.clearTimeout(update_view_timer);\r\n\r\n\t\tvar oldDate = self._date,\r\n\t\t\toldMode = self._mode;\r\n\t\tupdateFlags(this, date, mode);\r\n\r\n\t\tcurr_view_timer = setTimeout(function(){\r\n\r\n\t\t\tif(scheduler.$destroyed){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!self.callEvent(\"onBeforeViewChange\", [oldMode, oldDate, mode || self._mode, date || self._date])){\r\n\t\t\t\tupdateFlags(self, oldDate, oldMode);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tupdateView.call(self, date, mode);\r\n\t\t\tself.callEvent(\"onViewChange\", [self._mode, self._date]);\r\n\r\n\t\t\tglobal.clearTimeout(update_view_timer);\r\n\t\t\tcurr_view_timer = 0;\r\n\t\t}, scheduler.config.delay_render);\r\n\t};\r\n\tvar lazy_updateView = function(date, mode){\r\n\t\tvar self = this,\r\n\t\t\tars = arguments;\r\n\r\n\t\tupdateFlags(this, date, mode);\r\n\r\n\t\tglobal.clearTimeout(update_view_timer);\r\n\t\tupdate_view_timer = setTimeout(function(){\r\n\t\t\tif(scheduler.$destroyed){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(curr_view_timer)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tupdateView.apply(self, ars);\r\n\t\t}, scheduler.config.delay_render);\r\n\t};\r\n\tfunction updateFlags(scheduler, date, mode){\r\n\t\tif(date)\r\n\t\t\tscheduler._date = date;\r\n\t\tif(mode)\r\n\t\t\tscheduler._mode = mode;\r\n\r\n\t}\r\n\tscheduler.attachEvent(\"onSchedulerReady\", function(){\r\n\t\tif(scheduler.config.delay_render){\r\n\t\t\tscheduler.setCurrentView = lazy_setCurrentView;\r\n\t\t\tscheduler.updateView = lazy_updateView;\r\n\t\t}else{\r\n\t\t\tscheduler.setCurrentView = setCurrentView;\r\n\t\t\tscheduler.updateView = updateView;\r\n\t\t}\r\n\t});\r\n\r\n})();\r\n\r\n}","import global from \"../global\";\r\n\r\nexport default function extend(scheduler) {\r\n/*\r\nif (global.dataProcessor && !dataProcessor.prototype.init_original){\r\n\tdataProcessor.prototype.init_original=dataProcessor.prototype.init;\r\n\tdataProcessor.prototype.init=function(obj){\r\n\t\tthis.init_original(obj);\r\n\t\tobj._dataprocessor=this;\r\n\r\n\t\tthis.setTransactionMode(\"POST\",true);\r\n\t\tthis.serverProcessor+=(this.serverProcessor.indexOf(\"?\")!=-1?\"&\":\"?\")+\"editing=true\";\r\n\t};\r\n}*/\r\n\r\nscheduler.attachEvent(\"onSchedulerReady\", function(){\r\n\tif(typeof dhtmlxError !== \"undefined\") {\r\n\t\twindow.dhtmlxError.catchError(\"LoadXML\", function(a, b, c){\r\n\t\t\tvar message = c[0].responseText;\r\n\r\n\t\t\tswitch (scheduler.config.ajax_error){\r\n\t\t\t\tcase \"alert\":\r\n\t\t\t\t\tglobal.alert(message);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"console\":\r\n\t\t\t\t\tglobal.console.log(message);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n});\r\n\r\n\r\n}","import ar from \"./locale_ar\";\r\nimport be from \"./locale_be\";\r\nimport ca from \"./locale_ca\";\r\nimport cn from \"./locale_cn\";\r\nimport cs from \"./locale_cs\";\r\nimport da from \"./locale_da\";\r\nimport de from \"./locale_de\";\r\nimport el from \"./locale_el\";\r\nimport en from \"./locale_en\";\r\nimport es from \"./locale_es\";\r\nimport fi from \"./locale_fi\";\r\nimport fr from \"./locale_fr\";\r\nimport he from \"./locale_he\";\r\nimport hu from \"./locale_hu\";\r\nimport id from \"./locale_id\";\r\nimport it from \"./locale_it\";\r\nimport jp from \"./locale_jp\";\r\n\r\nimport LocaleManager from \"./locale_manager\";\r\n\r\nimport nb from \"./locale_nb\";\r\nimport nl from \"./locale_nl\";\r\nimport no from \"./locale_no\";\r\nimport pl from \"./locale_pl\";\r\nimport pt from \"./locale_pt\";\r\nimport ro from \"./locale_ro\";\r\nimport ru from \"./locale_ru\";\r\nimport si from \"./locale_si\";\r\nimport sk from \"./locale_sk\";\r\nimport sv from \"./locale_sv\";\r\nimport tr from \"./locale_tr\";\r\nimport ua from \"./locale_ua\";\r\n\r\nexport default function(){\r\n\treturn new LocaleManager({\r\n\t\ten,\r\n\t\tar,\r\n\t\tbe,\r\n\t\tca,\r\n\t\tcn,\r\n\t\tcs,\r\n\t\tda,\r\n\t\tde,\r\n\t\tel,\r\n\t\tes,\r\n\t\tfi,\r\n\t\tfr,\r\n\t\the,\r\n\t\thu,\r\n\t\tid,\r\n\t\tit,\r\n\t\tjp,\r\n\t\tnb,\r\n\t\tnl,\r\n\t\tno,\r\n\t\tpl,\r\n\t\tpt,\r\n\t\tro,\r\n\t\tru,\r\n\t\tsi,\r\n\t\tsk,\r\n\t\tsv,\r\n\t\ttr,\r\n\t\tua\r\n\t});\r\n}","export default class ExtensionsManager{\r\n\tconstructor(config){\r\n\t\tthis._extensions = {};\r\n\t\tfor(const i in config){\r\n\t\t\tthis._extensions[i] = config[i];\r\n\t\t}\r\n\t}\r\n\r\n\taddExtension(name, ext) {\r\n\t\tthis._extensions[name] = ext;\r\n\t}\r\n\r\n\tgetExtension(name) {\r\n\t\treturn this._extensions[name];\r\n\t}\r\n}","\r\nexport default function(){\r\n/* global dhtmlx */\r\nif (typeof dhtmlx != \"undefined\" && dhtmlx.attaches) {\r\n\tdhtmlx.attaches.attachScheduler = function (day, mode, tabs, scheduler) {\r\n\t\tvar tabs = tabs || '<div class=\"dhx_cal_tab\" name=\"day_tab\" data-tab=\"day\" style=\"right:204px;\"></div><div class=\"dhx_cal_tab\" name=\"week_tab\" data-tab=\"week\" style=\"right:140px;\"></div><div class=\"dhx_cal_tab\" name=\"month_tab\" data-tab=\"month\" style=\"right:76px;\"></div>';\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\t\tobj.id = \"dhxSchedObj_\" + this._genStr(12);\r\n\t\tobj.innerHTML = '<div id=\"' + obj.id + '\" class=\"dhx_cal_container\" style=\"width:100%; height:100%;\"><div class=\"dhx_cal_navline\"><div class=\"dhx_cal_prev_button\"></div><div class=\"dhx_cal_next_button\"></div><div class=\"dhx_cal_today_button\"></div><div class=\"dhx_cal_date\"></div>' + tabs + '</div><div class=\"dhx_cal_header\"></div><div class=\"dhx_cal_data\"></div></div>';\r\n\t\tdocument.body.appendChild(obj.firstChild);\r\n\r\n\t\tthis.attachObject(obj.id, false, true);\r\n\r\n\t\tthis.vs[this.av].sched = scheduler;\r\n\t\tthis.vs[this.av].schedId = obj.id;\r\n\t\tscheduler.setSizes = scheduler.updateView;\r\n\t\tscheduler.destructor = function () { };\r\n\t\tscheduler.init(obj.id, day, mode);\r\n\r\n\t\treturn this.vs[this._viewRestore()].sched;\r\n\t};\r\n}\r\n\r\n}","export default {\r\n\talert: (extension, assert) => {\r\n\t\tassert(false, `The ${extension} extension is not included in this version of dhtmlxScheduler.<br>\r\n\t\tYou may need a <a href=\"https://docs.dhtmlx.com/scheduler/editions_comparison.html\" target=\"_blank\">Professional version of the component</a>.<br>\r\n\t\tContact us at <a href=\"https://dhtmlx.com/docs/contact.shtml\" target=\"_blank\">https://dhtmlx.com/docs/contact.shtml</a> if you have any questions.`);\r\n\t}\r\n};","export default function(scheduler){\r\n\r\n\r\n\r\n(function(){\r\n\tvar modalsStack = [];\r\n\r\n\tfunction isModal(){\r\n\t\treturn !!(modalsStack.length);\r\n\t}\r\n\r\n\tfunction isChildOf(child, parent){\r\n\t\twhile(child && child != parent){\r\n\t\t\tchild = child.parentNode;\r\n\t\t}\r\n\r\n\t\treturn !!(child == parent);\r\n\t}\r\n\r\n\tfunction afterPopup(box){\r\n\t\tsetTimeout(function(){\r\n\t\t\tif(scheduler.$destroyed){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif(!isModal() && !(isChildOf(document.activeElement, scheduler.$container))) {\r\n\t\t\t\tscheduler.focus();\r\n\t\t\t}\r\n\t\t}, 1);\r\n\t}\r\n\tfunction startModal(box){\r\n\t\tscheduler.eventRemove(box, \"keydown\", trapFocus);\r\n\t\tscheduler.event(box, \"keydown\", trapFocus);\r\n\t\tmodalsStack.push(box);\r\n\t\t//scheduler.$keyboardNavigation.dispatcher.disable();\r\n\t}\r\n\r\n\tfunction endModal(){\r\n\t\tvar box = modalsStack.pop();\r\n\t\tif(box) {\r\n\t\t\tscheduler.eventRemove(box, \"keydown\", trapFocus);\r\n\t\t}\r\n\t\tafterPopup(box);\r\n\r\n\t}\r\n\r\n\tfunction isTopModal(box){\r\n\t//\tif(dhtmlx._modalsStack.length){\r\n\t//\t\treturn box == dhtmlx._modalsStack[dhtmlx._modalsStack.length - 1];\r\n\t//\t}else{\r\n\t\t\treturn box == modalsStack[modalsStack.length - 1];\r\n\t//\t}\r\n\r\n\t}\r\n\r\n\tfunction trapFocus(event){\r\n\t\tvar event = event || window.event;\r\n\t\tvar target = event.currentTarget;\r\n\t\tif(!isTopModal(target)) return;\r\n\r\n\t\tscheduler.$keyboardNavigation.trapFocus(target, event);\r\n\t}\r\n\r\n\tfunction traceLightbox(){\r\n\t\tstartModal(scheduler.getLightbox());\r\n\t}\r\n\r\n\tscheduler.attachEvent(\"onLightbox\", traceLightbox);\r\n\tscheduler.attachEvent(\"onAfterLightbox\", endModal);\r\n\r\n\tscheduler.attachEvent(\"onAfterQuickInfo\", function(){afterPopup();});\r\n\r\n\tif(!scheduler._keyNavMessagePopup) {\r\n\t\tscheduler._keyNavMessagePopup = true;\r\n\r\n\t\tvar focusElement = null;\r\n\t\tvar backupFocus = null;\r\n\t\tconst modalsStack = [];\r\n\t\tscheduler.attachEvent(\"onMessagePopup\", function(box){\r\n\t\t\tfocusElement = document.activeElement;\r\n\t\t\tbackupFocus = focusElement;\r\n\r\n\t\t\twhile(backupFocus && scheduler._getClassName(backupFocus).indexOf(\"dhx_cal_data\") < 0){\r\n\t\t\t\tbackupFocus = backupFocus.parentNode;\r\n\t\t\t}\r\n\t\t\tif(backupFocus){\r\n\t\t\t\tbackupFocus = backupFocus.parentNode;\r\n\t\t\t}\r\n\r\n\t\t\tscheduler.eventRemove(box, \"keydown\", trapFocus);\r\n\t\t\tscheduler.event(box, \"keydown\", trapFocus);\r\n\t\t\tmodalsStack.push(box);\r\n\t\t});\r\n\r\n\r\n\t\tscheduler.attachEvent(\"onAfterMessagePopup\", function () {\r\n\t\t\tvar box = modalsStack.pop();\r\n\t\t\tif(box) {\r\n\t\t\t\tscheduler.eventRemove(box, \"keydown\", trapFocus);\r\n\t\t\t}\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tif(scheduler.$destroyed){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tvar currentTarget = document.activeElement;\r\n\t\t\t\twhile(currentTarget && scheduler._getClassName(currentTarget).indexOf(\"dhx_cal_light\") < 0){\r\n\t\t\t\t\tcurrentTarget = currentTarget.parentNode;\r\n\t\t\t\t}\r\n\t\t\t\tif(currentTarget)\r\n\t\t\t\t\treturn;\r\n\r\n\r\n\t\t\t\tif(focusElement && focusElement.parentNode){\r\n\t\t\t\t\tfocusElement.focus();\r\n\r\n\t\t\t\t}else if(backupFocus && backupFocus.parentNode){\r\n\t\t\t\t\tbackupFocus.focus();\r\n\t\t\t\t}\r\n\t\t\t\tfocusElement = null;\r\n\t\t\t\tbackupFocus = null;\r\n\r\n\t\t\t}, 1);\r\n\t\t});\r\n\t}\r\n\r\n\tscheduler.$keyboardNavigation.isModal = isModal;\r\n\r\n\r\n})();\r\n\r\n}","export default function(scheduler){\r\n\r\n//Initial idea and implementation by Steve MC\r\nscheduler._temp_key_scope = function (){\r\n\r\n\tscheduler.config.key_nav = true;\r\n\r\n\tscheduler.$keyboardNavigation._pasteDate = null; // used for copy and paste operations\r\n\tscheduler.$keyboardNavigation._pasteSection = null; // used for copy and paste operations\r\n\tvar isCopy = null;\r\n\r\n\tvar pos = {};\r\n\r\n\tif(!document.body){\r\n\t\tscheduler.event(window, \"load\", function(){\r\n\t\t\tscheduler.event(document.body, \"mousemove\", trackMousePosition);\r\n\t\t});\r\n\t}else{\r\n\t\tscheduler.event(document.body, \"mousemove\", trackMousePosition);\r\n\t}\r\n\r\n\tfunction trackMousePosition(event){\r\n\t\tevent = event || window.event;\r\n\t\tpos.x = event.clientX;\r\n\t\tpos.y = event.clientY;\r\n\t}\r\n\tfunction currentTarget(){\r\n\r\n\t\tvar mousePointer = false;\r\n\t\tvar keyNavPointer = false;\r\n\r\n\t\tvar target = document.elementFromPoint(pos.x, pos.y);\r\n\t\twhile(target && target != scheduler._obj){\r\n\t\t\ttarget = target.parentNode;\r\n\t\t}\r\n\t\tmousePointer = !!(target == scheduler._obj);\r\n\r\n\t\tkeyNavPointer = scheduler.$keyboardNavigation.dispatcher.isEnabled();\r\n\r\n\t\treturn mousePointer || keyNavPointer;\r\n\t}\r\n\r\n\tscheduler.attachEvent(\"onMouseMove\", function(id,e){\r\n\t\tvar state = scheduler.getState();\r\n\r\n\t\t// make sure scheduler is fully initialized before calling scheduler.getActionData\r\n\t\tif(!(state.mode && state.min_date)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar position = scheduler.getActionData(e);\r\n\t\tscheduler.$keyboardNavigation._pasteDate = position.date;\r\n\t\tscheduler.$keyboardNavigation._pasteSection = position.section;\r\n\t});\r\n\r\n\tfunction clear_event_after(ev){\r\n\t\tdelete ev.rec_type; delete ev.rec_pattern;\r\n\t\tdelete ev.event_pid; delete ev.event_length;\r\n\t}\r\n\r\n\tfunction copyEvent(ev){\r\n\t\treturn scheduler._lame_copy({}, ev);\r\n\t}\r\n\r\n\tscheduler._make_pasted_event = function(ev){\r\n\t\tvar date = scheduler.$keyboardNavigation._pasteDate;\r\n\t\tvar section = scheduler.$keyboardNavigation._pasteSection;\r\n\r\n\t\tvar event_duration = ev.end_date-ev.start_date;\r\n\r\n\t\tvar copy = copyEvent(ev);\r\n\t\tclear_event_after(copy);\r\n\t\tcopy.start_date = new Date(date);\r\n\t\tcopy.end_date = new Date(copy.start_date.valueOf() + event_duration);\r\n\r\n\t\tif(section){\r\n\t\t\tvar property = scheduler._get_section_property();\r\n\r\n\t\t\tif(scheduler.config.multisection)\r\n\t\t\t\tcopy[property] = ev[property]; // save initial set of resources for multisection view\r\n\t\t\telse\r\n\t\t\t\tcopy[property] = section;\r\n\t\t}\r\n\t\treturn copy;\r\n\t};\r\n\tscheduler._do_paste = function(is_copy, modified_ev, original_ev){\r\n\t\tif(scheduler.callEvent(\"onBeforeEventPasted\", [is_copy, modified_ev, original_ev]) === false){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tscheduler.addEvent(modified_ev);\r\n\t\tscheduler.callEvent(\"onEventPasted\", [is_copy, modified_ev, original_ev]);\r\n\t};\r\n\r\n\tscheduler._is_key_nav_active = function(){\r\n\t\tif(this._is_initialized() && !this._is_lightbox_open() && this.config.key_nav){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\tfunction getSelectedEvent(){\r\n\t\tvar node = scheduler.$keyboardNavigation.dispatcher.getActiveNode();\r\n\t\tif(node && node.eventId) return node.eventId;\r\n\t\treturn scheduler._select_id;\r\n\t}\r\n\r\n\tscheduler.event(document, \"keydown\", function(e){\r\n\t\t// compatibility fix - scheduler focus on ctrl+v on mouse hover\r\n\t\tif(((e.ctrlKey || e.metaKey) && e.keyCode == 86) && scheduler._buffer_event && !scheduler.$keyboardNavigation.dispatcher.isEnabled()) {\r\n\t\t\tscheduler.$keyboardNavigation.dispatcher.isActive = currentTarget();\r\n\t\t}\r\n\t});\r\n\r\n\tscheduler._key_nav_copy_paste = function(e){\r\n\t\tif(!scheduler._is_key_nav_active()) return true;\r\n\r\n\t\tif (e.keyCode == 37 || e.keyCode == 39) { // Left, Right arrows\r\n\t\t\te.cancelBubble = true;\r\n\r\n\t\t\tvar next = scheduler.date.add(scheduler._date,(e.keyCode == 37 ? -1 : 1 ),scheduler._mode);\r\n\t\t\tscheduler.setCurrentView(next);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tvar select_id = getSelectedEvent();\r\n\t\tif ((e.ctrlKey || e.metaKey) && e.keyCode == 67) {  // CTRL+C\r\n\t\t\tif (select_id) {\r\n\t\t\t\tscheduler._buffer_event = copyEvent(scheduler.getEvent(select_id));\r\n\t\t\t\tisCopy = true;\r\n\t\t\t\tscheduler.callEvent(\"onEventCopied\", [scheduler.getEvent(select_id)]);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif ((e.ctrlKey || e.metaKey) && e.keyCode == 88) { // CTRL+X\r\n\t\t\tif (select_id) {\r\n\t\t\t\tisCopy = false;\r\n\t\t\t\tvar ev = scheduler._buffer_event = copyEvent(scheduler.getEvent(select_id));\r\n\r\n\t\t\t\tscheduler.updateEvent(ev.id);\r\n\t\t\t\tscheduler.callEvent(\"onEventCut\", [ev]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ((e.ctrlKey || e.metaKey) && e.keyCode == 86 && currentTarget(e)) {  // CTRL+V\r\n\t\t\tvar ev = scheduler._buffer_event ? scheduler.getEvent(scheduler._buffer_event.id) : scheduler._buffer_event;\r\n\t\t\tev = ev || scheduler._buffer_event;\r\n\r\n\t\t\tif (ev) {\r\n\t\t\t\tvar new_ev = scheduler._make_pasted_event(ev);\r\n\t\t\t\tif (isCopy) {\r\n\t\t\t\t\tnew_ev.id = scheduler.uid();\r\n\t\t\t\t\tscheduler._do_paste(isCopy, new_ev, ev);\r\n\t\t\t\t}\r\n\t\t\t\telse { // cut operation\r\n\t\t\t\t\tvar res = scheduler.callEvent(\"onBeforeEventChanged\",[new_ev, e, false, ev]);\r\n\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\tscheduler._do_paste(isCopy, new_ev, ev);\r\n\t\t\t\t\t\tisCopy = true; // switch to copy after first paste operation\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n};\r\nscheduler._temp_key_scope();\r\n\r\n}","export default function(scheduler){\r\n\r\nscheduler.$keyboardNavigation.attachSchedulerHandlers = function(){\r\n\tvar dispatcher = scheduler.$keyboardNavigation.dispatcher;\r\n\r\n\tvar keyDownHandler = function(e){\r\n\t\tif(!scheduler.config.key_nav) return;\r\n\r\n\t\treturn dispatcher.keyDownHandler(e);\r\n\t};\r\n\r\n\tvar focusHandler = function () {\r\n\t\tdispatcher.keepScrollPosition(function () {\r\n\t\t\tdispatcher.focusGlobalNode();\r\n\t\t});\r\n\t};\r\n\r\n\tvar waitCall;\r\n\tscheduler.attachEvent(\"onDataRender\", function(){\r\n\t\tif(!scheduler.config.key_nav) return;\r\n\t\tif(!(dispatcher.isEnabled() && !scheduler.getState().editor_id)) return;\r\n\r\n\t\tclearTimeout(waitCall);\r\n\t\twaitCall = setTimeout(function(){\r\n\t\t\tif(scheduler.$destroyed){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif(!dispatcher.isEnabled())\r\n\t\t\t\tdispatcher.enable();\r\n\t\t\treFocusActiveNode();\r\n\t\t});\r\n\t});\r\n\r\n\tvar reFocusActiveNode = function(){\r\n\t\tif(!dispatcher.isEnabled())\r\n\t\t\treturn;\r\n\r\n\t\tvar activeNode = dispatcher.getActiveNode();\r\n\t\tif(!activeNode)\r\n\t\t\treturn;\r\n\r\n\t\tif(!activeNode.isValid()){\r\n\t\t\tactiveNode = activeNode.fallback();\r\n\t\t}\r\n\r\n\t\tif(!activeNode || activeNode instanceof scheduler.$keyboardNavigation.MinicalButton || activeNode instanceof scheduler.$keyboardNavigation.MinicalCell)\r\n\t\t\treturn;\r\n\r\n\t\tdispatcher.keepScrollPosition(function () {\r\n\t\t\tactiveNode.focus(true);\r\n\t\t});\r\n\t};\r\n\r\n\tscheduler.attachEvent(\"onSchedulerReady\", function(){\r\n\t\tvar container = scheduler.$container;\r\n\t\tscheduler.eventRemove(document, \"keydown\", keyDownHandler);\r\n\t\tscheduler.eventRemove(container, \"mousedown\", mousedownHandler);\r\n\t\tscheduler.eventRemove(container, \"focus\", focusHandler);\r\n\r\n\r\n\t\tif(scheduler.config.key_nav){\r\n\r\n\t\t\tscheduler.event(document, \"keydown\", keyDownHandler);\r\n\t\t\tscheduler.event(container, \"mousedown\", mousedownHandler);\r\n\t\t\tscheduler.event(container, \"focus\", focusHandler);\r\n\r\n\t\t\tcontainer.setAttribute(\"tabindex\", \"0\");\r\n\r\n\t\t}else{\r\n\t\t\tcontainer.removeAttribute(\"tabindex\");\r\n\t\t}\r\n\t});\r\n\r\n\tfunction mousedownHandler(e){\r\n\t\tif(!scheduler.config.key_nav) return true;\r\n\r\n\t\tconst view = scheduler.getView();\r\n\t\tlet dataAreaClick = false;\r\n\t\tif (scheduler.getState().mode === \"month\") {\r\n\t\t\tdataAreaClick = scheduler.$keyboardNavigation.isChildOf(e.target || e.srcElement, scheduler.$container.querySelector(\".dhx_cal_month_table\"));\r\n\t\t} else if (view && view.layout === \"timeline\") {\r\n\t\t\tdataAreaClick = scheduler.$keyboardNavigation.isChildOf(e.target || e.srcElement, scheduler.$container.querySelector(\".dhx_timeline_data_col\"));\r\n\t\t} else {\r\n\t\t\tconst listOfScales = scheduler.$container.querySelectorAll(\".dhx_scale_holder\");\r\n\t\t\tconst arrOfScales = Array.from(listOfScales);\r\n\t\t\tdataAreaClick = arrOfScales.some(scale => scale === e.target.parentNode);\r\n\t\t}\r\n\r\n\t\tvar pos = scheduler.getActionData(e);\r\n\r\n\t\tvar focusNode;\r\n\t\tif(scheduler._locate_event(e.target || e.srcElement)){\r\n\t\t\tfocusNode = new scheduler.$keyboardNavigation.Event(scheduler._locate_event(e.target || e.srcElement));\r\n\t\t}else if(dataAreaClick){\r\n\t\t\tfocusNode = new scheduler.$keyboardNavigation.TimeSlot();\r\n\t\t\tif(pos.date && dataAreaClick){\r\n\t\t\t\tfocusNode = focusNode.nextSlot(new scheduler.$keyboardNavigation.TimeSlot(pos.date, null, pos.section));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(focusNode) {\r\n\t\t\tif (!dispatcher.isEnabled()) {\r\n\t\t\t\tdispatcher.activeNode = focusNode;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tif (pos.date && dataAreaClick) {\r\n\t\t\t\t\tdispatcher.delay(function () {\r\n\t\t\t\t\t\tdispatcher.setActiveNode(focusNode);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction focusEvent(evNode){\r\n\t\tif(!scheduler.config.key_nav) return;\r\n\t\tif(!dispatcher.isEnabled()) return;\r\n\r\n\r\n\t\tvar prevState = evNode;\r\n\t\tvar focusNode = new scheduler.$keyboardNavigation.Event(prevState.eventId);\r\n\t\tif(!focusNode.isValid()){\r\n\t\t\tvar lastStart = focusNode.start || prevState.start;\r\n\t\t\tvar lastEnd = focusNode.end || prevState.end;\r\n\t\t\tvar lastSection = focusNode.section || prevState.section;\r\n\r\n\t\t\tfocusNode = new scheduler.$keyboardNavigation.TimeSlot(lastStart, lastEnd, lastSection);\r\n\t\t\tif(!focusNode.isValid()){\r\n\t\t\t\tfocusNode = new scheduler.$keyboardNavigation.TimeSlot();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdispatcher.setActiveNode(focusNode);\r\n\t\tvar node = dispatcher.getActiveNode();\r\n\t\tif(node && node.getNode && document.activeElement != node.getNode()){\r\n\t\t\tdispatcher.focusNode(dispatcher.getActiveNode());\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tvar updateEvent = scheduler.updateEvent;\r\n\tscheduler.updateEvent = function(id){\r\n\t\tvar res = updateEvent.apply(this, arguments);\r\n\t\tif(scheduler.config.key_nav && dispatcher.isEnabled()){\r\n\t\t\tif(scheduler.getState().select_id == id){\r\n\t\t\t\tvar element = new scheduler.$keyboardNavigation.Event(id);\r\n\r\n\t\t\t\tif(!scheduler.getState().lightbox_id){\r\n\t\t\t\t\tfocusEvent(element);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tscheduler.attachEvent(\"onEventDeleted\", function(id) {\r\n\t\tif(!scheduler.config.key_nav) return true;\r\n\t\tif(dispatcher.isEnabled()){\r\n\t\t\tvar activeNode = dispatcher.getActiveNode();\r\n\t\t\tif(activeNode.eventId == id){\r\n\t\t\t\tdispatcher.setActiveNode(new scheduler.$keyboardNavigation.TimeSlot());\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\tscheduler.attachEvent(\"onClearAll\", function(){\r\n\t\tif(!scheduler.config.key_nav) return true;\r\n\t\tif(dispatcher.isEnabled()){\r\n\t\t\tif(dispatcher.getActiveNode() instanceof scheduler.$keyboardNavigation.Event){\r\n\t\t\t\tdispatcher.setActiveNode(new scheduler.$keyboardNavigation.TimeSlot());\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n};\r\n\r\n}","interface IViewPosition{\r\n\ttop: number;\r\n\tleft: number;\r\n}\r\n\r\ninterface IViewBox extends IViewPosition{\r\n\twidth: number;\r\n\theight: number;\r\n\tbottom: number;\r\n\tright: number;\r\n}\r\n\r\nexport class Tooltip {\r\n\tprivate _root: HTMLElement;\r\n\tprivate _tooltipNode: HTMLElement | null;\r\n\tprivate _scheduler: any;\r\n\r\n\tconstructor(scheduler: any){\r\n\t\tthis._scheduler = scheduler;\r\n\t}\r\n\r\n\tgetNode() : HTMLElement {\r\n\t\tconst scheduler = this._scheduler;\r\n\t\tif (!this._tooltipNode){\r\n\t\t\tthis._tooltipNode = document.createElement(\"div\");\r\n\t\t\tthis._tooltipNode.className = \"dhtmlXTooltip scheduler_tooltip tooltip\";\r\n\r\n\t\t\tscheduler._waiAria.tooltipAttr(this._tooltipNode);\r\n\t\t}\r\n\t\tif(scheduler.config.rtl){\r\n\t\t\tthis._tooltipNode.classList.add(\"dhtmlXTooltip_rtl\");\r\n\t\t} else{\r\n\t\t\tthis._tooltipNode.classList.remove(\"dhtmlXTooltip_rtl\");\r\n\t\t}\r\n\t\treturn this._tooltipNode;\r\n\t}\r\n\r\n\tsetViewport(node: HTMLElement):Tooltip{\r\n\t\tthis._root = node;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tshow(left: number, top: number): Tooltip;\r\n\tshow(event: MouseEvent): Tooltip;\r\n\tshow(left: number | MouseEvent, top?: number): Tooltip {\r\n\t\tconst scheduler = this._scheduler;\r\n\t\tconst domHelpers = scheduler.$domHelpers;\r\n\t\tconst container = document.body;\r\n\t\tconst node = this.getNode();\r\n\r\n\t\tif(!domHelpers.isChildOf(node, container)){\r\n\t\t\tthis.hide();\r\n\t\t\tcontainer.appendChild(node);\r\n\t\t}\r\n\r\n\t\tif (this._isLikeMouseEvent(left)) {\r\n\t\t\tconst position = this._calculateTooltipPosition(left as MouseEvent);\r\n\t\t\ttop = position.top;\r\n\t\t\tleft = position.left;\r\n\t\t}\r\n\r\n\t\tnode.style.top = top + \"px\";\r\n\t\tnode.style.left = left + \"px\";\r\n\r\n\t\tscheduler._waiAria.tooltipVisibleAttr(node);\r\n\t\treturn this;\r\n\t}\r\n\thide() : Tooltip{\r\n\t\tconst scheduler = this._scheduler;\r\n\t\tconst node = this.getNode();\r\n\t\tif(node && node.parentNode){\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t}\r\n\t\tscheduler._waiAria.tooltipHiddenAttr(node);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsetContent(html: string) : Tooltip{\r\n\t\tconst node = this.getNode();\r\n\t\tnode.innerHTML = html;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t// it is for salesforce, because it proxies event to it own events\r\n\tprivate _isLikeMouseEvent(event: any): boolean {\r\n\t\tif (!event || typeof event !== \"object\") {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn \"clientX\" in event && \"clientY\" in event;\r\n\t}\r\n\r\n\tprivate _getViewPort() : HTMLElement {\r\n\t\treturn this._root || document.body;\r\n\t}\r\n\r\n\r\n\tprivate _calculateTooltipPosition(event: MouseEvent): IViewPosition{\r\n\t\tconst scheduler = this._scheduler;\r\n\t\tconst domHelpers = scheduler.$domHelpers;\r\n\t\t// top/left coordinates inside the viewport by mouse position\r\n\t\tconst viewport =  this._getViewPortSize();\r\n\t\tconst tooltipNode = this.getNode();\r\n\t\tconst tooltip: IViewBox = {\r\n\t\t\ttop:0,\r\n\t\t\tleft: 0,\r\n\t\t\twidth: tooltipNode.offsetWidth,\r\n\t\t\theight: tooltipNode.offsetHeight,\r\n\t\t\tbottom: 0,\r\n\t\t\tright: 0\r\n\t\t};\r\n\r\n\t\tconst offsetX = scheduler.config.tooltip_offset_x;\r\n\t\tconst offsetY = scheduler.config.tooltip_offset_y;\r\n\r\n\t\tconst container = document.body;\r\n\t\tconst mouse = domHelpers.getRelativeEventPosition(event, container);\r\n\t\tconst containerPos = domHelpers.getNodePosition(container);\r\n\t\tmouse.y += containerPos.y; // to fix margin collapsing\r\n\r\n\t\ttooltip.top = mouse.y;\r\n\t\ttooltip.left = mouse.x;\r\n\t\ttooltip.top += offsetY;\r\n\t\ttooltip.left += offsetX;\r\n\t\ttooltip.bottom = tooltip.top + tooltip.height;\r\n\t\ttooltip.right = tooltip.left + tooltip.width;\r\n\r\n\t\tconst scrollTop = window.scrollY + container.scrollTop; // to fix margin collapsing\r\n\t\t// edge cases when the tooltip element can be partially hidden by edges of the viewport\r\n\t\tif(tooltip.top < viewport.top - scrollTop){\r\n\t\t\ttooltip.top = viewport.top;\r\n\t\t\ttooltip.bottom = tooltip.top + tooltip.height;\r\n\t\t}else if(tooltip.bottom > viewport.bottom){\r\n\t\t\ttooltip.bottom = viewport.bottom;\r\n\t\t\ttooltip.top = tooltip.bottom - tooltip.height;\r\n\t\t}\r\n\r\n\t\tif(tooltip.left < viewport.left){\r\n\t\t\ttooltip.left = viewport.left;\r\n\t\t\ttooltip.right = viewport.left + tooltip.width;\r\n\t\t}else if(tooltip.right > viewport.right){\r\n\t\t\ttooltip.right = viewport.right;\r\n\t\t\ttooltip.left = tooltip.right - tooltip.width;\r\n\t\t}\r\n\r\n\t\tif(mouse.x >= tooltip.left && mouse.x <= tooltip.right) {\r\n\t\t\ttooltip.left = mouse.x - tooltip.width - offsetX;\r\n\t\t\ttooltip.right = tooltip.left + tooltip.width;\r\n\t\t}\r\n\r\n\t\tif(mouse.y >= tooltip.top && mouse.y <= tooltip.bottom) {\r\n\t\t\ttooltip.top = mouse.y - tooltip.height - offsetY;\r\n\t\t\ttooltip.bottom = tooltip.top + tooltip.height;\r\n\t\t}\r\n\r\n\t\treturn tooltip;\r\n\t}\r\n\r\n\tprivate _getViewPortSize() : IViewBox {\r\n\t\tconst scheduler = this._scheduler;\r\n\t\tconst domHelpers = scheduler.$domHelpers;\r\n\t\tconst container = this._getViewPort();\r\n\t\tlet viewport = container;\r\n\t\tlet scrollTop = window.scrollY + document.body.scrollTop;\r\n\t\tlet scrollLeft = window.scrollX + document.body.scrollLeft;\r\n\t\tlet pos;\r\n\t\t// support for the initial tooltip mode where the tooltip element was attached to the data area of scheduler\r\n\t\tif(container === scheduler.$event_data){\r\n\t\t\tviewport = scheduler.$event;\r\n\t\t\tscrollTop = 0;\r\n\t\t\tscrollLeft = 0;\r\n\t\t\tpos = domHelpers.getNodePosition(scheduler.$event);\r\n\t\t}else{\r\n\t\t\tpos = domHelpers.getNodePosition(viewport);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tleft:pos.x + scrollLeft,\r\n\t\t\ttop: pos.y + scrollTop,\r\n\t\t\twidth: pos.width,\r\n\t\t\theight: pos.height,\r\n\t\t\tbottom: pos.y + pos.height + scrollTop,\r\n\t\t\tright: pos.x + pos.width + scrollLeft\r\n\t\t};\r\n\t}\r\n}\r\n","import * as utils from \"../../core/utils/utils\";\r\nimport { Tooltip } from \"./tooltip\";\r\n\r\ninterface ITrackerTarget {\r\n\tselector: string;\r\n\tonmouseenter: (event: MouseEvent, node: HTMLElement) => void;\r\n\tonmousemove: (event: MouseEvent, node: HTMLElement) => void;\r\n\tonmouseleave: (event: MouseEvent, node: HTMLElement) => void;\r\n\tglobal: boolean;\r\n}\r\n\r\ninterface ITooltipConfig {\r\n\tselector: string;\r\n\thtml: (event: MouseEvent, node: HTMLElement) => string;\r\n\tglobal: boolean;\r\n}\r\n\r\nexport class TooltipManager{\r\n\ttooltip: Tooltip;\r\n\tprotected _domEvents: any;\r\n\tprivate _listeners: object = {};\r\n\tprivate _scheduler: any;\r\n\tprivate delayShow: any;\r\n\tprivate delayHide: any;\r\n\r\n\tconstructor(scheduler: any) {\r\n\t\tthis.tooltip = new Tooltip(scheduler);\r\n\t\tthis._scheduler = scheduler;\r\n\t\tthis._domEvents = scheduler._createDomEventScope();\r\n\t\tthis._initDelayedFunctions();\r\n\t}\r\n\r\n\tdestructor(): void{\r\n\t\tthis.tooltip.hide();\r\n\t\tthis._domEvents.detachAll();\r\n\t}\r\n\thideTooltip(): void{\r\n\t\tthis.delayHide();\r\n\t}\r\n\tattach(config: ITrackerTarget): void {\r\n\t\tlet root = document.body;\r\n\t\tconst scheduler = this._scheduler;\r\n\t\tconst domHelpers = scheduler.$domHelpers;\r\n\t\tif(!config.global){\r\n\t\t\troot = scheduler.$root;\r\n\t\t}\r\n\r\n\t\tlet watchableTarget = null;\r\n\t\tconst handler = (event) => {\r\n\t\t\tconst eventTarget = domHelpers.getTargetNode(event);\r\n\t\t\tconst targetNode = domHelpers.closest(eventTarget, config.selector);\r\n\t\t\tif(domHelpers.isChildOf(eventTarget, this.tooltip.getNode())){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst doOnMouseEnter = () => {\r\n\t\t\t\twatchableTarget = targetNode;\r\n\t\t\t\tconfig.onmouseenter(event, targetNode);\r\n\t\t\t};\r\n\r\n\t\t\tif(watchableTarget){\r\n\t\t\t\tif(targetNode && targetNode === watchableTarget){\r\n\t\t\t\t\tconfig.onmousemove(event, targetNode);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconfig.onmouseleave(event, watchableTarget);\r\n\t\t\t\t\twatchableTarget = null;\r\n\r\n\t\t\t\t\tif(targetNode && targetNode !== watchableTarget){\r\n\t\t\t\t\t\tdoOnMouseEnter();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(targetNode){\r\n\t\t\t\t\tdoOnMouseEnter();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.detach(config.selector);\r\n\t\tthis._domEvents.attach(root, \"mousemove\", handler);\r\n\t\tthis._listeners[config.selector] = {\r\n\t\t\tnode: root,\r\n\t\t\thandler\r\n\t\t};\r\n\t}\r\n\r\n\tdetach(selector: string): void {\r\n\t\tconst listener = this._listeners[selector];\r\n\t\tif(listener){\r\n\t\t\tthis._domEvents.detach(listener.node, \"mousemove\", listener.handler);\r\n\t\t}\r\n\t}\r\n\r\n\ttooltipFor(config: ITooltipConfig): void {\r\n\t\tconst cloneDomEvent = (event: MouseEvent) => {\r\n\t\t\tlet clone = event;\r\n\t\t\t// making events survive timeout in ie\r\n\t\t\t// tslint:disable-next-line no-string-literal\r\n\t\t\tif(document[\"createEventObject\"] && !document.createEvent){\r\n\t\t\t\t// tslint:disable-next-line no-string-literal\r\n\t\t\t\tclone = document[\"createEventObject\"](event);\r\n\t\t\t}\r\n\t\t\treturn clone;\r\n\t\t};\r\n\t\tthis._initDelayedFunctions();\r\n\t\tthis.attach({\r\n\t\t\tselector: config.selector,\r\n\t\t\tglobal: config.global,\r\n\t\t\tonmouseenter:(event: MouseEvent, node: HTMLElement) => {\r\n\t\t\t\tconst html = config.html(event, node);\r\n\t\t\t\tif(html){\r\n\t\t\t\t\tthis.delayShow(cloneDomEvent(event), html);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonmousemove:(event: MouseEvent, node: HTMLElement) => {\r\n\t\t\t\tconst html = config.html(event, node);\r\n\t\t\t\tif(html){\r\n\t\t\t\t\tthis.delayShow(cloneDomEvent(event), html);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.delayShow.$cancelTimeout();\r\n\t\t\t\t\tthis.delayHide();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonmouseleave:() => {\r\n\t\t\t\tthis.delayShow.$cancelTimeout();\r\n\t\t\t\tthis.delayHide();\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _initDelayedFunctions(){\r\n\t\tconst scheduler = this._scheduler;\r\n\t\t// reset delayed functions in order to apply current values of tooltip_timeout\r\n\t\tif(this.delayShow){\r\n\t\t\tthis.delayShow.$cancelTimeout();\r\n\t\t}\r\n\t\tif(this.delayHide){\r\n\t\t\tthis.delayHide.$cancelTimeout();\r\n\t\t}\r\n\t\tthis.tooltip.hide();\r\n\t\t\r\n\t\tthis.delayShow = (utils as any).default.delay((event: MouseEvent, html: string) => {\r\n\t\t\tif(scheduler.callEvent(\"onBeforeTooltip\", [event]) === false) {\r\n\t\t\t\tthis.tooltip.hide();\r\n\t\t\t} else {\r\n\t\t\t\tthis.tooltip.setContent(html);\r\n\t\t\t\tthis.tooltip.show(event);\r\n\t\t\t}\r\n\t\t}, scheduler.config.tooltip_timeout || 1);\r\n\r\n\t\tthis.delayHide = (utils as any).default.delay(() => {\r\n\t\t\tthis.delayShow.$cancelTimeout();\r\n\t\t\tthis.tooltip.hide();\r\n\t\t}, scheduler.config.tooltip_hide_timeout || 1);\r\n\t}\r\n\r\n}","import active_links from \"./active_links\";\r\nimport agenda_legacy from \"./agenda_legacy_view\";\r\nimport agenda_view from \"./agenda\";\r\nimport all_timed from \"./all_timed\";\r\nimport collision from \"./collision\";\r\nimport container_autoresize from \"./container_autoresize\";\r\nimport cookie from \"./cookie\";\r\nimport daytimeline_restricted from \"./restricted_extensions/daytimeline\";\r\nimport drag_between_restricted from \"./restricted_extensions/drag_between\";\r\nimport editors from \"./editors\";\r\nimport expand from \"./expand\";\r\nimport grid_view from \"./restricted_extensions/grid_view\";\r\nimport html_templates from \"./html_templates\";\r\nimport key_nav from \"./key_nav\";\r\nimport layer from \"./layer\";\r\nimport limit from \"./limit\";\r\nimport map_view from \"./map_view\";\r\nimport minical from \"./minical\";\r\nimport monthheight from \"./monthheight\";\r\nimport multisection_restricted from \"./restricted_extensions/multisection\";\r\nimport multiselect from \"./multiselect\";\r\nimport multisource from \"./multisource\";\r\nimport mvc from \"./mvc\";\r\nimport outerdrag from \"./outerdrag\";\r\nimport pdf from \"./pdf\";\r\nimport quick_info from \"./quick_info\";\r\nimport readonly from \"./readonly\";\r\nimport recurring from \"./recurring\";\r\nimport serialize from \"./serialize\";\r\nimport timeline_restricted from \"./restricted_extensions/timeline\";\r\nimport tooltip from \"./tooltip\";\r\nimport treetimeline_restricted from \"./restricted_extensions/treetimeline\";\r\nimport units_restricted from \"./restricted_extensions/units\";\r\nimport url from \"./url\";\r\nimport week_agenda_restricted from \"./restricted_extensions/week_agenda\";\r\nimport wp from \"./wp\";\r\nimport year_view from \"./year_view\";\r\nimport export_api from \"./export_api\";\r\n\r\nexport default {\r\n\tactive_links,\r\n\tagenda_legacy,\r\n\tagenda_view,\r\n\tall_timed,\r\n\tcollision,\r\n\tcontainer_autoresize,\r\n\tcookie,\r\n\tdaytimeline: daytimeline_restricted,\r\n\tdrag_between: drag_between_restricted,\r\n\teditors,\r\n\texpand,\r\n\texport_api,\r\n\tgrid_view,\r\n\thtml_templates,\r\n\tkey_nav,\r\n\tlayer,\r\n\tlimit,\r\n\tmap_view,\r\n\tminical,\r\n\tmonthheight,\r\n\tmultisection: multisection_restricted,\r\n\tmultiselect,\r\n\tmultisource,\r\n\tmvc,\r\n\touterdrag,\r\n\tpdf,\r\n\tquick_info,\r\n\treadonly,\r\n\trecurring,\r\n\tserialize,\r\n\ttimeline: timeline_restricted,\r\n\ttooltip,\r\n\ttreetimeline: treetimeline_restricted,\r\n\tunits: units_restricted,\r\n\turl,\r\n\tweek_agenda: week_agenda_restricted,\r\n\twp,\r\n\tyear_view\r\n};","export default function(scheduler){\r\n\r\nscheduler.config.active_link_view = \"day\";\r\nscheduler._active_link_click = function(e){\r\n\tvar start = e.target;\r\n\tvar to = start.getAttribute(\"data-link-date\");\r\n\tvar s_d = scheduler.date.str_to_date(scheduler.config.api_date, false, true);\r\n\tif (to) {\r\n\t\tscheduler.setCurrentView(s_d(to), scheduler.config.active_link_view);\r\n\t\tif (e && e.preventDefault)\r\n\t\t\te.preventDefault();\r\n\t\treturn false;\r\n\t}\r\n};\r\nscheduler.attachEvent(\"onTemplatesReady\", function() {\r\n\tvar do_wrapper = function(key, fullname){\r\n\t\tfullname = fullname || (key+\"_scale_date\");\r\n\r\n\t\tif(!scheduler.templates['_active_links_old_'+ fullname]){\r\n\t\t\tscheduler.templates['_active_links_old_'+ fullname] = scheduler.templates[fullname];\r\n\t\t}\r\n\t\tvar week_x = scheduler.templates['_active_links_old_'+ fullname];\r\n\t\tvar d_s = scheduler.date.date_to_str(scheduler.config.api_date);\r\n\t\tscheduler.templates[fullname] = function(date) {\r\n\t\t\treturn \"<a data-link-date='\" + d_s(date) + \"' href='#'>\" + week_x(date) + \"</a>\";\r\n\t\t};\r\n\t};\r\n\r\n\tdo_wrapper(\"week\");\r\n\tdo_wrapper(\"\", \"month_day\");\r\n\tif (this.matrix){\r\n\t\tfor (var key in this.matrix)\r\n\t\t\tdo_wrapper(key);\r\n\t}\r\n\r\n\tthis._detachDomEvent(this._obj, \"click\", scheduler._active_link_click);\r\n\tscheduler.event(this._obj, \"click\", scheduler._active_link_click);\r\n});\r\n\r\n}","export default function(scheduler){\r\n\r\nscheduler.date.add_agenda_legacy = function(date){\r\n\treturn scheduler.date.add(date, 1, \"year\");\r\n};\r\n\r\nscheduler.templates.agenda_legacy_time = function(start,end,ev){\r\n\tif (ev._timed)\r\n\t\treturn this.day_date(ev.start_date, ev.end_date, ev)+\" \"+this.event_date(start);\r\n\telse\r\n\t\treturn scheduler.templates.day_date(start)+\" &ndash; \"+scheduler.templates.day_date(end);\r\n};\r\nscheduler.templates.agenda_legacy_text = function(start,end,event){\r\n\treturn event.text;\r\n};\r\nscheduler.templates.agenda_legacy_date = function(){ return \"\"; };\r\n\r\nscheduler.date.agenda_legacy_start=function(){ return scheduler.date.date_part(scheduler._currentDate()); };\r\n\r\nscheduler.attachEvent(\"onTemplatesReady\",function() {\r\n\tvar old_dblclick_dhx_cal_data = scheduler.dblclick_dhx_cal_data;\r\n\tscheduler.dblclick_dhx_cal_data = function() {\r\n\t\tif (this._mode == \"agenda_legacy\") {\r\n\t\t\tif (!this.config.readonly && this.config.dblclick_create)\r\n\t\t\t\tthis.addEventNow();\r\n\t\t} else {\r\n\t\t\tif (old_dblclick_dhx_cal_data)\r\n\t\t\t\treturn old_dblclick_dhx_cal_data.apply(this, arguments);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tvar old = scheduler.render_data;\r\n\tscheduler.render_data=function(evs){\r\n\t\tif (this._mode == \"agenda_legacy\")\r\n\t\t\tfill_agenda_tab();\r\n\t\telse\r\n\t\t\treturn old.apply(this,arguments);\r\n\t};\r\n\r\n\tvar old_render_view_data = scheduler.render_view_data;\r\n\tscheduler.render_view_data = function(){\r\n\t\tif(this._mode == \"agenda_legacy\") {\r\n\t\t\tscheduler._agendaScrollTop = scheduler._els[\"dhx_cal_data\"][0].childNodes[0].scrollTop;\r\n\t\t\tscheduler._els[\"dhx_cal_data\"][0].childNodes[0].scrollTop = 0;\r\n\t\t}\r\n\t\treturn old_render_view_data.apply(this,arguments);\r\n\t};\r\n\r\n\r\n\r\n\tfunction set_full_view(mode){\r\n\t\tif (mode){\r\n\t\t\tvar l = scheduler.locale.labels;\r\n\r\n\t\t\tvar rowAttr = scheduler._waiAria.agendaHeadAttrString();\r\n\t\t\tvar dateHeader = scheduler._waiAria.agendaHeadDateString(l.date);\r\n\t\t\tvar descriptionHeader = scheduler._waiAria.agendaHeadDescriptionString(l.description);\r\n\r\n\t\t\tscheduler._els[\"dhx_cal_header\"][0].innerHTML=\"<div \"+rowAttr+\" class='dhx_agenda_line dhx_agenda_line_header'>\" +\r\n\t\t\t\t\"<div \"+dateHeader+\">\"+l.date+\"</div>\" +\r\n\t\t\t\t\"<span class = 'description_header' style='padding-left:25px' \"+descriptionHeader+\">\"+l.description+\"</span>\" +\r\n\t\t\t\t\"</div>\";\r\n\t\t\tscheduler._table_view=true;\r\n\t\t\tscheduler.set_sizes();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction fill_agenda_tab(){\r\n\t\t//select events for which data need to be printed\r\n\r\n\t\tvar events = scheduler.get_visible_events();\r\n\t\tevents.sort(function(a,b){ return a.start_date>b.start_date?1:-1;});\r\n\r\n\t\tvar tableAttr = scheduler._waiAria.agendaDataAttrString();\r\n\t\tvar agendaEventAttrString;\r\n\t\t//generate html for the view\r\n\t\tvar html=\"<div class='dhx_agenda_area' \"+tableAttr+\">\";\r\n\t\tfor (var i=0; i<events.length; i++){\r\n\t\t\tvar ev = events[i];\r\n\t\t\tvar bg_color = (ev.color?(\"--dhx-scheduler-event-background:\"+ev.color+\";\"):\"\");\r\n\t\t\tvar color = (ev.textColor?(\"--dhx-scheduler-event-color:\"+ev.textColor+\";\"):\"\");\r\n\t\t\tvar ev_class = scheduler.templates.event_class(ev.start_date, ev.end_date, ev);\r\n\r\n\t\t\tagendaEventAttrString = scheduler._waiAria.agendaEventAttrString(ev);\r\n\t\t\tvar agendaDetailsButtonAttr = scheduler._waiAria.agendaDetailsBtnString();\r\n\r\n\t\t\thtml+=\"<div \"+agendaEventAttrString+\" class='dhx_agenda_line\"+(ev_class?' '+ev_class:'')+\r\n\t\t\t\t\t\"' event_id='\"+ev.id+\"' \"+scheduler.config.event_attribute+\"='\"+ev.id+\"' style='\"+color+\"\"+bg_color+\"\"+\r\n\t\t\t\t\t(ev._text_style||\"\")+\"'><div class='dhx_agenda_event_time'>\"+\r\n\t\t\t\t\t(scheduler.config.rtl ? scheduler.templates.agenda_time(ev.end_date,ev.start_date, ev):scheduler.templates.agenda_time(ev.start_date, ev.end_date,ev))+\r\n\t\t\t\t\t\"</div>\";\r\n\t\t\thtml+=`<div ${agendaDetailsButtonAttr} class='dhx_event_icon icon_details'><svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t\t<path d=\"M15.4444 16.4H4.55556V7.6H15.4444V16.4ZM13.1111 2V3.6H6.88889V2H5.33333V3.6H4.55556C3.69222 3.6 3 4.312 3 5.2V16.4C3 16.8243 3.16389 17.2313 3.45561 17.5314C3.74733 17.8314 4.143 18 4.55556 18H15.4444C15.857 18 16.2527 17.8314 16.5444 17.5314C16.8361 17.2313 17 16.8243 17 16.4V5.2C17 4.312 16.3 3.6 15.4444 3.6H14.6667V2H13.1111ZM13.8889 10.8H10V14.8H13.8889V10.8Z\" fill=\"#A1A4A6\"/>\r\n\t\t\t</svg></div>`;\r\n\t\t\thtml+=\"<span>\"+scheduler.templates.agenda_text(ev.start_date, ev.end_date, ev)+\"</span></div>\";\r\n\t\t}\r\n\t\thtml+=\"<div class='dhx_v_border'></div></div>\";\r\n\r\n\t\t//render html\r\n\t\tscheduler._els[\"dhx_cal_data\"][0].innerHTML = html;\r\n\t\tscheduler._els[\"dhx_cal_data\"][0].childNodes[0].scrollTop = scheduler._agendaScrollTop||0;\r\n\r\n\t\t// setting up dhx_v_border size\r\n\t\tvar agenda_area = scheduler._els[\"dhx_cal_data\"][0].childNodes[0];\r\n\t\tvar v_border = agenda_area.childNodes[agenda_area.childNodes.length-1];\r\n\t\tv_border.style.height = (agenda_area.offsetHeight < scheduler._els[\"dhx_cal_data\"][0].offsetHeight) ? \"100%\" : (agenda_area.offsetHeight+\"px\");\r\n\r\n\t\tvar t=scheduler._els[\"dhx_cal_data\"][0].firstChild.childNodes;\r\n\r\n\t\tvar dateElement = scheduler._getNavDateElement();\r\n\t\tif(dateElement){\r\n\t\t\tdateElement.innerHTML=scheduler.templates.agenda_date(scheduler._min_date, scheduler._max_date, scheduler._mode);\r\n\t\t}\r\n\r\n\t\tscheduler._rendered=[];\r\n\t\tfor (var i=0; i < t.length-1; i++)\r\n\t\t\tscheduler._rendered[i]=t[i];\r\n\r\n\t}\r\n\r\n\tscheduler.agenda_legacy_view=function(mode){\r\n\t\tscheduler._min_date = scheduler.config.agenda_start||scheduler.date.agenda_legacy_start(scheduler._date);\r\n\t\tscheduler._max_date = scheduler.config.agenda_end||scheduler.date.add_agenda_legacy(scheduler._min_date, 1);\r\n\r\n\t\tset_full_view(mode);\r\n\t\tif (mode){\r\n\t\t\tscheduler._cols = null;\r\n\t\t\tscheduler._colsS = null;\r\n\t\t\tscheduler._table_view = true;\r\n\t\t\t//agenda tab activated\r\n\t\t\tfill_agenda_tab();\r\n\t\t} else {\r\n\t\t\tscheduler._table_view = false;\r\n\t\t\t//agenda tab de-activated\r\n\t\t}\r\n\t};\r\n});\r\n\r\n\r\n}","export default function(scheduler){\r\n\r\n\tscheduler.date.add_agenda = function(date, inc){\r\n\t\treturn scheduler.date.add(date, 1*inc, \"month\");\r\n\t};\r\n\t\r\n\tscheduler.templates.agenda_time = function(start,end,ev){\r\n\t\tif (ev._timed){\r\n\t\t\treturn `${this.event_date(start)} - ${this.event_date(end)}`;\r\n\t\t}else{\r\n\t\t\treturn scheduler.locale.labels.full_day;\r\n\t\t}\r\n\t};\r\n\tscheduler.templates.agenda_text = function(start,end,ev){\r\n\t\treturn ev.text;\r\n\t};\r\n\r\n\tconst dayDateToStr = scheduler.date.date_to_str(\"%F %j\");\r\n\tconst dayDowToStr = scheduler.date.date_to_str(\"%l\");\r\n\r\n\tscheduler.templates.agenda_day = function(date){ \r\n\t\treturn `<div class=\"dhx_agenda_day_date\">${dayDateToStr(date)}</div>\r\n\t\t<div class=\"dhx_agenda_day_dow\">${dayDowToStr(date)}</div>`;\r\n\t};\r\n\tscheduler.templates.agenda_date = function(start, end){ \r\n\t\treturn scheduler.templates.month_date(scheduler.getState().date); \r\n\t};\r\n\t\r\n\tscheduler.date.agenda_start=function(date){\r\n\t\treturn scheduler.date.month_start(new Date(date));\r\n\t};\r\n\r\n\tlet scrollTop = 0;\r\n\t\r\n\tscheduler.attachEvent(\"onTemplatesReady\",function() {\r\n\t\tvar old_dblclick_dhx_cal_data = scheduler.dblclick_dhx_cal_data;\r\n\t\tscheduler.dblclick_dhx_cal_data = function() {\r\n\t\t\tif (this._mode == \"agenda\") {\r\n\t\t\t\tif (!this.config.readonly && this.config.dblclick_create)\r\n\t\t\t\t\tthis.addEventNow();\r\n\t\t\t} else {\r\n\t\t\t\tif (old_dblclick_dhx_cal_data)\r\n\t\t\t\t\treturn old_dblclick_dhx_cal_data.apply(this, arguments);\r\n\t\t\t}\r\n\t\t};\r\n\t\r\n\t\r\n\t\tvar old = scheduler.render_data;\r\n\t\tscheduler.render_data=function(evs){\r\n\t\t\tif (this._mode == \"agenda\")\r\n\t\t\t\tfill_agenda_tab();\r\n\t\t\telse\r\n\t\t\t\treturn old.apply(this,arguments);\r\n\t\t};\r\n\t\r\n\t\tvar old_render_view_data = scheduler.render_view_data;\r\n\t\tscheduler.render_view_data = function(){\r\n\t\t\tif(this._mode == \"agenda\") {\r\n\t\t\t\tscrollTop = scheduler._els[\"dhx_cal_data\"][0].scrollTop;\r\n\t\t\t\tscheduler._els[\"dhx_cal_data\"][0].scrollTop = 0;\r\n\t\t\t}\r\n\t\t\treturn old_render_view_data.apply(this,arguments);\r\n\t\t};\r\n\r\n\t\tfunction fill_agenda_tab(){\r\n\t\t\tconst events = scheduler.get_visible_events();\r\n\t\t\tevents.sort(function(a,b){ return a.start_date>b.start_date?1:-1;});\r\n\r\n\t\t\tconst eventsInDays = {};\r\n\t\t\tlet currDate = scheduler.getState().min_date;\r\n\t\t\tconst maxDate = scheduler.getState().max_date;\r\n\t\t\twhile(currDate.valueOf() < maxDate.valueOf()){\r\n\t\t\t\teventsInDays[currDate.valueOf()] = [];\r\n\t\t\t\tcurrDate = scheduler.date.add(currDate, 1, \"day\");\r\n\t\t\t}\r\n\r\n\t\t\tlet anyEvents = false;\r\n\r\n\t\t\tevents.forEach((ev) => {\r\n\t\t\t\tlet eventStart = scheduler.date.day_start(new Date(ev.start_date)); \r\n\t\t\t\twhile (eventStart.valueOf() < ev.end_date.valueOf()) {\r\n\t\t\t\t\tif (eventsInDays[eventStart.valueOf()]) {\r\n\t\t\t\t\t\teventsInDays[eventStart.valueOf()].push(ev);\r\n\t\t\t\t\t\tanyEvents = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\teventStart = scheduler.date.day_start(scheduler.date.add(eventStart, 1, \"day\"));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(!anyEvents){\r\n\t\t\t\tscheduler._els[\"dhx_cal_data\"][0].innerHTML = renderEmptyView();\r\n\t\t\t}else{\r\n\t\t\t\tlet html = \"\";\r\n\t\t\t\tfor(let day in eventsInDays){\r\n\t\t\t\t\thtml += renderDay(new Date(day*1), eventsInDays[day]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscheduler._els[\"dhx_cal_data\"][0].innerHTML = html;\r\n\t\t\t}\r\n\r\n\t\t\tscheduler._els[\"dhx_cal_data\"][0].scrollTop = scrollTop;\r\n\t\t\t\r\n\t\t\tlet t = scheduler._els[\"dhx_cal_data\"][0].querySelectorAll(\".dhx_cal_agenda_event_line\");\r\n\t\t\tscheduler._rendered = [];\r\n\t\t\tfor (var i = 0; i < t.length - 1; i++) {\r\n\t\t\t\tscheduler._rendered[i] = t[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\r\n\r\n\t\tfunction renderEmptyView(){\r\n\t\t\treturn `<div class=\"dhx_cal_agenda_no_events\">${scheduler.locale.labels.agenda_tab}</div>`;\r\n\t\t}\r\n\r\n\t\tfunction renderDay(day, events) {\r\n\t\t\tif(!events.length){\r\n\t\t\t\treturn \"\";\r\n\t\t\t}\r\n\t\t\tlet html = `\r\n<div class=\"dhx_cal_agenda_day\">\r\n\t<div class=\"dhx_cal_agenda_day_header\">${scheduler.templates.agenda_day(day)}</div>\r\n\t<div class=\"dhx_cal_agenda_day_events\">\r\n`;\r\n\r\n\t\t\tevents.forEach((calendarEvent) => {\r\n\t\t\t\thtml += renderOneEvent(day, calendarEvent);\r\n\t\t\t});\r\n\r\n\t\t\thtml += `</div></div>`;\r\n\t\t\treturn html;\r\n\t\t}\r\n\r\n\t\tfunction renderOneEvent(day, calendarEvent){\r\n\t\t\tconst dates = scheduler.templates.agenda_time(calendarEvent.start_date, calendarEvent.end_date, calendarEvent);\r\n\t\t\tconst selectedId = scheduler.getState().select_id;\r\n\t\t\tconst cls = scheduler.templates.event_class(calendarEvent.start_date, calendarEvent.end_date, calendarEvent);\r\n\t\t\tconst description = scheduler.templates.agenda_text(calendarEvent.start_date, calendarEvent.end_date, calendarEvent);\r\n\r\n\t\t\tlet style = \"\";\r\n\t\t\tif(calendarEvent.color || calendarEvent.textColor){\r\n\t\t\t\tconst bg = (calendarEvent.color ? (\"--dhx-scheduler-event-background:\" + calendarEvent.color + \";\") : \"\");\r\n\t\t\t\tconst color = (calendarEvent.textColor ? (\"--dhx-scheduler-event-color:\" + calendarEvent.textColor + \";\") : \"\");\r\n\t\t\t\tstyle = ` style=\"${bg}${color}\" `;\r\n\t\t\t}\r\n\r\n\t\t\treturn `<div class=\"dhx_cal_agenda_event_line ${cls||\"\"} ${calendarEvent.id == selectedId ? \"dhx_cal_agenda_event_line_selected\" : \"\"}\" ${style} ${scheduler.config.event_attribute}=\"${calendarEvent.id}\">\r\n\t<div class=\"dhx_cal_agenda_event_line_marker\"></div>\r\n\t<div class=\"dhx_cal_agenda_event_line_time\">${dates}</div>\r\n\t<div class=\"dhx_cal_agenda_event_line_text\">${description}</div>\r\n</div>`;\r\n\t\t}\r\n\t\r\n\t\tscheduler.agenda_view=function(mode){\r\n\t\t\tif (mode){\r\n\t\t\t\tscheduler._min_date = scheduler.config.agenda_start || scheduler.date.agenda_start(scheduler._date);\r\n\t\t\t\tscheduler._max_date = scheduler.config.agenda_end || scheduler.date.add_agenda(scheduler._min_date, 1);\r\n\t\t\t\tscheduler._cols = null;\r\n\t\t\t\tscheduler._colsS = null;\r\n\t\t\t\tscheduler._table_view = true;\r\n\r\n\t\t\t\tconst dateHeader = scheduler._getNavDateElement();\r\n\t\t\t\tdateHeader.innerHTML = scheduler.templates.agenda_date(scheduler._date);\r\n\t\t\t\t//agenda tab activated\r\n\t\t\t\tfill_agenda_tab();\r\n\t\t\t} else {\r\n\t\t\t\tscheduler._table_view = false;\r\n\t\t\t\t//agenda tab de-activated\r\n\t\t\t}\r\n\t\t};\r\n\t});\r\n\r\n\t// scheduler.attachEvent(\"onEventSelected\", function(id){\r\n\t// \tconst oldSelected = scheduler.$container.querySelectorAll(\".dhx_cal_agenda_event_line_selected\");\r\n\t// \toldSelected.forEach((el) => {\r\n\t// \t\tel.classList.remove(\"dhx_cal_agenda_event_line_selected\");\r\n\t// \t});\r\n\r\n\t// \tconst selected = scheduler.$container.querySelector(`[${scheduler.config.event_attribute}=\"${id}\"]`);\r\n\t// \tif(selected){\r\n\t// \t\tselected.classList.add(\"dhx_cal_agenda_event_line_selected\");\r\n\t// \t}\r\n\t// });\r\n\t\r\n\t\r\n}","export default function(scheduler){\r\n\r\n\tscheduler.config.all_timed = \"short\";\r\n\tscheduler.config.all_timed_month = false;\r\n\r\n\tvar is_event_short = function (ev) {\r\n\t\tif(!((ev.end_date - ev.start_date)/(1000*60*60) >= 24)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// short event shouldn't disappear to multiday area during dnd-resize\r\n\t\tif(scheduler._drag_mode == \"resize\" && scheduler._drag_id == ev.id){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn \tfalse;\r\n\t};\r\n\r\n\t// copy of usual events and recurring instances;\r\n\t// regular copy causes problems with recurrings which have series event as a prototype\r\n\tscheduler._safe_copy = function(event){\r\n\t\tvar proto = null,\r\n\t\t\tcopy = scheduler._copy_event(event);\r\n\t\tif(event.event_pid){\r\n\t\t\tproto = scheduler.getEvent(event.event_pid);\r\n\t\t}\r\n\r\n\t\tif (proto && proto.isPrototypeOf(event)) {\r\n\t\t\tdelete copy.event_length;\r\n\t\t\tdelete copy.event_pid;\r\n\t\t\tdelete copy.rec_pattern;\r\n\t\t\tdelete copy.rec_type;\r\n\t\t}\r\n\r\n\t\treturn copy;\r\n\t};\r\n\r\n\tvar old_prerender_events_line = scheduler._pre_render_events_line;\r\n\tvar old_prerender_events_table = scheduler._pre_render_events_table;\r\n\r\n\tvar prerender_events = function (evs, hold) {\r\n\t\tif (!this._table_view) {\r\n\t\t\treturn old_prerender_events_line.call(this, evs, hold);\r\n\t\t}\r\n\r\n\t\treturn old_prerender_events_table.call(this, evs, hold);\r\n\t};\r\n\r\n\tscheduler._pre_render_events_line = scheduler._pre_render_events_table = function(evs, hold){\r\n\t\tif (!this.config.all_timed ||\r\n\t\t\t(this._table_view && this._mode != \"month\") ||\r\n\t\t\t(this._mode == \"month\" && !this.config.all_timed_month))\r\n\t\t\treturn prerender_events.call(this, evs, hold);\r\n\r\n\t\tfor (var i=0; i < evs.length; i++) {\r\n\t\t\tvar ev=evs[i];\r\n\r\n\t\t\tif (ev._timed)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif (this.config.all_timed == \"short\") {\r\n\t\t\t\tif (!is_event_short(ev)) {\r\n\t\t\t\t\tif (this._mode != \"month\") {\r\n\t\t\t\t\t\tevs.splice(i--, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar ce = this._safe_copy(ev); // current event (event for one specific day) is copy of original with modified dates\r\n\t\t\tif(!ev._virtual){\r\n\t\t\t\tce._first_chunk = true;\r\n\t\t\t}else{\r\n\t\t\t\tce._first_chunk = false;\r\n\t\t\t}\r\n\t\t\tce._drag_resize = false;\r\n\t\t\tce._virtual = true;\r\n\t\t\tce.start_date = new Date(ce.start_date); // as lame copy doesn't copy date objects\r\n\r\n\t\t\tif (!isOvernightEvent(ev)) {\r\n\t\t\t\tce.end_date = new Date(ev.end_date);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tce.end_date = getNextDay(ce.start_date);\r\n\t\t\t\tif (this.config.last_hour != 24) { // if specific last_hour was set (e.g. 20)\r\n\t\t\t\t\tce.end_date = setDateTime(ce.start_date, this.config.last_hour);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar event_changed = false;\r\n\t\t\tif (ce.start_date < this._max_date && ce.end_date > this._min_date && ce.start_date < ce.end_date) {\r\n\t\t\t\tevs[i] = ce; // adding another event in collection\r\n\t\t\t\tevent_changed = true;\r\n\t\t\t}\r\n\t\t//\tif (ce.start_date > ce.end_date) {\r\n\t\t//\t\tevs.splice(i--,1);\r\n\t\t//\t}\r\n\r\n\t\t\tvar re = this._safe_copy(ev); // remaining event, copy of original with modified start_date (making range more narrow)\r\n\t\t\tre._virtual = true;\r\n\t\t\tre.end_date = new Date(re.end_date);\r\n\t\t\tif (re.start_date < this._min_date)\r\n\t\t\t\tre.start_date = setDateTime(this._min_date, this.config.first_hour);// as we are starting only with whole hours\r\n\t\t\telse\r\n\t\t\t\tre.start_date = setDateTime(getNextDay(ev.start_date), this.config.first_hour);\r\n\r\n\t\t\tif (re.start_date < this._max_date && re.start_date < re.end_date) {\r\n\t\t\t\tif (event_changed){\r\n\t\t\t\t\tevs.splice(i+1,0,re);//insert part\r\n\t\t\t\t}else {\r\n\t\t\t\t\tevs[i--] = re;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tre._last_chunk = false;\r\n\t\t\t}else{\r\n\t\t\t\tce._last_chunk = true;\r\n\t\t\t\tce._drag_resize = true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t// in case of all_timed pre_render is not applied to the original event\r\n\t\t// so we need to force redraw in case of dnd\r\n\t\tvar redraw = (this._drag_mode == 'move')?false:hold;\r\n\t\treturn prerender_events.call(this, evs, redraw);\r\n\r\n\r\n\t\tfunction isOvernightEvent(ev){\r\n\t\t\tvar next_day = getNextDay(ev.start_date);\r\n\t\t\treturn (+ev.end_date > +next_day);\r\n\t\t}\r\n\t\tfunction getNextDay(date){\r\n\t\t\tvar next_day = scheduler.date.add(date, 1, \"day\");\r\n\t\t\tnext_day = scheduler.date.date_part(next_day);\r\n\t\t\treturn next_day;\r\n\t\t}\r\n\t\tfunction setDateTime(date, hours){\r\n\t\t\tvar val = scheduler.date.date_part(new Date(date));\r\n\t\t\tval.setHours(hours);\r\n\t\t\treturn val;\r\n\t\t}\r\n\t};\r\n\tvar old_get_visible_events = scheduler.get_visible_events;\r\n\tscheduler.get_visible_events = function(only_timed){\r\n\t\tif (!(this.config.all_timed && this.config.multi_day))\r\n\t\t\treturn old_get_visible_events.call(this, only_timed);\r\n\t\treturn old_get_visible_events.call(this, false); // only timed = false\r\n\t};\r\n\tscheduler.attachEvent(\"onBeforeViewChange\", function (old_mode, old_date, mode, date) {\r\n\t\tscheduler._allow_dnd = (mode == \"day\" || mode == \"week\" || scheduler.getView(mode));\r\n\t\treturn true;\r\n\t});\r\n\r\n\tscheduler._is_main_area_event = function(ev){\r\n\t\treturn !!(ev._timed || this.config.all_timed === true || (this.config.all_timed == \"short\" && is_event_short(ev)) );\r\n\t};\r\n\r\n\tvar oldUpdate = scheduler.updateEvent;\r\n\tscheduler.updateEvent = function(id){\r\n\t\t// full redraw(update_render=true) messes events order while dnd.\r\n\t\t// individual redraw(update_render=false) of multiday event, which happens on select/unselect, expands event to full width of the cell and can be fixes only with full redraw.\r\n\t\t// so for now full redraw is always enabled for not-dnd updates\r\n\t\tvar ev = scheduler.getEvent(id);\r\n\t\tvar fullRedrawNeeded;\r\n\t\tvar initial;\r\n\t\tif(ev) {\r\n\t\t\tfullRedrawNeeded = (scheduler.config.all_timed && !(scheduler.isOneDayEvent(scheduler._events[id]) || scheduler.getState().drag_id));\r\n\t\t\tif (fullRedrawNeeded) {\r\n\t\t\t\tinitial = scheduler.config.update_render;\r\n\t\t\t\tscheduler.config.update_render = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\toldUpdate.apply(scheduler, arguments);\r\n\r\n\t\tif(ev) {\r\n\t\t\tif (fullRedrawNeeded) {\r\n\t\t\t\tscheduler.config.update_render = initial;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n}","export default function(scheduler){\r\n\r\nvar temp_section;\r\nvar before;\r\n\r\nscheduler.config.collision_limit = 1;\r\n\r\nfunction _setTempSection(event_id) { // for custom views (matrix, timeline, units)\r\n\tvar checked_mode = scheduler._get_section_view();\r\n\tif(checked_mode && event_id){\r\n\t\ttemp_section = scheduler.getEvent(event_id)[scheduler._get_section_property()];\r\n\t}\r\n}\r\n\r\nscheduler.attachEvent(\"onBeforeDrag\",function(id){\r\n\t_setTempSection(id);\r\n\treturn true;\r\n});\r\nscheduler.attachEvent(\"onBeforeLightbox\",function(id){\r\n\tvar ev = scheduler.getEvent(id);\r\n\tbefore = [ev.start_date, ev.end_date];\r\n\t_setTempSection(id);\r\n\treturn true;\r\n});\r\nscheduler.attachEvent(\"onEventChanged\",function(id){\r\n\tif (!id || !scheduler.getEvent(id)) return true;\r\n\tvar ev = scheduler.getEvent(id);\r\n\tif (!scheduler.checkCollision(ev)){\r\n\t\tif (!before) return false;\r\n\t\tev.start_date = before[0];\r\n\t\tev.end_date = before[1];\r\n\t\tev._timed=this.isOneDayEvent(ev);\r\n\t}\r\n\treturn true;\r\n});\r\nscheduler.attachEvent(\"onBeforeEventChanged\",function(ev,e,is_new){\r\n\treturn scheduler.checkCollision(ev);\r\n});\r\nscheduler.attachEvent(\"onEventAdded\",function(id,ev) {\r\n\tvar result = scheduler.checkCollision(ev);\r\n\tif (!result)\r\n\t\tscheduler.deleteEvent(id);\r\n});\r\nscheduler.attachEvent(\"onEventSave\",function(id, edited_ev, is_new){\r\n\tedited_ev = scheduler._lame_clone(edited_ev);\r\n\tedited_ev.id = id;\r\n\r\n\t//lightbox may not have 'time' section\r\n\tif(!(edited_ev.start_date && edited_ev.end_date)){\r\n\t\tvar ev = scheduler.getEvent(id);\r\n\t\tedited_ev.start_date = new Date(ev.start_date);\r\n\t\tedited_ev.end_date = new Date(ev.end_date);\r\n\t}\r\n\r\n\tif(edited_ev.rec_type){\r\n\t\tscheduler._roll_back_dates(edited_ev);\r\n\t}\r\n\treturn scheduler.checkCollision(edited_ev); // in case user creates event on one date but then edited it another\r\n});\r\n\r\nscheduler._check_sections_collision = function(first, second){\r\n\tvar map_to = scheduler._get_section_property();\r\n\tif (first[map_to] == second[map_to] && first.id != second.id)\r\n\t\treturn true;\r\n\treturn false;\r\n};\r\n\r\nscheduler.checkCollision = function(ev) {\r\n\tvar evs = [];\r\n\tvar collision_limit = scheduler.config.collision_limit;\r\n\r\n\tif (ev.rec_type) {\r\n\t\tvar evs_dates = scheduler.getRecDates(ev);\r\n\t\tfor(var k=0; k<evs_dates.length; k++) {\r\n\t\t\tvar tevs = scheduler.getEvents(evs_dates[k].start_date, evs_dates[k].end_date);\r\n\t\t\tfor(var j=0; j<tevs.length; j++) {\r\n\t\t\t\tif ((tevs[j].event_pid || tevs[j].id) != ev.id )\r\n\t\t\t\t\tevs.push(tevs[j]);\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\tevs = scheduler.getEvents(ev.start_date, ev.end_date);\r\n\t\tfor (var i=0; i<evs.length; i++) {\r\n\t\t\tvar concurrent = evs[i];\r\n\r\n\t\t\tif (concurrent.id == ev.id || (concurrent.event_length && [concurrent.event_pid, concurrent.event_length].join(\"#\") == ev.id)) {\r\n\t\t\t\tevs.splice(i,1);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar checked_mode = scheduler._get_section_view();\r\n\tvar map_to = scheduler._get_section_property();\r\n\r\n\tvar single = true;\r\n\tif (checked_mode) { // custom view\r\n\t\tvar count = 0;\r\n\r\n\t\tfor (var i = 0; i < evs.length; i++){\r\n\t\t\tif (evs[i].id != ev.id && this._check_sections_collision(evs[i], ev))\r\n\t\t\t\tcount++;\r\n\t\t}\r\n\r\n\t\tif (count >= collision_limit) {\r\n\r\n\t\t\tsingle = false;\r\n\t\t}\r\n\t}\r\n\telse {\r\n\t\tif ( evs.length >= collision_limit )\r\n\t\t\tsingle = false;\r\n\t}\r\n\tif (!single) {\r\n\t\tvar res = !scheduler.callEvent(\"onEventCollision\",[ev,evs]);\r\n\t\tif (!res) {\r\n\t\t\tev[map_to] = temp_section||ev[map_to]; // from _setTempSection for custom views\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\treturn single;\r\n\r\n};\r\n\r\n}","export default function(scheduler){\r\n\r\n\tscheduler.config.container_autoresize = true;\r\n\tscheduler.config.month_day_min_height = 90;\r\n\tscheduler.config.min_grid_size = 25;\r\n\tscheduler.config.min_map_size = 400;\r\n\r\n\tvar old_pre_render_event = scheduler._pre_render_events;\r\n\r\n\t//need for temporary disabling without modifying public config\r\n\tvar active = true;\r\n\tvar total_height = 0;\r\n\tvar multiday_height = 0;\r\n\r\n\tscheduler._pre_render_events = function(evs, hold) {\r\n\t\tif (!(scheduler.config.container_autoresize && active)) {\r\n\t\t\treturn old_pre_render_event.apply(this, arguments);\r\n\t\t}\r\n\r\n\t\tvar hb = this.xy.bar_height;\r\n\t\tvar h_old = this._colsS.heights;\r\n\t\tvar h = this._colsS.heights = [0, 0, 0, 0, 0, 0, 0];\r\n\t\tvar data = this._els[\"dhx_cal_data\"][0];\r\n\r\n\t\tif (!this._table_view)\r\n\t\t\tevs = this._pre_render_events_line(evs, hold); //ignore long events for now\r\n\t\telse\r\n\t\t\tevs = this._pre_render_events_table(evs, hold);\r\n\r\n\t\tif (this._table_view) {\r\n\t\t\tif (hold){\r\n\t\t\t\tthis._colsS.heights = h_old;\r\n\t\t\t} else {\r\n\t\t\t\tvar evl = data.firstChild;\r\n\t\t\t\tconst rows = evl.querySelectorAll(\".dhx_cal_month_row\");\r\n\t\t\t\tif (rows) {\r\n\t\t\t\t\tfor (var i = 0; i < rows.length; i++) {\r\n\t\t\t\t\t\th[i]++;\r\n\r\n\t\t\t\t\t\tif ((h[i]) * hb > this._colsS.height - this.xy.month_head_height) { // 22 - height of cell's header\r\n\t\t\t\t\t\t\t//we have overflow, update heights\r\n\t\t\t\t\t\t\tvar cells = rows[i].querySelectorAll(\".dhx_cal_month_cell\");\r\n\r\n\t\t\t\t\t\t\tvar cHeight = this._colsS.height - this.xy.month_head_height;\r\n\t\t\t\t\t\t\tif(this.config.max_month_events*1 !== this.config.max_month_events || h[i] <= this.config.max_month_events){\r\n\t\t\t\t\t\t\t\tcHeight = h[i] * hb;\r\n\t\t\t\t\t\t\t}else if( (this.config.max_month_events + 1) * hb > this._colsS.height - this.xy.month_head_height){\r\n\t\t\t\t\t\t\t\tcHeight = (this.config.max_month_events + 1) * hb;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\trows[i].style.height = (cHeight + this.xy.month_head_height) + \"px\";\r\n\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\tfor (var j = 0; j < cells.length; j++) {\r\n\t\t\t\t\t\t\t\tcells[j].childNodes[1].style.height = cHeight + \"px\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\th[i] = (h[i - 1] || 0) + cells[0].offsetHeight;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\th[i] = (h[i - 1] || 0) + rows[i].querySelectorAll(\".dhx_cal_month_cell\")[0].offsetHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t\th.unshift(0);\r\n\t\t\t\t\tif (evl.parentNode.offsetHeight < evl.parentNode.scrollHeight && !evl._h_fix) {\r\n\t\t\t\t\t\t//we have v-scroll, decrease last day cell\r\n\r\n\t\t\t\t\t\t// NO CHECK SHOULD BE MADE ON VERTICAL SCROLL\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!evs.length && this._els[\"dhx_multi_day\"][0].style.visibility == \"visible\")\r\n\t\t\t\t\t\th[0] = -1;\r\n\t\t\t\t\tif (evs.length || h[0] == -1) {\r\n\t\t\t\t\t\t//shift days to have space for multiday events\r\n\t\t\t\t\t\t//var childs = evl.parentNode.childNodes;\r\n\t\t\t\t\t\tvar dh = ((h[0] + 1) * hb + 1); // +1 so multiday events would have 2px from top and 2px from bottom by default\r\n\t\t\t\t\t\tif(multiday_height != dh + 1) {\r\n\t\t\t\t\t\t\tthis._obj.style.height = (total_height - multiday_height + dh - 1) + \"px\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdh += \"px\";\r\n\t\t\t\t\t\tconst navHeight = this._els[\"dhx_cal_navline\"][0].offsetHeight;\r\n\t\t\t\t\t\tconst headerHeight =  this._els[\"dhx_cal_header\"][0].offsetHeight;\r\n\t\t\t\t\t\tdata.style.height = (this._obj.offsetHeight - navHeight - headerHeight - (this.xy.margin_top || 0)) + 'px';\r\n\t\t\t\t\t\tvar last = this._els[\"dhx_multi_day\"][0];\r\n\t\t\t\t\t\tlast.style.height = dh;\r\n\t\t\t\t\t\tlast.style.visibility = (h[0] == -1 ? \"hidden\" : \"visible\");\r\n\t\t\t\t\t\tlast = this._els[\"dhx_multi_day\"][1];\r\n\t\t\t\t\t\tlast.style.height = dh;\r\n\t\t\t\t\t\tlast.style.visibility = (h[0] == -1 ? \"hidden\" : \"visible\");\r\n\t\t\t\t\t\tif(last.style.visibility == \"hidden\"){\r\n\t\t\t\t\t\t\tlast.style.display = \"none\";\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tlast.style.display = \"\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlast.className = h[0] ? \"dhx_multi_day_icon\" : \"dhx_multi_day_icon_small\";\r\n\t\t\t\t\t\tthis._dy_shift = (h[0] + 1) * hb;\r\n\t\t\t\t\t\th[0] = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn evs;\r\n\t};\r\n\r\n\tvar checked_divs = [\"dhx_cal_navline\", \"dhx_cal_header\", \"dhx_multi_day\", \"dhx_cal_data\"];\r\n\tvar updateContainterHeight = function(is_repaint) {\r\n\t\ttotal_height = 0;\r\n\t\tfor (var i = 0; i < checked_divs.length; i++) {\r\n\r\n\t\t\tvar className = checked_divs[i];\r\n\t\t\tvar checked_div = (scheduler._els[className]) ? scheduler._els[className][0] : null;\r\n\t\t\tvar height = 0;\r\n\t\t\tswitch (className) {\r\n\t\t\t\tcase \"dhx_cal_navline\":\r\n\t\t\t\tcase \"dhx_cal_header\":\r\n\t\t\t\t\theight = checked_div.offsetHeight;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"dhx_multi_day\":\r\n\t\t\t\t\theight = (checked_div) ? checked_div.offsetHeight - 1 : 0;\r\n\t\t\t\t\tmultiday_height = height;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"dhx_cal_data\":\r\n\t\t\t\t\tvar mode = scheduler.getState().mode;\r\n\r\n\t\t\t\t\tif(checked_div.childNodes[1] && mode != \"month\") {\r\n\t\t\t\t\t\tlet maxHeight = 0;\r\n\t\t\t\t\t\tfor(let i = 0; i < checked_div.childNodes.length; i++){\r\n\t\t\t\t\t\t\tif(checked_div.childNodes[i].offsetHeight > maxHeight){\r\n\t\t\t\t\t\t\t\tmaxHeight = checked_div.childNodes[i].offsetHeight;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\theight = maxHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\theight = Math.max(checked_div.offsetHeight - 1, checked_div.scrollHeight);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (mode == \"month\") {\r\n\t\t\t\t\t\tif (scheduler.config.month_day_min_height && !is_repaint) {\r\n\t\t\t\t\t\t\tvar rows_length = checked_div.querySelectorAll(\".dhx_cal_month_row\").length;\r\n\t\t\t\t\t\t\theight = rows_length * scheduler.config.month_day_min_height;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (is_repaint) {\r\n\t\t\t\t\t\t\tchecked_div.style.height = height + \"px\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (mode == \"year\"){\r\n\t\t\t\t\t\theight = 190 * scheduler.config.year_y;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(mode == \"agenda\"){\r\n\t\t\t\t\t\theight = 0;\r\n\t\t\t\t\t\tif(checked_div.childNodes && checked_div.childNodes.length){\r\n\t\t\t\t\t\t\tfor(var j = 0; j < checked_div.childNodes.length; j++){\r\n\t\t\t\t\t\t\t\theight += checked_div.childNodes[j].offsetHeight;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(height + 2 < scheduler.config.min_grid_size){\r\n\t\t\t\t\t\t\theight = scheduler.config.min_grid_size;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\theight += 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (mode == \"week_agenda\"){\r\n\t\t\t\t\t\tvar min_height = scheduler.xy.week_agenda_scale_height + scheduler.config.min_grid_size,\r\n\t\t\t\t\t\t\tcur_height;\r\n\r\n\t\t\t\t\t\tvar column;\r\n\t\t\t\t\t\tfor(var k = 0; k < checked_div.childNodes.length; k++){\r\n\t\t\t\t\t\t\tcolumn = checked_div.childNodes[k];\r\n\t\t\t\t\t\t\tfor(var j = 0; j < column.childNodes.length; j++) {\r\n\t\t\t\t\t\t\t\tvar innerHeight = 0,\r\n\t\t\t\t\t\t\t\t\teventsContainer = column.childNodes[j].childNodes[1];\r\n\r\n\t\t\t\t\t\t\t\tfor(var g =0; g < eventsContainer.childNodes.length; g++){\r\n\t\t\t\t\t\t\t\t\tinnerHeight += eventsContainer.childNodes[g].offsetHeight;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tcur_height = innerHeight + scheduler.xy.week_agenda_scale_height;\r\n\t\t\t\t\t\t\t\tcur_height = (k == 1 && (j == 2 || j == 3)) ? cur_height * 2 : cur_height; // for last two cells;\r\n\r\n\t\t\t\t\t\t\t\tif (cur_height > min_height) {\r\n\t\t\t\t\t\t\t\t\tmin_height = cur_height;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\theight = min_height * 3;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(mode == \"map\") {\r\n\t\t\t\t\t\theight = 0;\r\n\t\t\t\t\t\tvar evs = checked_div.querySelectorAll(\".dhx_map_line\");\r\n\r\n\t\t\t\t\t\tfor (var j = 0; j < evs.length; j++) {\r\n\t\t\t\t\t\t\theight += evs[j].offsetHeight;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (height + 2 < scheduler.config.min_map_size) {\r\n\t\t\t\t\t\t\theight = scheduler.config.min_map_size;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\theight += 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(scheduler._gridView) {\r\n\t\t\t\t\t\theight = 0;\r\n\r\n\t\t\t\t\t\tif (checked_div.childNodes[1].childNodes[0].childNodes && checked_div.childNodes[1].childNodes[0].childNodes.length) {\r\n\t\t\t\t\t\t\tvar evs = checked_div.childNodes[1].childNodes[0].childNodes[0].childNodes;\r\n\r\n\t\t\t\t\t\t\tfor (var j = 0; j < evs.length; j++) {\r\n\t\t\t\t\t\t\t\theight += evs[j].offsetHeight;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\theight += 2;\r\n\r\n\t\t\t\t\t\t\tif(height < scheduler.config.min_grid_size){\r\n\t\t\t\t\t\t\t\theight = scheduler.config.min_grid_size;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\theight = scheduler.config.min_grid_size;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (scheduler.matrix && scheduler.matrix[mode]) {\r\n\t\t\t\t\t\tif (is_repaint) {\r\n\t\t\t\t\t\t\theight += 0;\r\n\t\t\t\t\t\t\tchecked_div.style.height = height + \"px\";\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\theight = 0;\r\n\t\t\t\t\t\t\tvar cfg = scheduler.matrix[mode];\r\n\t\t\t\t\t\t\tvar rows = cfg.y_unit;\r\n\t\t\t\t\t\t\tfor(var r=0; r < rows.length; r++){\r\n\t\t\t\t\t\t\t\theight += cfg.getSectionHeight(rows[r].key);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// Check and add extra height to avoid events hiding by the horizontal scrollbar\r\n\t\t\t\t\t\t\tif(scheduler.$container.clientWidth != scheduler.$container.scrollWidth){\r\n\t\t\t\t\t\t\t\theight += getScrollSize();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\theight -= 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (mode == \"day\" || mode == \"week\" || (scheduler._props && scheduler._props[mode])) {\r\n\t\t\t\t\t\theight += 2;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\theight += 1;\r\n\t\t\ttotal_height += height;\r\n\t\t}\r\n\t\tscheduler._obj.style.height = (total_height) + \"px\";\r\n\r\n\t\tif (!is_repaint)\r\n\t\t\tscheduler.updateView();\r\n\t};\r\n\r\n\tfunction callUpdate(){\r\n\t\tactive = false;\r\n\t\tscheduler.callEvent(\"onAfterSchedulerResize\", []);\r\n\t\tactive = true;\r\n\t}\r\n\r\n\tvar conditionalUpdateContainerHeight = function() {\r\n\t\tif(!(scheduler.config.container_autoresize && active))\r\n\t\t\treturn true;\r\n\r\n\t\tvar mode = scheduler.getState().mode;\r\n\r\n\t\tif(!mode) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tvar asyncRepaint = window.requestAnimationFrame || window.setTimeout;\r\n\t\tvar scrollTop = document.documentElement.scrollTop;\r\n\r\n\t\tasyncRepaint(function() {\r\n\t\t\tif(scheduler.$destroyed || !scheduler.$initialized){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tupdateContainterHeight();\r\n\t\t});\r\n\r\n\t\tif ( (scheduler.matrix && scheduler.matrix[mode]) || mode == \"month\") {\r\n\t\t\tasyncRepaint(function() {\r\n\t\t\t\tif(scheduler.$destroyed || !scheduler.$initialized){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tupdateContainterHeight(true);\r\n\t\t\t\tdocument.documentElement.scrollTop = scrollTop;\r\n\t\t\t\tcallUpdate();\r\n\t\t\t}, 1);\r\n\t\t}else{\r\n\t\t\tcallUpdate();\r\n\t\t}\r\n\t};\r\n\r\n\tscheduler.attachEvent(\"onBeforeViewChange\", function(){\r\n\t\tvar autosizeEnabled = scheduler.config.container_autoresize;\r\n\t\tif(!scheduler.xy.$original_scroll_width){\r\n\t\t\tscheduler.xy.$original_scroll_width = scheduler.xy.scroll_width;\r\n\t\t}\r\n\r\n\t\tscheduler.xy.scroll_width = autosizeEnabled ? 0 : scheduler.xy.$original_scroll_width;\r\n\r\n\t\tif(scheduler.matrix){\r\n\t\t\tfor(var i in scheduler.matrix){\r\n\t\t\t\tvar timeline = scheduler.matrix[i];\r\n\t\t\t\tif(!timeline.$original_section_autoheight){\r\n\t\t\t\t\ttimeline.$original_section_autoheight = timeline.section_autoheight;\r\n\t\t\t\t}\r\n\t\t\t\tif(autosizeEnabled){\r\n\t\t\t\t\ttimeline.section_autoheight = false;\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttimeline.section_autoheight = timeline.$original_section_autoheight;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\tscheduler.attachEvent(\"onViewChange\", conditionalUpdateContainerHeight);\r\n\tscheduler.attachEvent(\"onXLE\", conditionalUpdateContainerHeight);\r\n\tscheduler.attachEvent(\"onEventChanged\", conditionalUpdateContainerHeight);\r\n\tscheduler.attachEvent(\"onEventCreated\", conditionalUpdateContainerHeight);\r\n\tscheduler.attachEvent(\"onEventAdded\", conditionalUpdateContainerHeight);\r\n\tscheduler.attachEvent(\"onEventDeleted\", conditionalUpdateContainerHeight);\r\n\tscheduler.attachEvent(\"onAfterSchedulerResize\", conditionalUpdateContainerHeight);\r\n\tscheduler.attachEvent(\"onClearAll\", conditionalUpdateContainerHeight);\r\n\r\n\t//disable container autoresize when expanded\r\n\tscheduler.attachEvent(\"onBeforeExpand\", function(){\r\n\t\tactive = false;\r\n\t\treturn true;\r\n\t});\r\n\r\n\tscheduler.attachEvent(\"onBeforeCollapse\", function(){\r\n\t\tactive = true;\r\n\t\treturn true;\r\n\t});\r\n\t// helper function\r\n\tfunction getScrollSize() {\r\n\t\tvar div = document.createElement(\"div\");\r\n\t\tdiv.style.cssText = \"visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;\";\r\n\r\n\t\tdocument.body.appendChild(div);\r\n\t\tvar size = div.offsetWidth - div.clientWidth;\r\n\t\tdocument.body.removeChild(div);\r\n\t\treturn size;\r\n\t}\r\n\r\n\r\n}","export default function(scheduler){\r\n\tfunction setCookie(name,cookie_param,value) {\r\n\t\tvar str = name + \"=\" + value +  (cookie_param?(\"; \"+cookie_param):\"\");\r\n\t\tdocument.cookie = str;\r\n\t}\r\n\tfunction getCookie(name) {\r\n\t\tvar search = name + \"=\";\r\n\t\tif (document.cookie.length > 0) {\r\n\t\t\tvar offset = document.cookie.indexOf(search);\r\n\t\t\tif (offset != -1) {\r\n\t\t\t\toffset += search.length;\r\n\t\t\t\tvar end = document.cookie.indexOf(\";\", offset);\r\n\t\t\t\tif (end == -1)\r\n\t\t\t\t\tend = document.cookie.length;\r\n\t\t\t\treturn document.cookie.substring(offset, end);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tfunction getCookieName(scheduler) {\r\n\t\treturn (scheduler._obj.id || \"scheduler\") + \"_settings\";\r\n\t}\r\n\r\n\tvar first = true;\r\n\tscheduler.attachEvent(\"onBeforeViewChange\",function(oldMode,oldDate,mode,date){\r\n\t\t// if Url plugin is enabled - explicit url values should have more priority than cookies\r\n\t\tif (first && scheduler._get_url_nav){\r\n\t\t\tvar urlNavigationPlugin = scheduler._get_url_nav();\r\n\t\t\tif(urlNavigationPlugin.date || urlNavigationPlugin.mode || urlNavigationPlugin.event){\r\n\t\t\t\tfirst = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar cookie = getCookieName(scheduler);\r\n\r\n\t\tif (first){\r\n\t\t\tfirst = false;\r\n\t\t\tvar schedulerCookie = getCookie(cookie);\r\n\t\t\tif (schedulerCookie){\r\n\r\n\t\t\t\tif(!scheduler._min_date){\r\n\t\t\t\t\t//otherwise scheduler will have incorrect date until timeout\r\n\t\t\t\t\t//it can cause js error with 'onMouseMove' handler of key_nav.js\r\n\t\t\t\t\tscheduler._min_date = date;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tschedulerCookie = unescape(schedulerCookie).split(\"@\");\r\n\t\t\t\tschedulerCookie[0] = this._helpers.parseDate(schedulerCookie[0]);\r\n\t\t\t\tvar view = this.isViewExists(schedulerCookie[1]) ? schedulerCookie[1] : mode,\r\n\t\t\t\t\tdate = !isNaN(+schedulerCookie[0]) ? schedulerCookie[0] : date;\r\n\r\n\t\t\t\twindow.setTimeout(function(){\r\n\t\t\t\t\tif(scheduler.$destroyed){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tscheduler.setCurrentView(date,view);\r\n\t\t\t\t},1);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\tscheduler.attachEvent(\"onViewChange\", function (newMode , newDate){\r\n\t\tvar cookie = getCookieName(scheduler);\r\n\t\tvar text = escape(this._helpers.formatDate(newDate)+\"@\"+(newMode));\r\n\t\tsetCookie(cookie,\"expires=Sun, 31 Jan 9999 22:00:00 GMT\",text);\r\n\t});\r\n\r\n\t// As we are blocking first render above there could be a problem in case of dynamic loading and rendering of visible data in general ('from'/'to' won't be defined)\r\n\tvar old_load = scheduler._load;\r\n\tscheduler._load = function() {\r\n\t\tvar args = arguments;\r\n\r\n\t\tif (!scheduler._date) {\r\n\t\t\tvar that = this;\r\n\t\t\twindow.setTimeout(function() {\r\n\t\t\t\told_load.apply(that, args);\r\n\t\t\t},1);\r\n\t\t} else {\r\n\t\t\told_load.apply(this, args);\r\n\t\t}\r\n\t};\r\n}","import notImplemented from \"./not_implemented_extension\";\r\n\r\nexport default function(scheduler){\r\n\tnotImplemented.alert(\"Day Timeline\", scheduler.assert);\r\n}","import notImplemented from \"./not_implemented_extension\";\r\n\r\nexport default function(scheduler){\r\n\tnotImplemented.alert(\"Drag Between\", scheduler.assert);\r\n}","export default function(scheduler){\r\n/* global dhtmlXCombo */\r\nscheduler.form_blocks['combo']={\r\n\trender:function(sns) {\r\n\t\tif (!sns.cached_options)\r\n\t\t\tsns.cached_options = {};\r\n\t\tvar res = '';\r\n\t\tres += \"<div class='\"+sns.type+\"' ></div>\";\r\n\t\treturn res;\r\n\t},\r\n\tset_value:function(node,value,ev,config){\r\n\t\t(function(){\r\n\t\t\tresetCombo();\r\n\t\t\tvar id = scheduler.attachEvent(\"onAfterLightbox\",function(){\r\n\t\t\t\t// otherwise destructor will never be called after form reset(e.g. in readonly event mode)\r\n\t\t\t\tresetCombo();\r\n\t\t\t\tscheduler.detachEvent(id);\r\n\t\t\t});\r\n\t\t\tfunction resetCombo(){\r\n\t\t\t\tif(node._combo && node._combo.DOMParent) {\r\n\t\t\t\t\tvar combo = node._combo;\r\n\t\t\t\t\tif(combo.unload){\r\n\t\t\t\t\t\tcombo.unload();\r\n\t\t\t\t\t}else if(combo.destructor){\r\n\t\t\t\t\t\tcombo.destructor();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// dhtmlxCombo 4.1.0 bug\r\n\t\t\t\t\tcombo.DOMParent = combo.DOMelem = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})();\r\n\t\twindow.dhx_globalImgPath = config.image_path||'/';\r\n\t\tnode._combo = new dhtmlXCombo(node, config.name, node.offsetWidth-8);\r\n\t\tif (config.onchange)\r\n\t\t\tnode._combo.attachEvent(\"onChange\", config.onchange);\r\n\r\n\t\tif (config.options_height)\r\n\t\t\tnode._combo.setOptionHeight(config.options_height);\r\n\t\tvar combo = node._combo;\r\n\t\tcombo.enableFilteringMode(config.filtering, config.script_path||null, !!config.cache);\r\n\r\n\t\tif (!config.script_path) { // script-side filtration is used\r\n\t\t\tvar all_options = [];\r\n\t\t\tfor (var i = 0; i < config.options.length; i++) {\r\n\t\t\t\tvar option = config.options[i];\r\n\t\t\t\tvar single_option = [\r\n\t\t\t\t\toption.key,\r\n\t\t\t\t\toption.label,\r\n\t\t\t\t\toption.css\r\n\t\t\t\t];\r\n\t\t\t\tall_options.push(single_option);\r\n\t\t\t}\r\n\t\t\tcombo.addOption(all_options);\r\n\t\t\tif (ev[config.map_to]) {\r\n\t\t\t\tvar index = combo.getIndexByValue(ev[config.map_to]);\r\n\t\t\t\tcombo.selectOption(index);\r\n\t\t\t}\r\n\t\t} else { // server-side filtration is used\r\n\t\t\tvar selected_id = ev[config.map_to];\r\n\t\t\tif (selected_id) {\r\n\t\t\t\tif (config.cached_options[selected_id]) {\r\n\t\t\t\t\tcombo.addOption(selected_id, config.cached_options[selected_id]);\r\n\t\t\t\t\tcombo.disable(1);\r\n\t\t\t\t\tcombo.selectOption(0);\r\n\t\t\t\t\tcombo.disable(0);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tscheduler.ajax.get(config.script_path+\"?id=\"+selected_id+\"&uid=\"+scheduler.uid(), function(result){\r\n\t\t\t\t\t\tvar responseText = result.xmlDoc.responseText;\r\n\t\t\t\t\t\tvar label;\r\n\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\tvar res = JSON.parse(responseText);\r\n\t\t\t\t\t\t\tlabel = res.options[0].text;\r\n\t\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\t\tvar option = scheduler.ajax.xpath(\"//option\", result.xmlDoc)[0];\r\n\t\t\t\t\t\t\tlabel = option.childNodes[0].nodeValue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconfig.cached_options[selected_id] = label;\r\n\t\t\t\t\t\tcombo.addOption(selected_id, label);\r\n\t\t\t\t\t\tcombo.disable(1);\r\n\t\t\t\t\t\tcombo.selectOption(0);\r\n\t\t\t\t\t\tcombo.disable(0);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tcombo.setComboValue(\"\");\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tget_value:function(node,ev,config) {\r\n\t\tvar selected_id = node._combo.getSelectedValue(); // value = key\r\n\t\tif (config.script_path) {\r\n\t\t\tconfig.cached_options[selected_id] = node._combo.getSelectedText();\r\n\t\t}\r\n\t\treturn selected_id;\r\n\t},\r\n\tfocus:function(node){\r\n\t}\r\n};\r\n\r\nscheduler.form_blocks['radio']={\r\n\trender:function(sns) {\r\n\t\tvar res = '';\r\n\t\tres += `<div class='dhx_cal_ltext dhx_cal_radio ${sns.vertical ? \"dhx_cal_radio_vertical\": \"\"}' style='max-height:${sns.height}px;'>`;\r\n\t\tfor (var i=0; i<sns.options.length; i++) {\r\n\t\t\tvar id = scheduler.uid();\r\n\t\t\tres += \"<label class='dhx_cal_radio_item' for='\"+id+\"'><input id='\"+id+\"' type='radio' name='\"+sns.name+\"' value='\"+sns.options[i].key+\"'><span>\"+\" \"+sns.options[i].label+\"</span></label>\";\r\n\t\t}\r\n\t\tres += \"</div>\";\r\n\r\n\t\treturn res;\r\n\t},\r\n\tset_value:function(node,value,ev,config){\r\n\t\tvar radiobuttons = node.getElementsByTagName('input');\r\n\t\tfor (var i = 0; i < radiobuttons.length; i++) {\r\n\t\t\tradiobuttons[i].checked = false;\r\n\t\t\tvar checked_value = ev[config.map_to]||value;\r\n\t\t\tif (radiobuttons[i].value == checked_value) {\r\n\t\t\t\tradiobuttons[i].checked = true;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tget_value:function(node,ev,config){\r\n\t\tvar radiobuttons = node.getElementsByTagName('input');\r\n\t\tfor(var i=0; i<radiobuttons.length; i++) {\r\n\t\t\tif(radiobuttons[i].checked) {\r\n\t\t\t\treturn radiobuttons[i].value;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tfocus:function(node){\r\n\t}\r\n};\r\n\r\nscheduler.form_blocks['checkbox']={\r\n\trender:function(sns) {\r\n\t\tif (scheduler.config.wide_form)\r\n\t\t\treturn '<div class=\"dhx_cal_wide_checkbox\"></div>';\r\n\t\telse\r\n\t\t\treturn '';\r\n\t},\r\n\tset_value:function(node,value,ev,config){\r\n\t\tnode=scheduler._lightbox.querySelector(`#${config.id}`);\r\n\t\tvar id = scheduler.uid();\r\n\t\tvar isChecked = (typeof config.checked_value != \"undefined\") ? value == config.checked_value : !!value;\r\n\t\tnode.className += \" dhx_cal_checkbox\";\r\n\t\tvar check_html = \"<input id='\"+id+\"' type='checkbox' value='true' name='\"+config.name+\"'\"+((isChecked)?\"checked='true'\":'')+\"'>\";\r\n\t\tvar label_html = \"<label for='\"+id+\"'>\"+(scheduler.locale.labels[\"section_\"+config.name]||config.name)+\"</label>\";\r\n\t\tif (scheduler.config.wide_form){\r\n\t\t\tnode.innerHTML = label_html;\r\n\t\t\tnode.nextSibling.innerHTML=check_html;\r\n\t\t} else\r\n\t\t\tnode.innerHTML=check_html+label_html;\r\n\r\n\t\tif (config.handler) {\r\n\t\t\tvar checkbox = node.getElementsByTagName('input')[0];\r\n\t\t\tif(checkbox.$_eventAttached){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tcheckbox.$_eventAttached = true;\r\n\t\t\tscheduler.event(checkbox, \"click\", config.handler);\r\n\t\t\t//checkbox.onclick = config.handler;\r\n\t\t}\r\n\t},\r\n\tget_value:function(node,ev,config){\r\n\t\tnode=scheduler._lightbox.querySelector(`#${config.id}`);\r\n\t\tvar checkbox = node.getElementsByTagName('input')[0]; // moved to the header\r\n\t\tif (!checkbox)\r\n\t\t\tcheckbox = node.nextSibling.getElementsByTagName('input')[0];\r\n\t\treturn (checkbox.checked)?(config.checked_value||true):(config.unchecked_value||false);\r\n\t},\r\n\tfocus:function(node){\r\n\t}\r\n};\r\n\r\n\r\n}","export default function(scheduler){\r\n\r\nscheduler.ext.fullscreen = {\r\n\ttoggleIcon: null\r\n};\r\n\r\nscheduler.expand = function() {\r\n\tif(!scheduler.callEvent(\"onBeforeExpand\", []))\r\n\t\treturn;\r\n\tvar t = scheduler._obj;\r\n\tdo {\r\n\t\tt._position = t.style.position || \"\";\r\n\t\tt.style.position = \"static\";\r\n\t} while ((t = t.parentNode) && t.style);\r\n\tt = scheduler._obj;\r\n\tt.style.position = \"absolute\";\r\n\tt._width = t.style.width;\r\n\tt._height = t.style.height;\r\n\tt.style.width = t.style.height = \"100%\";\r\n\tt.style.top = t.style.left = \"0px\";\r\n\r\n\tvar top = document.body;\r\n\ttop.scrollTop = 0;\r\n\r\n\ttop = top.parentNode;\r\n\tif (top)\r\n\t\ttop.scrollTop = 0;\r\n\tdocument.body._overflow = document.body.style.overflow || \"\";\r\n\tdocument.body.style.overflow = \"hidden\";\r\n\tscheduler._maximize();\r\n\tscheduler.callEvent(\"onExpand\", []);\r\n};\r\nscheduler.collapse = function() {\r\n\tif(!scheduler.callEvent(\"onBeforeCollapse\", []))\r\n\t\treturn;\r\n\tvar t = scheduler._obj;\r\n\tdo {\r\n\t\tt.style.position = t._position;\r\n\t} while ((t = t.parentNode) && t.style);\r\n\tt = scheduler._obj;\r\n\tt.style.width = t._width;\r\n\tt.style.height = t._height;\r\n\tdocument.body.style.overflow = document.body._overflow;\r\n\tscheduler._maximize();\r\n\tscheduler.callEvent(\"onCollapse\", []);\r\n};\r\nscheduler.attachEvent(\"onTemplatesReady\", function() {\r\n\tvar t = document.createElement(\"div\");\r\n\tt.className = \"dhx_expand_icon\";\r\n\tscheduler.ext.fullscreen.toggleIcon = t;\r\n\tt.innerHTML = `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t<g>\r\n\t<line x1=\"0.5\" y1=\"5\" x2=\"0.5\" y2=\"3.0598e-08\" stroke=\"var(--dhx-scheduler-base-colors-icons)\"/>\r\n\t<line y1=\"0.5\" x2=\"5\" y2=\"0.5\" stroke=\"var(--dhx-scheduler-base-colors-icons)\"/>\r\n\t<line x1=\"0.5\" y1=\"11\" x2=\"0.5\" y2=\"16\" stroke=\"var(--dhx-scheduler-base-colors-icons)\"/>\r\n\t<line y1=\"15.5\" x2=\"5\" y2=\"15.5\" stroke=\"var(--dhx-scheduler-base-colors-icons)\"/>\r\n\t<line x1=\"11\" y1=\"0.5\" x2=\"16\" y2=\"0.5\" stroke=\"var(--dhx-scheduler-base-colors-icons)\"/>\r\n\t<line x1=\"15.5\" y1=\"2.18557e-08\" x2=\"15.5\" y2=\"5\" stroke=\"var(--dhx-scheduler-base-colors-icons)\"/>\r\n\t<line x1=\"11\" y1=\"15.5\" x2=\"16\" y2=\"15.5\" stroke=\"var(--dhx-scheduler-base-colors-icons)\"/>\r\n\t<line x1=\"15.5\" y1=\"16\" x2=\"15.5\" y2=\"11\" stroke=\"var(--dhx-scheduler-base-colors-icons)\"/>\r\n\t</g>\r\n\t</svg>\r\n\t`;\r\n\tscheduler._obj.appendChild(t);\r\n\tscheduler.event(t, \"click\",  function() {\r\n\t\tif (!scheduler.expanded)\r\n\t\t\tscheduler.expand(); else\r\n\t\t\tscheduler.collapse();\r\n\t});\r\n});\r\nscheduler._maximize = function() {\r\n\tthis.expanded = !this.expanded;\r\n\tif(this.expanded){\r\n\t\tthis.ext.fullscreen.toggleIcon.classList.add(\"dhx_expand_icon--expanded\");\r\n\t\t\r\n\t}else{\r\n\t\tthis.ext.fullscreen.toggleIcon.classList.remove(\"dhx_expand_icon--expanded\");\r\n\t}\r\n\t\r\n\t//scheduler.ext.fullscreen.toggleIcon.style.backgroundPosition = \"0 \" + (this.expanded ? \"0\" : \"18\") + \"px\";\r\n\r\n\tvar directions = ['left', 'top'];\r\n\tfor (var i = 0; i < directions.length; i++) {\r\n\t\t//var margin = scheduler.xy['margin_' + directions[i]];\r\n\t\tvar prev_margin = scheduler['_prev_margin_' + directions[i]];\r\n\t\tif (scheduler.xy['margin_' + directions[i]]) {\r\n\t\t\tscheduler['_prev_margin_' + directions[i]] = scheduler.xy['margin_' + directions[i]];\r\n\t\t\tscheduler.xy['margin_' + directions[i]] = 0;\r\n\t\t} else {\r\n\t\t\tif (prev_margin) {\r\n\t\t\t\tscheduler.xy['margin_' + directions[i]] = scheduler['_prev_margin_' + directions[i]];\r\n\t\t\t\tdelete scheduler['_prev_margin_' + directions[i]];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tscheduler.setCurrentView();\r\n};\r\n\r\n\r\n}\r\n","export default function(scheduler){\r\n\r\n\r\n(function(){\r\n\r\nfunction defaults(obj, std){\r\n\tfor (var key in std)\r\n\t\tif (!obj[key])\r\n\t\t\tobj[key] = std[key];\r\n\treturn obj;\r\n}\r\n\r\nfunction getElementSizes(element, scheduler) {\r\n\tvar sizes = {};\r\n\telement = scheduler._els[element];\r\n\tif (element && element[0]) {\r\n\t\tsizes.x = element[0].scrollWidth;\r\n\t\tsizes.y = element[0].scrollHeight;\r\n\t} else {\r\n\t\tsizes.x = 0;\r\n\t\tsizes.y = 0;\r\n\t}\r\n\treturn sizes;\r\n}\r\n\r\n//compatibility for new versions of scheduler\r\nif(!window.dhtmlxAjax){\r\n\twindow.dhtmlxAjax = {\r\n\t\tpost: function(url, data, callback){\r\n\t\t\treturn window.dhx4.ajax.post(url, data, callback);\r\n\t\t},\r\n\t\tget: function(url, callback){\r\n\t\t\treturn window.ajax.get(url, callback);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction add_export_methods(scheduler){\r\n\r\n\tscheduler.exportToPDF = function(config){\r\n\t\tconfig = defaults((config || {}), {\r\n\t\t\tname:\"calendar.pdf\",\r\n\t\t\tformat:\"A4\",\r\n\t\t\torientation:\"landscape\",\r\n\t\t\tdpi:96,\r\n\t\t\tzoom:1,\r\n\t\t\trtl: scheduler.config.rtl\r\n\t\t});\r\n\t\tconfig.html = this._export_html(config);\r\n\t\tconfig.mode = this.getState().mode;\r\n\t\tthis._send_to_export(config, \"pdf\");\r\n\t};\r\n\r\n\tscheduler.exportToPNG = function(config){\r\n\t\tconfig = defaults((config || {}), {\r\n\t\t\tname:\"calendar.png\",\r\n\t\t\tformat:\"A4\",\r\n\t\t\torientation:\"landscape\",\r\n\t\t\tdpi:96,\r\n\t\t\tzoom:1,\r\n\t\t\trtl: scheduler.config.rtl\r\n\t\t});\r\n\t\tconfig.html = this._export_html(config);\r\n\t\tconfig.mode = this.getState().mode;\r\n\t\tthis._send_to_export(config, \"png\");\r\n\t};\r\n\r\n\tscheduler.exportToICal = function(config){\r\n\t\tconfig = defaults((config || {}), {\r\n\t\t\tname:\"calendar.ical\",\r\n\t\t\tdata:this._serialize_plain(null, config)\r\n\t\t});\r\n\t\tthis._send_to_export(config, \"ical\");\r\n\t};\r\n\r\n\tscheduler.exportToExcel = function(config){\r\n\t\tconfig = defaults((config || {}), {\r\n\t\t\tname:\"calendar.xlsx\",\r\n\t\t\ttitle:\"Events\",\r\n\t\t\tdata:this._serialize_plain( this.templates.xml_format, config),\r\n\t\t\tcolumns:this._serialize_columns()\r\n\t\t});\r\n\t\tthis._send_to_export(config, \"excel\");\r\n\t};\r\n\r\n\tscheduler._ajax_to_export = function(data, type, callback){\r\n\t\tdelete data.callback;\r\n\t\tvar url = data.server || \"https://export.dhtmlx.com/scheduler\";\r\n\r\n\t\twindow.dhtmlxAjax.post(url,\r\n\t\t\t\"type=\"+type+\"&store=1&data=\"+encodeURIComponent(JSON.stringify(data)),\r\n\t\t\tfunction(loader){\r\n\t\t\t\tvar fail = loader.xmlDoc.status > 400;\r\n\t\t\t\tvar info = null;\r\n\r\n\t\t\t\tif (!fail){\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tinfo = JSON.parse(loader.xmlDoc.responseText);\r\n\t\t\t\t\t}catch(e){}\r\n\t\t\t\t}\r\n\t\t\t\tcallback(info);\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\r\n\tscheduler._plain_export_copy = function(source, format){\r\n\t\tvar target = {};\r\n\t\tfor (var key in source)\r\n\t\t\ttarget[key] = source[key];\r\n\r\n\t\ttarget.start_date = format(target.start_date);\r\n\t\ttarget.end_date = format(target.end_date);\r\n\t\ttarget.$text = this.templates.event_text(source.start_date, source.end_date, source);\r\n\r\n\t\treturn target;\r\n\t};\r\n\r\n\tscheduler._serialize_plain = function(format, config){\r\n\t\tformat = format || scheduler.date.date_to_str(\"%Y%m%dT%H%i%s\", true);\r\n\r\n\t\tvar events;\r\n\t\tif (config && config.start && config.end)\r\n\t\t\tevents = scheduler.getEvents(config.start, config.end);\r\n\t\telse\r\n\t\t\tevents = scheduler.getEvents();\r\n\r\n\t\tvar data = [];\r\n\t\tfor (var i = 0; i< events.length; i++)\r\n\t\t\tdata[i] = this._plain_export_copy(events[i], format);\r\n\r\n\t\treturn data;\r\n\t};\r\n\r\n\tscheduler._serialize_columns = function(){\r\n\t\treturn [\r\n\t\t\t{ id:\"start_date\", header:\"Start Date\", width:30 },\r\n\t\t\t{ id:\"end_date\", header:\"End Date\", width:30 },\r\n\t\t\t{ id:\"$text\", header:\"Text\", width:100 }\r\n\t\t];\r\n\t};\r\n\r\n\tscheduler._send_to_export = function(data, type){\r\n\t\tif(!data.version){\r\n\t\t\tdata.version = scheduler.version;\r\n\t\t}\r\n\r\n\t\tif(!data.skin){\r\n\t\t\tdata.skin = scheduler.skin;\r\n\t\t}\r\n\r\n\t\tif (data.callback)\r\n\t\t\t\treturn scheduler._ajax_to_export(data, type, data.callback);\r\n\r\n\t\tvar form = this._create_hidden_form();\r\n\r\n\t\tform.firstChild.action = data.server || \"https://export.dhtmlx.com/scheduler\";\r\n\t\tform.firstChild.childNodes[0].value = JSON.stringify(data);\r\n\t\tform.firstChild.childNodes[1].value = type;\r\n\t\tform.firstChild.submit();\r\n\t};\r\n\r\n\tscheduler._create_hidden_form = function(){\r\n\t\tif (!this._hidden_export_form){\r\n\t\t\tvar t = this._hidden_export_form = document.createElement(\"div\");\r\n\t\t\tt.style.display = \"none\";\r\n\t\t\tt.innerHTML = \"<form method='POST' target='_blank'><input type='text' name='data'><input type='hidden' name='type' value=''></form>\";\r\n\t\t\tdocument.body.appendChild(t);\r\n\t\t}\r\n\t\treturn this._hidden_export_form;\r\n\t};\r\n\r\n\tscheduler._get_export_size = function(format, orientation, zoom, dpi, header, footer, scales) {\r\n\r\n\t\tdpi = parseInt(dpi)/25.4 || 4;\r\n\r\n\t\tvar sizes = {\r\n\t\t\t\"A5\":{ x:148, y:210 },\r\n\t\t\t\"A4\":{ x:210, y:297 },\r\n\t\t\t\"A3\":{ x:297, y:420 },\r\n\t\t\t\"A2\":{ x:420, y:594 },\r\n\t\t\t\"A1\":{ x:594, y:841 },\r\n\t\t\t\"A0\":{ x:841, y:1189 }\r\n\t\t};\r\n\r\n\t\tvar dataX = getElementSizes(\"dhx_cal_data\", this).x;\r\n\t\tvar dataY = getElementSizes(\"dhx_cal_data\", this).y;\r\n\t\tvar headY = getElementSizes(\"dhx_cal_header\", this).y;\r\n\t\tvar multY = getElementSizes(\"dhx_multi_day\", this).y;\r\n\r\n\t\tvar cSize = {\r\n\t\t\ty: dataY + headY + multY\r\n\t\t};\r\n\r\n\t\tif (format === \"full\") {\r\n\t\t\tcSize.x = dataX;\r\n\t\t} else {\r\n\t\t\tcSize.x = Math.floor( (orientation === \"landscape\" ? sizes[format].y : sizes[format].x) * dpi );\r\n\t\t}\r\n\r\n\t\tif (scales) {\r\n\t\t\tcSize.x *= (parseFloat(scales.x) || 1);\r\n\t\t\tcSize.y *= (parseFloat(scales.y) || 1);\r\n\t\t}\r\n\r\n\t\treturn cSize;\r\n\t};\r\n\r\n\tfunction getTimeline() {\r\n\t\tvar mode = scheduler.getState().mode;\r\n\t\tif (scheduler.matrix && scheduler.matrix[mode]) {\r\n\t\t\treturn scheduler.matrix[mode];\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction getInitialSizes() {\r\n\t\tvar smartRendering = undefined,\r\n\t\t\tscrollable = undefined;\r\n\r\n\t\tvar timeline = getTimeline();\r\n\t\tif (timeline) {\r\n\t\t\tscrollable = timeline.scrollable;\r\n\t\t\tsmartRendering = timeline.smart_rendering;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tnav_height: scheduler.xy.nav_height,\r\n\t\t\tscroll_width: scheduler.xy.scroll_width,\r\n\t\t\tstyle_width: scheduler._obj.style.width,\r\n\t\t\tstyle_height: scheduler._obj.style.height,\r\n\t\t\ttimeline_scrollable: scrollable,\r\n\t\t\ttimeline_smart_rendering: smartRendering\r\n\t\t};\r\n\t}\r\n\r\n\tfunction setExportSizes(size, initialSizes) {\r\n\t\tscheduler._obj.style.width  = size.x + \"px\";\r\n\t\tscheduler._obj.style.height = size.y + \"px\";\r\n\r\n\t\tscheduler.xy.nav_height = 0;\r\n\t\tscheduler.xy.scroll_width = 0;\r\n\r\n\t\tvar timeline = getTimeline();\r\n\t\tif (initialSizes.timeline_scrollable || initialSizes.timeline_smart_rendering) {\r\n\r\n\t\t\ttimeline.scrollable = false;\r\n\t\t\ttimeline.smart_rendering = false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setInitialSizes(initialSizes) {\r\n\t\tscheduler.xy.scroll_width = initialSizes.scroll_width;\r\n\t\tscheduler.xy.nav_height = initialSizes.nav_height;\r\n\t\tscheduler._obj.style.width  = initialSizes.style_width;\r\n\t\tscheduler._obj.style.height = initialSizes.style_height;\r\n\r\n\t\tvar timeline = getTimeline();\r\n\t\tif (initialSizes.timeline_scrollable || initialSizes.timeline_smart_rendering) {\r\n\t\t\ttimeline.scrollable = initialSizes.timeline_scrollable;\r\n\t\t\ttimeline.smart_rendering = initialSizes.timeline_smart_rendering;\r\n\t\t}\r\n\t}\r\n\r\n\tscheduler._export_html = function (obj) {\r\n\t\tvar initialSizes = getInitialSizes();\r\n\t\tvar size = scheduler._get_export_size(obj.format, obj.orientation, obj.zoom, obj.dpi, obj.header, obj.footer, obj.scales);\r\n\r\n\t\tvar html = \"\";\r\n\t\ttry {\r\n\t\t\tsetExportSizes(size, initialSizes);\r\n\t\t\tscheduler.setCurrentView();\r\n\t\t\thtml = scheduler._obj.innerHTML;\r\n\t\t} catch (e) {\r\n\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tconsole.error(e);\r\n\t\t} finally {\r\n\t\t\tsetInitialSizes(initialSizes);\r\n\t\t\tscheduler.setCurrentView();\r\n\t\t}\r\n\r\n\t\treturn html;\r\n\t};\r\n\r\n}\r\n\r\nadd_export_methods(scheduler);\r\n\r\n\r\n})();\r\n\r\n}","import notImplemented from \"./not_implemented_extension\";\r\n\r\nexport default function(scheduler){\r\n\tnotImplemented.alert(\"Grid\", scheduler.assert);\r\n}","export default function(scheduler){\r\n\r\nscheduler.attachEvent(\"onTemplatesReady\",function(){\r\n\tvar els = document.body.getElementsByTagName(\"DIV\");\r\n\tfor (var i=0; i < els.length; i++) {\r\n\t\tvar cs = els[i].className||\"\";\r\n\t\tcs = cs.split(\":\");\r\n\t\tif (cs.length == 2 && cs[0] == \"template\"){\r\n\t\t\tvar code = \"return \\\"\"+(els[i].innerHTML||\"\").replace(/\\\\/g, \"\\\\\\\\\").replace(/\"/g,\"\\\\\\\"\").replace(/[\\n\\r]+/g,\"\")+\"\\\";\";\r\n\t\t\tcode = unescape(code).replace(/\\{event\\.([a-z]+)\\}/g,function(all,mask){\r\n\t\t\t\treturn '\"+ev.'+mask+'+\"';\r\n\t\t\t});\r\n\t\t\tscheduler.templates[cs[1]]=Function(\"start\",\"end\",\"ev\",code);\r\n\t\t\tels[i].style.display='none';\r\n\t\t}\r\n\t}\r\n});\r\n\r\n}","import keyboard_shortcuts from \"./keyboard_navigation/common/keyboard_shortcuts\";\r\nimport eventhandler from \"./keyboard_navigation/common/eventhandler\";\r\nimport trap_modal_focus from \"./keyboard_navigation/common/trap_modal_focus\";\r\nimport marker from \"./keyboard_navigation/marker\";\r\nimport scheduler_node from \"./keyboard_navigation/elements/scheduler_node\";\r\nimport nav_node from \"./keyboard_navigation/elements/nav_node\";\r\nimport header_cell from \"./keyboard_navigation/elements/header_cell\";\r\nimport event from \"./keyboard_navigation/elements/event\";\r\nimport time_slot from \"./keyboard_navigation/elements/time_slot\";\r\nimport minical_button from \"./keyboard_navigation/elements/minical_button\";\r\nimport minical_cell from \"./keyboard_navigation/elements/minical_cell\";\r\nimport data_area from \"./keyboard_navigation/elements/data_area\";\r\nimport modals from \"./keyboard_navigation/modals\";\r\nimport core from \"./keyboard_navigation/core\";\r\nimport key_nav_legacy from \"./keyboard_navigation/key_nav_legacy\";\r\n\r\n\r\nimport scheduler_handlers from \"./keyboard_navigation/scheduler_handlers\";\r\nimport minical_handlers from \"./keyboard_navigation/minical_handlers\";\r\n\r\nexport default function(scheduler){\r\n\t\tscheduler.config.key_nav = true;\r\n\t\tscheduler.config.key_nav_step = 30;\r\n\t\tscheduler.addShortcut = function(shortcut, handler, scope){\r\n\t\t\tvar scopeObject = getScope(scope);\r\n\t\t\tif(scopeObject){\r\n\t\t\t\tscopeObject.prototype.bind(shortcut, handler);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tscheduler.getShortcutHandler = function(shortcut, scope){\r\n\t\t\tvar scopeObject = getScope(scope);\r\n\t\t\tif(scopeObject){\r\n\t\t\t\tvar commands = scheduler.$keyboardNavigation.shortcuts.parse(shortcut);\r\n\t\t\t\tif(commands.length){\r\n\t\t\t\t\treturn scopeObject.prototype.findHandler(commands[0]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tscheduler.removeShortcut = function(shortcut, scope){\r\n\t\t\tvar scopeObject = getScope(scope);\r\n\t\t\tif(scopeObject){\r\n\t\t\t\tscopeObject.prototype.unbind(shortcut);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tscheduler.focus = function(){\r\n\t\t\tif(!scheduler.config.key_nav){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar disp = scheduler.$keyboardNavigation.dispatcher;\r\n\t\t\tdisp.enable();\r\n\t\t\tvar activeNode = disp.getActiveNode();\r\n\t\t\tif(!activeNode || activeNode instanceof scheduler.$keyboardNavigation.MinicalButton || activeNode instanceof scheduler.$keyboardNavigation.MinicalCell){\r\n\t\t\t\tdisp.setDefaultNode();\r\n\t\t\t}else{\r\n\t\t\t\tdisp.focusNode(disp.getActiveNode());\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tfunction getScope(mode){\r\n\t\t\tvar scopes = {\r\n\t\t\t\t\"minicalButton\":scheduler.$keyboardNavigation.MinicalButton,\r\n\t\t\t\t\"minicalDate\":scheduler.$keyboardNavigation.MinicalCell,\r\n\t\t\t\t\"scheduler\":scheduler.$keyboardNavigation.SchedulerNode,\r\n\t\t\t\t\"dataArea\": scheduler.$keyboardNavigation.DataArea,\r\n\t\t\t\t\"timeSlot\": scheduler.$keyboardNavigation.TimeSlot,\r\n\t\t\t\t\"event\": scheduler.$keyboardNavigation.Event\r\n\t\t\t};\r\n\r\n\t\t\tvar searchMap = {};\r\n\t\t\tfor(var i in scopes)\r\n\t\t\t\tsearchMap[i.toLowerCase()] = scopes[i];\r\n\r\n\t\t\tmode = (mode + \"\").toLowerCase();\r\n\r\n\t\t\treturn searchMap[mode] || scopes.scheduler;\r\n\t\t}\r\n\r\n\t\tscheduler.$keyboardNavigation = {};\r\n\r\n\t\tscheduler._compose = function(){\r\n\t\t\tvar parts = Array.prototype.slice.call(arguments, 0);\r\n\t\t\tvar res = {};\r\n\t\t\tfor(var i = 0; i < parts.length; i++){\r\n\t\t\t\tvar obj = parts[i];\r\n\t\t\t\tif(typeof obj == \"function\"){\r\n\t\t\t\t\tobj = new obj();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor(var p in obj){\r\n\t\t\t\t\tres[p] = obj[p];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t};\r\n\r\n\t\tkeyboard_shortcuts(scheduler);\r\n\t\teventhandler(scheduler);\r\n\t\ttrap_modal_focus(scheduler);\r\n\t\tmarker(scheduler);\r\n\t\tscheduler_node(scheduler);\r\n\t\tnav_node(scheduler);\r\n\t\theader_cell(scheduler);\r\n\t\tevent(scheduler);\r\n\t\ttime_slot(scheduler);\r\n\t\tminical_button(scheduler);\r\n\t\tminical_cell(scheduler);\r\n\t\tdata_area(scheduler);\r\n\t\tmodals(scheduler);\r\n\t\tcore(scheduler);\r\n\t\tkey_nav_legacy(scheduler);\r\n\r\n\t\t(function(){\r\n\t\t\tscheduler_handlers(scheduler);\r\n\t\t\tminical_handlers(scheduler);\r\n\r\n\t\t\tvar dispatcher = scheduler.$keyboardNavigation.dispatcher;\r\n\r\n\t\t\tscheduler.$keyboardNavigation.attachSchedulerHandlers();\r\n\r\n\t\t\tif(scheduler.renderCalendar){\r\n\t\t\t\t// if minical ext loaded before key nav ext - patch it now\r\n\t\t\t\tscheduler.$keyboardNavigation.patchMinicalendar();\r\n\t\t\t}else{\r\n\t\t\t\t// otherwise - wait until everything is loaded and try again\r\n\t\t\t\tvar attachOnce = scheduler.attachEvent(\"onSchedulerReady\", function(){\r\n\t\t\t\t\tscheduler.detachEvent(attachOnce);\r\n\t\t\t\t\tscheduler.$keyboardNavigation.patchMinicalendar();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\tfunction isSchedulerSelected(){\r\n\t\t\t\tif(!scheduler.config.key_nav) return;\r\n\r\n\t\t\t\tvar enable;\r\n\t\t\t\tvar focusElement = document.activeElement;\r\n\t\t\t\t// halt key nav when focus is outside scheduler or in quick info popup\r\n\t\t\t\tif(!focusElement || scheduler.utils.dom.locateCss(focusElement, \"dhx_cal_quick_info\", false)){\r\n\t\t\t\t\tenable = false;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tenable = scheduler.$keyboardNavigation.isChildOf(focusElement, scheduler.$container) || scheduler.$keyboardNavigation.isMinical(focusElement);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn enable;\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\tfunction changeState(enable){\r\n\t\t\t\tif(enable && !dispatcher.isEnabled()){\r\n\t\t\t\t\tdispatcher.enable();\r\n\t\t\t\t}else if(!enable && dispatcher.isEnabled()){\r\n\t\t\t\t\tdispatcher.disable();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst intervalId = setInterval(function(){\r\n\t\t\t\tif(!scheduler.$container || !scheduler.$keyboardNavigation.isChildOf(scheduler.$container, document.body)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar enable = isSchedulerSelected();\r\n\r\n\t\t\t\tif(enable){\r\n\t\t\t\t\tchangeState(enable);\r\n\t\t\t\t}else if(!enable && dispatcher.isEnabled()){\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tif(scheduler.$destroyed){\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// doublecheck in case checking is done in handler before focus element is repainted\r\n\t\t\t\t\t\tif(scheduler.config.key_nav){\r\n\t\t\t\t\t\t\tchangeState(isSchedulerSelected());\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tscheduler.$container.removeAttribute(\"tabindex\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t}\r\n\t\t\t}, 500);\r\n\t\t\tscheduler.attachEvent(\"onDestroy\", function(){\r\n\t\t\t\tclearInterval(intervalId);\r\n\t\t\t});\r\n\t\t})();\r\n\t}\r\n\r\n\r\n","export default function(scheduler){\r\n\r\nscheduler.$keyboardNavigation.shortcuts = {\r\n\tcreateCommand: function(){\r\n\t\treturn {\r\n\t\t\tmodifiers:{\r\n\t\t\t\t\"shift\": false,\r\n\t\t\t\t\"alt\": false,\r\n\t\t\t\t\"ctrl\": false,\r\n\t\t\t\t\"meta\": false\r\n\t\t\t},\r\n\t\t\tkeyCode: null\r\n\t\t};\r\n\t},\r\n\tparse: function(shortcut){\r\n\t\tvar commands = [];\r\n\r\n\t\tvar expr = this.getExpressions(this.trim(shortcut));\r\n\t\tfor(var i = 0; i < expr.length; i++){\r\n\t\t\tvar words = this.getWords(expr[i]);\r\n\r\n\t\t\tvar command = this.createCommand();\r\n\r\n\t\t\tfor(var j = 0; j < words.length; j++){\r\n\t\t\t\tif(this.commandKeys[words[j]]){\r\n\t\t\t\t\tcommand.modifiers[words[j]] = true;\r\n\t\t\t\t}else if(this.specialKeys[words[j]]){\r\n\t\t\t\t\tcommand.keyCode = this.specialKeys[words[j]];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcommand.keyCode = words[j].charCodeAt(0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcommands.push(command);\r\n\t\t}\r\n\t\treturn commands;\r\n\t},\r\n\r\n\tgetCommandFromEvent: function(domEvent){\r\n\t\tvar command = this.createCommand();\r\n\t\tcommand.modifiers.shift = !!domEvent.shiftKey;\r\n\t\tcommand.modifiers.alt = !!domEvent.altKey;\r\n\t\tcommand.modifiers.ctrl = !!domEvent.ctrlKey;\r\n\t\tcommand.modifiers.meta = !!domEvent.metaKey;\r\n\t\tcommand.keyCode = domEvent.which || domEvent.keyCode;\r\n\r\n\t\tif(command.keyCode >= 96 && command.keyCode <= 105){\r\n\t\t\t// numpad keys 96-105 -> 48-57\r\n\t\t\tcommand.keyCode -= 48;//convert numpad  number code to regular number code\r\n\t\t}\r\n\r\n\t\tvar printableKey = String.fromCharCode(command.keyCode );\r\n\t\tif(printableKey){\r\n\t\t\tcommand.keyCode = printableKey.toLowerCase().charCodeAt(0);\r\n\t\t}\r\n\t\treturn command;\r\n\t},\r\n\r\n\tgetHashFromEvent: function(domEvent){\r\n\t\treturn this.getHash(this.getCommandFromEvent(domEvent));\r\n\t},\r\n\r\n\tgetHash: function(command){\r\n\t\tvar parts = [];\r\n\t\tfor(var i in command.modifiers){\r\n\t\t\tif(command.modifiers[i]){\r\n\t\t\t\tparts.push(i);\r\n\t\t\t}\r\n\t\t}\r\n\t\tparts.push(command.keyCode);\r\n\r\n\t\treturn parts.join(this.junctionChar);\r\n\t},\r\n\r\n\tgetExpressions: function(shortcut){\r\n\t\treturn shortcut.split(this.junctionChar);\r\n\t},\r\n\tgetWords: function(term){\r\n\t\treturn term.split(this.combinationChar);\r\n\t},\r\n\ttrim: function(shortcut){\r\n\t\treturn shortcut.replace(/\\s/g, \"\");\r\n\t},\r\n\tjunctionChar:\",\",\r\n\tcombinationChar:\"+\",\r\n\tcommandKeys:{\r\n\t\t\"shift\": 16,\r\n\t\t\"alt\": 18,\r\n\t\t\"ctrl\": 17,\r\n\t\t\"meta\": true\r\n\t},\r\n\tspecialKeys:{\r\n\t\t\"backspace\": 8,\r\n\t\t\"tab\": 9,\r\n\t\t\"enter\": 13,\r\n\t\t\"esc\": 27,\r\n\t\t\"space\": 32,\r\n\t\t\"up\": 38,\r\n\t\t\"down\": 40,\r\n\t\t\"left\": 37,\r\n\t\t\"right\": 39,\r\n\t\t\"home\": 36,\r\n\t\t\"end\": 35,\r\n\t\t\"pageup\": 33,\r\n\t\t\"pagedown\": 34,\r\n\t\t\"delete\": 46,\r\n\t\t\"insert\": 45,\r\n\t\t\"plus\":107,\r\n\t\t\"f1\": 112,\r\n\t\t\"f2\": 113,\r\n\t\t\"f3\": 114,\r\n\t\t\"f4\": 115,\r\n\t\t\"f5\": 116,\r\n\t\t\"f6\": 117,\r\n\t\t\"f7\": 118,\r\n\t\t\"f8\": 119,\r\n\t\t\"f9\": 120,\r\n\t\t\"f10\": 121,\r\n\t\t\"f11\": 122,\r\n\t\t\"f12\": 123\r\n\t}\r\n};\r\n\r\n}","export default function(scheduler){\r\n\r\nscheduler.$keyboardNavigation.EventHandler = {\r\n\t_handlers: null,\r\n\tfindHandler: function(command){\r\n\t\tif(!this._handlers) this._handlers = {};\r\n\t\tvar shortcuts = scheduler.$keyboardNavigation.shortcuts;\r\n\t\tvar hash = shortcuts.getHash(command);\r\n\r\n\t\treturn this._handlers[hash];\r\n\t},\r\n\r\n\tdoAction: function(command, e){\r\n\t\tvar handler = this.findHandler(command);\r\n\t\tif(handler){\r\n\t\t\thandler.call(this, e);\r\n\r\n\t\t\tif (e.preventDefault) e.preventDefault();\r\n\t\t\telse e.returnValue = false;\r\n\r\n\t\t}\r\n\t},\r\n\tbind: function(shortcut, handler){\r\n\t\tif(!this._handlers) this._handlers = {};\r\n\r\n\t\tvar shortcuts = scheduler.$keyboardNavigation.shortcuts;\r\n\r\n\t\tvar commands = shortcuts.parse(shortcut);\r\n\t\tfor(var i = 0; i < commands.length; i++){\r\n\t\t\tthis._handlers[shortcuts.getHash(commands[i])] = handler;\r\n\t\t}\r\n\t},\r\n\tunbind: function(shortcut){\r\n\t\tvar shortcuts = scheduler.$keyboardNavigation.shortcuts;\r\n\r\n\t\tvar commands = shortcuts.parse(shortcut);\r\n\t\tfor(var i = 0; i < commands.length; i++){\r\n\t\t\tif(this._handlers[shortcuts.getHash(commands[i])]){\r\n\t\t\t\tdelete this._handlers[shortcuts.getHash(commands[i])];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tbindAll: function(map){\r\n\t\tfor(var i in map){\r\n\t\t\tthis.bind(i, map[i]);\r\n\t\t}\r\n\t},\r\n\tinitKeys: function(){\r\n\t\tif(!this._handlers)\r\n\t\t\tthis._handlers = {};\r\n\t\tif(this.keys){\r\n\t\t\tthis.bindAll(this.keys);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n}","export default function(scheduler){\r\n\r\n(function(){\r\n\tscheduler.$keyboardNavigation.getFocusableNodes = scheduler._getFocusableNodes;\r\n\r\n\tscheduler.$keyboardNavigation.trapFocus = function trapFocus(root, e){\r\n\t\tif(e.keyCode != 9) return false;\r\n\r\n\t\tvar focusable = scheduler.$keyboardNavigation.getFocusableNodes(root);\r\n\t\tvar currentFocus = document.activeElement;\r\n\t\tvar currentIndex = -1;\r\n\t\tfor(var i = 0; i < focusable.length; i++){\r\n\t\t\tif(focusable[i] == currentFocus){\r\n\t\t\t\tcurrentIndex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar nextIndex, nextItem;\r\n\t\tif(e.shiftKey){\r\n\r\n\t\t\t// back tab\r\n\t\t\t// go to the last element if we focused on the first\r\n\t\t\tnextIndex = (currentIndex <= 0) ? (focusable.length - 1) : (currentIndex - 1);\r\n\r\n\t\t\tnextItem = focusable[nextIndex];\r\n\t\t\tif(nextItem){\r\n\t\t\t\tnextItem.focus();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\t// forward tab\r\n\t\t\t// forward tab from last element should go back to the first element\r\n\t\t\tnextIndex = (currentIndex >= focusable.length - 1) ? 0 : (currentIndex + 1);\r\n\t\t\tnextItem = focusable[nextIndex];\r\n\t\t\tif(nextItem){\r\n\t\t\t\tnextItem.focus();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n})();\r\n\r\n}","export default function(scheduler){\r\n\r\nscheduler.$keyboardNavigation.marker = {\r\n\tclear: function(){\r\n\t\tvar divs = scheduler.$container.querySelectorAll(\".dhx_focus_slot\");\r\n\t\tfor(var i = 0; i < divs.length; i++){\r\n\t\t\tdivs[i].parentNode.removeChild(divs[i]);\r\n\t\t}\r\n\t},\r\n\tcreateElement: function(){\r\n\t\tvar element = document.createElement(\"div\");\r\n\t\telement.setAttribute(\"tabindex\", -1);\r\n\t\telement.className = \"dhx_focus_slot\";\r\n\t\treturn element;\r\n\t},\r\n\r\n\trenderMultiple: function(start, end, method){\r\n\t\tvar divs = [];\r\n\t\tvar currentStart = new Date(start);\r\n\t\tvar currentEnd = new Date(Math.min(end.valueOf(), scheduler.date.add(scheduler.date.day_start(new Date(start)), 1, \"day\").valueOf()));\r\n\t\twhile(currentStart.valueOf() < end.valueOf()){\r\n\r\n\t\t\tdivs = divs.concat(method.call(this, currentStart, new Date(Math.min(currentEnd.valueOf(), end.valueOf()))));\r\n\t\t\tcurrentStart = scheduler.date.day_start(scheduler.date.add(currentStart, 1, \"day\"));\r\n\r\n\t\t\tcurrentEnd = scheduler.date.day_start(scheduler.date.add(currentStart, 1, \"day\"));\r\n\t\t\tcurrentEnd = new Date(Math.min(currentEnd.valueOf(), end.valueOf()));\r\n\t\t}\r\n\r\n\t\treturn divs;\r\n\t},\r\n\r\n\r\n\trender: function(start, end, section){\r\n\t\tthis.clear();\r\n\t\tvar divs = [];\r\n\r\n\t\tvar modes = scheduler.$keyboardNavigation.TimeSlot.prototype._modes;\r\n\t\tvar view = scheduler.$keyboardNavigation.TimeSlot.prototype._getMode();\r\n\t\tswitch (view){\r\n\t\t\tcase modes.units:\r\n\t\t\t\tdivs = this.renderVerticalMarker(start, end, section);\r\n\t\t\t\tbreak;\r\n\t\t\tcase modes.timeline:\r\n\t\t\t\tdivs = this.renderTimelineMarker(start, end, section);\r\n\t\t\t\tbreak;\r\n\t\t\tcase modes.year:\r\n\t\t\t\tdivs = divs.concat(this.renderMultiple(start, end, this.renderYearMarker));\r\n\t\t\t\tbreak;\r\n\t\t\tcase modes.month:\r\n\t\t\t\tdivs = this.renderMonthMarker(start, end);\r\n\t\t\t\tbreak;\r\n\t\t\tcase modes.weekAgenda:\r\n\t\t\t\tdivs = divs.concat(this.renderMultiple(start, end, this.renderWeekAgendaMarker));\r\n\t\t\t\tbreak;\r\n\t\t\tcase modes.list:\r\n\t\t\t\tdivs = this.renderAgendaMarker(start, end);\r\n\t\t\t\tbreak;\r\n\t\t\tcase modes.dayColumns:\r\n\t\t\t\tdivs = divs.concat(this.renderMultiple(start, end, this.renderVerticalMarker));\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis.addWaiAriaLabel(divs, start, end, section);\r\n\t\tthis.addDataAttributes(divs, start, end, section);\r\n\r\n\t\tfor(var i = divs.length - 1; i >= 0; i--){\r\n\t\t\tif(divs[i].offsetWidth){\r\n\t\t\t\treturn divs[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t},\r\n\r\n\taddDataAttributes: function(divs, start, end, section){\r\n\t\tvar dateToStr = scheduler.date.date_to_str(scheduler.config.api_date);\r\n\r\n\t\tvar from = dateToStr(start),\r\n\t\t\tto = dateToStr(end);\r\n\r\n\t\tfor(var i = 0; i < divs.length; i++){\r\n\t\t\tdivs[i].setAttribute(\"data-start-date\", from);\r\n\t\t\tdivs[i].setAttribute(\"data-end-date\", to);\r\n\t\t\tif(section){\r\n\t\t\t\tdivs[i].setAttribute(\"data-section\", section);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\taddWaiAriaLabel: function(divs, start, end, section){\r\n\t\tvar label = \"\";\r\n\t\tvar state = scheduler.getState();\r\n\t\tvar mode = state.mode;\r\n\r\n\t\tvar dateTimeLabel = false;\r\n\r\n\t\tlabel += scheduler.templates.day_date(start);\r\n\r\n\t\tif((scheduler.date.day_start(new Date(start)).valueOf() != start.valueOf())){\r\n\t\t\tlabel += \" \" + scheduler.templates.hour_scale(start);\r\n\t\t\tdateTimeLabel = true;\r\n\t\t}\r\n\r\n\t\tif((scheduler.date.day_start(new Date(start)).valueOf() != scheduler.date.day_start(new Date(end)).valueOf())){\r\n\r\n\t\t\tlabel += \" - \" + scheduler.templates.day_date(end);\r\n\t\t\tif(dateTimeLabel || (scheduler.date.day_start(new Date(end)).valueOf() != end.valueOf())){\r\n\t\t\t\tlabel += \" \" + scheduler.templates.hour_scale(end);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(section){\r\n\t\t\tif(scheduler.matrix && scheduler.matrix[mode]){\r\n\t\t\t\tconst timeline = scheduler.matrix[mode];\r\n\t\t\t\tconst sectionObject = timeline.y_unit[timeline.order[section]];\r\n\t\t\t\tlabel += \", \" + scheduler.templates[mode + \"_scale_label\"](sectionObject.key, sectionObject.label, sectionObject);\r\n\t\t\t}else if(scheduler._props && scheduler._props[mode]){\r\n\t\t\t\tconst units = scheduler._props[mode];\r\n\t\t\t\tconst sectionObject = units.options[units.order[section]];\r\n\r\n\t\t\t\tlabel += \", \" + scheduler.templates[mode + \"_scale_text\"](sectionObject.key, sectionObject.label, sectionObject);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfor(var i = 0; i < divs.length; i++){\r\n\t\t\tscheduler._waiAria.setAttributes(divs[i], {\r\n\t\t\t\t\"aria-label\": label,\r\n\t\t\t\t\"aria-live\": \"polite\"\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\trenderWeekAgendaMarker: function(start_date, end_date){\r\n\t\tvar divs = scheduler.$container.querySelectorAll(\".dhx_wa_day_cont .dhx_wa_scale_bar\");\r\n\r\n\t\tvar currDate = scheduler.date.week_start(new Date(scheduler.getState().min_date));\r\n\r\n\t\tvar index = -1;\r\n\t\tvar markerDate = scheduler.date.day_start(new Date(start_date));\r\n\t\tfor(var i = 0; i < divs.length; i++){\r\n\t\t\tindex++;\r\n\t\t\tif(scheduler.date.day_start(new Date(currDate)).valueOf() == markerDate.valueOf()){\r\n\t\t\t\tbreak;\r\n\t\t\t}else{\r\n\t\t\t\tcurrDate = scheduler.date.add(currDate, 1, \"day\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(index != -1) return this._wrapDiv(divs[index]);\r\n\t\treturn [];\r\n\t},\r\n\r\n\t_wrapDiv: function(cell){\r\n\t\tvar marker = this.createElement();\r\n\t\tmarker.style.top = cell.offsetTop + \"px\";\r\n\t\tmarker.style.left = cell.offsetLeft + \"px\";\r\n\t\tmarker.style.width = cell.offsetWidth + \"px\";\r\n\t\tmarker.style.height = cell.offsetHeight + \"px\";\r\n\t\tcell.appendChild(marker);\r\n\t\treturn [marker];\r\n\t},\r\n\trenderYearMarker: function(start_date, end_date){\r\n\t\tvar cell = scheduler._get_year_cell(start_date);\r\n\t\tcell.style.position = \"relative\";\r\n\t\tvar marker = this.createElement();\r\n\t\tmarker.style.top = \"0px\";\r\n\t\tmarker.style.left = \"0px\";\r\n\t\tmarker.style.width = \"100%\";\r\n\t\tmarker.style.height = \"100%\";\r\n\t\tcell.appendChild(marker);\r\n\t\treturn [marker];\r\n\t},\r\n\r\n\trenderAgendaMarker: function(start_date, end_date){\r\n\t\tvar block = this.createElement();\r\n\t\tblock.style.height = \"1px\";\r\n\t\tblock.style.width = \"100%\";\r\n\t\tblock.style.opacity = 1;\r\n\t\tblock.style.top = \"0px\";\r\n\t\tblock.style.left = \"0px\";\r\n\t\tscheduler.$container.querySelector(\".dhx_cal_data\").appendChild(block);\r\n\t\treturn [block];\r\n\t},\r\n\r\n\trenderTimelineMarker: function(start_date, end_date, section){\r\n\t\tvar view_opts = scheduler._lame_copy({}, scheduler.matrix[scheduler._mode]);\r\n\t\tvar areas = view_opts._scales;\r\n\t\t//timespans must always use actual position, not rounded\r\n\t\tview_opts.round_position = false;\r\n\t\tvar blocks = [];\r\n\r\n\t\tvar min_date = start_date ? new Date(start_date) : scheduler._min_date;\r\n\t\tvar max_date = end_date ? new Date(end_date) : scheduler._max_date;\r\n\r\n\t\tif(min_date.valueOf() < scheduler._min_date.valueOf())\r\n\t\t\tmin_date = new Date(scheduler._min_date);\r\n\t\tif(max_date.valueOf() > scheduler._max_date.valueOf())\r\n\t\t\tmax_date = new Date(scheduler._max_date);\r\n\r\n\t\tif(!view_opts._trace_x) return blocks;\r\n\r\n\t\tfor(var i = 0; i < view_opts._trace_x.length; i++){\r\n\t\t\tif(scheduler._is_column_visible(view_opts._trace_x[i]))\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tif(i == view_opts._trace_x.length)\r\n\t\t\treturn blocks;\r\n\r\n\t\tvar area = areas[section];\r\n\r\n\t\tif (!(min_date < end_date && max_date > start_date))\r\n\t\t\treturn blocks;\r\n\r\n\t\tvar block = this.createElement();\r\n\r\n\t\tlet start_pos;\r\n\t\tlet end_pos;\r\n\r\n\t\tfunction set_date_part(source, target) {\r\n\t\t\t// reset to start of the month in order to prevent month change when target is on 31th day, and source month has only 30 days\r\n\t\t\ttarget.setDate(1);\r\n\r\n\t\t\ttarget.setFullYear(source.getFullYear());\r\n\t\t\ttarget.setMonth(source.getMonth());\r\n\t\t\ttarget.setDate(source.getDate());\r\n\t\t}\r\n\r\n\t\tif(!scheduler.getView().days){\r\n\t\t\tstart_pos = scheduler._timeline_getX({start_date: start_date}, false, view_opts);\r\n\t\t\tend_pos = scheduler._timeline_getX({start_date: end_date}, false, view_opts);\r\n\t\t}else{\r\n\t\t\t// daytimeline\r\n\t\t\tconst tempStart = new Date(start_date);\r\n\t\t\tset_date_part(scheduler._min_date, tempStart);\r\n\t\t\tconst tempEnd = new Date(end_date);\r\n\t\t\tset_date_part(scheduler._min_date, tempEnd);\r\n\t\t\tstart_pos = scheduler._timeline_getX({start_date: tempStart}, false, view_opts);\r\n\t\t\tend_pos = scheduler._timeline_getX({start_date: tempEnd}, false, view_opts);\r\n\t\t}\r\n\r\n\t\tvar height = ((view_opts._section_height[section]-1) || (view_opts.dy - 1));\r\n\r\n\t\tvar top = 0;\r\n\t\tif (scheduler._isRender('cell')){\r\n\t\t\ttop = area.offsetTop;\r\n\t\t\tstart_pos += view_opts.dx;\r\n\t\t\tend_pos += view_opts.dx;\r\n\t\t\tarea = scheduler.$container.querySelector(\".dhx_cal_data\");\r\n\t\t}else{\r\n\r\n\t\t}\r\n\t\tvar width = Math.max(1, end_pos - start_pos - 1);\r\n\t\tlet direction = \"left\";\r\n\t\tif(scheduler.config.rtl){\r\n\t\t\tdirection = \"right\";\r\n\t\t}\r\n\t\tblock.style.cssText = `height:${height}px; ${direction}:${start_pos}px; width:${width}px; top:${top}px;`;\r\n\r\n\t\tif(area){\r\n\t\t\tarea.appendChild(block);\r\n\t\t\tblocks.push(block);\r\n\t\t}\r\n\r\n\t\treturn blocks;\r\n\t},\r\n\r\n\trenderMonthCell: function(date){\r\n\t\tvar cells = scheduler.$container.querySelectorAll(\".dhx_month_head\");\r\n\r\n\t\tvar divs = [];\r\n\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\tdivs.push(cells[i].parentNode);\r\n\t\t}\r\n\r\n\t\tvar firstDate = scheduler.date.week_start(new Date(scheduler.getState().min_date));\r\n\r\n\t\tvar index = -1;\r\n\t\tvar weekNumber = 0;\r\n\t\tvar dayIndex = -1;\r\n\t\tvar currDate = firstDate;\r\n\t\tvar markerDate = scheduler.date.day_start(new Date(date));\r\n\t\tfor(var i = 0; i < divs.length; i++){\r\n\t\t\tindex++;\r\n\r\n\t\t\tif(dayIndex == 6){\r\n\t\t\t\tweekNumber++;\r\n\t\t\t\tdayIndex = 0;\r\n\t\t\t}else{\r\n\t\t\t\tdayIndex++;\r\n\t\t\t}\r\n\r\n\t\t\tif(scheduler.date.day_start(new Date(currDate)).valueOf() == markerDate.valueOf()){\r\n\t\t\t\tbreak;\r\n\t\t\t}else{\r\n\t\t\t\tcurrDate = scheduler.date.add(currDate, 1, \"day\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(index == -1){\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\tvar left = scheduler._colsS[dayIndex];\r\n\t\tvar top = scheduler._colsS.heights[weekNumber];\r\n\r\n\t\tvar div = this.createElement();\r\n\t\tdiv.style.top = top + \"px\";\r\n\t\tdiv.style.left = left + \"px\";\r\n\t\tdiv.style.width = scheduler._cols[dayIndex] + \"px\";\r\n\t\tdiv.style.height = ((scheduler._colsS.heights[weekNumber + 1] - top) || scheduler._colsS.height) + \"px\" ;\r\n\r\n\r\n\t\tvar container = scheduler.$container.querySelector(\".dhx_cal_data\");\r\n\r\n\t\tvar datatable = container.querySelector(\".dhx_cal_month_table\");\r\n\t\tif(datatable.nextSibling){\r\n\t\t\tcontainer.insertBefore(div, datatable.nextSibling);\r\n\t\t}else{\r\n\t\t\tcontainer.appendChild(div);\r\n\t\t}\r\n\t\treturn div;\r\n\t},\r\n\trenderMonthMarker: function(start_date, end_date){\r\n\t\tvar res = [];\r\n\t\tvar currentDate = start_date;\r\n\t\twhile(currentDate.valueOf() < end_date.valueOf()){\r\n\t\t\tres.push(this.renderMonthCell(currentDate));\r\n\t\t\tcurrentDate = scheduler.date.add(currentDate, 1, \"day\");\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\trenderVerticalMarker: function(start_date, end_date, section){\r\n\t\tvar index = scheduler.locate_holder_day(start_date);\r\n\r\n\t\tvar divs = [];\r\n\t\tvar area = null;\r\n\r\n\t\tvar c = scheduler.config;\r\n\t\tif(scheduler._ignores[index]) return divs;\r\n\r\n\t\tif (scheduler._props && scheduler._props[scheduler._mode] && section) {\r\n\t\t\tvar view = scheduler._props[scheduler._mode];\r\n\t\t\tindex = view.order[section];\r\n\r\n\t\t\tvar inner_index = view.order[section];\r\n\t\t\tif(!(view.days > 1)){\r\n\t\t\t\tindex = inner_index;\r\n\t\t\t\tif (view.size && (index > view.position+view.size)) {\r\n\t\t\t\t\tindex = 0;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t//var units_l = view.size || view.options.length;\r\n\r\n\t\t\t\tindex = scheduler.locate_holder_day(start_date) + inner_index;\r\n\t\t\t\t//index = index*units_l + inner_index;\r\n\t\t\t}\r\n\t\t}\r\n\t\tarea = scheduler.locate_holder(index);\r\n\t\tif(!area || area.querySelector(\".dhx_scale_hour\")){\r\n\t\t\t// hour scale instead of date column\r\n\t\t\treturn document.createElement(\"div\");\r\n\t\t}\r\n\r\n\t\tvar start = Math.max((start_date.getHours()*60 + start_date.getMinutes()), c.first_hour*60);\r\n\r\n\r\n\t\tvar end = Math.min((end_date.getHours()*60 + end_date.getMinutes()), c.last_hour*60);\r\n\t\tif(!end && (scheduler.date.day_start(new Date(end_date)).valueOf() > scheduler.date.day_start(new Date(start_date)).valueOf())){\r\n\t\t\tend = c.last_hour*60;\r\n\t\t}\r\n\r\n\t\tif (end <= start) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\tvar block = this.createElement();\r\n\r\n\t\t// +1 for working with section which really takes up whole height (as % would be == 0)\r\n\t\tvar all_hours_height = scheduler.config.hour_size_px*c.last_hour + 1;\r\n\t\tvar hour_ms = 60*60*1000;\r\n\t\tblock.style.top = (Math.round((start*60*1000-scheduler.config.first_hour*hour_ms)*scheduler.config.hour_size_px/hour_ms) % all_hours_height) + \"px\";\r\n\t\tblock.style.lineHeight = block.style.height = Math.max((Math.round(((end-start)*60*1000)*scheduler.config.hour_size_px/hour_ms)) % all_hours_height, 1)+\"px\";\r\n\t\tblock.style.width = \"100%\";\r\n\t\tarea.appendChild(block);\r\n\t\tdivs.push(block);\r\n\t\treturn divs[0];\r\n\r\n\t}\r\n};\r\n\r\n}","export default function(scheduler){\r\n\r\nscheduler.$keyboardNavigation.SchedulerNode = function(){};\r\n\r\nscheduler.$keyboardNavigation.SchedulerNode.prototype = scheduler._compose(\r\n\tscheduler.$keyboardNavigation.EventHandler,\r\n\t{\r\n\t\tgetDefaultNode: function(){\r\n\t\t\tvar node = new scheduler.$keyboardNavigation.TimeSlot();\r\n\r\n\t\t\tif(!node.isValid()){\r\n\t\t\t\tnode = node.fallback();\r\n\t\t\t}\r\n\t\t\treturn node;\r\n\t\t},\r\n\r\n\t\t_modes:{\r\n\t\t\tmonth: \"month\",\r\n\t\t\tyear: \"year\",\r\n\t\t\tdayColumns: \"dayColumns\",\r\n\t\t\ttimeline:\"timeline\",\r\n\t\t\tunits:\"units\",\r\n\t\t\tweekAgenda: \"weekAgenda\",\r\n\t\t\tlist: \"list\"\r\n\t\t},\r\n\t\tgetMode: function(){\r\n\t\t\tvar state = scheduler.getState();\r\n\r\n\t\t\tvar mode = state.mode;\r\n\t\t\tif((scheduler.matrix && scheduler.matrix[mode])){\r\n\t\t\t\treturn this._modes.timeline;\r\n\t\t\t} else if((scheduler._props && scheduler._props[mode])){\r\n\t\t\t\treturn this._modes.units;\r\n\t\t\t}else if(mode == \"month\"){\r\n\t\t\t\treturn this._modes.month;\r\n\t\t\t}else if(mode == \"year\"){\r\n\t\t\t\treturn this._modes.year;\r\n\t\t\t}else if(mode == \"week_agenda\"){\r\n\t\t\t\treturn this._modes.weekAgenda;\r\n\t\t\t}else if(mode == \"map\" || mode == \"agenda\" || (scheduler._grid && scheduler[\"grid_\" + mode])){\r\n\t\t\t\treturn this._modes.list;\r\n\t\t\t}else{\r\n\t\t\t\treturn this._modes.dayColumns;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfocus: function(){\r\n\t\t\tscheduler.focus();\r\n\t\t},\r\n\r\n\t\tblur: function(){\r\n\r\n\t\t},\r\n\r\n\t\tdisable: function(){\r\n\t\t\tscheduler.$container.setAttribute(\"tabindex\", \"0\");\r\n\t\t},\r\n\t\tenable: function(){\r\n\t\t\tif(scheduler.$container)\r\n\t\t\t\tscheduler.$container.removeAttribute(\"tabindex\");\r\n\t\t},\r\n\t\tisEnabled: function(){\r\n\t\t\treturn scheduler.$container.hasAttribute(\"tabindex\");\r\n\t\t},\r\n\r\n\r\n\t\t_compareEvents: function(a, b){\r\n\t\t\tif (a.start_date.valueOf() == b.start_date.valueOf())\r\n\t\t\t\treturn a.id > b.id ? 1 : -1;\r\n\t\t\treturn a.start_date.valueOf() > b.start_date.valueOf() ? 1 : -1;\r\n\t\t},\r\n\r\n\t\t_pickEvent: function(from, to, startId, reverse){\r\n\t\t\tvar range = scheduler.getState();\r\n\t\t\tfrom = new Date(Math.max(range.min_date.valueOf(), from.valueOf()));\r\n\t\t\tto = new Date(Math.min(range.max_date.valueOf(), to.valueOf()));\r\n\r\n\t\t\tvar evs = scheduler.getEvents(from, to);\r\n\t\t\tevs.sort(this._compareEvents);\r\n\t\t\tif(reverse){\r\n\t\t\t\tevs = evs.reverse();\r\n\t\t\t}\r\n\r\n\t\t\tvar trim = !!startId;\r\n\t\t\tfor(var i =0; i < evs.length && trim; i++){\r\n\t\t\t\tif(evs[i].id == startId){\r\n\t\t\t\t\ttrim = false;\r\n\t\t\t\t}\r\n\t\t\t\tevs.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\r\n\t\t\tfor(var i = 0; i < evs.length; i++){\r\n\t\t\t\tvar eventElement = new scheduler.$keyboardNavigation.Event(evs[i].id);\r\n\t\t\t\tif(eventElement.getNode())\r\n\t\t\t\t\treturn evs[i];\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t},\r\n\r\n\t\tnextEventHandler: function(id){\r\n\t\t\tvar activeNode = scheduler.$keyboardNavigation.dispatcher.activeNode;\r\n\r\n\t\t\tvar startId = id || (activeNode && activeNode.eventId);\r\n\r\n\t\t\tvar nextEvent = null;\r\n\t\t\tif(startId && scheduler.getEvent(startId)){\r\n\t\t\t\tvar currEvent = scheduler.getEvent(startId);\r\n\r\n\t\t\t\tnextEvent = scheduler.$keyboardNavigation.SchedulerNode.prototype._pickEvent(\r\n\t\t\t\t\tcurrEvent.start_date,\r\n\t\t\t\t\tscheduler.date.add(currEvent.start_date, 1, \"year\"),\r\n\t\t\t\t\tcurrEvent.id,\r\n\t\t\t\t\tfalse\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\t\t\tif(!nextEvent && !id){\r\n\t\t\t\tvar visibleDates = scheduler.getState();\r\n\r\n\t\t\t\tnextEvent = scheduler.$keyboardNavigation.SchedulerNode.prototype._pickEvent(\r\n\t\t\t\t\tvisibleDates.min_date,\r\n\t\t\t\t\tscheduler.date.add(visibleDates.min_date, 1, \"year\"),\r\n\t\t\t\t\tnull,\r\n\t\t\t\t\tfalse\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif(nextEvent){\r\n\r\n\t\t\t\tvar nextEv = new scheduler.$keyboardNavigation.Event(nextEvent.id);\r\n\t\t\t\tif(!nextEv.isValid()){// not visible event\r\n\t\t\t\t\tthis.nextEventHandler(nextEvent.id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(activeNode){activeNode.blur();}\r\n\t\t\t\t\tscheduler.$keyboardNavigation.dispatcher.setActiveNode(nextEv);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tprevEventHandler: function(id){\r\n\t\t\tvar activeNode = scheduler.$keyboardNavigation.dispatcher.activeNode;\r\n\r\n\t\t\tvar startId = id || (activeNode && activeNode.eventId);\r\n\r\n\t\t\tvar nextEvent = null;\r\n\t\t\tif(startId && scheduler.getEvent(startId)){\r\n\t\t\t\tvar currEvent = scheduler.getEvent(startId);\r\n\r\n\t\t\t\tnextEvent = scheduler.$keyboardNavigation.SchedulerNode.prototype._pickEvent(\r\n\t\t\t\t\tscheduler.date.add(currEvent.end_date, -1, \"year\"),\r\n\t\t\t\t\tcurrEvent.end_date,\r\n\t\t\t\t\tcurrEvent.id,\r\n\t\t\t\t\ttrue\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif(!nextEvent && !id){\r\n\t\t\t\tvar visibleDates = scheduler.getState();\r\n\r\n\t\t\t\tnextEvent = scheduler.$keyboardNavigation.SchedulerNode.prototype._pickEvent(\r\n\t\t\t\t\tscheduler.date.add(visibleDates.max_date, -1, \"year\"),\r\n\t\t\t\t\tvisibleDates.max_date,\r\n\t\t\t\t\tnull,\r\n\t\t\t\t\ttrue\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif(nextEvent){\r\n\t\t\t\tvar nextEv = new scheduler.$keyboardNavigation.Event(nextEvent.id);\r\n\t\t\t\tif(!nextEv.isValid()){// not visible event\r\n\t\t\t\t\tthis.prevEventHandler(nextEvent.id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(activeNode){activeNode.blur();}\r\n\t\t\t\t\tscheduler.$keyboardNavigation.dispatcher.setActiveNode(nextEv);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tkeys: {\r\n\r\n\t\t\t\"alt+1, alt+2, alt+3, alt+4, alt+5, alt+6, alt+7, alt+8, alt+9\": function(e){\r\n\t\t\t\tvar tabs = scheduler.$keyboardNavigation.HeaderCell.prototype.getNodes(\".dhx_cal_navline .dhx_cal_tab\");\r\n\t\t\t\tvar key = e.key;\r\n\t\t\t\tif(key === undefined){\r\n\t\t\t\t\tkey = e.keyCode - 48;\r\n\t\t\t\t}\r\n\t\t\t\tif(tabs[key*1 - 1]){\r\n\t\t\t\t\ttabs[key*1 - 1].click();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t\"ctrl+left,meta+left\": function(e){\r\n\t\t\t\tscheduler._click.dhx_cal_prev_button();\r\n\t\t\t},\r\n\t\t\t\"ctrl+right,meta+right\": function(e){\r\n\t\t\t\tscheduler._click.dhx_cal_next_button();\r\n\t\t\t},\r\n\t\t\t\"ctrl+up,meta+up\":function(e){\r\n\t\t\t\tvar dataArea = scheduler.$container.querySelector(\".dhx_cal_data\");\r\n\t\t\t\tdataArea.scrollTop -= 20;\r\n\t\t\t},\r\n\t\t\t\"ctrl+down,meta+down\": function(e){\r\n\t\t\t\tvar dataArea = scheduler.$container.querySelector(\".dhx_cal_data\");\r\n\t\t\t\tdataArea.scrollTop += 20;\r\n\t\t\t},\r\n\r\n\r\n\t\t\t\"e\": function(){\r\n\t\t\t\tthis.nextEventHandler();\r\n\t\t\t},\r\n\r\n\t\t\t\"home\": function(){\r\n\t\t\t\tscheduler.setCurrentView(new Date());\r\n\t\t\t},\r\n\r\n\t\t\t\"shift+e\": function(){\r\n\t\t\t\tthis.prevEventHandler();\r\n\t\t\t},\r\n\r\n\t\t\t\"ctrl+enter,meta+enter\": function(){\r\n\t\t\t\tscheduler.addEventNow({start_date: new Date(scheduler.getState().date)});\r\n\t\t\t},\r\n\r\n\t\t\t\"ctrl+c,meta+c\": function(e){\r\n\t\t\t\tscheduler._key_nav_copy_paste(e);\r\n\t\t\t},\r\n\t\t\t\"ctrl+v,meta+v\": function(e){\r\n\t\t\t\tscheduler._key_nav_copy_paste(e);\r\n\t\t\t},\r\n\t\t\t\"ctrl+x,meta+x\": function(e){\r\n\t\t\t\tscheduler._key_nav_copy_paste(e);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n);\r\n\r\nscheduler.$keyboardNavigation.SchedulerNode.prototype.bindAll(scheduler.$keyboardNavigation.SchedulerNode.prototype.keys);\r\n\r\n}","export default function(scheduler){\r\n\r\nscheduler.$keyboardNavigation.KeyNavNode = function(){};\r\n\r\nscheduler.$keyboardNavigation.KeyNavNode.prototype = scheduler._compose(\r\n\tscheduler.$keyboardNavigation.EventHandler,\r\n\t{\r\n\t\tisValid: function(){\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tfallback: function(){\r\n\t\t\treturn null;\r\n\t\t},\r\n\r\n\t\tmoveTo: function (element) {\r\n\t\t\tscheduler.$keyboardNavigation.dispatcher.setActiveNode(element);\r\n\t\t},\r\n\r\n\t\tcompareTo: function(b){\r\n\t\t\t// good enough comparison of two random objects\r\n\t\t\tif(!b) return false;\r\n\t\t\tfor(var i in this){\r\n\t\t\t\tif(!!this[i] != !!b[i]) return false;\r\n\r\n\t\t\t\tvar canStringifyThis = !!(this[i] && this[i].toString);\r\n\t\t\t\tvar canStringifyThat = !!(b[i] && b[i].toString);\r\n\t\t\t\tif(canStringifyThat != canStringifyThis) return false;\r\n\t\t\t\tif(!(canStringifyThat && canStringifyThis)) {\r\n\t\t\t\t\tif(b[i] != this[i]) return false;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(b[i].toString() != this[i].toString())\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\r\n\t\tgetNode: function(){},\r\n\t\tfocus: function(){\r\n\t\t\tvar node = this.getNode();\r\n\t\t\tif(node){\r\n\t\t\t\tnode.setAttribute(\"tabindex\", \"-1\");\r\n\t\t\t\t//node.className += \" scheduler_focused\";\r\n\t\t\t\tif(node.focus) node.focus();\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tblur: function(){\r\n\t\t\tvar node = this.getNode();\r\n\t\t\tif(node){\r\n\t\t\t\tnode.setAttribute(\"tabindex\", \"-1\");\r\n\t\t\t\t//node.className = (node.className || \"\").replace(/ ?scheduler_focused/g, \"\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n);\r\n\r\n}","export default function(scheduler){\r\n\r\nscheduler.$keyboardNavigation.HeaderCell = function(index){\r\n\tthis.index = index || 0;\r\n};\r\n\r\nscheduler.$keyboardNavigation.HeaderCell.prototype = scheduler._compose(\r\n\tscheduler.$keyboardNavigation.KeyNavNode,\r\n\t{\r\n\t\tgetNode: function(index){\r\n\t\t\tindex = index || this.index || 0;\r\n\t\t\tvar nodes = this.getNodes();\r\n\t\t\tif(nodes[index]) return nodes[index];\r\n\t\t},\r\n\r\n\t\tgetNodes: function(selector){\r\n\t\t\tselector = selector || [\r\n\t\t\t\t\t\".dhx_cal_navline .dhx_cal_prev_button\",\r\n\t\t\t\t\t\".dhx_cal_navline .dhx_cal_next_button\",\r\n\t\t\t\t\t\".dhx_cal_navline .dhx_cal_today_button\",\r\n\t\t\t\t\t\".dhx_cal_navline .dhx_cal_tab\"\r\n\t\t\t\t].join(\", \");\r\n\r\n\t\t\tvar nodes = Array.prototype.slice.call(scheduler.$container.querySelectorAll(selector));\r\n\t\t\tnodes.sort(function(a, b){\r\n\t\t\t\treturn a.offsetLeft - b.offsetLeft;\r\n\t\t\t});\r\n\t\t\treturn nodes;\r\n\t\t},\r\n\r\n\t\t_handlers:null,\r\n\r\n\t\tisValid: function(){\r\n\t\t\treturn !!this.getNode(this.index);\r\n\t\t},\r\n\t\tfallback:function(){\r\n\t\t\tvar defaultCell = this.getNode(0);\r\n\t\t\tif(!defaultCell){\r\n\t\t\t\tdefaultCell = new scheduler.$keyboardNavigation.TimeSlot();\r\n\t\t\t}\r\n\t\t\treturn defaultCell;\r\n\t\t},\r\n\r\n\t\tkeys: {\r\n\t\t\t\"left\": function(){\r\n\t\t\t\tvar newIndex = this.index - 1;\r\n\t\t\t\tif(newIndex < 0){\r\n\t\t\t\t\tnewIndex = this.getNodes().length - 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.HeaderCell(newIndex));\r\n\r\n\t\t\t},\r\n\t\t\t\"right\": function () {\r\n\t\t\t\tvar newIndex = this.index + 1;\r\n\t\t\t\tif(newIndex >= this.getNodes().length){\r\n\t\t\t\t\tnewIndex = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.HeaderCell(newIndex));\r\n\t\t\t},\r\n\t\t\t\"down\": function () {\r\n\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.TimeSlot());\r\n\t\t\t},\r\n\r\n\t\t\t\"enter\": function(){\r\n\t\t\t\tvar node = this.getNode();\r\n\t\t\t\tif(node){\r\n\t\t\t\t\tnode.click();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n);\r\n\r\nscheduler.$keyboardNavigation.HeaderCell.prototype.bindAll(scheduler.$keyboardNavigation.HeaderCell.prototype.keys);\r\n\r\n}","export default function(scheduler){\r\n\r\nscheduler.$keyboardNavigation.Event = function(id){\r\n\tthis.eventId = null;\r\n\tif(scheduler.getEvent(id)){\r\n\t\tvar ev = scheduler.getEvent(id);\r\n\t\tthis.start = new Date(ev.start_date);\r\n\t\tthis.end = new Date(ev.end_date);\r\n\r\n\t\tthis.section = this._getSection(ev);\r\n\t\tthis.eventId = id;\r\n\t}\r\n};\r\n\r\nscheduler.$keyboardNavigation.Event.prototype = scheduler._compose(\r\n\tscheduler.$keyboardNavigation.KeyNavNode,\r\n\t{\r\n\t\t_getNodes: function(){\r\n\t\t\treturn Array.prototype.slice.call(scheduler.$container.querySelectorAll(\"[\"+scheduler.config.event_attribute+\"]\"));\r\n\t\t},\r\n\r\n\t\t_modes: scheduler.$keyboardNavigation.SchedulerNode.prototype._modes,\r\n\r\n\t\tgetMode: scheduler.$keyboardNavigation.SchedulerNode.prototype.getMode,\r\n\r\n\t\t_handlers: null,\r\n\t\tisValid: function(){\r\n\t\t\treturn !!(scheduler.getEvent(this.eventId) && this.getNode());\r\n\t\t},\r\n\t\tfallback: function(){\r\n\t\t\tvar eventNode = this._getNodes()[0];\r\n\t\t\tvar defaultElement = null;\r\n\t\t\tif(!eventNode || !(scheduler._locate_event(eventNode))){\r\n\t\t\t\tdefaultElement = new scheduler.$keyboardNavigation.TimeSlot();\r\n\t\t\t}else{\r\n\t\t\t\tvar id = scheduler._locate_event(eventNode);\r\n\t\t\t\tdefaultElement = new scheduler.$keyboardNavigation.Event(id);\r\n\t\t\t}\r\n\r\n\t\t\treturn defaultElement;\r\n\t\t},\r\n\r\n\t\tisScrolledIntoView: function (el) {\r\n\t\t\tvar eventBox = el.getBoundingClientRect();\r\n\t\t\tvar viewPort = scheduler.$container.querySelector(\".dhx_cal_data\").getBoundingClientRect();\r\n\t\t\t\r\n\t\t\tif(eventBox.bottom < viewPort.top || eventBox.top > viewPort.bottom){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\r\n\t\tgetNode: function(){\r\n\r\n\t\t\tvar idSelector = \"[\"+scheduler.config.event_attribute+\"='\"+this.eventId+\"']\";\r\n\r\n\t\t\tvar inlineEditor = scheduler.$keyboardNavigation.dispatcher.getInlineEditor(this.eventId);\r\n\t\t\tif(inlineEditor){// is inline editor visible\r\n\t\t\t\treturn inlineEditor;\r\n\t\t\t}else{\r\n\t\t\t\tif(scheduler.isMultisectionEvent && scheduler.isMultisectionEvent(scheduler.getEvent(this.eventId))){\r\n\t\t\t\t\tvar nodes = scheduler.$container.querySelectorAll(idSelector);\r\n\t\t\t\t\tfor(var i = 0; i < nodes.length; i++){\r\n\t\t\t\t\t\tif(this.isScrolledIntoView(nodes[i])){\r\n\t\t\t\t\t\t\treturn nodes[i];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn nodes[0];\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn scheduler.$container.querySelector(idSelector);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tfocus: function(){\r\n\t\t\tvar event = scheduler.getEvent(this.eventId);\r\n\r\n\t\t\tvar calendar = scheduler.getState();\r\n\t\t\tif(event.start_date.valueOf() > calendar.max_date.valueOf() || event.end_date.valueOf() <= calendar.min_date.valueOf()){\r\n\t\t\t\tscheduler.setCurrentView(event.start_date);\r\n\t\t\t}\r\n\r\n\t\t\tvar node = this.getNode();\r\n\t\t\tif (this.isScrolledIntoView(node)) {\r\n\t\t\t\tscheduler.$keyboardNavigation.dispatcher.keepScrollPosition((function(){\r\n\t\t\t\t\tscheduler.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this);\r\n\t\t\t\t}).bind(this));\r\n\t\t\t} else {\r\n\t\t\t\tscheduler.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tblur: function(){\r\n\t\t\tscheduler.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this);\r\n\t\t},\r\n\r\n\r\n\t\t_getSection: function(ev){\r\n\t\t\tvar section = null;\r\n\t\t\tvar mode = scheduler.getState().mode;\r\n\t\t\tif(scheduler.matrix && scheduler.matrix[mode]){\r\n\t\t\t\tvar timeline = scheduler.matrix[scheduler.getState().mode];\r\n\t\t\t\tsection = ev[timeline.y_property];\r\n\t\t\t}else if(scheduler._props && scheduler._props[mode]){\r\n\t\t\t\tvar unit = scheduler._props[mode];\r\n\t\t\t\tsection = ev[unit.map_to];\r\n\t\t\t}\r\n\t\t\treturn section;\r\n\t\t},\r\n\t\t_moveToSlot: function(dir){\r\n\t\t\tvar ev = scheduler.getEvent(this.eventId);\r\n\t\t\tif(ev){\r\n\t\t\t\tvar section =this._getSection(ev);\r\n\t\t\t\tvar slot = new scheduler.$keyboardNavigation.TimeSlot(ev.start_date, null, section);\r\n\t\t\t\tthis.moveTo(slot.nextSlot(slot, dir));\r\n\t\t\t}else{\r\n\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.TimeSlot());\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tkeys: {\r\n\t\t\t\"left\": function(){\r\n\t\t\t\tthis._moveToSlot(\"left\");\r\n\t\t\t},\r\n\r\n\t\t\t\"right\": function () {\r\n\t\t\t\tthis._moveToSlot(\"right\");\r\n\t\t\t},\r\n\t\t\t\"down\": function () {\r\n\t\t\t\tif(this.getMode() == this._modes.list){\r\n\t\t\t\t\tscheduler.$keyboardNavigation.SchedulerNode.prototype.nextEventHandler();\r\n\t\t\t\t}else {\r\n\t\t\t\t\tthis._moveToSlot(\"down\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t\"space\": function(){\r\n\t\t\t\tvar node = this.getNode();\r\n\t\t\t\tif(node && node.click){\r\n\t\t\t\t\tnode.click();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.TimeSlot());\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\t\"up\": function () {\r\n\t\t\t\tif(this.getMode() == this._modes.list){\r\n\t\t\t\t\tscheduler.$keyboardNavigation.SchedulerNode.prototype.prevEventHandler();\r\n\t\t\t\t}else {\r\n\t\t\t\t\tthis._moveToSlot(\"up\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t\"delete\": function(){\r\n\t\t\t\tif(scheduler.getEvent(this.eventId)) {\r\n\t\t\t\t\tscheduler._click.buttons[\"delete\"](this.eventId);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.TimeSlot());\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// open lightbox\r\n\t\t\t\"enter\": function () {\r\n\t\t\t\tif(scheduler.getEvent(this.eventId)) {\r\n\t\t\t\t\tscheduler.showLightbox(this.eventId);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.TimeSlot());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n);\r\nscheduler.$keyboardNavigation.Event.prototype.bindAll(scheduler.$keyboardNavigation.Event.prototype.keys);\r\n\r\n}","export default function(scheduler){\r\n\r\nscheduler.$keyboardNavigation.TimeSlot = function(from, to, section, movingDate){\r\n\tvar state = scheduler.getState();\r\n\tvar timeline = scheduler.matrix && scheduler.matrix[state.mode];\r\n\r\n\tif(!from){\r\n\t\tfrom = this.getDefaultDate();\r\n\t}\r\n\r\n\tif(!to){\r\n\r\n\t\tif(timeline){\r\n\t\t\tto = scheduler.date.add(from, timeline.x_step, timeline.x_unit);\r\n\t\t}else{\r\n\t\t\tto = scheduler.date.add(from, scheduler.config.key_nav_step, \"minute\");\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.section = section || this._getDefaultSection();\r\n\tthis.start_date = new Date(from);\r\n\tthis.end_date = new Date(to);\r\n\tthis.movingDate = movingDate || null;\r\n};\r\n\r\nscheduler.$keyboardNavigation.TimeSlot.prototype = scheduler._compose(\r\n\tscheduler.$keyboardNavigation.KeyNavNode,\r\n\t{\r\n\t\t_handlers:null,\r\n\r\n\t\tgetDefaultDate: function(){\r\n\t\t\tvar from;\r\n\t\t\tvar state = scheduler.getState();\r\n\t\t\tvar visibleTime = new Date(state.date);\r\n\t\t\tvisibleTime.setSeconds(0);\r\n\t\t\tvisibleTime.setMilliseconds(0);\r\n\r\n\t\t\tvar nowTime = new Date();\r\n\t\t\tnowTime.setSeconds(0);\r\n\t\t\tnowTime.setMilliseconds(0);\r\n\r\n\t\t\tvar timeline = scheduler.matrix && scheduler.matrix[state.mode];\r\n\t\t\tvar showNowTime = false;\r\n\t\t\tif(visibleTime.valueOf() === nowTime.valueOf()){\r\n\t\t\t\tshowNowTime = true;\r\n\t\t\t}\r\n\r\n\t\t\tif(timeline){\r\n\t\t\t\tif(showNowTime){\r\n\t\t\t\t\tif(timeline.x_unit === \"day\"){\r\n\t\t\t\t\t\tnowTime.setHours(0);\r\n\t\t\t\t\t\tnowTime.setMinutes(0);\r\n\t\t\t\t\t}else if(timeline.x_unit === \"hour\"){\r\n\t\t\t\t\t\tnowTime.setMinutes(0);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfrom = nowTime;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfrom = scheduler.date[timeline.name + \"_start\"](new Date(state.date));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfrom = this.findVisibleColumn(from);\r\n\t\t\t}else{\r\n\t\t\t\tfrom = new Date(scheduler.getState().min_date);\r\n\t\t\t\tif(showNowTime){\r\n\t\t\t\t\tfrom = nowTime;\r\n\t\t\t\t}\r\n\t\t\t\tfrom = this.findVisibleColumn(from);\r\n\t\t\t\tif(!showNowTime){\r\n\t\t\t\t\tfrom.setHours(scheduler.config.first_hour);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!scheduler._table_view){\r\n\t\t\t\t\tvar dataContainer = scheduler.$container.querySelector(\".dhx_cal_data\");\r\n\t\t\t\t\tif(dataContainer.scrollTop){\r\n\t\t\t\t\t\tfrom.setHours(scheduler.config.first_hour + Math.ceil(dataContainer.scrollTop / scheduler.config.hour_size_px));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn from;\r\n\t\t},\r\n\r\n\t\tclone: function(timeslot){\r\n\t\t\treturn new scheduler.$keyboardNavigation.TimeSlot(timeslot.start_date, timeslot.end_date, timeslot.section, timeslot.movingDate);\r\n\t\t},\r\n\t\t_getMultisectionView: function(){\r\n\t\t\tvar state = scheduler.getState();\r\n\t\t\tvar view;\r\n\t\t\tif(scheduler._props && scheduler._props[state.mode]) {\r\n\t\t\t\tview = scheduler._props[state.mode];\r\n\t\t\t}else if(scheduler.matrix && scheduler.matrix[state.mode]){\r\n\t\t\t\tview = scheduler.matrix[state.mode];\r\n\t\t\t}\r\n\t\t\treturn view;\r\n\t\t},\r\n\r\n\t\t_getDefaultSection: function(){\r\n\t\t\tvar section = null;\r\n\t\t\tvar view = this._getMultisectionView();\r\n\t\t\tif(view && !section){\r\n\t\t\t\tsection = this._getNextSection();\r\n\t\t\t}\r\n\t\t\treturn section;\r\n\t\t},\r\n\r\n\t\t_getNextSection: function(sectionId, dir){\r\n\t\t\tvar view = this._getMultisectionView();\r\n\t\t\tvar currentIndex = view.order[sectionId];\r\n\t\t\tvar nextIndex = currentIndex;\r\n\t\t\tif(currentIndex !== undefined){\r\n\t\t\t\tnextIndex =  currentIndex + dir;\r\n\t\t\t}else{\r\n\t\t\t\tnextIndex = (view.size && view.position) ? view.position : 0;\r\n\t\t\t}\r\n\r\n\t\t\tif(nextIndex < 0){\r\n\t\t\t\tnextIndex = 0;\r\n\t\t\t}\r\n\t\t\tvar options = view.options || view.y_unit;\r\n\r\n\t\t\tif(nextIndex >= options.length){\r\n\t\t\t\tnextIndex = options.length - 1;\r\n\t\t\t}\r\n\t\t\t//nextIndex = nextIndex < 0 ? nextIndex = (view.options || view.y_unit).length -1 : nextIndex;\r\n\r\n\t\t\tif(options[nextIndex]){\r\n\t\t\t\treturn options[nextIndex].key;\r\n\t\t\t}else{\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tisValid: function(){\r\n\t\t\tvar state = scheduler.getState();\r\n\t\t\tvar isInRange = !(this.start_date.valueOf() < state.min_date.valueOf() || this.start_date.valueOf() >= state.max_date.valueOf());\r\n\r\n\t\t\tif(!isInRange) return false;\r\n\r\n\r\n\t\t\tif(!this.isVisible(this.start_date, this.end_date)) return false;\r\n\r\n\t\t\tvar view = this._getMultisectionView();\r\n\r\n\t\t\tif(view){\r\n\t\t\t\treturn (view.order[this.section] !== undefined);\r\n\t\t\t}else{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tfallback:function(){\r\n\r\n\t\t\tvar defaultSlot = new scheduler.$keyboardNavigation.TimeSlot();\r\n\t\t\tif(!defaultSlot.isValid()){\r\n\t\t\t\treturn new scheduler.$keyboardNavigation.DataArea();\r\n\t\t\t}else{\r\n\t\t\t\treturn defaultSlot;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetNodes: function(){\r\n\t\t\treturn Array.prototype.slice.call(scheduler.$container.querySelectorAll(\".dhx_focus_slot\"));\r\n\t\t},\r\n\t\tgetNode: function(){\r\n\t\t\treturn this.getNodes()[0];\r\n\t\t},\r\n\r\n\t\tfocus: function(){\r\n\t\t\tif(this.section && scheduler.getView() && scheduler.getView().smart_rendering && scheduler.getView().scrollTo && !scheduler.$container.querySelector(`[data-section-id=\"${this.section}\"]`)){\r\n\t\t\t\tscheduler.getView().scrollTo({section: this.section});\r\n\t\t\t}\r\n\t\t\tscheduler.$keyboardNavigation.marker.render(this.start_date, this.end_date, this.section);\r\n\t\t\tscheduler.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this);\r\n\t\t\tscheduler.$keyboardNavigation._pasteDate = this.start_date;\r\n\t\t\tscheduler.$keyboardNavigation._pasteSection = this.section;\r\n\r\n\t\t},\r\n\t\tblur: function(){\r\n\t\t\tscheduler.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this);\r\n\t\t\tscheduler.$keyboardNavigation.marker.clear();\r\n\t\t},\r\n\r\n\t\t_modes: scheduler.$keyboardNavigation.SchedulerNode.prototype._modes,\r\n\r\n\t\t_getMode: scheduler.$keyboardNavigation.SchedulerNode.prototype.getMode,\r\n\r\n\t\taddMonthDate: function(date, dir, extend){\r\n\t\t\tvar res;\r\n\t\t\tswitch (dir){\r\n\t\t\t\tcase \"up\":\r\n\t\t\t\t\tres = scheduler.date.add(date, -1, \"week\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"down\":\r\n\t\t\t\t\tres = scheduler.date.add(date, 1, \"week\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"left\":\r\n\t\t\t\t\tres = scheduler.date.day_start(scheduler.date.add(date, -1, \"day\"));\r\n\t\t\t\t\tres = this.findVisibleColumn(res, -1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"right\":\r\n\t\t\t\t\tres = scheduler.date.day_start(scheduler.date.add(date, 1, \"day\"));\r\n\t\t\t\t\tres = this.findVisibleColumn(res, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tres = scheduler.date.day_start(new Date(date));\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tvar state = scheduler.getState();\r\n\t\t\tif(date.valueOf() < state.min_date.valueOf() || (!extend && date.valueOf() >= state.max_date.valueOf())){\r\n\t\t\t\tres = new Date(state.min_date);\r\n\t\t\t}\r\n\r\n\t\t\treturn res;\r\n\t\t},\r\n\r\n\t\tnextMonthSlot: function(slot, dir, extend){\r\n\r\n\t\t\tvar start, end;\r\n\t\t\tstart = this.addMonthDate(slot.start_date, dir, extend);\r\n\r\n\t\t\tstart.setHours(scheduler.config.first_hour);\r\n\t\t\tend = new Date(start);\r\n\t\t\tend.setHours(scheduler.config.last_hour);\r\n\t\t\treturn {start_date: start, end_date: end};\r\n\t\t},\r\n\r\n\t\t_alignTimeSlot: function(date, minDate, unit, step){\r\n\t\t\tvar currentDate = new Date(minDate);\r\n\t\t\twhile(currentDate.valueOf() < date.valueOf()){\r\n\t\t\t\tcurrentDate = scheduler.date.add(currentDate, step, unit);\r\n\t\t\t}\r\n\r\n\t\t\tif(currentDate.valueOf() > date.valueOf()){\r\n\t\t\t\tcurrentDate = scheduler.date.add(currentDate, -step, unit);\r\n\t\t\t}\r\n\r\n\t\t\treturn currentDate;\r\n\t\t},\r\n\r\n\t\tnextTimelineSlot: function(slot, dir, extend){\r\n\t\t\tvar state = scheduler.getState();\r\n\t\t\tvar view = scheduler.matrix[state.mode];\r\n\r\n\t\t\tvar startDate  = this._alignTimeSlot(slot.start_date, scheduler.date[view.name + \"_start\"](new Date(slot.start_date)), view.x_unit, view.x_step);\r\n\t\t\tvar endDate = this._alignTimeSlot(slot.end_date, scheduler.date[view.name + \"_start\"](new Date(slot.end_date)), view.x_unit, view.x_step);\r\n\r\n\t\t\tif(endDate.valueOf() <= startDate.valueOf()){\r\n\t\t\t\tendDate = scheduler.date.add(startDate, view.x_step, view.x_unit);\r\n\t\t\t}\r\n\t\t\tvar newPos = this.clone(slot);\r\n\t\t\tnewPos.start_date = startDate;\r\n\t\t\tnewPos.end_date = endDate;\r\n\t\t\tnewPos.section = slot.section || this._getNextSection();\r\n\r\n\r\n\t\t\tswitch (dir){\r\n\t\t\t\tcase \"up\":\r\n\t\t\t\t\tnewPos.section = this._getNextSection(slot.section, -1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"down\":\r\n\t\t\t\t\tnewPos.section = this._getNextSection(slot.section, +1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"left\":\r\n\t\t\t\t\tnewPos.start_date = this.findVisibleColumn(scheduler.date.add(newPos.start_date, -view.x_step, view.x_unit), -1);\r\n\t\t\t\t\tnewPos.end_date = scheduler.date.add(newPos.start_date, view.x_step, view.x_unit);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"right\":\r\n\t\t\t\t\tnewPos.start_date = this.findVisibleColumn(scheduler.date.add(newPos.start_date, view.x_step, view.x_unit), 1);\r\n\t\t\t\t\tnewPos.end_date = scheduler.date.add(newPos.start_date, view.x_step, view.x_unit);\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif(newPos.start_date.valueOf() < state.min_date.valueOf() || newPos.start_date.valueOf() >= state.max_date.valueOf()){\r\n\t\t\t\tif(extend && newPos.start_date.valueOf() >= state.max_date.valueOf()){\r\n\t\t\t\t\tnewPos.start_date = new Date(state.max_date);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tnewPos.start_date = scheduler.date[state.mode + \"_start\"](scheduler.date.add(state.date, dir == \"left\" ? -1 : 1, state.mode));\r\n\t\t\t\t\tnewPos.end_date = scheduler.date.add(newPos.start_date, view.x_step, view.x_unit);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn newPos;\r\n\t\t},\r\n\r\n\t\tnextUnitsSlot: function(slot, dir, extend){\r\n\t\t\tvar newPos = this.clone(slot);\r\n\t\t\tnewPos.section = slot.section || this._getNextSection();\r\n\r\n\t\t\tvar section = slot.section || this._getNextSection();\r\n\t\t\tvar state = scheduler.getState();\r\n\t\t\tvar view = scheduler._props[state.mode];\r\n\t\t\tswitch (dir){\r\n\t\t\t\tcase \"left\":\r\n\t\t\t\t\tsection = this._getNextSection(slot.section, -1);\r\n\t\t\t\t\tvar optionsCount = view.size ? (view.size - 1) : view.options.length;\r\n\r\n\t\t\t\t\tif(view.days > 1 && (view.order[section] == optionsCount - 1)){\r\n\t\t\t\t\t\tif(scheduler.date.add(slot.start_date, -1, \"day\").valueOf() >= state.min_date.valueOf()){\r\n\t\t\t\t\t\t\tnewPos = this.nextDaySlot(slot, dir, extend);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"right\":\r\n\t\t\t\t\tsection = this._getNextSection(slot.section, 1);\r\n\t\t\t\t\tif(view.days > 1 && !view.order[section]){\r\n\t\t\t\t\t\tif(scheduler.date.add(slot.start_date, 1, \"day\").valueOf() < state.max_date.valueOf()){\r\n\t\t\t\t\t\t\tnewPos = this.nextDaySlot(slot, dir, extend);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tnewPos = this.nextDaySlot(slot, dir, extend);\r\n\t\t\t\t\tsection = slot.section;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tnewPos.section = section;\r\n\t\t\treturn newPos;\r\n\t\t},\r\n\r\n\t\t_moveDate: function(oldDate, dir){\r\n\t\t\tvar newDate = this.findVisibleColumn(scheduler.date.add(oldDate, dir, \"day\"), dir);\r\n\t\t\tnewDate.setHours(oldDate.getHours());\r\n\t\t\tnewDate.setMinutes(oldDate.getMinutes());\r\n\t\t\treturn newDate;\r\n\t\t},\r\n\r\n\t\tisBeforeLastHour: function(date, isStartDate){\r\n\t\t\tvar minutes = date.getMinutes(),\r\n\t\t\t\thours = date.getHours(),\r\n\t\t\t\tlast_hour = scheduler.config.last_hour;\r\n\t\t\treturn (hours < last_hour || (!isStartDate && ((last_hour == 24 || hours == last_hour) && !minutes)));\r\n\t\t},\r\n\t\tisAfterFirstHour: function(date, isStartDate){\r\n\t\t\tvar minutes = date.getMinutes(),\r\n\t\t\t\thours = date.getHours(),\r\n\t\t\t\tfirst_hour = scheduler.config.first_hour,\r\n\t\t\t\tlast_hour = scheduler.config.last_hour;\r\n\t\t\treturn (hours >= first_hour || (!isStartDate && (!minutes && ((!hours &&  last_hour == 24) || (hours == last_hour)))));\r\n\t\t},\r\n\t\tisInVisibleDayTime: function(date, isStartDate){\r\n\t\t\treturn (this.isBeforeLastHour(date, isStartDate) && this.isAfterFirstHour(date, isStartDate));\r\n\t\t},\r\n\r\n\t\tnextDaySlot: function(slot, dir, extend){\r\n\t\t\tvar start, end;\r\n\r\n\t\t\tvar key_nav_step = scheduler.config.key_nav_step;\r\n\r\n\t\t\tvar date = this._alignTimeSlot(slot.start_date, scheduler.date.day_start(new Date(slot.start_date)), \"minute\", key_nav_step);\r\n\r\n\r\n\t\t\tvar oldStart = slot.start_date;\r\n\r\n\t\t\tswitch (dir){\r\n\t\t\t\tcase \"up\":\r\n\t\t\t\t\tstart = scheduler.date.add(date, -key_nav_step, \"minute\");\r\n\r\n\t\t\t\t\tif(!this.isInVisibleDayTime(start, true)){\r\n\t\t\t\t\t\tif (!extend || this.isInVisibleDayTime(oldStart, true)) {\r\n\r\n\t\t\t\t\t\t\tvar toNextDay = true;\r\n\t\t\t\t\t\t\tif(extend && scheduler.date.date_part(new Date(start)).valueOf() != scheduler.date.date_part(new Date(oldStart)).valueOf())\r\n\t\t\t\t\t\t\t\ttoNextDay = false;\r\n\t\t\t\t\t\t\tif(toNextDay)\r\n\t\t\t\t\t\t\t\tstart = this.findVisibleColumn(scheduler.date.add(slot.start_date, -1, \"day\"), -1);\r\n\r\n\t\t\t\t\t\t\tstart.setHours(scheduler.config.last_hour);\r\n\t\t\t\t\t\t\tstart.setMinutes(0);\r\n\t\t\t\t\t\t\tstart = scheduler.date.add(start, -key_nav_step, \"minute\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tend = scheduler.date.add(start, key_nav_step, \"minute\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"down\":\r\n\t\t\t\t\tstart = scheduler.date.add(date, key_nav_step, \"minute\");\r\n\r\n\t\t\t\t\tvar testEnd = extend ? start : scheduler.date.add(start, key_nav_step, \"minute\");\r\n\t\t\t\t\tif(!this.isInVisibleDayTime(testEnd, false)){\r\n\t\t\t\t\t\tif(!extend || this.isInVisibleDayTime(oldStart, false)) {\r\n\t\t\t\t\t\t\tif (!extend) {\r\n\t\t\t\t\t\t\t\tstart = this.findVisibleColumn(scheduler.date.add(slot.start_date, 1, \"day\"), 1);\r\n\t\t\t\t\t\t\t\tstart.setHours(scheduler.config.first_hour);\r\n\t\t\t\t\t\t\t\tstart.setMinutes(0);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar toNextDay = true;\r\n\t\t\t\t\t\t\t\tif (scheduler.date.date_part(new Date(oldStart)).valueOf() == oldStart.valueOf()) {\r\n\t\t\t\t\t\t\t\t\ttoNextDay = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (toNextDay) {\r\n\t\t\t\t\t\t\t\t\tstart = this.findVisibleColumn(scheduler.date.add(slot.start_date, 1, \"day\"), 1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tstart.setHours(scheduler.config.first_hour);\r\n\t\t\t\t\t\t\t\tstart.setMinutes(0);\r\n\t\t\t\t\t\t\t\tstart = scheduler.date.add(start, key_nav_step, \"minute\");\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tend = scheduler.date.add(start, key_nav_step, \"minute\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"left\":\r\n\t\t\t\t\tstart = this._moveDate(slot.start_date, -1);\r\n\t\t\t\t\tend = this._moveDate(slot.end_date, -1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"right\":\r\n\t\t\t\t\tstart = this._moveDate(slot.start_date, 1);\r\n\t\t\t\t\tend = this._moveDate(slot.end_date, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tstart = date;\r\n\t\t\t\t\tend = scheduler.date.add(start, key_nav_step, \"minute\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn {start_date: start, end_date: end};\r\n\t\t},\r\n\t\tnextWeekAgendaSlot: function(slot, dir){\r\n\t\t\tvar start, end;\r\n\t\t\tvar state = scheduler.getState();\r\n\r\n\t\t\tswitch (dir){\r\n\t\t\t\tcase \"down\":\r\n\t\t\t\tcase \"left\":\r\n\t\t\t\t\tstart = scheduler.date.day_start(scheduler.date.add(slot.start_date, -1, \"day\"));\r\n\t\t\t\t\tstart = this.findVisibleColumn(start, -1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"up\":\r\n\t\t\t\tcase \"right\":\r\n\t\t\t\t\tstart = scheduler.date.day_start(scheduler.date.add(slot.start_date, 1, \"day\"));\r\n\t\t\t\t\tstart = this.findVisibleColumn(start, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tstart = scheduler.date.day_start(slot.start_date);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif(slot.start_date.valueOf() < state.min_date.valueOf() || slot.start_date.valueOf() >= state.max_date.valueOf()){\r\n\t\t\t\tstart = new Date(state.min_date);\r\n\r\n\t\t\t}\r\n\t\t\tend = new Date(start);\r\n\t\t\tend.setHours(scheduler.config.last_hour);\r\n\t\t\treturn {start_date: start, end_date: end};\r\n\t\t},\r\n\t\tnextAgendaSlot: function(slot, dir){\r\n\t\t\treturn {start_date: slot.start_date, end_date: slot.end_date};\r\n\t\t},\r\n\r\n\r\n\t\tisDateVisible: function(date){\r\n\t\t\tif(!scheduler._ignores_detected)\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tvar timeline = scheduler.matrix && scheduler.matrix[scheduler.getState().mode];\r\n\r\n\t\t\tvar index;\r\n\t\t\tif(timeline){\r\n\t\t\t\tindex = scheduler._get_date_index(timeline, date);\r\n\t\t\t}else{\r\n\t\t\t\tindex = scheduler.locate_holder_day(date);\r\n\t\t\t}\r\n\r\n\t\t\treturn !scheduler._ignores[index];\r\n\t\t},\r\n\r\n\t\tfindVisibleColumn: function(start, dir){\r\n\t\t\tvar date = start;\r\n\t\t\tdir = dir || 1;\r\n\t\t\tvar range = scheduler.getState();\r\n\r\n\t\t\twhile(!this.isDateVisible(date) && ((dir > 0 && date.valueOf() <= range.max_date.valueOf()) || (dir < 0 && date.valueOf() >= range.min_date.valueOf()))){\r\n\t\t\t\tdate = this.nextDateColumn(date, dir);\r\n\t\t\t}\r\n\r\n\t\t\treturn date;\r\n\t\t},\r\n\r\n\t\tnextDateColumn: function(start, dir){\r\n\t\t\tdir = dir || 1;\r\n\t\t\tvar timeline = scheduler.matrix && scheduler.matrix[scheduler.getState().mode];\r\n\r\n\t\t\tvar date;\r\n\t\t\tif(timeline){\r\n\t\t\t\tdate = scheduler.date.add(start, dir * timeline.x_step, timeline.x_unit);\r\n\t\t\t}else{\r\n\t\t\t\tdate = scheduler.date.day_start(scheduler.date.add(start, dir, \"day\"));\r\n\t\t\t}\r\n\r\n\t\t\treturn date;\r\n\t\t},\r\n\r\n\t\tisVisible:function(from, to){\r\n\t\t\tif(!scheduler._ignores_detected)\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tvar current = new Date(from);\r\n\r\n\t\t\twhile(current.valueOf() < to.valueOf()){\r\n\t\t\t\tif(this.isDateVisible(current)) return true;\r\n\t\t\t\tcurrent = this.nextDateColumn(current);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tnextSlot: function(slot, dir, view, extend){\r\n\t\t\tvar next;\r\n\t\t\tview = view || this._getMode();\r\n\r\n\t\t\tvar tempSlot = scheduler.$keyboardNavigation.TimeSlot.prototype.clone(slot);\r\n\r\n\t\t\tswitch (view){\r\n\t\t\t\tcase this._modes.units:\r\n\t\t\t\t\tnext = this.nextUnitsSlot(tempSlot, dir, extend);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this._modes.timeline:\r\n\t\t\t\t\tnext = this.nextTimelineSlot(tempSlot, dir, extend);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this._modes.year:\r\n\t\t\t\t\tnext = this.nextMonthSlot(tempSlot, dir, extend);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this._modes.month:\r\n\t\t\t\t\tnext = this.nextMonthSlot(tempSlot, dir, extend);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this._modes.weekAgenda:\r\n\t\t\t\t\tnext = this.nextWeekAgendaSlot(tempSlot, dir, extend);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this._modes.list:\r\n\t\t\t\t\tnext = this.nextAgendaSlot(tempSlot, dir, extend);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this._modes.dayColumns:\r\n\t\t\t\t\tnext = this.nextDaySlot(tempSlot, dir, extend);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif(next.start_date.valueOf() >= next.end_date.valueOf()){\r\n\t\t\t\tnext = this.nextSlot(next, dir, view);\r\n\t\t\t}\r\n\r\n\t\t\treturn scheduler.$keyboardNavigation.TimeSlot.prototype.clone(next);\r\n\r\n\t\t},\r\n\r\n\t\textendSlot: function(slot, dir){\r\n\t\t\tvar view = this._getMode();\r\n\t\t\tvar next;\r\n\t\t\tswitch (view){\r\n\t\t\t\tcase this._modes.units:\r\n\t\t\t\t\tif(dir == \"left\" || dir == \"right\"){\r\n\t\t\t\t\t\tnext = this.nextUnitsSlot(slot, dir);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tnext = this.extendUnitsSlot(slot, dir);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this._modes.timeline:\r\n\t\t\t\t\tif(dir == \"down\" || dir == \"up\"){\r\n\t\t\t\t\t\tnext = this.nextTimelineSlot(slot, dir);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tnext = this.extendTimelineSlot(slot, dir);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this._modes.year:\r\n\t\t\t\t\tnext = this.extendMonthSlot(slot, dir);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this._modes.month:\r\n\t\t\t\t\tnext = this.extendMonthSlot(slot, dir);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this._modes.dayColumns:\r\n\t\t\t\t\tnext = this.extendDaySlot(slot, dir);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase this._modes.weekAgenda:\r\n\t\t\t\t\tnext = this.extendWeekAgendaSlot(slot, dir);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tnext = slot;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tvar range = scheduler.getState();\r\n\t\t\tif(next.start_date.valueOf() < range.min_date.valueOf()){\r\n\t\t\t\tnext.start_date = this.findVisibleColumn(range.min_date);\r\n\t\t\t\tnext.start_date.setHours(scheduler.config.first_hour);\r\n\t\t\t}\r\n\r\n\t\t\tif(next.end_date.valueOf() > range.max_date.valueOf()){\r\n\t\t\t//\tnext.end_date =  new Date(slot.end_date);\r\n\t\t\t\tnext.end_date = this.findVisibleColumn(range.max_date, -1);\r\n\t\t\t}\r\n\r\n\r\n\t\t\treturn scheduler.$keyboardNavigation.TimeSlot.prototype.clone(next);\r\n\t\t},\r\n\r\n\t\textendTimelineSlot: function(slot, direction){\r\n\t\t\treturn this.extendGenericSlot({\r\n\t\t\t\t\"left\":\"start_date\",\r\n\t\t\t\t\"right\":\"end_date\"\r\n\t\t\t\t},\r\n\t\t\t\tslot,\r\n\t\t\t\tdirection,\r\n\t\t\t\t\"timeline\"\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\textendWeekAgendaSlot: function(slot, direction){\r\n\t\t\treturn this.extendGenericSlot({\r\n\t\t\t\t\t\"left\":\"start_date\",\r\n\t\t\t\t\t\"right\":\"end_date\"\r\n\t\t\t\t},\r\n\t\t\t\tslot,\r\n\t\t\t\tdirection,\r\n\t\t\t\t\"weekAgenda\"\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\textendGenericSlot: function(allowedDirections, slot, direction, type){\r\n\t\t\tvar next;\r\n\t\t\tvar moveDate = slot.movingDate;\r\n\r\n\t\t\tif(!moveDate){\r\n\t\t\t\tmoveDate = allowedDirections[direction];\r\n\t\t\t}\r\n\r\n\t\t\tif(!moveDate || !allowedDirections[direction]){\r\n\t\t\t\treturn slot;\r\n\t\t\t}\r\n\r\n\t\t\tif(direction){\r\n\t\t\t\tnext = this.nextSlot({start_date: slot[moveDate], section: slot.section}, direction, type, true);\r\n\r\n\t\t\t\tif(next.start_date.valueOf() == slot.start_date.valueOf()){\r\n\t\t\t\t\tnext = this.nextSlot({start_date: next.start_date, section:next.section}, direction, type, true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnext.movingDate = moveDate;\r\n\t\t\t}else{\r\n\t\t\t\treturn scheduler.$keyboardNavigation.TimeSlot.prototype.clone(slot);\r\n\t\t\t}\r\n\r\n\t\t\tvar newDates = this.extendSlotDates(slot, next, next.movingDate);\r\n\r\n\t\t\tif(newDates.end_date.valueOf() <= newDates.start_date.valueOf()){\r\n\t\t\t\tnext.movingDate = next.movingDate == \"end_date\" ? \"start_date\" : \"end_date\";\r\n\t\t\t}\r\n\t\t\tnewDates = this.extendSlotDates(slot, next, next.movingDate);\r\n\r\n\t\t\tnext.start_date = newDates.start_date;\r\n\t\t\tnext.end_date = newDates.end_date;\r\n\t\t\treturn next;\r\n\t\t},\r\n\r\n\t\textendSlotDates: function(oldSlot, newSlot, dateDirection){\r\n\t\t\tvar res = {start_date:null, end_date:null};\r\n\r\n\t\t\tif(dateDirection == \"start_date\"){\r\n\t\t\t\tres.start_date = newSlot.start_date;\r\n\t\t\t\tres.end_date = oldSlot.end_date;\r\n\t\t\t}else{\r\n\t\t\t\tres.start_date = oldSlot.start_date;\r\n\t\t\t\tres.end_date = newSlot.start_date;\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\r\n\t\t},\r\n\r\n\t\textendMonthSlot: function(slot, direction){\r\n\t\t\tvar slot = this.extendGenericSlot({\r\n\t\t\t\t\t\"up\":\"start_date\",\r\n\t\t\t\t\t\"down\":\"end_date\",\r\n\t\t\t\t\t\"left\":\"start_date\",\r\n\t\t\t\t\t\"right\":\"end_date\"\r\n\t\t\t\t},\r\n\t\t\t\tslot,\r\n\t\t\t\tdirection,\r\n\t\t\t\t\"month\"\r\n\t\t\t);\r\n\r\n\t\t\tslot.start_date.setHours(scheduler.config.first_hour);\r\n\t\t\tslot.end_date = scheduler.date.add(slot.end_date, -1, \"day\");\r\n\t\t\tslot.end_date.setHours(scheduler.config.last_hour);\r\n\t\t\treturn slot;\r\n\t\t},\r\n\r\n\t\textendUnitsSlot: function(slot, direction){\r\n\t\t\tvar next;\r\n\r\n\t\t\tswitch (direction){\r\n\t\t\t\tcase \"down\":\r\n\t\t\t\tcase \"up\":\r\n\t\t\t\t\tnext = this.extendDaySlot(slot, direction);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tnext = slot;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tnext.section = slot.section;\r\n\t\t\treturn next;\r\n\t\t},\r\n\t\textendDaySlot: function(slot, direction){\r\n\t\t\treturn this.extendGenericSlot({\r\n\t\t\t\t\t\"up\":\"start_date\",\r\n\t\t\t\t\t\"down\":\"end_date\",\r\n\t\t\t\t\t\"left\":\"start_date\",\r\n\t\t\t\t\t\"right\":\"end_date\"\r\n\t\t\t\t},\r\n\t\t\t\tslot,\r\n\t\t\t\tdirection,\r\n\t\t\t\t\"dayColumns\"\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tscrollSlot: function(dir){\r\n\t\t\tvar state = scheduler.getState();\r\n\r\n\t\t\tvar slot = this.nextSlot(this, dir);\r\n\t\t\tif(slot.start_date.valueOf() < state.min_date.valueOf() || slot.start_date.valueOf() >= state.max_date.valueOf()){\r\n\t\t\t\tscheduler.setCurrentView(new Date(slot.start_date));\r\n\t\t\t}\r\n\r\n\t\t\tthis.moveTo(slot);\r\n\t\t},\r\n\r\n\t\tkeys: {\r\n\t\t\t\"left\": function(){\r\n\t\t\t\tthis.scrollSlot(\"left\");\r\n\t\t\t},\r\n\t\t\t\"right\": function () {\r\n\t\t\t\tthis.scrollSlot(\"right\");\r\n\t\t\t},\r\n\t\t\t\"down\": function () {\r\n\r\n\t\t\t\tvar mode =  this._getMode();\r\n\t\t\t\tif(mode == this._modes.list){\r\n\t\t\t\t\tscheduler.$keyboardNavigation.SchedulerNode.prototype.nextEventHandler();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.scrollSlot(\"down\");\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\t\"up\": function () {\r\n\t\t\t\tvar mode =  this._getMode();\r\n\t\t\t\tif(mode == this._modes.list){\r\n\t\t\t\t\tscheduler.$keyboardNavigation.SchedulerNode.prototype.prevEventHandler();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.scrollSlot(\"up\");\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\t\"shift+down\":function(){\r\n\t\t\t\tthis.moveTo(this.extendSlot(this, \"down\"));\r\n\t\t\t},\r\n\t\t\t\"shift+up\":function(){\r\n\t\t\t\tthis.moveTo(this.extendSlot(this, \"up\"));\r\n\t\t\t},\r\n\t\t\t\"shift+right\":function(){\r\n\t\t\t\tthis.moveTo(this.extendSlot(this, \"right\"));\r\n\t\t\t},\r\n\t\t\t\"shift+left\":function(){\r\n\t\t\t\tthis.moveTo(this.extendSlot(this, \"left\"));\r\n\t\t\t},\r\n\r\n\r\n\t\t\t\"enter\": function(){\r\n\t\t\t\tvar obj = {start_date: new Date(this.start_date), end_date: new Date(this.end_date)};\r\n\r\n\t\t\t\tvar mode = scheduler.getState().mode;\r\n\t\t\t\tif(scheduler.matrix && scheduler.matrix[mode]){\r\n\r\n\t\t\t\t\tvar timeline = scheduler.matrix[scheduler.getState().mode];\r\n\t\t\t\t\tobj[timeline.y_property] = this.section;\r\n\t\t\t\t}else if(scheduler._props && scheduler._props[mode]){\r\n\t\t\t\t\tvar unit = scheduler._props[mode];\r\n\t\t\t\t\tobj[unit.map_to] = this.section;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscheduler.addEventNow(obj);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n);\r\n\r\nscheduler.$keyboardNavigation.TimeSlot.prototype.bindAll(scheduler.$keyboardNavigation.TimeSlot.prototype.keys);\r\n\r\n}","export default function(scheduler){\r\n\r\nscheduler.$keyboardNavigation.MinicalButton = function(div, index){\r\n\tthis.container = div;\r\n\tthis.index = index || 0;\r\n};\r\n\r\nscheduler.$keyboardNavigation.MinicalButton.prototype = scheduler._compose(\r\n\tscheduler.$keyboardNavigation.KeyNavNode,\r\n\t{\r\n\r\n\t\tisValid: function(){\r\n\t\t\tvar container = this.container;\r\n\t\t\treturn !!container.offsetWidth;// valid if container is visible\r\n\t\t},\r\n\r\n\t\tfallback: function(){\r\n\t\t\tvar defaultSlot = new scheduler.$keyboardNavigation.TimeSlot();\r\n\t\t\tif(defaultSlot.isValid()){\r\n\t\t\t\treturn defaultSlot;\r\n\t\t\t}else{\r\n\t\t\t\treturn new scheduler.$keyboardNavigation.DataArea();\r\n\t\t\t}\r\n\t\t},\r\n\t\tfocus: function(){\r\n\t\t\tscheduler.$keyboardNavigation.dispatcher.globalNode.disable();\r\n\t\t\tthis.container.removeAttribute(\"tabindex\");\r\n\t\t\tscheduler.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this);\r\n\r\n\t\t},\r\n\t\tblur: function(){\r\n\t\t\tthis.container.setAttribute(\"tabindex\", \"0\");\r\n\t\t\tscheduler.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this);\r\n\t\t},\r\n\t\tgetNode: function(){\r\n\t\t\tif(!this.index){\r\n\t\t\t\treturn this.container.querySelector(\".dhx_cal_prev_button\");\r\n\t\t\t}else{\r\n\t\t\t\treturn this.container.querySelector(\".dhx_cal_next_button\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tkeys: {\r\n\t\t\t\"right\": function(e){\r\n\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.MinicalButton(this.container, this.index ? 0 : 1));\r\n\t\t\t},\r\n\t\t\t\"left\": function(e){\r\n\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.MinicalButton(this.container, this.index ? 0 : 1));\r\n\t\t\t},\r\n\t\t\t\"down\": function(){\r\n\t\t\t\tvar next = new scheduler.$keyboardNavigation.MinicalCell(this.container, 0, 0);\r\n\t\t\t\tif(next && !next.isValid()){\r\n\t\t\t\t\tnext = next.fallback();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.moveTo(next);\r\n\t\t\t},\r\n\t\t\t\"enter\": function(e){\r\n\t\t\t\tthis.getNode().click();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n);\r\n\r\nscheduler.$keyboardNavigation.MinicalButton.prototype.bindAll(scheduler.$keyboardNavigation.MinicalButton.prototype.keys);\r\n\r\n}","export default function(scheduler){\r\n\r\nscheduler.$keyboardNavigation.MinicalCell = function(div, row, col){\r\n\tthis.container = div;\r\n\tthis.row = row || 0;\r\n\tthis.col = col || 0;\r\n};\r\n\r\nscheduler.$keyboardNavigation.MinicalCell.prototype = scheduler._compose(\r\n\tscheduler.$keyboardNavigation.KeyNavNode,\r\n\t{\r\n\r\n\t\tisValid: function(){\r\n\t\t\tvar grid = this._getGrid();\r\n\t\t\treturn !!(grid[this.row] && grid[this.row][this.col]);\r\n\t\t},\r\n\t\tfallback: function(){\r\n\t\t\tvar row = this.row;\r\n\t\t\tvar col = this.col;\r\n\t\t\tvar grid = this._getGrid();\r\n\t\t\tif(!grid[row]){\r\n\t\t\t\trow = 0;\r\n\t\t\t}\r\n\t\t\tvar dir = true;\r\n\t\t\tif(row > grid.length / 2){\r\n\t\t\t\tdir = false;\r\n\t\t\t}\r\n\r\n\t\t\tif(!grid[row]){\r\n\t\t\t\tvar defaultSlot = new scheduler.$keyboardNavigation.TimeSlot();\r\n\t\t\t\tif(defaultSlot.isValid()){\r\n\t\t\t\t\treturn defaultSlot;\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn new scheduler.$keyboardNavigation.DataArea();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(dir){\r\n\t\t\t\tfor(var c = col; grid[row] && c < grid[row].length; c++){\r\n\t\t\t\t\tif(!grid[row][c] && c == grid[row].length - 1){\r\n\t\t\t\t\t\trow++;\r\n\t\t\t\t\t\tcol = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(grid[row][c]){\r\n\t\t\t\t\t\treturn new scheduler.$keyboardNavigation.MinicalCell(this.container, row, c);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tfor(var c = col; grid[row] && c < grid[row].length; c--){\r\n\t\t\t\t\tif(!grid[row][c] && !c){\r\n\t\t\t\t\t\trow--;\r\n\t\t\t\t\t\tcol = grid[row].length - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(grid[row][c]){\r\n\t\t\t\t\t\treturn new scheduler.$keyboardNavigation.MinicalCell(this.container, row, c);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn new scheduler.$keyboardNavigation.MinicalButton(this.container, 0);\r\n\t\t},\r\n\t\tfocus: function(){\r\n\t\t\tscheduler.$keyboardNavigation.dispatcher.globalNode.disable();\r\n\r\n\t\t\tthis.container.removeAttribute(\"tabindex\");\r\n\t\t\tscheduler.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this);\r\n\t\t},\r\n\t\tblur: function(){\r\n\t\t\tthis.container.setAttribute(\"tabindex\", \"0\");\r\n\t\t\tscheduler.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this);\r\n\t\t},\r\n\t\t_getNode: function(row, col){\r\n\t\t\treturn this.container.querySelector(\".dhx_year_body tr:nth-child(\"+(row + 1) + \") td:nth-child(\"+(col + 1)+\")\");\r\n\t\t},\r\n\t\tgetNode: function(){\r\n\t\t\treturn this._getNode(this.row, this.col);\r\n\t\t},\r\n\r\n\t\t_getGrid: function(){\r\n\t\t\tvar rows = this.container.querySelectorAll(\".dhx_year_body tr\");\r\n\t\t\tvar grid = [];\r\n\t\t\tfor(var i = 0; i < rows.length; i++){\r\n\t\t\t\tgrid[i] = [];\r\n\t\t\t\tvar row = rows[i];\r\n\t\t\t\tvar cells = row.querySelectorAll(\"td\");\r\n\t\t\t\tfor(var c = 0; c < cells.length; c++){\r\n\t\t\t\t\tvar cell = cells[c];\r\n\t\t\t\t\tvar enabled = true;\r\n\t\t\t\t\tvar css = scheduler._getClassName(cell);\r\n\t\t\t\t\tif(css.indexOf(\"dhx_after\") > -1 || css.indexOf(\"dhx_before\") > -1 || css.indexOf(\"dhx_scale_ignore\") > -1){\r\n\t\t\t\t\t\tenabled = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid[i][c] = enabled;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn grid;\r\n\t\t},\r\n\r\n\r\n\t\tkeys: {\r\n\t\t\t\"right\": function(e){\r\n\t\t\t\tvar grid = this._getGrid();\r\n\t\t\t\tvar newRow = this.row;\r\n\t\t\t\tvar newCol = this.col + 1;\r\n\t\t\t\tif(!grid[newRow] || !grid[newRow][newCol]){\r\n\t\t\t\t\tif(grid[newRow + 1]){\r\n\t\t\t\t\t\tnewRow = newRow + 1;\r\n\t\t\t\t\t\tnewCol = 0;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tnewCol = this.col;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar next = new scheduler.$keyboardNavigation.MinicalCell(this.container, newRow, newCol);\r\n\t\t\t\tif(!next.isValid()){\r\n\t\t\t\t\tnext = next.fallback();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.moveTo(next);\r\n\t\t\t},\r\n\t\t\t\"left\": function(e){\r\n\t\t\t\tvar grid = this._getGrid();\r\n\t\t\t\tvar newRow = this.row;\r\n\t\t\t\tvar newCol = this.col - 1;\r\n\t\t\t\tif(!grid[newRow] || !grid[newRow][newCol]){\r\n\t\t\t\t\tif(grid[newRow - 1]){\r\n\t\t\t\t\t\tnewRow = newRow - 1;\r\n\t\t\t\t\t\tnewCol = grid[newRow].length - 1;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tnewCol = this.col;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar next = new scheduler.$keyboardNavigation.MinicalCell(this.container, newRow, newCol);\r\n\t\t\t\tif(!next.isValid()){\r\n\t\t\t\t\tnext = next.fallback();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.moveTo(next);\r\n\t\t\t},\r\n\t\t\t\"down\": function(){\r\n\t\t\t\tvar grid = this._getGrid();\r\n\t\t\t\tvar newRow = this.row + 1;\r\n\t\t\t\tvar newCol = this.col;\r\n\r\n\t\t\t\tif(!grid[newRow] || !grid[newRow][newCol]){\r\n\t\t\t\t\tnewRow = this.row;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar next = new scheduler.$keyboardNavigation.MinicalCell(this.container, newRow, newCol);\r\n\t\t\t\tif(!next.isValid()){\r\n\t\t\t\t\tnext = next.fallback();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.moveTo(next);\r\n\t\t\t},\r\n\t\t\t\"up\": function(){\r\n\t\t\t\tvar grid = this._getGrid();\r\n\t\t\t\tvar newRow = this.row - 1;\r\n\t\t\t\tvar newCol = this.col;\r\n\r\n\t\t\t\tif(!grid[newRow] || !grid[newRow][newCol]){\r\n\t\t\t\t\tvar index = 0;\r\n\t\t\t\t\tif(this.col > grid[this.row].length / 2){\r\n\t\t\t\t\t\tindex = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.MinicalButton(this.container, index));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar next = new scheduler.$keyboardNavigation.MinicalCell(this.container, newRow, newCol);\r\n\t\t\t\t\tif(!next.isValid()){\r\n\t\t\t\t\t\tnext = next.fallback();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.moveTo(next);\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\t\"enter\": function(e){\r\n\t\t\t\tthis.getNode().querySelector(\".dhx_month_head\").click();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n);\r\n\r\nscheduler.$keyboardNavigation.MinicalCell.prototype.bindAll(scheduler.$keyboardNavigation.MinicalCell.prototype.keys);\r\n\r\n}","export default function(scheduler){\r\n\r\nscheduler.$keyboardNavigation.DataArea = function(index){\r\n\tthis.index = index || 0;\r\n};\r\n\r\nscheduler.$keyboardNavigation.DataArea.prototype = scheduler._compose(\r\n\tscheduler.$keyboardNavigation.KeyNavNode,\r\n\t{\r\n\t\tgetNode: function(index){\r\n\t\t\treturn scheduler.$container.querySelector(\".dhx_cal_data\");\r\n\t\t},\r\n\r\n\t\t_handlers:null,\r\n\r\n\t\tisValid: function(){\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tfallback:function(){\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\tkeys: {\r\n\t\t\t\"up,down,right,left\":function(){\r\n\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.TimeSlot());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n);\r\n\r\nscheduler.$keyboardNavigation.DataArea.prototype.bindAll(scheduler.$keyboardNavigation.DataArea.prototype.keys);\r\n\r\n}","export default function(scheduler){\r\n\r\nscheduler.$keyboardNavigation.dispatcher = {\r\n\tisActive: false,\r\n\tactiveNode: null,\r\n\tglobalNode: new scheduler.$keyboardNavigation.SchedulerNode(),\r\n\r\n\tkeepScrollPosition: function (callback) {\r\n\t\tvar top, left;\r\n\r\n\t\tvar scrollable = scheduler.$container.querySelector(\".dhx_timeline_scrollable_data\");\r\n\t\tif(!scrollable){\r\n\t\t\tscrollable = scheduler.$container.querySelector(\".dhx_cal_data\");\r\n\t\t}\r\n\r\n\t\tif(scrollable){\r\n\t\t\ttop = scrollable.scrollTop;\r\n\t\t\tleft = scrollable.scrollLeft;\r\n\t\t}\r\n\r\n\t\tcallback();\r\n\r\n\t\tif(scrollable){\r\n\t\t\tscrollable.scrollTop = top;\r\n\t\t\tscrollable.scrollLeft = left;\r\n\t\t}\r\n\t},\r\n\tenable: function(){\r\n\t\tif(!scheduler.$container){\r\n\t\t\t// do nothing if not initialized\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.isActive = true;\r\n\t\tvar self = this;\r\n\t\tthis.keepScrollPosition(function () {\r\n\t\t\tself.globalNode.enable();\r\n\t\t\tself.setActiveNode(self.getActiveNode());\r\n\t\t});\r\n\t},\r\n\r\n\tdisable: function(){\r\n\t\tthis.isActive = false;\r\n\t\tthis.globalNode.disable();\r\n\t},\r\n\r\n\tisEnabled: function(){\r\n\t\treturn !!this.isActive;\r\n\t},\r\n\r\n\tgetDefaultNode: function(){\r\n\t\treturn this.globalNode.getDefaultNode();\r\n\t},\r\n\r\n\tsetDefaultNode: function() {\r\n\t\tthis.setActiveNode(this.getDefaultNode());\r\n\t},\r\n\r\n\tgetActiveNode: function(){\r\n\t\tvar node = this.activeNode;\r\n\t\tif(node && !node.isValid()){\r\n\t\t\tnode = node.fallback();\r\n\t\t}\r\n\t\treturn node;\r\n\t},\r\n\r\n\tfocusGlobalNode: function(){\r\n\t\tthis.blurNode(this.globalNode);\r\n\t\tthis.focusNode(this.globalNode);\r\n\t},\r\n\r\n\tsetActiveNode: function(el){\r\n\t\tif(!el || !el.isValid())\r\n\t\t\treturn;\r\n\r\n\t\tif(this.activeNode){\r\n\t\t\tif(this.activeNode.compareTo(el)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(this.isEnabled()){\r\n\t\t\tthis.blurNode(this.activeNode);\r\n\t\t\tthis.activeNode = el;\r\n\t\t\tthis.focusNode(this.activeNode);\r\n\t\t}\r\n\t},\r\n\r\n\tfocusNode: function(el){\r\n\t\tif(el && el.focus){\r\n\t\t\tel.focus();\r\n\t\t\tif(el.getNode && document.activeElement != el.getNode()){\r\n\t\t\t\tthis.setActiveNode(new scheduler.$keyboardNavigation.DataArea());\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tblurNode: function(el){\r\n\t\tif(el && el.blur){\r\n\t\t\tel.blur();\r\n\t\t}\r\n\t},\r\n\r\n\tgetInlineEditor: function(id){\r\n\t\tvar editor = scheduler.$container.querySelector(\".dhx_cal_editor[\"+scheduler.config.event_attribute+\"='\"+id+\"'] textarea\");\r\n\t\tif(editor && editor.offsetWidth){\r\n\t\t\t// if exists and visible\r\n\t\t\treturn editor;\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\tkeyDownHandler: function (e) {\r\n\r\n\t\tif(e.defaultPrevented){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar activeElement = this.getActiveNode();\r\n\r\n\t\tif(scheduler.$keyboardNavigation.isModal() &&\r\n\t\t\t!(activeElement && activeElement.container && scheduler.utils.dom.locateCss({target:activeElement.container}, \"dhx_minical_popup\", false)))\r\n\t\t\treturn;\r\n\r\n\t\tif(scheduler.getState().editor_id && this.getInlineEditor(scheduler.getState().editor_id))\r\n\t\t\treturn;\r\n\r\n\t\tif (!this.isEnabled())\r\n\t\t\treturn;\r\n\r\n\t\te = e || window.event;\r\n\r\n\t\tvar schedulerNode = this.globalNode;\r\n\r\n\t\tvar command = scheduler.$keyboardNavigation.shortcuts.getCommandFromEvent(e);\r\n\r\n\t\tif(!activeElement){\r\n\t\t\tthis.setDefaultNode();\r\n\t\t}else if(activeElement.findHandler(command)){\r\n\t\t\tactiveElement.doAction(command, e);\r\n\t\t}else if(schedulerNode.findHandler(command)){\r\n\t\t\tschedulerNode.doAction(command, e);\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_timeout: null,\r\n\tdelay: function(callback, delay){\r\n\r\n\t\tclearTimeout(this._timeout);\r\n\t\tthis._timeout = setTimeout(callback, delay || 1);\r\n\r\n\t}\r\n};\r\n\r\n}","export default function(scheduler){\r\n\r\nscheduler.$keyboardNavigation._minicalendars = [];\r\n\r\nscheduler.$keyboardNavigation.isMinical = function(node){\r\n\tvar minicalendars = scheduler.$keyboardNavigation._minicalendars;\r\n\tfor(var i = 0; i < minicalendars.length; i++){\r\n\t\tif(this.isChildOf(node, minicalendars[i]))\r\n\t\t\treturn true;\r\n\t}\r\n\treturn false;\r\n};\r\n\r\nscheduler.$keyboardNavigation.isChildOf = function(child, parent){\r\n\twhile(child && child !== parent){\r\n\t\tchild = child.parentNode;\r\n\t}\r\n\r\n\treturn !!(child === parent);\r\n};\r\n\r\nscheduler.$keyboardNavigation.patchMinicalendar = function(){\r\n\tvar dispatcher = scheduler.$keyboardNavigation.dispatcher;\r\n\r\n\tfunction focusMinical(e){\r\n\t\tvar target = e.target;\r\n\r\n\t\tdispatcher.enable();\r\n\t\tdispatcher.setActiveNode(new scheduler.$keyboardNavigation.MinicalButton(target, 0));\r\n\t}\r\n\r\n\tfunction minicalClick(e){\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tvar prev = scheduler.utils.dom.locateCss(e, \"dhx_cal_prev_button\", false);\r\n\t\tvar next = scheduler.utils.dom.locateCss(e, \"dhx_cal_next_button\", false);\r\n\t\tvar cell = scheduler.utils.dom.locateCss(e, \"dhx_year_body\", false);\r\n\r\n\t\tvar rowIndex = 0;\r\n\t\tvar cellIndex = 0;\r\n\t\tif(cell){\r\n\t\t\tvar tr;\r\n\t\t\tvar td;\r\n\t\t\tvar current = target;\r\n\t\t\twhile(current && current.tagName.toLowerCase() != \"td\"){\r\n\t\t\t\tcurrent = current.parentNode;\r\n\t\t\t}\r\n\t\t\tif(current){\r\n\t\t\t\ttd = current;\r\n\t\t\t\ttr = td.parentNode;\r\n\t\t\t}\r\n\r\n\t\t\tif(tr && td){\r\n\t\t\t\tvar rows = tr.parentNode.querySelectorAll(\"tr\");\r\n\t\t\t\tfor(var i = 0; i < rows.length; i++){\r\n\t\t\t\t\tif(rows[i] == tr){\r\n\t\t\t\t\t\trowIndex = i;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar cells = tr.querySelectorAll(\"td\");\r\n\t\t\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\t\t\tif(cells[i] == td){\r\n\t\t\t\t\t\tcellIndex = i;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar root = e.currentTarget;\r\n\t\tdispatcher.delay(function(){\r\n\t\t\tif(prev || next || cell){\r\n\r\n\t\t\t\tvar element;\r\n\t\t\t\tif(prev){\r\n\t\t\t\t\telement = new scheduler.$keyboardNavigation.MinicalButton(root, 0);\r\n\t\t\t\t\tdispatcher.setActiveNode(new scheduler.$keyboardNavigation.MinicalButton(root, 0));\r\n\t\t\t\t}else if(next){\r\n\t\t\t\t\telement = new scheduler.$keyboardNavigation.MinicalButton(root, 1);\r\n\t\t\t\t}else if(cell){\r\n\t\t\t\t\telement = new scheduler.$keyboardNavigation.MinicalCell(root, rowIndex, cellIndex);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(element){\r\n\r\n\t\t\t\t\tdispatcher.enable();\r\n\t\t\t\t\tif(element.isValid()){\r\n\t\t\t\t\t\tdispatcher.activeNode = null;\r\n\t\t\t\t\t\tdispatcher.setActiveNode(element);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t}\r\n\r\n\tif(scheduler.renderCalendar){\r\n\t\tvar renderMinical = scheduler.renderCalendar;\r\n\t\tscheduler.renderCalendar = function(){\r\n\t\t\tvar cal = renderMinical.apply(this, arguments);\r\n\t\t\tvar minicalendars = scheduler.$keyboardNavigation._minicalendars;\r\n\r\n\t\t\tscheduler.eventRemove(cal, \"click\", minicalClick);\r\n\t\t\tscheduler.event(cal, \"click\", minicalClick);\r\n\r\n\t\t\tscheduler.eventRemove(cal, \"focus\", focusMinical);\r\n\t\t\tscheduler.event(cal, \"focus\", focusMinical);\r\n\r\n\t\t\tvar added = false;\r\n\t\t\tfor(var i = 0; i < minicalendars.length; i++){\r\n\t\t\t\tif(minicalendars[i] == cal){\r\n\t\t\t\t\tadded = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!added)\r\n\t\t\t\tminicalendars.push(cal);\r\n\r\n\t\t\tif(dispatcher.isEnabled()){\r\n\t\t\t\tvar node = dispatcher.getActiveNode();\r\n\t\t\t\tif(node && node.container == cal){\r\n\t\t\t\t\tdispatcher.focusNode(node);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcal.setAttribute(\"tabindex\", \"0\");\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tcal.setAttribute(\"tabindex\", \"0\");\r\n\t\t\t}\r\n\t\t\treturn cal;\r\n\t\t};\r\n\t}\r\n\r\n\tif(scheduler.destroyCalendar){\r\n\t\tvar destroyMinical = scheduler.destroyCalendar;\r\n\t\tscheduler.destroyCalendar = function(cal, force){\r\n\t\t\tcal = cal || (scheduler._def_count ? scheduler._def_count.firstChild : null);\r\n\t\t\tvar res = destroyMinical.apply(this, arguments);\r\n\r\n\t\t\tif(!cal || !cal.parentNode){\r\n\t\t\t\tvar minicalendars = scheduler.$keyboardNavigation._minicalendars;\r\n\t\t\t\tfor(var i = 0; i < minicalendars.length; i++){\r\n\t\t\t\t\tif(minicalendars[i] == cal){\r\n\t\t\t\t\t\tscheduler.eventRemove(minicalendars[i], \"focus\", focusMinical);\r\n\t\t\t\t\t\tminicalendars.splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn res;\r\n\t\t};\r\n\t}\r\n};\r\n\r\n}","export default function(scheduler){\r\n\r\nscheduler.attachEvent(\"onTemplatesReady\",function(){\r\n\r\n\tthis.layers.sort(function(a, b){\r\n\t\treturn a.zIndex - b.zIndex;\r\n\t});\r\n\r\n\tscheduler._dp_init=function(dp){\r\n\t\tdp._methods=[\"_set_event_text_style\",\"\",\"changeEventId\",\"deleteEvent\"];\r\n\r\n\t\tthis.attachEvent(\"onEventAdded\",function(id){\r\n\t\t\tif (!this._loading && this.validId(id) && this.getEvent(id) && this.getEvent(id).layer == dp.layer)\r\n\t\t\t\tdp.setUpdated(id,true,\"inserted\");\r\n\t\t});\r\n\t\tthis.attachEvent(\"onBeforeEventDelete\",function(id){\r\n\t\t\tif(this.getEvent(id) && this.getEvent(id).layer == dp.layer) {\r\n\t\t\t\tif (!this.validId(id)) return;\r\n\t\t\t\tvar z=dp.getState(id);\r\n\r\n\t\t\t\tif (z==\"inserted\" || this._new_event) {  dp.setUpdated(id,false);\t\treturn true; }\r\n\t\t\t\tif (z==\"deleted\")  return false;\r\n\t\t\t\tif (z==\"true_deleted\")  return true;\r\n\r\n\t\t\t\tdp.setUpdated(id,true,\"deleted\");\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\telse return true;\r\n\t\t});\r\n\t\tthis.attachEvent(\"onEventChanged\",function(id){\r\n\t\t\tif (!this._loading && this.validId(id) && this.getEvent(id) && this.getEvent(id).layer == dp.layer)\r\n\t\t\t\tdp.setUpdated(id,true,\"updated\");\r\n\t\t});\r\n\r\n\t\tdp._getRowData=function(id,pref){\r\n\t\t\tvar ev=this.obj.getEvent(id);\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor (var a in ev){\r\n\t\t\t\tif (a.indexOf(\"_\")===0) continue;\r\n\t\t\t\tif (ev[a] && ev[a].getUTCFullYear) //not very good, but will work\r\n\t\t\t\t\tdata[a] = this.obj._helpers.formatDate(ev[a]);\r\n\t\t\t\telse\r\n\t\t\t\t\tdata[a] = ev[a];\r\n\t\t\t}\r\n\t\t\treturn data;\r\n\t\t};\r\n\t\tdp._clearUpdateFlag=function(){};\r\n\r\n\t\tdp.attachEvent(\"insertCallback\", scheduler._update_callback);\r\n\t\tdp.attachEvent(\"updateCallback\", scheduler._update_callback);\r\n\t\tdp.attachEvent(\"deleteCallback\", function(upd, id) {\r\n\t\t\tthis.obj.setUserData(id, this.action_param, \"true_deleted\");\r\n\t\t\tthis.obj.deleteEvent(id);\r\n\t\t});\r\n\t};\r\n\r\n\t(function() {\r\n        var _cloneObj = function(obj){\r\n            if(obj === null || typeof(obj) != 'object')\r\n                return obj;\r\n            var temp = new obj.constructor();\r\n            for(var key in obj)\r\n                temp[key] = _cloneObj(obj[key]);\r\n            return temp;\r\n        };\r\n\r\n\t\tscheduler._dataprocessors = [];\r\n\t\tscheduler._layers_zindex = {};\r\n\t\tfor(var i=0; i<scheduler.layers.length; i++) {\r\n\t\t\tscheduler.config['lightbox_'+scheduler.layers[i].name] = { };\r\n            scheduler.config['lightbox_'+scheduler.layers[i].name].sections = _cloneObj(scheduler.config.lightbox.sections);\r\n\t\t\tscheduler._layers_zindex[scheduler.layers[i].name] = scheduler.config.initial_layer_zindex||5 + i*3;\r\n\t\t\tif(scheduler.layers[i].url) {\r\n\t\t\t\tvar dp = scheduler.createDataProcessor({\r\n\t\t\t\t\turl: scheduler.layers[i].url\r\n\t\t\t\t});\r\n\t\t\t\tdp.layer = scheduler.layers[i].name;\r\n\t\t\t\tscheduler._dataprocessors.push(dp);\r\n\t\t\t\tscheduler._dataprocessors[i].init(scheduler);\r\n\t\t\t}\r\n\t\t\tif(scheduler.layers[i].isDefault)\r\n\t\t\t\tscheduler.defaultLayer = scheduler.layers[i].name;\r\n\t\t}\r\n\t})();\r\n\r\n\r\n\tscheduler.showLayer = function(tlayer) {\r\n\t\tthis.toggleLayer(tlayer, true);\r\n\t};\r\n\r\n\tscheduler.hideLayer = function(tlayer) {\r\n\t\tthis.toggleLayer(tlayer, false);\r\n\t};\r\n\r\n\tscheduler.toggleLayer = function(tlayer, visible) { // visible is optional\r\n\t\tvar layer = this.getLayer(tlayer);\r\n\r\n\t\tif(typeof visible != 'undefined')\r\n\t\t\tlayer.visible = !!visible;\r\n\t\telse\r\n\t\t\tlayer.visible = !layer.visible;\r\n\r\n\t\tthis.setCurrentView(this._date, this._mode);\r\n\t};\r\n\r\n\tscheduler.getLayer = function(tlayer) { // either string with layer name or event with layer property\r\n\t\tvar layer,\r\n\t\t\tlayer_name;\r\n\t\tif(typeof tlayer == 'string')\r\n\t\t\tlayer_name = tlayer;\r\n\t\tif(typeof tlayer == 'object')\r\n\t\t\tlayer_name = tlayer.layer;\r\n\t\tfor (var i=0; i<scheduler.layers.length; i++) {\r\n\t\t\tif(scheduler.layers[i].name == layer_name)\r\n\t\t\t\tlayer = scheduler.layers[i];\r\n\t\t}\r\n\t\treturn layer;\r\n\t};\r\n\r\n\tscheduler.attachEvent(\"onBeforeLightbox\", function (event_id){\r\n\t\tvar ev = this.getEvent(event_id);\r\n        this.config.lightbox.sections = this.config['lightbox_'+ev.layer].sections;\r\n        scheduler.resetLightbox();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tscheduler.attachEvent(\"onClick\", function (event_id, native_event_object){\r\n\t\tvar ev = scheduler.getEvent(event_id);\r\n        return !scheduler.getLayer(ev.layer).noMenu;\r\n\t});\r\n\r\n\tscheduler.attachEvent('onEventCollision', function(ev, evs) {\r\n\t\tvar layer = this.getLayer(ev);\r\n\t\tif(!layer.checkCollision)\r\n\t\t\treturn false;\r\n\t\tvar count = 0;\r\n\t\tfor(var i = 0; i<evs.length; i++) {\r\n\t\t\tif(evs[i].layer == layer.name && evs[i].id != ev.id)\r\n\t\t\t\tcount++;\r\n\t\t}\r\n\t\treturn (count >= scheduler.config.collision_limit);\r\n\t});\r\n\r\n\tscheduler.addEvent=function(start_date,end_date,text,id,extra_data){\r\n\t\tvar ev=start_date;\r\n\t\tif (arguments.length!=1){\r\n\t\t\tev=extra_data||{};\r\n\t\t\tev.start_date=start_date;\r\n\t\t\tev.end_date=end_date;\r\n\t\t\tev.text=text;\r\n\t\t\tev.id=id;\r\n\t\t\tev.layer = this.defaultLayer;\r\n\t\t}\r\n\t\tev.id = ev.id||scheduler.uid();\r\n\t\tev.text = ev.text||\"\";\r\n\r\n\r\n\t\tif (typeof ev.start_date == \"string\")  ev.start_date=this.templates.api_date(ev.start_date);\r\n\t\tif (typeof ev.end_date == \"string\")  ev.end_date=this.templates.api_date(ev.end_date);\r\n\t\tev._timed=this.isOneDayEvent(ev);\r\n\r\n\t\tvar is_new=!this._events[ev.id];\r\n\t\tthis._events[ev.id]=ev;\r\n\t\tthis.event_updated(ev);\r\n\t\tif (!this._loading)\r\n\t\t\tthis.callEvent(is_new?\"onEventAdded\":\"onEventChanged\",[ev.id,ev]);\r\n\t};\r\n\r\n\tthis._evs_layer = {};\r\n\tfor (var i = 0; i < this.layers.length; i++) { // array in object for each layer\r\n\t\tthis._evs_layer[this.layers[i].name] = [];\r\n\t}\r\n\r\n\tscheduler.addEventNow=function(start,end,e){\r\n\t\tvar base = {};\r\n\t\tif (typeof start == \"object\"){\r\n\t\t\tbase = start;\r\n\t\t\tstart = null;\r\n\t\t}\r\n\r\n\t\tvar d = (this.config.event_duration||this.config.time_step)*60000;\r\n\t\tif (!start) start = Math.round((scheduler._currentDate()).valueOf()/d)*d;\r\n\t\tvar start_date = new Date(start);\r\n\t\tif (!end){\r\n\t\t\tvar start_hour = this.config.first_hour;\r\n\t\t\tif (start_hour > start_date.getHours()){\r\n\t\t\t\tstart_date.setHours(start_hour);\r\n\t\t\t\tstart = start_date.valueOf();\r\n\t\t\t}\r\n\t\t\tend = start+d;\r\n\t\t}\r\n\r\n\r\n\t\tbase.start_date = base.start_date||start_date;\r\n\t\tbase.end_date =  base.end_date||new Date(end);\r\n\t\tbase.text = base.text||this.locale.labels.new_event;\r\n\t\tbase.id = this._drag_id = this.uid();\r\n\t\tbase.layer = this.defaultLayer;\r\n\t\tthis._drag_mode=\"new-size\";\r\n\r\n\t\tthis._loading=true;\r\n\t\tthis.addEvent(base);\r\n\t\tthis.callEvent(\"onEventCreated\",[this._drag_id,e]);\r\n\t\tthis._loading=false;\r\n\r\n\t\tthis._drag_event={}; //dummy , to trigger correct event updating logic\r\n\t\tthis._on_mouse_up(e);\r\n\t};\r\n\r\n\tscheduler._t_render_view_data = function(events) { // helper\r\n\t\tif (this.config.multi_day && !this._table_view) {\r\n\t\t\tvar tvs = [];\r\n\t\t\tvar tvd = [];\r\n\t\t\tfor (var k = 0; k < events.length; k++) {\r\n\t\t\t\tif (events[k]._timed)\r\n\t\t\t\t\ttvs.push(events[k]);\r\n\t\t\t\telse\r\n\t\t\t\t\ttvd.push(events[k]);\r\n\t\t\t}\r\n\t\t\tthis._table_view = true;\r\n\t\t\tthis.render_data(tvd);\r\n\t\t\tthis._table_view = false;\r\n\t\t\tthis.render_data(tvs);\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis.render_data(events);\r\n\t};\r\n\r\n\tscheduler.render_view_data = function(){\r\n\t\tif (this._not_render) {\r\n\t\t\tthis._render_wait = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._render_wait = false;\r\n\r\n\t\tthis.clear_view();\r\n\r\n\t\tthis._evs_layer = {};\r\n\t\tfor (var i = 0; i < this.layers.length; i++) { // array in object for each layer\r\n\t\t\tthis._evs_layer[this.layers[i].name] = [];\r\n\t\t}\r\n\r\n\t\tvar evs = this.get_visible_events();\r\n\t\tfor (var i = 0; i < evs.length; i++) { // filling layer arrays with events\r\n\t\t\tif(this._evs_layer[evs[i].layer])\r\n\t\t\t\tthis._evs_layer[evs[i].layer].push(evs[i]);\r\n\t\t}\r\n\r\n\t\tif(this._mode == 'month') { // old logic is used\r\n\t\t\tvar tevs = [];\r\n\t\t\tfor (var i = 0; i < this.layers.length; i++) {\r\n\t\t\t\tif (this.layers[i].visible)\r\n\t\t\t\t\ttevs = tevs.concat(this._evs_layer[this.layers[i].name]);\r\n\t\t\t}\r\n\t\t\tthis._t_render_view_data(tevs);\r\n\t\t}\r\n\t\telse { // week, day; should use new logic\r\n\t\t\tfor (var i = 0; i < this.layers.length; i++) {\r\n\t\t\t\tif (this.layers[i].visible) {\r\n\t\t\t\t\tvar evs_layer = this._evs_layer[this.layers[i].name];\r\n\t\t\t\t\tthis._t_render_view_data(evs_layer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tscheduler._render_v_bar=function(ev,x,y,w,h,style,contentA,contentB,bottom){\r\n\t\tvar id = ev.id;\r\n\r\n\t\tif(contentA.indexOf('<div class=') == -1)\r\n\t\t\tcontentA = (scheduler.templates['event_header_'+ev.layer])?scheduler.templates['event_header_'+ev.layer](ev.start_date,ev.end_date,ev):contentA;\r\n\t\tif(contentB.indexOf('<div class=') == -1)\r\n\t\tcontentB = (scheduler.templates['event_text_'+ev.layer])?scheduler.templates['event_text_'+ev.layer](ev.start_date,ev.end_date,ev):contentB;\r\n\r\n\t\tvar d=document.createElement(\"div\");\r\n\t\tvar cs = \"dhx_cal_event\";\r\n\t\tvar cse = (scheduler.templates['event_class_'+ev.layer])?scheduler.templates['event_class_'+ev.layer](ev.start_date,ev.end_date,ev):scheduler.templates.event_class(ev.start_date,ev.end_date,ev);\r\n\t\tif (cse) cs=cs+\" \"+cse;\r\n\r\n\t\tvar borderBox = scheduler._border_box_events();\r\n\r\n\t\tvar borderBoxWidth = w - 2;\r\n\t\tvar boxWidth = borderBox ? borderBoxWidth : (w-4),\r\n\t\theaderWidth = borderBox ? borderBoxWidth : (w-6),\r\n\t\tbodyWidth = borderBox ? borderBoxWidth : (w-14),\r\n\t\tfooterWidth = borderBox ? (borderBoxWidth - 2) : (w-8);\r\n\r\n\t\tvar bodyHeight = borderBox ? (h - this.xy.event_header_height) : (h-30 + 1);\r\n\r\n\t\tvar html='<div event_id=\"'+id+'\" '+scheduler.config.event_attribute+'=\"'+id+'\" class=\"'+cs+'\" style=\"position:absolute; top:'+y+'px; left:'+x+'px; width:'+boxWidth+'px; height:'+h+'px;'+(style||\"\")+'\">';\r\n\t\thtml+='<div class=\"dhx_header\" style=\" width:'+headerWidth+'px;\" >&nbsp;</div>';\r\n\t\thtml+='<div class=\"dhx_title\">'+contentA+'</div>';\r\n\t\thtml+='<div class=\"dhx_body\" style=\" width:'+bodyWidth+'px; height:'+bodyHeight+'px;\">'+contentB+'</div>';\r\n\t\thtml+='<div class=\"dhx_footer\" style=\" width:'+footerWidth+'px;'+(bottom?' margin-top:-1px;':'')+'\" ></div></div>';\r\n\r\n\t\td.innerHTML=html;\r\n\t\td.style.zIndex = 100;\r\n\t\treturn d.firstChild;\r\n\t};\r\n\r\n\tscheduler.render_event_bar=function(ev){\r\n\t\tvar parent=this._els[\"dhx_cal_data\"][0];\r\n\r\n\t\tvar x=this._colsS[ev._sday];\r\n\t\tvar x2=this._colsS[ev._eday];\r\n\t\tif (x2==x) x2=this._colsS[ev._eday+1];\r\n\t\tvar hb = this.xy.bar_height;\r\n\r\n\t\tvar y=this._colsS.heights[ev._sweek]+(this._colsS.height?(this.xy.month_scale_height+2):2)+ev._sorder*hb;\r\n\r\n\t\tvar d=document.createElement(\"div\");\r\n\t\tvar cs = ev._timed?\"dhx_cal_event_clear\":\"dhx_cal_event_line\";\r\n\t\tvar cse = (scheduler.templates['event_class_'+ev.layer])?scheduler.templates['event_class_'+ev.layer](ev.start_date,ev.end_date,ev):scheduler.templates.event_class(ev.start_date,ev.end_date,ev);\r\n\t\tif (cse) cs=cs+\" \"+cse;\r\n\r\n\t\tvar html='<div event_id=\"'+ev.id+'\" '+this.config.event_attribute+'=\"'+ev.id+'\" class=\"'+cs+'\" style=\"position:absolute; top:'+y+'px; left:'+x+'px; width:'+(x2-x-15)+'px;'+(ev._text_style||\"\")+'\">';\r\n\r\n\t\tif (ev._timed)\r\n\t\t\thtml+=(scheduler.templates['event_bar_date_'+ev.layer])?scheduler.templates['event_bar_date_'+ev.layer](ev.start_date,ev.end_date,ev):scheduler.templates.event_bar_date(ev.start_date,ev.end_date,ev);\r\n\t\thtml+=( (scheduler.templates['event_bar_text_'+ev.layer])?scheduler.templates['event_bar_text_'+ev.layer](ev.start_date,ev.end_date,ev):scheduler.templates.event_bar_text(ev.start_date,ev.end_date,ev) + '</div>)');\r\n\t\thtml+='</div>';\r\n\r\n\t\td.innerHTML=html;\r\n\r\n\t\tthis._rendered.push(d.firstChild);\r\n\t\tparent.appendChild(d.firstChild);\r\n\t};\r\n\r\n\tscheduler.render_event=function(ev){\r\n\t\tvar menu = scheduler.xy.menu_width;\r\n\t\tif(scheduler.getLayer(ev.layer).noMenu)\r\n\t\t\tmenu = 0;\r\n\r\n\t\tif (ev._sday<0) return; //can occur in case of recurring event during time shift\r\n\t\tvar parent=scheduler.locate_holder(ev._sday);\r\n\t\tif (!parent) return; //attempt to render non-visible event\r\n\t\tvar sm = ev.start_date.getHours()*60+ev.start_date.getMinutes();\r\n\t\tvar em = (ev.end_date.getHours()*60+ev.end_date.getMinutes())||(scheduler.config.last_hour*60);\r\n\r\n\t\tvar top = (Math.round((sm*60*1000-this.config.first_hour*60*60*1000)*this.config.hour_size_px/(60*60*1000)))%(this.config.hour_size_px*24)+1; //42px/hour\r\n\t\tvar height = Math.max(scheduler.xy.min_event_height,(em-sm)*this.config.hour_size_px/60)+1; //42px/hour\r\n\t\t\r\n\t\tvar width=Math.floor((parent.clientWidth-menu)/ev._count);\r\n\t\tvar left=ev._sorder*width+1;\r\n\t\tif (!ev._inner) width=width*(ev._count-ev._sorder);\r\n\r\n\r\n\r\n\t\tvar d=this._render_v_bar(ev.id,menu+left,top,width,height,ev._text_style,scheduler.templates.event_header(ev.start_date,ev.end_date,ev),scheduler.templates.event_text(ev.start_date,ev.end_date,ev));\r\n\r\n\t\tthis._rendered.push(d);\r\n\t\tparent.appendChild(d);\r\n\r\n\t\tleft=left+parseInt(parent.style.left,10)+menu;\r\n\r\n\t\ttop+=this._dy_shift; //corrupt top, to include possible multi-day shift\r\n\t\td.style.zIndex = this._layers_zindex[ev.layer];\r\n\r\n\t\tif (this._edit_id==ev.id){\r\n\t\t\td.style.zIndex = parseInt(d.style.zIndex)+1; //fix overlapping issue\r\n\t\t\tvar new_zIndex = d.style.zIndex;\r\n\t\t\twidth=Math.max(width-4,scheduler.xy.editor_width);\r\n\t\t\tvar d=document.createElement(\"div\");\r\n\t\t\td.setAttribute(\"event_id\",ev.id); // for backward compatibility\r\n\t\t\td.setAttribute(this.config.event_attribute,ev.id);\r\n\t\t\tthis.set_xy(d,width,height-20,left,top+14);\r\n\t\t\td.className=\"dhx_cal_editor\";\r\n\t\t\td.style.zIndex = new_zIndex;\r\n\t\t\tvar d2=document.createElement(\"div\");\r\n\t\t\tthis.set_xy(d2,width-6,height-26);\r\n\t\t\td2.style.cssText+=\";margin:2px 2px 2px 2px;overflow:hidden;\";\r\n\r\n\r\n\t\t\td2.style.zIndex = new_zIndex;\r\n\t\t\td.appendChild(d2);\r\n\t\t\tthis._els[\"dhx_cal_data\"][0].appendChild(d);\r\n\t\t\tthis._rendered.push(d);\r\n\r\n\t\t\td2.innerHTML=\"<textarea class='dhx_cal_editor'>\"+ev.text+\"</textarea>\";\r\n\r\n\t\t\tthis._editor=d2.firstChild;\r\n\t\t\tthis._editor.addEventListener(\"keypress\", function(e){\r\n\t\t\t\tif (e.shiftKey) return true;\r\n\t\t\t\tvar code= e.keyCode;\r\n\t\t\t\tif (code==scheduler.keys.edit_save) scheduler.editStop(true);\r\n\t\t\t\tif (code==scheduler.keys.edit_cancel) scheduler.editStop(false);\r\n\t\t\t});\r\n\t\t\tthis._editor.addEventListener(\"selectstart\", function(e){ e.cancelBubble=true; return true; });\r\n\t\t\td2.firstChild.focus();\r\n\t\t\t//IE and opera can add x-scroll during focusing\r\n\t\t\tthis._els[\"dhx_cal_data\"][0].scrollLeft=0;\r\n\t\t\td2.firstChild.select();\r\n\t\t}\r\n\t\tif (this._select_id==ev.id){\r\n\t\t\td.style.zIndex = parseInt(d.style.zIndex)+1; //fix overlapping issue\r\n\t\t\tvar icons=this.config[\"icons_\"+((this._edit_id==ev.id)?\"edit\":\"select\")];\r\n\t\t\tvar icons_str=\"\";\r\n\t\t\tfor (var i=0; i<icons.length; i++)\r\n\t\t\t\ticons_str+=\"<div class='dhx_menu_icon \"+icons[i]+\"' title='\"+this.locale.labels[icons[i]]+\"'></div>\";\r\n\t\t\tvar obj = this._render_v_bar(ev.id,left-menu+1,top,menu,icons.length*20+26,\"\",\"<div class='dhx_menu_head'></div>\",icons_str,true);\r\n\t\t\tobj.style.left=left-menu+1;\r\n\t\t\tobj.style.zIndex = d.style.zIndex;\r\n\t\t\tthis._els[\"dhx_cal_data\"][0].appendChild(obj);\r\n\t\t\tthis._rendered.push(obj);\r\n\t\t}\r\n\r\n\t};\r\n\r\n    scheduler.filter_agenda = function(id, event) {\r\n        var layer = scheduler.getLayer(event.layer);\r\n        return (layer && layer.visible);\r\n    };\r\n});\r\n\r\n\r\n}","export default function(scheduler){\r\n\r\nscheduler.config.limit_start = null;\r\nscheduler.config.limit_end   = null;\r\nscheduler.config.limit_view  = false;\r\nscheduler.config.check_limits = true;\r\nscheduler.config.mark_now = true;\r\nscheduler.config.display_marked_timespans = true;\r\nscheduler.config.overwrite_marked_timespans = true;\r\nscheduler._temp_limit_scope = function(){\r\n\tvar before = null;\r\n\tvar dhx_time_block = \"dhx_time_block\";\r\n\tvar default_timespan_type = \"default\";\r\n\tvar fix_options = function(options, days, zones) {\r\n\t\tif (days instanceof Date && zones instanceof Date) {\r\n\t\t\toptions.start_date = days;\r\n\t\t\toptions.end_date = zones;\r\n\t\t} else {\r\n\t\t\toptions.days = days;\r\n\t\t\toptions.zones = zones;\r\n\t\t}\r\n\t\treturn options;\r\n\t};\r\n\tvar get_resulting_options = function(days, zones, sections) {\r\n\t\tvar options = (typeof days == \"object\") ? days : { days: days };\r\n\t\toptions.type = dhx_time_block;\r\n\t\toptions.css = \"\";\r\n\t\tif (zones) {\r\n\t\t\tif (sections)\r\n\t\t\t\toptions.sections = sections;\r\n\t\t\toptions = fix_options(options, days, zones);\r\n\t\t}\r\n\t\treturn options;\r\n\t};\r\n\tscheduler.blockTime = function(days, zones, sections){\r\n\t\tvar options = get_resulting_options(days, zones, sections);\r\n\t\treturn scheduler.addMarkedTimespan(options);\r\n\t};\r\n\tscheduler.unblockTime = function(days, zones, sections) {\r\n\t\tzones = zones || \"fullday\";\r\n\t\tvar options = get_resulting_options(days, zones, sections);\r\n\t\treturn scheduler.deleteMarkedTimespan(options);\r\n\t};\r\n\tscheduler.attachEvent(\"onBeforeViewChange\",function(om,od,nm,nd){\r\n\r\n\t\tfunction isBlocked(date, mode){\r\n\t\t\tvar limit_start = scheduler.config.limit_start,\r\n\t\t\t\tlimit_end = scheduler.config.limit_end,\r\n\t\t\t\tdate_end =  scheduler.date.add(date,1,mode);\r\n\r\n\t\t\treturn (date.valueOf() > limit_end.valueOf() || date_end <= limit_start.valueOf());\r\n\t\t}\r\n\r\n\t\tif (scheduler.config.limit_view){\r\n\t\t\tnd = nd||od; nm = nm||om;\r\n\t\t\tif (isBlocked(nd, nm) && !(od.valueOf() == nd.valueOf())){\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tif(scheduler.$destroyed){\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar resetDate = !isBlocked(od, nm) ? od : scheduler.config.limit_start;\r\n\r\n\t\t\t\t\tscheduler.setCurrentView(!isBlocked(resetDate, nm) ? resetDate : null, nm);\r\n\t\t\t\t},1);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\tscheduler.checkInMarkedTimespan = function(ev, timespan_type, on_overlap){\r\n\t\ttimespan_type = timespan_type || default_timespan_type;\r\n\r\n\t\tvar res = true;\r\n\t\tvar temp_start_date = new Date(ev.start_date.valueOf());\r\n\t\tvar temp_end_date = scheduler.date.add(temp_start_date, 1, \"day\");\r\n\t\tvar timespans = scheduler._marked_timespans;\r\n\t\tfor (; temp_start_date < ev.end_date; temp_start_date = scheduler.date.date_part(temp_end_date), temp_end_date = scheduler.date.add(temp_start_date, 1, \"day\") ) {\r\n\t\t\tvar day_value = +scheduler.date.date_part( new Date(temp_start_date) ); // the first part of event not necessarily contains only date part\r\n\t\t\tvar day_index = temp_start_date.getDay();\r\n\r\n\t\t\tvar zones = getZones(ev, timespans, day_index, day_value, timespan_type);\r\n\t\t\tif (zones){\r\n\t\t\t\tfor (var i = 0; i < zones.length; i+=2) {\r\n\r\n\t\t\t\t\t// they may change for new event if it passes limit zone\r\n\t\t\t\t\tvar eventStart = scheduler._get_zone_minutes(temp_start_date);\r\n\t\t\t\t\tvar eventEnd = ( ev.end_date>temp_end_date || ev.end_date.getDate() != temp_start_date.getDate() ) ? 1440 : scheduler._get_zone_minutes(ev.end_date);\r\n\r\n\t\t\t\t\tvar markerStart = zones[i];\r\n\t\t\t\t\tvar markerEnd = zones[i+1];\r\n\t\t\t\t\tif (markerStart<eventEnd && markerEnd>eventStart) {\r\n\t\t\t\t\t\tif(typeof on_overlap == \"function\"){\r\n\t\t\t\t\t\t\t//handler allows to cancel overlapping\r\n\t\t\t\t\t\t\t//actually needed only to keep default behavior of limits\r\n\t\t\t\t\t\t\tres = on_overlap(ev, eventStart, eventEnd, markerStart, markerEnd);//event object, event start/end minutes in 'zones' format, zone start/end minutes\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tres = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(!res)\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn !res;\r\n\t};\r\n\tvar blocker = scheduler.checkLimitViolation = function(event){\r\n\t\tif(!event)\r\n\t\t\treturn true;\r\n\t\tif (!scheduler.config.check_limits)\r\n\t\t\treturn true;\r\n\t\tvar s = scheduler;\r\n\t\tvar c = s.config;\r\n\t\tvar evs = [];\r\n\t\tif (event.rec_type) {\r\n\t\t\tvar dates = scheduler.getRecDates(event);\r\n\t\t\tfor(var i=0; i < dates.length; i++){\r\n\t\t\t\tvar ev = scheduler._copy_event(event);\r\n\t\t\t\tscheduler._lame_copy(ev, dates[i]);\r\n\t\t\t\tevs.push(ev);\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\tevs = [event];\r\n\t\t}\r\n\r\n\t\tvar complete_res = true;\r\n\t\tfor (var p=0; p<evs.length; p++) {\r\n\t\t\tvar res = true;\r\n\t\t\tvar ev = evs[p];\r\n\t\t\t// Event could have old _timed property (e.g. we are creating event with DND on timeline view and crossed day)\r\n\t\t\tev._timed = scheduler.isOneDayEvent(ev);\r\n\r\n\t\t\tres = (c.limit_start && c.limit_end) ? (ev.start_date.valueOf() >= c.limit_start.valueOf() && ev.end_date.valueOf() <= c.limit_end.valueOf()) : true;\r\n\t\t\tif (res){\r\n\t\t\t\tres = !scheduler.checkInMarkedTimespan(ev, dhx_time_block, function(event, eventStart, eventEnd, markerStart, markerEnd){\r\n\t\t\t\t\t//try crop event to allow placing\r\n\t\t\t\t\tvar allow = true;\r\n\t\t\t\t\tif (eventStart<=markerEnd && eventStart >= markerStart){\r\n\t\t\t\t\t\tif (markerEnd == 24*60 || eventEnd <= markerEnd){\r\n\t\t\t\t\t\t\tallow = false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(event._timed && s._drag_id && s._drag_mode == \"new-size\"){\r\n\t\t\t\t\t\t\tevent.start_date.setHours(0);\r\n\t\t\t\t\t\t\tevent.start_date.setMinutes(markerEnd);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tallow = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ((eventEnd >= markerStart && eventEnd <= markerEnd) || (eventStart < markerStart && eventEnd > markerEnd)){\r\n\t\t\t\t\t\tif(event._timed && s._drag_id && s._drag_mode == \"new-size\"){\r\n\t\t\t\t\t\t\tevent.end_date.setHours(0);\r\n\t\t\t\t\t\t\tevent.end_date.setMinutes(markerStart);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tallow = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn allow;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (!res) {\r\n\t\t\t\tres = (s.checkEvent(\"onLimitViolation\")) ? s.callEvent(\"onLimitViolation\",[ev.id, ev]) : res;\r\n\t\t\t}\r\n\t\t\tcomplete_res = complete_res && res;\r\n\t\t}\r\n\t\tif(!complete_res){\r\n\t\t\ts._drag_id = null;\r\n\t\t\ts._drag_mode = null;\r\n\t\t}\r\n\t\treturn complete_res;\r\n\r\n\r\n\t};\r\n\tscheduler._get_blocked_zones = function(timespans, property, day_index, day_value, timespan_type){\r\n\t\tvar zones =[];\r\n\t\tif (timespans && timespans[property]) {\r\n\t\t\tvar timeline_zones = timespans[property];\r\n\t\t\tvar blocked_timeline_zones = this._get_relevant_blocked_zones(day_index, day_value, timeline_zones, timespan_type);\r\n\t\t\tfor (var i=0; i<blocked_timeline_zones.length; i++) {\r\n\t\t\t\tzones = this._add_timespan_zones(zones, blocked_timeline_zones[i].zones);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn zones;\r\n\t};\r\n\tscheduler._get_relevant_blocked_zones = function(day_index, day_value, zones, timespan_type) {\r\n\t\tvar resultZones;\r\n\t\tif(scheduler.config.overwrite_marked_timespans){\r\n\t\t\tresultZones = (zones[day_value] && zones[day_value][timespan_type]) ? zones[day_value][timespan_type] :\r\n\t\t\t(zones[day_index] && zones[day_index][timespan_type]) ? zones[day_index][timespan_type] : [];\r\n\t\t}else{\r\n\t\t\tresultZones = [];\r\n\t\t\tif(zones[day_value] && zones[day_value][timespan_type]){\r\n\t\t\t\tresultZones = resultZones.concat(zones[day_value][timespan_type]);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif((zones[day_index] && zones[day_index][timespan_type])){\r\n\t\t\t\tresultZones = resultZones.concat(zones[day_index][timespan_type]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn resultZones;\r\n\t};\r\n\tfunction getZones(ev, timespans, day_index, day_value, timespan_type){\r\n\t\tvar s = scheduler;\r\n\t\t//containers for 'unit' and 'timeline' views, and related 'section_id' properties\r\n\t\tvar zones = [];\r\n\t\tvar containers = {\r\n\t\t\t'_props':'map_to',\r\n\t\t\t'matrix':'y_property'};\r\n\t\t//check blocked sections in all units and timelines\r\n\t\tfor(var container in containers){\r\n\t\t\tvar property = containers[container];\r\n\t\t\tif(s[container]){\r\n\t\t\t\tfor(var view in s[container]){\r\n\t\t\t\t\tvar view_config = s[container][view];\r\n\t\t\t\t\tvar linker = view_config[property];\r\n\t\t\t\t\tif(!ev[linker]) continue;\r\n\t\t\t\t\tzones =  s._add_timespan_zones(zones,\r\n\t\t\t\t\t\tscheduler._get_blocked_zones(timespans[view], ev[linker], day_index, day_value, timespan_type));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// now need to add day blocks\r\n\t\tzones = s._add_timespan_zones(zones, scheduler._get_blocked_zones(timespans, 'global', day_index, day_value, timespan_type));\r\n\t\treturn zones;\r\n\t}\r\n\r\n\tscheduler.attachEvent(\"onMouseDown\", function(classname) {\r\n\t\treturn !(classname == dhx_time_block);\r\n\t});\r\n\tscheduler.attachEvent(\"onBeforeDrag\",function(id){\r\n\t\tif (!id) return true;\r\n\t\treturn blocker(scheduler.getEvent(id));\r\n\t});\r\n\tscheduler.attachEvent(\"onClick\", function (event_id, native_event_object){\r\n\t\treturn blocker(scheduler.getEvent(event_id));\r\n    });\r\n\tscheduler.attachEvent(\"onBeforeLightbox\",function(id){\r\n\r\n\t\tvar ev = scheduler.getEvent(id);\r\n\t\tbefore = [ev.start_date, ev.end_date];\r\n\t\treturn blocker(ev);\r\n\t});\r\n\tscheduler.attachEvent(\"onEventSave\", function(id, data, is_new_event) {\r\n\r\n\t\t//lightbox may not have 'time' section\r\n\t\tif(!(data.start_date && data.end_date)){\r\n\t\t\tvar ev = scheduler.getEvent(id);\r\n\t\t\tdata.start_date = new Date(ev.start_date);\r\n\t\t\tdata.end_date = new Date(ev.end_date);\r\n\t\t}\r\n\r\n\t\tif(data.rec_type){\r\n\t\t\t//_roll_back_dates modifies start_date of recurring event, need to check limits after modification\r\n\t\t\t// use a copy to keep original event unchanged\r\n\t\t\tvar data_copy = scheduler._lame_clone(data);\r\n\t\t\tscheduler._roll_back_dates(data_copy);\r\n\t\t\treturn blocker(data_copy);\r\n\t\t}\r\n\t\treturn blocker(data);\r\n\t});\r\n\tscheduler.attachEvent(\"onEventAdded\",function(id){\r\n\t\tif (!id) return true;\r\n\t\tvar ev = scheduler.getEvent(id);\r\n\t\tif (!blocker(ev) && scheduler.config.limit_start && scheduler.config.limit_end) {\r\n\t\t\t//if newly created event is outside of limited time - crop it, leaving only allowed time\r\n\t\t\tif (ev.start_date < scheduler.config.limit_start) {\r\n\t\t\t\tev.start_date = new Date(scheduler.config.limit_start);\r\n\t\t\t}\r\n\t\t\tif (ev.start_date.valueOf() >= scheduler.config.limit_end.valueOf()) {\r\n\t\t\t\tev.start_date = this.date.add(scheduler.config.limit_end, -1, \"day\");\r\n\t\t\t}\r\n\t\t\tif (ev.end_date < scheduler.config.limit_start) {\r\n\t\t\t\tev.end_date = new Date(scheduler.config.limit_start);\r\n\t\t\t}\r\n\t\t\tif (ev.end_date.valueOf() >= scheduler.config.limit_end.valueOf()) {\r\n\t\t\t\tev.end_date = this.date.add(scheduler.config.limit_end, -1, \"day\");\r\n\t\t\t}\r\n\t\t\tif (ev.start_date.valueOf() >= ev.end_date.valueOf()) {\r\n\t\t\t\tev.end_date = this.date.add(ev.start_date, (this.config.event_duration||this.config.time_step), \"minute\");\r\n\t\t\t}\r\n\t\t\tev._timed=this.isOneDayEvent(ev);\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\tscheduler.attachEvent(\"onEventChanged\",function(id){\r\n\t\tif (!id) return true;\r\n\t\tvar ev = scheduler.getEvent(id);\r\n\t\tif (!blocker(ev)){\r\n\t\t\tif (!before) return false;\r\n\t\t\tev.start_date = before[0];\r\n\t\t\tev.end_date = before[1];\r\n\t\t\tev._timed=this.isOneDayEvent(ev);\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\tscheduler.attachEvent(\"onBeforeEventChanged\",function(ev, native_object, is_new){\r\n\t\treturn blocker(ev);\r\n\t});\r\n\tscheduler.attachEvent(\"onBeforeEventCreated\", function(ev) { // native event\r\n\t\tvar start_date = scheduler.getActionData(ev).date;\r\n\t\tvar event = {\r\n\t\t\t_timed: true,\r\n\t\t\tstart_date: start_date,\r\n\t\t\tend_date: scheduler.date.add(start_date, scheduler.config.time_step, \"minute\")\r\n\t\t};\r\n\t\treturn blocker(event);\r\n\t});\r\n\r\n\tscheduler.attachEvent(\"onViewChange\", function(){\r\n\t\tscheduler._mark_now();\r\n\t});\r\n\r\n\tscheduler.attachEvent(\"onAfterSchedulerResize\", function(){\r\n\t\twindow.setTimeout(function(){ \r\n\t\t\tif(scheduler.$destroyed){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tscheduler._mark_now(); \r\n\t\t}, 1);\r\n\t\treturn true;\r\n\t});\r\n\r\n\tscheduler.attachEvent(\"onTemplatesReady\", function() {\r\n\t\tscheduler._mark_now_timer = window.setInterval(function() {\r\n\t\t\tif(!scheduler._is_initialized())\r\n\t\t\t\treturn;\r\n\t\t\tscheduler._mark_now();\r\n\t\t}, 60000);\r\n\t});\r\n\tscheduler.attachEvent(\"onDestroy\", function(){\r\n\t\tclearInterval(scheduler._mark_now_timer);\r\n\t});\r\n\tscheduler._mark_now = function(hide) {\r\n\t\t// day, week, units views\r\n\t\tvar dhx_now_time = 'dhx_now_time';\r\n\t\tif (!this._els[dhx_now_time]) {\r\n\t\t\tthis._els[dhx_now_time] = [];\r\n\t\t}\r\n\t\tvar now = scheduler._currentDate();\r\n\t\tvar cfg = this.config;\r\n\t\tscheduler._remove_mark_now(); // delete previous marks if they exist\r\n\t\tif (!hide && cfg.mark_now && now < this._max_date && now > this._min_date && now.getHours() >= cfg.first_hour && now.getHours()<cfg.last_hour) {\r\n\t\t\tvar day_index = this.locate_holder_day(now);\r\n\t\t\tthis._els[dhx_now_time] = scheduler._append_mark_now(day_index, now);\r\n\t\t}\r\n\t};\r\n\tscheduler._append_mark_now = function(day_index, now) {\r\n\t\tvar dhx_now_time = 'dhx_now_time';\r\n\t\tvar zone_start= scheduler._get_zone_minutes(now);\r\n\t\tvar options = {\r\n\t\t\tzones: [zone_start, zone_start+1],\r\n\t\t\tcss: dhx_now_time,\r\n\t\t\ttype: dhx_now_time\r\n\t\t};\r\n\t\tif (!this._table_view) {\r\n\t\t\tif (this._props && this._props[this._mode]) { // units view\r\n\t\t\t\tvar start_index,\r\n\t\t\t\t\tend_index;\r\n\r\n\t\t\t\tvar view = this._props[this._mode];\r\n\t\t\t\tvar units_l = view.size || view.options.length;\r\n\t\t\t\tif (view.days > 1) {\r\n\t\t\t\t\tif(view.size && view.options.length){\r\n\t\t\t\t\t\tday_index = ((view.position+ day_index) / view.options.length) * view.size;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstart_index = day_index;\r\n\t\t\t\t\tend_index = day_index + units_l;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tstart_index = 0;\r\n\t\t\t\t\tend_index = start_index + units_l;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar r_divs = [];\r\n\r\n\t\t\t\tfor (var i = start_index; i < end_index; i++) {\r\n\t\t\t\t\tvar t_day = i; // as each unit is actually considered +1 day\r\n\t\t\t\t\toptions.days = t_day;\r\n\t\t\t\t\tvar t_div = scheduler._render_marked_timespan(options, null, t_day)[0];\r\n\t\t\t\t\tr_divs.push(t_div);\r\n\t\t\t\t}\r\n\t\t\t\treturn r_divs;\r\n\t\t\t} else {  // day/week views\r\n\t\t\t\toptions.days = day_index;\r\n\t\t\t\treturn scheduler._render_marked_timespan(options, null, day_index);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this._mode == \"month\") {\r\n\t\t\t\toptions.days = +scheduler.date.date_part(now);\r\n\t\t\t\treturn scheduler._render_marked_timespan(options, null, null);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tscheduler._remove_mark_now = function() {\r\n\t\tvar dhx_now_time = 'dhx_now_time';\r\n\t\tvar els = this._els[dhx_now_time];\r\n\t\tfor (var i=0; i<els.length; i++) {\r\n\t\t\tvar div = els[i];\r\n\t\t\tvar parent = div.parentNode;\r\n\t\t\tif (parent) {\r\n\t\t\t\tparent.removeChild(div);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._els[dhx_now_time] = [];\r\n\t};\r\n\r\n\t/*\r\n\tscheduler._marked_timespans = {\r\n\t\t\"global\": {\r\n\t\t\t\"0\": {\r\n\t\t\t\t\"default\": [\r\n\t\t\t\t\t{  // sunday\r\n\t\t\t\t\t\tzones: [0, 100, 500, 600],\r\n\t\t\t\t\t\tcss: \"yellow_box\",\r\n\t\t\t\t\t\ttype: \"default\",\r\n\t\t\t\t\t\tview: \"global\",\r\n\t\t\t\t\t\tday: 0\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t\t\"112121312\": {\r\n\t\t\t\t\"my_special_type\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tzones: [600, 900],\r\n\t\t\t\t\t\ttype: \"block\",\r\n\t\t\t\t\t\tcss: \"some_class\",\r\n\t\t\t\t\t\tview: \"global\",\r\n\t\t\t\t\t\tday: 112121312\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t},\r\n\t\t\"units\": {\r\n\t\t\t\"5_id\": {\r\n\t\t\t\t\"3\": {\r\n\t\t\t\t\t\"special_type\": [ {}, {}, {} ],\r\n\t\t\t\t\t\"another_type\": [ {} ]\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\"6_id\": {\r\n\t\t\t\t\"11212127\": {\r\n\t\t\t\t\t...\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t*/\r\n\tscheduler._marked_timespans = { global: {} };\r\n\r\n\tscheduler._get_zone_minutes = function(date) {\r\n\t\treturn date.getHours()*60 + date.getMinutes();\r\n\t};\r\n\tscheduler._prepare_timespan_options = function(config) { // receives 1 option, returns array of options\r\n\t\tvar r_configs = []; // resulting configs\r\n\t\tvar temp_configs = [];\r\n\r\n\t\tif (config.days == \"fullweek\")\r\n\t\t\tconfig.days = [0,1,2,3,4,5,6];\r\n\r\n\t\tif (config.days instanceof Array) {\r\n\t\t\tvar t_days = config.days.slice();\r\n\t\t\tfor (var i=0; i<t_days.length; i++) {\r\n\t\t\t\tvar cloned_config = scheduler._lame_clone(config);\r\n\t\t\t\tcloned_config.days = t_days[i];\r\n\t\t\t\tr_configs.push.apply(r_configs, scheduler._prepare_timespan_options(cloned_config));\r\n\t\t\t}\r\n\t\t\treturn r_configs;\r\n\t\t}\r\n\r\n\t\tif ( !config ||\r\n\t\t\t!((config.start_date && config.end_date && config.end_date > config.start_date) || (config.days !== undefined && config.zones)) && !config.type )\r\n\t\t\treturn r_configs;  // incorrect config was provided\r\n\r\n\t\tvar min = 0;\r\n\t\tvar max = 24*60;\r\n\t\tif (config.zones == \"fullday\")\r\n\t\t\tconfig.zones = [min, max];\r\n\t\tif (config.zones && config.invert_zones) {\r\n\t\t\tconfig.zones = scheduler.invertZones(config.zones);\r\n\t\t}\r\n\r\n\t\tconfig.id = scheduler.uid();\r\n\t\tconfig.css = config.css||\"\";\r\n\t\tconfig.type = config.type||default_timespan_type;\r\n\r\n\t\tvar sections = config.sections;\r\n\t\tif (sections) {\r\n\t\t\tfor (var view_key in sections) {\r\n\t\t\t\tif (sections.hasOwnProperty(view_key)) {\r\n\t\t\t\t\tvar ids = sections[view_key];\r\n\t\t\t\t\tif (!(ids instanceof Array))\r\n\t\t\t\t\t\tids = [ids];\r\n\t\t\t\t\tfor (var i=0; i<ids.length; i++) {\r\n\t\t\t\t\t\tvar t_config = scheduler._lame_copy({}, config);\r\n\t\t\t\t\t\tt_config.sections = {};\r\n\t\t\t\t\t\tt_config.sections[view_key] = ids[i];\r\n\t\t\t\t\t\ttemp_configs.push(t_config);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ttemp_configs.push(config);\r\n\t\t}\r\n\r\n\t\tfor (var k=0; k<temp_configs.length; k++) {\r\n\t\t\tvar c_config = temp_configs[k]; // config to be checked\r\n\r\n\t\t\tvar start_date = c_config.start_date;\r\n\t\t\tvar end_date = c_config.end_date;\r\n\r\n\t\t\tif (start_date && end_date) {\r\n\t\t\t\tvar t_sd = scheduler.date.date_part(new Date(start_date)); // e.g. 05 october\r\n\t\t\t\tvar t_ed= scheduler.date.add(t_sd, 1, \"day\");  // 06 october, will both be incremented in the loop\r\n\r\n\t\t\t\twhile (t_sd < end_date) {\r\n\t\t\t\t\tvar t_config = scheduler._lame_copy({}, c_config);\r\n\t\t\t\t\tdelete t_config.start_date;\r\n\t\t\t\t\tdelete t_config.end_date;\r\n\t\t\t\t\tt_config.days = t_sd.valueOf();\r\n\t\t\t\t\tvar zone_start = (start_date > t_sd) ? scheduler._get_zone_minutes(start_date) : min;\r\n\t\t\t\t\tvar zone_end = ( end_date > t_ed || end_date.getDate() != t_sd.getDate() ) ? max : scheduler._get_zone_minutes(end_date);\r\n\t\t\t\t\tt_config.zones = [zone_start, zone_end];\r\n\t\t\t\t\tr_configs.push(t_config);\r\n\r\n\t\t\t\t\tt_sd = t_ed;\r\n\t\t\t\t\tt_ed = scheduler.date.add(t_ed, 1, \"day\");\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (c_config.days instanceof Date)\r\n\t\t\t\t\tc_config.days = (scheduler.date.date_part(c_config.days)).valueOf();\r\n\t\t\t\tc_config.zones = config.zones.slice();\r\n\t\t\t\tr_configs.push(c_config);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn r_configs;\r\n\t};\r\n\tscheduler._get_dates_by_index = function(index, start, end) {\r\n\t\tvar dates = [];\r\n\t\tstart = scheduler.date.date_part(new Date(start||scheduler._min_date));\r\n\t\tend = new Date(end||scheduler._max_date);\r\n\t\tvar start_day = start.getDay();\r\n\t\tvar delta = (index-start_day >= 0) ? (index-start_day) : (7-start.getDay()+index);\r\n\t\tvar t_date = scheduler.date.add(start, delta, \"day\");\r\n\t\tfor (; t_date < end; t_date = scheduler.date.add(t_date, 1, \"week\")) {\r\n\t\t\tdates.push(t_date);\r\n\t\t}\r\n\t\treturn dates;\r\n\t};\r\n\tscheduler._get_css_classes_by_config = function(config) {\r\n\t\tvar css_classes = [];\r\n\t\tif (config.type == dhx_time_block) {\r\n\t\t\tcss_classes.push(dhx_time_block);\r\n\t\t\tif (config.css)\r\n\t\t\t\tcss_classes.push(dhx_time_block+\"_reset\");\r\n\t\t}\r\n\t\tcss_classes.push(\"dhx_marked_timespan\", config.css);\r\n\t\treturn css_classes.join(\" \");\r\n\t};\r\n\tscheduler._get_block_by_config = function(config) {\r\n\t\tvar block  = document.createElement(\"div\");\r\n\t\tif (config.html) {\r\n\t\t\tif (typeof config.html == \"string\")\r\n\t\t\t\tblock.innerHTML = config.html;\r\n\t\t\telse\r\n\t\t\t\tblock.appendChild(config.html);\r\n\t\t}\r\n\t\treturn block;\r\n\t};\r\n\tscheduler._render_marked_timespan = function(options, area, day) {\r\n\t\tvar blocks = []; // resulting block which will be rendered and returned\r\n\t\tvar c = scheduler.config;\r\n\t\tvar min_date = this._min_date;\r\n\t\tvar max_date = this._max_date;\r\n\t\tvar day_value = false; // if timespan for specific date should be displayed\r\n\r\n\t\tif (!c.display_marked_timespans)\r\n\t\t\treturn blocks;\r\n\r\n\t\t// in case of markTimespan\r\n\t\tif (!day && day !== 0) {\r\n\t\t\tif (options.days < 7)\r\n\t\t\t\tday = options.days;\r\n\t\t\telse {\r\n\t\t\t\tvar date_to_display = new Date(options.days);\r\n\t\t\t\tday_value = +date_to_display;\r\n\r\n\t\t\t\t// in case of markTimespan date could be not in the viewing range, need to return\r\n\t\t\t\tif ( !(+max_date > +date_to_display && +min_date <= +date_to_display) )\r\n\t\t\t\t\treturn blocks;\r\n\r\n\t\t\t\tday = date_to_display.getDay();\r\n\t\t\t}\r\n\r\n\t\t\t// convert day default index (Sun - 0, Sat - 6) to index of hourscales (depends on week_start and config.start_on_monday)\r\n\t\t\tvar min_day = min_date.getDay();\r\n\t\t\tif (min_day > day) {\r\n\t\t\t\tday = 7 - (min_day-day);\r\n\t\t\t} else {\r\n\t\t\t\tday = day - min_day;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar zones = options.zones;\r\n\t\tvar css_classes = scheduler._get_css_classes_by_config(options);\r\n\r\n\t\tif (scheduler._table_view && scheduler._mode == \"month\") {\r\n\t\t\tvar areas = [];\r\n\t\t\tvar days = [];\r\n\r\n\r\n\t\t\tif (!area) {\r\n\t\t\t\tdays = (day_value) ? [day_value] : scheduler._get_dates_by_index(day);\r\n\t\t\t\tfor (var i=0; i < days.length; i++) {\r\n\t\t\t\t\tareas.push( this._scales[days[i]] );\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tareas.push(area);\r\n\t\t\t\tdays.push(day);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i=0; i < areas.length; i++) {\r\n\t\t\t\tarea = areas[i];\r\n\t\t\t\tday = days[i];\r\n\r\n\t\t\t\tvar sday = this.locate_holder_day(day, false) % this._cols.length;\r\n\r\n\t\t\t\tif(this._ignores[sday]) continue;\r\n\r\n\t\t\t\tvar block_proto = scheduler._get_block_by_config(options);\r\n\t\t\t\tblock_proto.className = css_classes;\r\n\t\t\t\tblock_proto.style.top = \"0px\";\r\n\t\t\t\tblock_proto.style.height = \"100%\";\r\n\t\t\t\t\r\n\t\t\t\tfor (var k=0; k < zones.length; k+=2) {\r\n\t\t\t\t\tvar start = zones[i];\r\n\t\t\t\t\tvar end = zones[i+1];\r\n\t\t\t\t\tif (end <= start)\r\n\t\t\t\t\t\treturn [];\r\n\r\n\t\t\t\t\tvar block = block_proto.cloneNode(true);\r\n\r\n\t\t\t\t\tblock.style.left = \"0px\";\r\n\t\t\t\t\tblock.style.width = \"100%\";\r\n\r\n\t\t\t\t\tarea.appendChild(block);\r\n\t\t\t\t\tblocks.push(block);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar index = day;\r\n\r\n\t\t\tif(this._ignores[this.locate_holder_day(day, false)]) return blocks;\r\n\r\n\t\t\tif (this._props && this._props[this._mode] && options.sections && options.sections[this._mode]) {\r\n\t\t\t\tvar view = this._props[this._mode];\r\n\t\t\t\tindex = view.order[options.sections[this._mode]];\r\n\r\n\t\t\t\tvar inner_index = view.order[options.sections[this._mode]];\r\n\t\t\t\tif(!(view.days > 1)){\r\n\t\t\t\t\tindex = inner_index;\r\n\t\t\t\t\tif (view.size && (index > view.position+view.size)) {\r\n\t\t\t\t\t\tindex = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar units_l = view.size || view.options.length;\r\n\t\t\t\t\tindex = index*units_l + inner_index;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tarea = area ? area : scheduler.locate_holder(index);\r\n\r\n\t\t\tfor (var i = 0; i < zones.length; i+=2){\r\n\t\t\t\tvar start = Math.max(zones[i], c.first_hour*60);\r\n\t\t\t\tvar end = Math.min(zones[i+1], c.last_hour*60);\r\n\t\t\t\tif (end <= start) {\r\n\t\t\t\t\tif (i+2 < zones.length)\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar block = scheduler._get_block_by_config(options);\r\n\t\t\t\tblock.className = css_classes;\r\n\r\n\t\t\t\t// +1 for working with section which really takes up whole height (as % would be == 0)\r\n\t\t\t\tvar all_hours_height = this.config.hour_size_px*24 + 1;\r\n\t\t\t\tvar hour_ms = 60*60*1000;\r\n\t\t\t\tblock.style.top = (Math.round((start*60*1000-this.config.first_hour*hour_ms)*this.config.hour_size_px/hour_ms) % all_hours_height) + \"px\";\r\n\t\t\t\tblock.style.height = Math.max((Math.round(((end-start)*60*1000)*this.config.hour_size_px/hour_ms)) % all_hours_height, 1)+\"px\";\r\n\r\n\t\t\t\tarea.appendChild(block);\r\n\t\t\t\tblocks.push(block);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn blocks;\r\n\t};\r\n\r\n\tscheduler._mark_timespans = function(){\r\n\t\tvar data = this._els[\"dhx_cal_data\"][0];\r\n\t\tvar divs = [];\r\n\t\tif (scheduler._table_view && scheduler._mode == \"month\"){\r\n\t\t\tfor (var day in this._scales) {\r\n\t\t\t\tvar date = new Date(+day);\r\n\t\t\t\tdivs.push.apply(divs, scheduler._on_scale_add_marker(this._scales[day],date));\r\n\t\t\t}\r\n\t\t}else {\r\n\t\t\t//manually trigger rendering of configs for each column\r\n\t\t\tvar date = new Date(scheduler._min_date);\r\n\t\t\tfor (var i = 0, len = data.childNodes.length; i < len; i++) {\r\n\t\t\t\tvar area = data.childNodes[i];\r\n\t\t\t\tif (area.firstChild && scheduler._getClassName(area.firstChild).indexOf(\"dhx_scale_hour\") > -1) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdivs.push.apply(divs, scheduler._on_scale_add_marker(area, date));\r\n\t\t\t\tdate = scheduler.date.add(date, 1, \"day\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn divs;\r\n\t};\r\n\r\n\t// just marks timespan, will be cleaned after refresh\r\n\tscheduler.markTimespan = function(configuration) {\r\n\r\n\t\tif(!this._els){\r\n\t\t\tthrow new Error(\"`scheduler.markTimespan` can't be used before scheduler initialization. Place `scheduler.markTimespan` call after `scheduler.init`.\");\r\n\t\t}\r\n\r\n\t\tvar rebuild_els = false;\r\n\t\tif(!this._els[\"dhx_cal_data\"]){\r\n\t\t\tscheduler.get_elements();\r\n\t\t\trebuild_els = true;\r\n\t\t}\r\n\r\n\r\n\t\t// backup regular marked timespans\r\n\t\tvar timespans_ids = scheduler._marked_timespans_ids,\r\n\t\t\ttimespan_types = scheduler._marked_timespans_types,\r\n\t\t\ttimespans = scheduler._marked_timespans;\r\n\r\n\t\tscheduler.deleteMarkedTimespan();\r\n\r\n\t\t//add block to configs\r\n\t\tscheduler.addMarkedTimespan(configuration);\r\n\r\n\t\tvar divs = scheduler._mark_timespans();\r\n\r\n\t\tif(rebuild_els)\r\n\t\t\tscheduler._els = [];\r\n\r\n\t\t// restore timespan config\r\n\t\tscheduler._marked_timespans_ids = timespans_ids;\r\n\t\tscheduler._marked_timespans_types = timespan_types;\r\n\t\tscheduler._marked_timespans = timespans;\r\n\r\n\t\treturn divs;\r\n\t};\r\n\tscheduler.unmarkTimespan = function(divs) {\r\n\t\tif (!divs)\r\n\t\t\treturn;\r\n\t\tfor (var i=0; i<divs.length; i++) {\r\n\t\t\tvar div = divs[i];\r\n\t\t\t// parent may no longer be present if we switched views, navigated\r\n\t\t\tif (div.parentNode) {\r\n\t\t\t\tdiv.parentNode.removeChild(div);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tscheduler._addMarkerTimespanConfig = function(config){\r\n\t\tvar global = \"global\";\r\n\t\tvar timespans = scheduler._marked_timespans;\r\n\t\tvar id = config.id;\r\n\r\n\t\tvar ids = scheduler._marked_timespans_ids;\r\n\t\tif (!ids[id])\r\n\t\t\tids[id] = [];\r\n\r\n\r\n\t\tvar day = config.days;\r\n\r\n\t\tvar sections = config.sections;\r\n\t\tvar type = config.type; // default or specified\r\n\t\tconfig.id = id;\r\n\r\n\t\tif (sections) {\r\n\t\t\tfor (var view_key in sections) {\r\n\t\t\t\tif (sections.hasOwnProperty(view_key)) {\r\n\t\t\t\t\tif (!timespans[view_key])\r\n\t\t\t\t\t\ttimespans[view_key] = {};\r\n\t\t\t\t\tvar unit_id = sections[view_key];\r\n\t\t\t\t\tvar timespans_view = timespans[view_key];\r\n\t\t\t\t\tif (!timespans_view[unit_id])\r\n\t\t\t\t\t\ttimespans_view[unit_id] = {};\r\n\t\t\t\t\tif (!timespans_view[unit_id][day])\r\n\t\t\t\t\t\ttimespans_view[unit_id][day] = {};\r\n\t\t\t\t\tif (!timespans_view[unit_id][day][type]){\r\n\t\t\t\t\t\ttimespans_view[unit_id][day][type] = [];\r\n\t\t\t\t\t\tif(!scheduler._marked_timespans_types)\r\n\t\t\t\t\t\t\tscheduler._marked_timespans_types = {};\r\n\t\t\t\t\t\tif(!scheduler._marked_timespans_types[type])\r\n\t\t\t\t\t\t\tscheduler._marked_timespans_types[type] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar day_configs = timespans_view[unit_id][day][type];\r\n\t\t\t\t\tconfig._array = day_configs;\r\n\t\t\t\t\tday_configs.push(config);\r\n\t\t\t\t\tids[id].push(config);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (!timespans[global][day])\r\n\t\t\t\ttimespans[global][day] = {};\r\n\t\t\tif (!timespans[global][day][type])\r\n\t\t\t\ttimespans[global][day][type] = [];\r\n\r\n\t\t\tif(!scheduler._marked_timespans_types)\r\n\t\t\t\tscheduler._marked_timespans_types = {};\r\n\t\t\tif(!scheduler._marked_timespans_types[type])\r\n\t\t\t\tscheduler._marked_timespans_types[type] = true;\r\n\r\n\t\t\tvar day_configs = timespans[global][day][type];\r\n\t\t\tconfig._array = day_configs;\r\n\t\t\tday_configs.push(config);\r\n\t\t\tids[id].push(config);\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tscheduler._marked_timespans_ids = {};\r\n\t// adds marked timespan to collections, persistent\r\n\tscheduler.addMarkedTimespan = function(configuration) {\r\n\t\tvar configs = scheduler._prepare_timespan_options(configuration);\r\n\t\tif (!configs.length)\r\n\t\t\treturn; // options are incorrect, nothing to mark\r\n\r\n\t\tvar id = configs[0].id;\r\n\t\tfor (var i=0; i<configs.length; i++) {\r\n\t\t\tscheduler._addMarkerTimespanConfig(configs[i]);\r\n\t\t}\r\n\t\treturn id;\r\n\t};\r\n\t// not used for now\r\n\tscheduler._add_timespan_zones = function(current_zones, zones) {\r\n\t\tvar resulting_zones = current_zones.slice();\r\n\t\tzones = zones.slice();\r\n\r\n\t\tif (!resulting_zones.length)\r\n\t\t\treturn zones;\r\n\r\n\t\tfor (var i=0; i<resulting_zones.length; i+=2) {\r\n\t\t\tvar c_zone_start = resulting_zones[i];\r\n\t\t\tvar c_zone_end = resulting_zones[i+1];\r\n\t\t\tvar isLast = (i+2 == resulting_zones.length);\r\n\r\n\t\t\tfor (var k=0; k<zones.length; k+=2) {\r\n\t\t\t\tvar zone_start = zones[k];\r\n\t\t\t\tvar zone_end = zones[k+1];\r\n\t\t\t\tif ((zone_end > c_zone_end && zone_start <= c_zone_end) || (zone_start < c_zone_start && zone_end >= c_zone_start)) {\r\n\t\t\t\t\tresulting_zones[i] = Math.min(c_zone_start, zone_start);\r\n\t\t\t\t\tresulting_zones[i+1] = Math.max(c_zone_end, zone_end);\r\n\t\t\t\t\ti -= 2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!isLast) // do nothing, maybe next current zone will match or will be last\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\tvar offset = (c_zone_start > zone_start)?0:2;\r\n\t\t\t\t\tresulting_zones.splice(i+offset, 0, zone_start, zone_end); // last current zone, need to add another\r\n\t\t\t\t}\r\n\t\t\t\tzones.splice(k--,2); // zone was merged or added, need to exclude it\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn resulting_zones;\r\n\t};\r\n\tscheduler._subtract_timespan_zones = function(current_zones, zones) {\r\n\t\tvar resulting_zones = current_zones.slice();\r\n\t\tfor (var i=0; i<resulting_zones.length; i+=2 ) {\r\n\t\t\tvar c_zone_start = resulting_zones[i];// current_zone_start\r\n\t\t\tvar c_zone_end = resulting_zones[i+1];\r\n\t\t\tfor (var k=0; k<zones.length; k+=2) {\r\n\t\t\t\tvar zone_start = zones[k];\r\n\t\t\t\tvar zone_end = zones[k+1];\r\n\t\t\t\tif (zone_end > c_zone_start && zone_start < c_zone_end) {\r\n\t\t\t\t\tvar is_modified = false;\r\n\t\t\t\t\tif (c_zone_start >= zone_start && c_zone_end <= zone_end) {\r\n\t\t\t\t\t\tresulting_zones.splice(i, 2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (c_zone_start < zone_start) {\r\n\t\t\t\t\t\tresulting_zones.splice(i, 2, c_zone_start, zone_start);\r\n\t\t\t\t\t\tis_modified = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (c_zone_end > zone_end) {\r\n\t\t\t\t\t\tresulting_zones.splice( (is_modified)?(i+2):i, (is_modified)?0:2, zone_end, c_zone_end);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ti -= 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn resulting_zones;\r\n\t};\r\n\tscheduler.invertZones = function(zones) {\r\n\t\treturn scheduler._subtract_timespan_zones([0, 1440], zones.slice());\r\n\t};\r\n\tscheduler._delete_marked_timespan_by_id = function(id) {\r\n\t\tvar configs = scheduler._marked_timespans_ids[id];\r\n\t\tif (configs) {\r\n\t\t\tfor (var i=0; i<configs.length; i++) {\r\n\t\t\t\tvar config = configs[i];\r\n\t\t\t\tvar parent_array = config._array;\r\n\t\t\t\tfor (var k=0; k<parent_array.length; k++) {\r\n\t\t\t\t\tif (parent_array[k] == config) {\r\n\t\t\t\t\t\tparent_array.splice(k, 1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tscheduler._delete_marked_timespan_by_config = function(config) {\r\n\t\tvar timespans = scheduler._marked_timespans;\r\n\t\tvar sections = config.sections;\r\n\t\tvar day = config.days;\r\n\t\tvar type = config.type||default_timespan_type;\r\n\t\tvar viewspans;\r\n\t\tif (sections) {\r\n\t\t\tfor (var view_key in sections) {\r\n\t\t\t\tif (sections.hasOwnProperty(view_key) && timespans[view_key]) {\r\n\t\t\t\t\tvar unit_id = sections[view_key];\r\n\t\t\t\t\tif (timespans[view_key][unit_id]){\r\n\t\t\t\t\t\tviewspans = timespans[view_key][unit_id];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tviewspans = timespans.global;\r\n\t\t}\r\n\r\n\t\tif(viewspans) {\r\n\t\t\tif (day !== undefined) {\r\n\t\t\t\tif (viewspans[day] && viewspans[day][type]) {\r\n\t\t\t\t\tscheduler._addMarkerTimespanConfig(config); // register config in order to be able to delete recurring timespan from a specific day\r\n\t\t\t\t\tscheduler._delete_marked_timespans_list(viewspans[day][type], config);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tfor (var d in viewspans) {\r\n\t\t\t\t\tif (viewspans[d][type]) {\r\n\t\t\t\t\t\tvar dayConfig = scheduler._lame_clone(config);\r\n\t\t\t\t\t\tconfig.days = d;\r\n\t\t\t\t\t\tscheduler._addMarkerTimespanConfig(dayConfig); // register config in order to be able to delete recurring timespan from a specific day\r\n\t\t\t\t\t\tscheduler._delete_marked_timespans_list(viewspans[d][type], config);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tscheduler._delete_marked_timespans_list = function(day_timespans, config){\r\n\t\tfor (var i=0; i<day_timespans.length; i++) {\r\n\t\t\tvar d_t = day_timespans[i];\r\n\t\t\tvar zones = scheduler._subtract_timespan_zones(d_t.zones, config.zones);\r\n\t\t\tif (zones.length)\r\n\t\t\t\td_t.zones = zones;\r\n\t\t\telse {\r\n\t\t\t\tday_timespans.splice(i,1);\r\n\t\t\t\ti--;\r\n\t\t\t\t// need to update ids collection\r\n\t\t\t\tvar related_zones = scheduler._marked_timespans_ids[d_t.id];\r\n\t\t\t\tfor (var k=0; k<related_zones.length; k++) {\r\n\t\t\t\t\tif (related_zones[k] == d_t) {\r\n\t\t\t\t\t\trelated_zones.splice(k, 1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tscheduler.deleteMarkedTimespan = function(configuration) {\r\n\t\t// delete everything\r\n\t\tif (!arguments.length) {\r\n\t\t\tscheduler._marked_timespans = { global: {} };\r\n\t\t\tscheduler._marked_timespans_ids = {};\r\n\t\t\tscheduler._marked_timespans_types = {};\r\n\t\t}\r\n\r\n\t\tif (typeof configuration != \"object\") { // id was passed\r\n\t\t\tscheduler._delete_marked_timespan_by_id(configuration);\r\n\t\t} else { // normal configuration was passed\r\n\r\n\t\t\tif(!(configuration.start_date && configuration.end_date)){\r\n\t\t\t\tif(configuration.days === undefined && !configuration.type)\r\n\t\t\t\t\tconfiguration.days = \"fullweek\";\r\n\t\t\t\tif(!configuration.zones)\r\n\t\t\t\t\tconfiguration.zones = \"fullday\";\r\n\t\t\t}\r\n\r\n\t\t\tvar types = [];\r\n\t\t\tif(!configuration.type){\r\n\t\t\t\t//if type not specified - delete timespans of all types\r\n\t\t\t\tfor(var type in scheduler._marked_timespans_types){\r\n\t\t\t\t\ttypes.push(type);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\ttypes.push(configuration.type);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar configs = scheduler._prepare_timespan_options(configuration);\r\n\r\n\t\t\tfor (var i=0; i<configs.length; i++) {\r\n\r\n\t\t\t\tvar config = configs[i];\r\n\t\t\t\tfor( var t=0; t < types.length; t++){\r\n\t\t\t\t\tvar typedConfig = scheduler._lame_clone(config);\r\n\t\t\t\t\ttypedConfig.type = types[t];\r\n\t\t\t\t\tscheduler._delete_marked_timespan_by_config(typedConfig);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n\tscheduler._get_types_to_render = function(common, specific) {\r\n\t\tvar types_to_render = (common) ? scheduler._lame_copy({},common) : {};\r\n\t\tfor (var type in specific||{} ) {\r\n\t\t\tif (specific.hasOwnProperty(type)) {\r\n\t\t\t\ttypes_to_render[type] = specific[type];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn types_to_render;\r\n\t};\r\n\tscheduler._get_configs_to_render = function(types) {\r\n\t\tvar configs = [];\r\n\t\tfor (var type in types) {\r\n\t\t\tif (types.hasOwnProperty(type)) {\r\n\t\t\t\tconfigs.push.apply(configs, types[type]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn configs;\r\n\t};\r\n\r\n\tscheduler._on_scale_add_marker = function(area, day){\r\n\t\tif (scheduler._table_view && scheduler._mode != \"month\")\r\n\t\t\treturn;\r\n\r\n\t\tvar day_index = day.getDay();\r\n\t\tvar day_value = day.valueOf();\r\n\t\tvar mode = this._mode;\r\n\t\tvar timespans = scheduler._marked_timespans;\r\n\t\tvar r_configs = [];\r\n\t\tvar divs = [];\r\n\t\tif (this._props && this._props[mode]) { // we are in the units view and need to draw it's sections as well\r\n\t\t\tvar view = this._props[mode]; // units view object\r\n\t\t\tvar units = view.options;\r\n\t\t\tvar index = scheduler._get_unit_index(view, day);\r\n\t\t\tvar unit = units[index]; // key, label\r\n\r\n\t\t\tif(!(view.days > 1)){\r\n\t\t\t\tday = scheduler.date.date_part(new Date(this._date)); // for units view actually only 1 day is displayed yet the day variable will change, need to use this._date for all calls\r\n\t\t\t}else{\r\n\t\t\t\tvar dx = 24*60*60*1000;\r\n\t\t\t\tvar day_ind = Math.round((day - scheduler._min_date)/dx);\r\n\t\t\t\tvar unitsPerDay = view.size || units.length;\r\n\t\t\t\tday = scheduler.date.add(scheduler._min_date, Math.floor(day_ind/unitsPerDay), \"day\"); // to the \"same\" day for all sections\r\n\t\t\t\tday = scheduler.date.date_part(day);\r\n\t\t\t}\r\n\t\t\tday_index = day.getDay();\r\n\t\t\tday_value = day.valueOf();\r\n\r\n\t\t\tif (timespans[mode] && timespans[mode][unit.key]) {\r\n\t\t\t\tvar unit_zones = timespans[mode][unit.key];\r\n\t\t\t\tvar unit_types = scheduler._get_types_to_render(unit_zones[day_index], unit_zones[day_value]);\r\n\t\t\t\tr_configs.push.apply(r_configs, scheduler._get_configs_to_render(unit_types));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar global_data = timespans[\"global\"];\r\n\r\n\t\tif(scheduler.config.overwrite_marked_timespans){\r\n\t\t\tvar day_types = global_data[day_value]||global_data[day_index];\r\n\t\t\tr_configs.push.apply(r_configs, scheduler._get_configs_to_render(day_types));\r\n\t\t} else {\r\n\t\t\tif(global_data[day_value]){\r\n\t\t\t\tr_configs.push.apply(r_configs, scheduler._get_configs_to_render(global_data[day_value]));\r\n\t\t\t}\r\n\t\t\tif(global_data[day_index]){\r\n\t\t\t\tr_configs.push.apply(r_configs, scheduler._get_configs_to_render(global_data[day_index]));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i=0; i<r_configs.length; i++) {\r\n\t\t\tdivs.push.apply(divs, (scheduler._render_marked_timespan(r_configs[i], area, day)));\r\n\t\t}\r\n\t\treturn divs;\r\n\t};\r\n\tscheduler.attachEvent(\"onScaleAdd\", function(){\r\n\t\tscheduler._on_scale_add_marker.apply(scheduler, arguments);\r\n\t});\r\n\r\n\tscheduler.dblclick_dhx_marked_timespan = function(e,src){\r\n\t\tscheduler.callEvent(\"onScaleDblClick\",[scheduler.getActionData(e).date,src,e]);\r\n\r\n\t\tif (scheduler.config.dblclick_create){\r\n\t\t\tscheduler.addEventNow(scheduler.getActionData(e).date,null,e);\r\n\t\t}\r\n\t};\r\n\r\n};\r\nscheduler._temp_limit_scope();\r\n\r\n\r\n}","export default function(scheduler){\r\n /* global google */\r\n\r\nif(!scheduler.ext){\r\n\tscheduler.ext = {};\r\n}\r\nscheduler.ext.mapView = {\r\n\tgeocoder: null,\r\n\tmap: null,\r\n\tpoints: null,\r\n\tmarkers: null,\r\n\tinfoWindow: null,\r\n\tcreateMarker: function(config){\r\n\t\treturn new google.maps.Marker(config);\r\n\t}\r\n};\r\n\r\n\r\nscheduler.xy.map_date_width = 188; // date column width\r\nscheduler.xy.map_icon_width = 25; // event details icon width\r\nscheduler.xy.map_description_width = 400; // description column width\r\n\r\nscheduler.config.map_resolve_event_location = true; // if events in database doesn't have lat and lng values there will be an attempt to resolve them on event loading, useful for migration\r\nscheduler.config.map_resolve_user_location = true; // if user will be promted to share his location to display it on the map\r\n\r\nscheduler.config.map_initial_position = new google.maps.LatLng(48.724, 8.215); // initial position of the map\r\nscheduler.config.map_error_position = new google.maps.LatLng(15, 15); // this position will be displayed in case if event doesn't have corresponding coordinates\r\n\r\nscheduler.config.map_infowindow_max_width = 300;\r\n\r\nscheduler.config.map_type = google.maps.MapTypeId.ROADMAP;\r\n\r\nscheduler.config.map_zoom_after_resolve = 15;\r\n\r\nscheduler.locale.labels.marker_geo_success = \"It seems you are here.\";\r\nscheduler.locale.labels.marker_geo_fail = \"Sorry, could not get your current position using geolocation.\";\r\n\r\nscheduler.templates.marker_date = scheduler.date.date_to_str(\"%Y-%m-%d %H:%i\"); // date for map's infowindow will be formatted following way\r\n\r\nscheduler.templates.marker_text = function(start, end, ev) {\r\n\treturn \"<div><b>\" + ev.text + \"</b><br/><br/>\" + (ev.event_location || '') + \"<br/><br/>\" + scheduler.templates.marker_date(start) + \" - \" + scheduler.templates.marker_date(end) + \"</div>\";\r\n};\r\nscheduler.dblclick_dhx_map_area = function() {\r\n\tif (!this.config.readonly && this.config.dblclick_create)\r\n\t\tthis.addEventNow({\r\n\t\t\tstart_date: scheduler._date,\r\n\t\t\tend_date: scheduler.date.add(scheduler._date, scheduler.config.time_step, \"minute\")\r\n\t\t});\r\n};\r\nscheduler.templates.map_time = function(start, end, ev) {\r\n\tif (scheduler.config.rtl && !ev._timed) {\r\n\t\treturn scheduler.templates.day_date(end) + \" &ndash; \" + scheduler.templates.day_date(start);\r\n\t} else if (ev._timed) {\r\n\t\treturn this.day_date(ev.start_date, ev.end_date, ev) + \" \" + this.event_date(start);\r\n\t} else {\r\n\t\treturn scheduler.templates.day_date(start) + \" &ndash; \" + scheduler.templates.day_date(end);\r\n\t}\r\n};\r\nscheduler.templates.map_text = function(start, end, ev) {\r\n\treturn ev.text;\r\n};\r\n\r\nscheduler.date.map_start = function(d) {\r\n\treturn d;\r\n};\r\nscheduler.date.add_map = function(date, inc, mode) {\r\n\treturn (new Date(date.valueOf()));\r\n};\r\n\r\nscheduler.templates.map_date = function(dd, ed, mode) {\r\n\treturn '';\r\n};\r\n\r\nscheduler._latLngUpdate = false; // flag for not displaying event second time in case of coordinates update\r\n\r\nscheduler.attachEvent(\"onSchedulerReady\", function() {\r\n\tscheduler._isMapPositionSet = false; // if user actual (geolocation) position was set on the map\r\n\r\n\tconst gmap = document.createElement('div');\r\n\tgmap.className = 'dhx_map';\r\n\tgmap.id = 'dhx_gmap';\r\n\tgmap.style.display = \"none\";\r\n\r\n\tscheduler._obj.appendChild(gmap);\r\n\r\n\tscheduler._els.dhx_gmap = [];\r\n\tscheduler._els.dhx_gmap.push(gmap);\r\n\r\n\t_setMapSize('dhx_gmap');\r\n\r\n\tconst mapOptions = {\r\n\t\tzoom: scheduler.config.map_initial_zoom || 10,\r\n\t\tcenter: scheduler.config.map_initial_position,\r\n\t\tmapTypeId: scheduler.config.map_type || google.maps.MapTypeId.ROADMAP\r\n\t};\r\n\tconst map = new google.maps.Map(document.getElementById('dhx_gmap'), mapOptions);\r\n\tmap.disableDefaultUI = false;\r\n\tmap.disableDoubleClickZoom = !scheduler.config.readonly;\r\n\r\n\tgoogle.maps.event.addListener(map, \"dblclick\", function(event) {\r\n\t\tconst geocoder = scheduler.ext.mapView.geocoder;\r\n\r\n\t\tif (!scheduler.config.readonly && scheduler.config.dblclick_create) {\r\n\t\t\tvar point = event.latLng;\r\n\t\t\tgeocoder.geocode(\r\n\t\t\t\t{ 'latLng': point },\r\n\t\t\t\tfunction(results, status) {\r\n\t\t\t\t\tif (status == google.maps.GeocoderStatus.OK) {\r\n\t\t\t\t\t\tpoint = results[0].geometry.location;\r\n\t\t\t\t\t\tscheduler.addEventNow({\r\n\t\t\t\t\t\t\tlat: point.lat(),\r\n\t\t\t\t\t\t\tlng: point.lng(),\r\n\t\t\t\t\t\t\tevent_location: results[0].formatted_address,\r\n\t\t\t\t\t\t\tstart_date: scheduler._date,\r\n\t\t\t\t\t\t\tend_date: scheduler.date.add(scheduler._date, scheduler.config.time_step, \"minute\")\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t});\r\n\r\n\tvar infoWindowOptions = {\r\n\t\tcontent: ''\r\n\t};\r\n\r\n\tif (scheduler.config.map_infowindow_max_width) {\r\n\t\tinfoWindowOptions.maxWidth = scheduler.config.map_infowindow_max_width;\r\n\t}\r\n\r\n\tscheduler.map = {\r\n\t\t_points: [],\r\n\t\t_markers: [],\r\n\t\t_infowindow: new google.maps.InfoWindow(infoWindowOptions),\r\n\t\t_infowindows_content: [],\r\n\t\t_initialization_count: -1,\r\n\t\t_obj: map\r\n\t};\r\n\r\n\tscheduler.ext.mapView.geocoder = new google.maps.Geocoder();\r\n\tscheduler.ext.mapView.map = map;\r\n\tscheduler.ext.mapView.points = scheduler.map._points;\r\n\tscheduler.ext.mapView.markers = scheduler.map._markers;\r\n\tscheduler.ext.mapView.infoWindow = scheduler.map._infowindow;\r\n\r\n\tif (scheduler.config.map_resolve_user_location) {\r\n\t\tif (navigator.geolocation) {\r\n\t\t\tif (!scheduler._isMapPositionSet) {\r\n\t\t\t\tnavigator.geolocation.getCurrentPosition(function(position) {\r\n\t\t\t\t\tvar _userLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);\r\n\t\t\t\t\tmap.setCenter(_userLocation);\r\n\t\t\t\t\tmap.setZoom(scheduler.config.map_zoom_after_resolve || 10);\r\n\t\t\t\t\tscheduler.map._infowindow.setContent(scheduler.locale.labels.marker_geo_success);\r\n\t\t\t\t\tscheduler.map._infowindow.position = map.getCenter();\r\n\t\t\t\t\tscheduler.map._infowindow.open(map);\r\n\r\n\t\t\t\t\tscheduler._isMapPositionSet = true;\r\n\t\t\t\t},\r\n\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\tscheduler.map._infowindow.setContent(scheduler.locale.labels.marker_geo_fail);\r\n\t\t\t\t\t\t\tscheduler.map._infowindow.setPosition(map.getCenter());\r\n\t\t\t\t\t\t\tscheduler.map._infowindow.open(map);\r\n\t\t\t\t\t\t\tscheduler._isMapPositionSet = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tgoogle.maps.event.addListener(map, \"resize\", function(event) {\r\n\t\tgmap.style.zIndex = '5';\r\n\t\tmap.setZoom(map.getZoom());\r\n\r\n\t});\r\n\tgoogle.maps.event.addListener(map, \"tilesloaded\", function(event) {\r\n\t\tgmap.style.zIndex = '5';\r\n\t});\r\n\r\n\tgmap.style.display = 'none'; // property was changed after attaching map\r\n\r\n\tconst old = scheduler.render_data;\r\n\tscheduler.render_data = function(evs, hold) {\r\n\t\tif (this._mode == \"map\") {\r\n\t\t\tfill_map_tab();\r\n\t\t\tvar events = scheduler.get_visible_events();\r\n\t\t\tfor (var i = 0; i < events.length; i++) {\r\n\t\t\t\tif (!scheduler.map._markers[events[i].id]) {\r\n\t\t\t\t\tshowAddress(events[i], false, false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else\r\n\t\t\treturn old.apply(this, arguments);\r\n\t};\r\n\r\n\tfunction set_full_view(mode) {\r\n\t\tif (mode) {\r\n\t\t\tvar l = scheduler.locale.labels;\r\n\t\t\tscheduler._els[\"dhx_cal_header\"][0].innerHTML = \"<div class='dhx_map_head' style='width: \" + \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(scheduler.xy.map_date_width + scheduler.xy.map_description_width + 2) + \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"px;' ><div class='headline_date' style='width: \" + \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscheduler.xy.map_date_width + \"px;'>\" + l.date + \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"</div><div class='headline_description' style='width: \" + \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscheduler.xy.map_description_width + \"px;'>\" + l.description + \"</div></div>\";\r\n\t\t\tscheduler._table_view = true;\r\n\t\t\tscheduler.set_sizes();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction clear_map_tab() {\r\n\t\tscheduler._selected_event_id = null;\r\n\t\tscheduler.map._infowindow.close();\r\n\t\tvar markers = scheduler.map._markers;\r\n\t\tfor (var key in markers) {\r\n\t\t\tif (markers.hasOwnProperty(key)) {\r\n\t\t\t\tmarkers[key].setMap(null);\r\n\t\t\t\tdelete scheduler.map._markers[key];\r\n\t\t\t\tif (scheduler.map._infowindows_content[key])\r\n\t\t\t\t\tdelete scheduler.map._infowindows_content[key];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction fill_map_tab() {\r\n\t\t//select events for which data need to be printed\r\n\t\tvar events = scheduler.get_visible_events();\r\n\t\tevents.sort(function(a, b) {\r\n\t\t\tif(a.start_date.valueOf()==b.start_date.valueOf())\r\n\t\t\t\treturn a.id>b.id?1:-1;\r\n\t\t\treturn a.start_date>b.start_date?1:-1;\r\n\t\t});\r\n\r\n\t\t//generate html for the view\r\n\t\tvar ariaAttr = scheduler._waiAria.mapAttrString();\r\n\r\n\t\tvar html = \"<div \"+ariaAttr+\" class='dhx_map_area'>\";\r\n\t\tfor (var i = 0; i < events.length; i++) {\r\n\t\t\tvar ev = events[i];\r\n\t\t\tvar event_class = (ev.id == scheduler._selected_event_id) ? 'dhx_map_line highlight' : 'dhx_map_line';\r\n\t\t\tvar bg_color = (ev.color ? (\"--dhx-scheduler-event-background:\" + ev.color + \";\") : \"\");\r\n\t\t\tvar color = (ev.textColor ? (\"--dhx-scheduler-event-color:\" + ev.textColor + \";\") : \"\");\r\n\r\n\t\t\tvar ariaAttr = scheduler._waiAria.mapRowAttrString(ev);\r\n\t\t\tvar ariaButtonAttr = scheduler._waiAria.mapDetailsBtnString();\r\n\r\n\t\t\thtml += \"<div \"+ariaAttr+\" class='\" + event_class + \"' event_id='\" + ev.id + \"' \"+scheduler.config.event_attribute+\"='\"+ev.id+\"' style='\" + bg_color + \"\" + color + \"\" + (ev._text_style || \"\") + \" width: \" + (scheduler.xy.map_date_width + scheduler.xy.map_description_width + 2) + \"px;'><div class='dhx_map_event_time' style='width: \" + scheduler.xy.map_date_width + \"px;' >\" + scheduler.templates.map_time(ev.start_date, ev.end_date, ev) + \"</div>\";\r\n\t\t\thtml += `<div ${ariaButtonAttr} class='dhx_event_icon icon_details'><svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t\t<path d=\"M15.4444 16.4H4.55556V7.6H15.4444V16.4ZM13.1111 2V3.6H6.88889V2H5.33333V3.6H4.55556C3.69222 3.6 3 4.312 3 5.2V16.4C3 16.8243 3.16389 17.2313 3.45561 17.5314C3.74733 17.8314 4.143 18 4.55556 18H15.4444C15.857 18 16.2527 17.8314 16.5444 17.5314C16.8361 17.2313 17 16.8243 17 16.4V5.2C17 4.312 16.3 3.6 15.4444 3.6H14.6667V2H13.1111ZM13.8889 10.8H10V14.8H13.8889V10.8Z\" fill=\"#A1A4A6\"/>\r\n\t\t\t</svg></div>`;\r\n\t\t\thtml += \"<div class='line_description' style='width:\" + (scheduler.xy.map_description_width - scheduler.xy.map_icon_width) + \"px;'>\" + scheduler.templates.map_text(ev.start_date, ev.end_date, ev) + \"</div></div>\"; // -25 = icon size 20 and padding 5\r\n\t\t}\r\n\t\thtml += \"<div class='dhx_v_border' style=\"+(scheduler.config.rtl ? \"'right: \" : \"'left: \") + (scheduler.xy.map_date_width - 1) + \"px;'></div><div class='dhx_v_border_description'></div></div>\";\r\n\r\n\t\t//render html\r\n\t\tscheduler._els[\"dhx_cal_data\"][0].scrollTop = 0; //fix flickering in FF\r\n\t\tscheduler._els[\"dhx_cal_data\"][0].innerHTML = html;\r\n\t//\tscheduler._els[\"dhx_cal_data\"][0].style.width = (scheduler.xy.map_date_width + scheduler.xy.map_description_width + 1) + 'px';\r\n\r\n\t\tvar t = scheduler._els[\"dhx_cal_data\"][0].firstChild.childNodes;\r\n\r\n\t\tvar dateElement = scheduler._getNavDateElement();\r\n\t\tif(dateElement){\r\n\t\t\tdateElement.innerHTML=scheduler.templates[scheduler._mode + \"_date\"](scheduler._min_date, scheduler._max_date, scheduler._mode);\r\n\t\t}\r\n\r\n\t\tscheduler._rendered = [];\r\n\t\tfor (var i = 0; i < t.length - 2; i++) {\r\n\t\t\tscheduler._rendered[i] = t[i];\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _setMapSize(elem_id) { //input - map's div id\r\n\t\tvar map = document.getElementById(elem_id);\r\n\t\tconst nav_height = scheduler.$container.querySelector(\".dhx_cal_navline\").offsetHeight;\r\n\t\tvar height = scheduler._y - nav_height;\r\n\t\tif (height < 0)\r\n\t\t\theight = 0;\r\n\t\tvar width = scheduler._x - scheduler.xy.map_date_width - scheduler.xy.map_description_width - 1;\r\n\t\tif (width < 0)\r\n\t\t\twidth = 0;\r\n\t\tmap.style.height = height + 'px';\r\n\t\tmap.style.width = width + 'px';\r\n\t\tmap.style.position = \"absolute\";\r\n\t\tmap.style.top = nav_height + \"px\";\r\n\t\tif (scheduler.config.rtl) {\r\n\t\t\tmap.style.marginRight = (scheduler.xy.map_date_width + scheduler.xy.map_description_width + 1) + 'px';\r\n\t\t} else {\r\n\t\t\tmap.style.marginLeft = (scheduler.xy.map_date_width + scheduler.xy.map_description_width + 1) + 'px';\r\n\t\t}\r\n\t\tmap.style.marginTop = (scheduler.xy.nav_height + 2) + 'px';\r\n\t}\r\n\r\n\tscheduler.map_view = function(mode) {\r\n\t\tscheduler.map._initialization_count++;\r\n\t\tvar gmap = scheduler._els.dhx_gmap[0];\r\n\t\tvar temp_center;\r\n\t\t//scheduler._els.dhx_cal_data[0].style.width = (scheduler.xy.map_date_width + scheduler.xy.map_description_width + 1) + 'px';\r\n\r\n\t\tscheduler._min_date = scheduler.config.map_start || (scheduler._currentDate());\r\n\t\tscheduler._max_date = scheduler.config.map_end || scheduler.date.add(scheduler._currentDate(), 1, \"year\");\r\n\r\n\t\tscheduler._table_view = true;\r\n\t\tset_full_view(mode);\r\n\r\n\t\tif (mode) { //map tab activated\r\n\t\t\tclear_map_tab();\r\n\t\t\tfill_map_tab();\r\n\t\t\tgmap.style.display = 'block';\r\n\r\n\t\t\t// need to resize block every time window is resized\r\n\t\t\t_setMapSize('dhx_gmap');\r\n\t\t\ttemp_center = scheduler.map._obj.getCenter();\r\n\r\n\t\t\tvar events = scheduler.get_visible_events();\r\n\t\t\tfor (var i = 0; i < events.length; i++) {\r\n\t\t\t\tif (!scheduler.map._markers[events[i].id]) {\r\n\t\t\t\t\tshowAddress(events[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} else { //map tab de-activated\r\n\t\t\tgmap.style.display = 'none';\r\n\t\t}\r\n\t\tgoogle.maps.event.trigger(scheduler.map._obj, 'resize');\r\n\r\n\t\tif (scheduler.map._initialization_count === 0 && temp_center) { // if tab is activated for the first time need to fix position\r\n\t\t\tscheduler.map._obj.setCenter(temp_center);\r\n\t\t}\r\n\r\n\t\tif (scheduler._selected_event_id) {\r\n\t\t\tselectEvent(scheduler._selected_event_id);\r\n\t\t}\r\n\t};\r\n\r\n\tvar selectEvent = function(event_id) {\r\n\t\tscheduler.map._obj.setCenter(scheduler.map._points[event_id]);\r\n\t\tscheduler.callEvent(\"onClick\", [event_id]);\r\n\t};\r\n\r\n\tvar showAddress = function(event, setCenter, performClick) { // what if event have incorrect position from the start?\r\n\t\tvar point = scheduler.config.map_error_position;\r\n\t\tif (event.lat && event.lng) {\r\n\t\t\tpoint = new google.maps.LatLng(event.lat, event.lng);\r\n\t\t}\r\n\t\tvar message = scheduler.templates.marker_text(event.start_date, event.end_date, event);\r\n\t\tif (!scheduler._new_event) {\r\n\r\n\t\t\tscheduler.map._infowindows_content[event.id] = message;\r\n\r\n\t\t\tif (scheduler.map._markers[event.id])\r\n\t\t\t\tscheduler.map._markers[event.id].setMap(null);\r\n\r\n\t\t\tscheduler.map._markers[event.id] = scheduler.ext.mapView.createMarker({\r\n\t\t\t\tposition: point,\r\n\t\t\t\tmap: scheduler.map._obj\r\n\t\t\t});\r\n\r\n\t\t\tgoogle.maps.event.addListener(scheduler.map._markers[event.id], 'click', function() {\r\n\t\t\t\tscheduler.map._infowindow.setContent(scheduler.map._infowindows_content[event.id]);\r\n\t\t\t\tscheduler.map._infowindow.open(scheduler.map._obj, scheduler.map._markers[event.id]);\r\n\t\t\t\tscheduler._selected_event_id = event.id;\r\n\t\t\t\tscheduler.render_data();\r\n\t\t\t});\r\n\t\t\tscheduler.map._points[event.id] = point;\r\n\r\n\t\t\tif (setCenter) scheduler.map._obj.setCenter(scheduler.map._points[event.id]);\r\n\t\t\tif (performClick) scheduler.callEvent(\"onClick\", [event.id]);\r\n\t\t}\r\n\t};\r\n\r\n\tscheduler.attachEvent(\"onClick\", function(id, domEvent) {\r\n\t\tif (this._mode == \"map\") {\r\n\t\t\tscheduler._selected_event_id = id;\r\n\t\t\tfor (var i = 0; i < scheduler._rendered.length; i++) {\r\n\t\t\t\tscheduler._rendered[i].className = 'dhx_map_line';\r\n\t\t\t\tif (scheduler._rendered[i].getAttribute(scheduler.config.event_attribute) == id) {\r\n\t\t\t\t\tscheduler._rendered[i].className += \" highlight\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (scheduler.map._points[id] && scheduler.map._markers[id]) {\r\n\t\t\t\tscheduler.map._obj.setCenter(scheduler.map._points[id]); // was panTo\r\n\t\t\t\tgoogle.maps.event.trigger(scheduler.map._markers[id], 'click');\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\tvar _displayEventOnMap = function(event) {\r\n\t\tconst geocoder = scheduler.ext.mapView.geocoder;\r\n\t\tif (event.event_location && geocoder) {\r\n\t\t\tgeocoder.geocode(\r\n\t\t\t\t{\r\n\t\t\t\t\t'address': event.event_location,\r\n\t\t\t\t\t'language': scheduler.uid().toString()\r\n\t\t\t\t},\r\n\t\t\t\tfunction(results, status) {\r\n\t\t\t\t\tvar point = {};\r\n\t\t\t\t\tif (status != google.maps.GeocoderStatus.OK) {\r\n\t\t\t\t\t\tpoint = scheduler.callEvent(\"onLocationError\", [event.id]);\r\n\t\t\t\t\t\tif (!point || point === true)\r\n\t\t\t\t\t\t\tpoint = scheduler.config.map_error_position;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpoint = results[0].geometry.location;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.lat = point.lat();\r\n\t\t\t\t\tevent.lng = point.lng();\r\n\r\n\t\t\t\t\tscheduler._selected_event_id = event.id;\r\n\r\n\t\t\t\t\tscheduler._latLngUpdate = true;\r\n\t\t\t\t\tscheduler.callEvent(\"onEventChanged\", [event.id, event]);\r\n\t\t\t\t\tshowAddress(event, true, true);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tshowAddress(event, true, true);\r\n\t\t}\r\n\t};\r\n\r\n\tvar _updateEventLocation = function(event) { // update lat and lng in database\r\n\t\tconst geocoder = scheduler.ext.mapView.geocoder;\r\n\t\tif (event.event_location && geocoder) {\r\n\t\t\tgeocoder.geocode(\r\n\t\t\t\t{\r\n\t\t\t\t\t'address': event.event_location,\r\n\t\t\t\t\t'language': scheduler.uid().toString()\r\n\t\t\t\t},\r\n\t\t\t\tfunction(results, status) {\r\n\t\t\t\t\tvar point = {};\r\n\t\t\t\t\tif (status != google.maps.GeocoderStatus.OK) {\r\n\t\t\t\t\t\tpoint = scheduler.callEvent(\"onLocationError\", [event.id]);\r\n\t\t\t\t\t\tif (!point || point === true)\r\n\t\t\t\t\t\t\tpoint = scheduler.config.map_error_position;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpoint = results[0].geometry.location;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tevent.lat = point.lat();\r\n\t\t\t\t\tevent.lng = point.lng();\r\n\t\t\t\t\tscheduler._latLngUpdate = true;\r\n\t\t\t\t\tscheduler.callEvent(\"onEventChanged\", [event.id, event]);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\tvar _delay = function(method, object, params, delay) {\r\n\t\tsetTimeout(function() {\r\n\t\t\tif(scheduler.$destroyed){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar ret = method.apply(object, params);\r\n\t\t\tmethod = object = params = null;\r\n\t\t\treturn ret;\r\n\t\t}, delay || 1);\r\n\t};\r\n\r\n\tscheduler.attachEvent(\"onEventChanged\", function(id, event) {\r\n\t\tif (!this._latLngUpdate) {\r\n\t\t\tvar event = scheduler.getEvent(id);\r\n\t\t\tif ((event.start_date < scheduler._min_date && event.end_date > scheduler._min_date) || (event.start_date < scheduler._max_date && event.end_date > scheduler._max_date) || (event.start_date.valueOf() >= scheduler._min_date && event.end_date.valueOf() <= scheduler._max_date)) {\r\n\t\t\t\tif (scheduler.map._markers[id])\r\n\t\t\t\t\tscheduler.map._markers[id].setMap(null);\r\n\t\t\t\t_displayEventOnMap(event);\r\n\t\t\t} else { // event no longer should be displayed on the map view\r\n\t\t\t\tscheduler._selected_event_id = null;\r\n\t\t\t\tscheduler.map._infowindow.close();\r\n\t\t\t\tif (scheduler.map._markers[id])\r\n\t\t\t\t\tscheduler.map._markers[id].setMap(null);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis._latLngUpdate = false;\r\n\t\treturn true;\r\n\t});\r\n\r\n\r\n\tscheduler.attachEvent(\"onEventIdChange\", function(old_event_id, new_event_id) {\r\n\t\tvar event = scheduler.getEvent(new_event_id);\r\n\t\tif ((event.start_date < scheduler._min_date && event.end_date > scheduler._min_date) || (event.start_date < scheduler._max_date && event.end_date > scheduler._max_date) || (event.start_date.valueOf() >= scheduler._min_date && event.end_date.valueOf() <= scheduler._max_date)) {\r\n\t\t\tif (scheduler.map._markers[old_event_id]) {\r\n\t\t\t\tscheduler.map._markers[old_event_id].setMap(null);\r\n\t\t\t\tdelete scheduler.map._markers[old_event_id];\r\n\t\t\t}\r\n\t\t\tif (scheduler.map._infowindows_content[old_event_id])\r\n\t\t\t\tdelete scheduler.map._infowindows_content[old_event_id];\r\n\t\t\t_displayEventOnMap(event);\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\tscheduler.attachEvent(\"onEventAdded\", function(id, event) {\r\n\t\tif (!scheduler._dataprocessor) {\r\n\t\t\tif ((event.start_date < scheduler._min_date && event.end_date > scheduler._min_date) || (event.start_date < scheduler._max_date && event.end_date > scheduler._max_date) || (event.start_date.valueOf() >= scheduler._min_date && event.end_date.valueOf() <= scheduler._max_date)) {\r\n\t\t\t\tif (scheduler.map._markers[id])\r\n\t\t\t\t\tscheduler.map._markers[id].setMap(null);\r\n\t\t\t\t_displayEventOnMap(event);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\t/* Test/example\r\n\t scheduler.attachEvent(\"onLocationError\", function(event_id,event_object){\r\n\t return new google.maps.LatLng(8, 8);\r\n\t });\r\n\t */\r\n\r\n\tscheduler.attachEvent(\"onBeforeEventDelete\", function(id, event) {\r\n\t\tif (scheduler.map._markers[id]) {\r\n\t\t\tscheduler.map._markers[id].setMap(null); // if new event is deleted tab != map then it doesn't have marker yet\r\n\t\t}\r\n\t\tscheduler._selected_event_id = null;\r\n\t\tscheduler.map._infowindow.close();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tscheduler._event_resolve_delay = 1500;\r\n\tscheduler.attachEvent(\"onEventLoading\", function(event) {\r\n\t\tif (scheduler.config.map_resolve_event_location && event.event_location && !event.lat && !event.lng) { // don't delete !event.lat && !event.lng as location could change\r\n\t\t\tscheduler._event_resolve_delay += 1500;\r\n\t\t\t_delay(_updateEventLocation, this, [event], scheduler._event_resolve_delay);\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\tscheduler.attachEvent(\"onEventCancel\", function(id, is_new) {\r\n\t\tif (is_new) {\r\n\t\t\tif (scheduler.map._markers[id])\r\n\t\t\t\tscheduler.map._markers[id].setMap(null);\r\n\t\t\tscheduler.map._infowindow.close();\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n});\r\n\r\n\r\n}","export default function(scheduler){\r\n\r\nconst minicalDomEvents = scheduler._createDomEventScope();\r\n\t\r\n\r\nscheduler.config.minicalendar = {\r\n\tmark_events: true\r\n};\r\nscheduler._synced_minicalendars = [];\r\nscheduler.renderCalendar = function(obj, _prev, is_refresh) {\r\n\tvar cal = null;\r\n\tvar date = obj.date || (scheduler._currentDate());\r\n\tif (typeof date == \"string\")\r\n\t\tdate = this.templates.api_date(date);\r\n\r\n\tif (!_prev) {\r\n\t\tvar cont = obj.container;\r\n\t\tvar pos = obj.position;\r\n\r\n\t\tif (typeof cont == \"string\")\r\n\t\t\tcont = document.getElementById(cont);\r\n\r\n\t\tif (typeof pos == \"string\")\r\n\t\t\tpos = document.getElementById(pos);\r\n\t\tif (pos && (typeof pos.left == \"undefined\" && typeof pos.right == \"undefined\")) {\r\n\t\t\tvar tpos = scheduler.$domHelpers.getOffset(pos);\r\n\t\t\tpos = {\r\n\t\t\t\ttop: tpos.top + pos.offsetHeight,\r\n\t\t\t\tleft: tpos.left\r\n\t\t\t};\r\n\t\t}\r\n\t\tif (!cont)\r\n\t\t\tcont = scheduler._get_def_cont(pos);\r\n\r\n\t\tcal = this._render_calendar(cont, date, obj);\r\n\t\r\n\t\tif (!cal.$_eventAttached) {\r\n\t\t\tcal.$_eventAttached = true;\r\n\t\t\tminicalDomEvents.attach(cal, \"click\", (function(e) {\r\n\t\t\t\tvar src = e.target || e.srcElement;\r\n\r\n\t\t\t\tvar $dom = scheduler.$domHelpers;\r\n\t\t\t\tif ($dom.closest(src, \".dhx_month_head\")) {\r\n\t\t\t\t\tif (!$dom.closest(src, \".dhx_after\") && !$dom.closest(src, \".dhx_before\")) {\r\n\r\n\t\t\t\t\t\tvar cellRoot = $dom.closest(src, \"[data-cell-date]\");\r\n\t\t\t\t\t\tvar dateAttribute = cellRoot.getAttribute(\"data-cell-date\");\r\n\t\t\t\t\t\tvar newDate = scheduler.templates.parse_date(dateAttribute);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tscheduler.unmarkCalendar(this);\r\n\t\t\t\t\t\tscheduler.markCalendar(this, newDate, \"dhx_calendar_click\");\r\n\t\t\t\t\t\tthis._last_date = newDate;\r\n\t\t\t\t\t\tif (this.conf.handler) this.conf.handler.call(scheduler, newDate, this);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}).bind(cal));\r\n\t\t}\r\n\t\r\n\t} else {\r\n\t\tcal = this._render_calendar(_prev.parentNode, date, obj, _prev);\r\n\t\tscheduler.unmarkCalendar(cal);\r\n\t}\r\n\r\n\tif (scheduler.config.minicalendar.mark_events) {\r\n\t\tvar start = scheduler.date.month_start(date);\r\n\t\tvar end = scheduler.date.add(start, 1, \"month\");\r\n\t\tvar evs = this.getEvents(start, end);\r\n\t\tvar filter = this[\"filter_\" + this._mode];\r\n\t\tvar markedDates = {};\r\n\t\tfor (var i = 0; i < evs.length; i++) {\r\n\t\t\tvar ev = evs[i];\r\n\t\t\tif (filter && !filter(ev.id, ev))\r\n\t\t\t\tcontinue;\r\n\t\t\tvar d = ev.start_date;\r\n\t\t\tif (d.valueOf() < start.valueOf())\r\n\t\t\t\td = start;\r\n\t\t\td = scheduler.date.date_part(new Date(d.valueOf()));\r\n\t\t\twhile (d < ev.end_date) {\r\n\t\t\t\tif(!markedDates[+d]) {\r\n\t\t\t\t\tmarkedDates[+d] = true;\r\n\t\t\t\t\tthis.markCalendar(cal, d, \"dhx_year_event\");\r\n\t\t\t\t}\r\n\t\t\t\td = this.date.add(d, 1, \"day\");\r\n\t\t\t\tif (d.valueOf() >= end.valueOf())\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tthis._markCalendarCurrentDate(cal);\r\n\r\n\tcal.conf = obj;\r\n\tif (obj.sync && !is_refresh)\r\n\t\tthis._synced_minicalendars.push(cal);\r\n\r\n\tif(!cal.conf._on_xle_handler){\r\n\t\tcal.conf._on_xle_handler = scheduler.attachEvent(\"onXLE\", function refreshOnLoad(){\r\n\t\t\tscheduler.updateCalendar(cal, cal.conf.date);\r\n\t\t});\r\n\t}\r\n\r\n\tif(this.config.wai_aria_attributes && this.config.wai_aria_application_role){\r\n\t\tcal.setAttribute(\"role\", \"application\");\r\n\t}\r\n\r\n\treturn cal;\r\n};\r\nscheduler._get_def_cont = function(pos) {\r\n\tif (!this._def_count) {\r\n\t\tthis._def_count = document.createElement(\"div\");\r\n\t\tthis._def_count.className = \"dhx_minical_popup\";\r\n\t\tscheduler.event(this._def_count, \"click\", function(e) { e.cancelBubble = true; });\r\n\t\tdocument.body.appendChild(this._def_count);\r\n\t}\r\n\r\n\tif(pos.left){\r\n\t\tthis._def_count.style.left = pos.left + \"px\";\r\n\t}\r\n\tif(pos.right){\r\n\t\tthis._def_count.style.right = pos.right + \"px\";\r\n\t}\r\n\tif(pos.top){\r\n\t\tthis._def_count.style.top = pos.top + \"px\";\r\n\t}\r\n\tif(pos.bottom){\r\n\t\tthis._def_count.style.bottom = pos.bottom + \"px\";\r\n\t}\r\n\r\n\tthis._def_count._created = new Date();\r\n\r\n\treturn this._def_count;\r\n};\r\nscheduler._locateCalendar = function(cal, date) {\r\n\tif (typeof date == \"string\")\r\n\t\tdate = scheduler.templates.api_date(date);\r\n\r\n\tif(+date > +cal._max_date || +date < +cal._min_date)\r\n\t\treturn null;\r\n\r\n\tvar table = cal.querySelector(\".dhx_year_body\").childNodes[0];\r\n\r\n\tvar weekNum = 0;\r\n\tvar dat = new Date(cal._min_date);\r\n\twhile(+this.date.add(dat, 1, \"week\") <= +date){\r\n\t\tdat = this.date.add(dat, 1, \"week\");\r\n\t\tweekNum++;\r\n\t}\r\n\r\n\tvar sm = scheduler.config.start_on_monday;\r\n\tvar day = (date.getDay() || (sm ? 7 : 0)) - (sm ? 1 : 0);\r\n\r\n\tconst dayCell = table.querySelector(`.dhx_cal_month_row:nth-child(${weekNum + 1}) .dhx_cal_month_cell:nth-child(${day + 1})`);\r\n\tif(dayCell) {\r\n\t\treturn dayCell.firstChild;\r\n\t} else {\r\n\t\treturn null;\r\n\t}\r\n};\r\nscheduler.markCalendar = function(cal, date, css) {\r\n\tvar div = this._locateCalendar(cal, date);\r\n\tif(!div)\r\n\t\treturn;\r\n\r\n\tdiv.className += \" \" + css;\r\n};\r\nscheduler.unmarkCalendar = function(cal, date, css) {\r\n\tdate = date || cal._last_date;\r\n\tcss = css || \"dhx_calendar_click\";\r\n\tif (!date) return;\r\n\tvar el = this._locateCalendar(cal, date);\r\n\tif(!el)\r\n\t\treturn;\r\n\tel.className = (el.className || \"\").replace(RegExp(css, \"g\"));\r\n};\r\nscheduler._week_template = function(width) {\r\n\tvar summ = (width || 250);\r\n\tvar left = 0;\r\n\r\n\tvar week_template = document.createElement(\"div\");\r\n\tvar dummy_date = this.date.week_start(scheduler._currentDate());\r\n\tfor (var i = 0; i < 7; i++) {\r\n\t\tthis._cols[i] = Math.floor(summ / (7 - i));\r\n\t\tthis._render_x_header(i, left, dummy_date, week_template);\r\n\t\tdummy_date = this.date.add(dummy_date, 1, \"day\");\r\n\t\tsumm -= this._cols[i];\r\n\t\tleft += this._cols[i];\r\n\t}\r\n\tweek_template.lastChild.className += \" dhx_scale_bar_last\";\r\n\treturn week_template;\r\n};\r\nscheduler.updateCalendar = function(obj, sd) {\r\n\tobj.conf.date = sd;\r\n\tthis.renderCalendar(obj.conf, obj, true);\r\n};\r\nscheduler._mini_cal_arrows = [\"&nbsp;\", \"&nbsp;\"];\r\nscheduler._render_calendar = function(obj, sd, conf, previous) {\r\n\t/*store*/\r\n\tvar ts = scheduler.templates;\r\n\tvar temp = this._cols;\r\n\tthis._cols = [];\r\n\tvar temp2 = this._mode;\r\n\tthis._mode = \"calendar\";\r\n\tvar temp3 = this._colsS;\r\n\tthis._colsS = {height: 0};\r\n\tvar temp4 = new Date(this._min_date);\r\n\tvar temp5 = new Date(this._max_date);\r\n\tvar temp6 = new Date(scheduler._date);\r\n\tvar temp7 = ts.month_day;\r\n\tvar temp8 = this._ignores_detected; this._ignores_detected = 0;\r\n\tts.month_day = ts.calendar_date;\r\n\r\n\tsd = this.date.month_start(sd);\r\n\tvar week_template = this._week_template(obj.offsetWidth - 1 - this.config.minicalendar.padding );\r\n\r\n\tvar d;\r\n\tif (previous){\r\n\t\td = previous;\r\n\t} else {\r\n\t\td = document.createElement(\"div\");\r\n\t\td.className = \"dhx_cal_container dhx_mini_calendar\";\r\n\t}\r\n\td.setAttribute(\"date\", this._helpers.formatDate(sd));\r\n\td.innerHTML = \"<div class='dhx_year_month'></div>\" +\r\n\t\t\t\"<div class='dhx_year_grid\" +\r\n\t\t\t(scheduler.config.rtl ? \" dhx_grid_rtl'>\" : \"'>\") +\r\n\t\t\t\"<div class='dhx_year_week'>\"+(week_template ? week_template.innerHTML : \"\")+\"</div>\" +\r\n\t\t\t\"<div class='dhx_year_body'></div>\" +\r\n\t\t\"</div>\";\r\n\tvar header = d.querySelector(\".dhx_year_month\");\r\n\tvar weekHeader = d.querySelector(\".dhx_year_week\");\r\n\tvar body = d.querySelector(\".dhx_year_body\");\r\n\r\n\theader.innerHTML = this.templates.calendar_month(sd);\r\n\tif (conf.navigation) {\r\n\t\tvar move_minicalendar_date = function(calendar, diff) {\r\n\t\t\tvar date = scheduler.date.add(calendar._date, diff, \"month\");\r\n\t\t\tscheduler.updateCalendar(calendar, date);\r\n\t\t\tif (scheduler._date.getMonth() == calendar._date.getMonth() && scheduler._date.getFullYear() == calendar._date.getFullYear()) {\r\n\t\t\t\tscheduler._markCalendarCurrentDate(calendar);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar css_classnames = [\"dhx_cal_prev_button\", \"dhx_cal_next_button\"];\r\n\t\tvar css_texts = [\"left:1px;top:4px;position:absolute;\", \"left:auto; right:1px;top:4px;position:absolute;\"];\r\n\t\tvar diffs = [-1, 1];\r\n\t\tvar handler = function(diff) {\r\n\t\t\treturn function() {\t\r\n\t\t\t\tif (conf.sync) {\r\n\t\t\t\t\tvar calendars = scheduler._synced_minicalendars;\r\n\t\t\t\t\tfor (var k = 0; k < calendars.length; k++) {\r\n\t\t\t\t\t\tmove_minicalendar_date(calendars[k], diff);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (scheduler.config.rtl) {\r\n\t\t\t\t\t\tdiff = -diff;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmove_minicalendar_date(d, diff);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t};\r\n\t\tvar labels = [scheduler.locale.labels.prev, scheduler.locale.labels.next];\r\n\t\tfor (var j = 0; j < 2; j++) {\r\n\t\t\tvar arrow = document.createElement(\"div\");\r\n\t\t\t//var diff = diffs[j];\r\n\t\t\tarrow.className = css_classnames[j];\r\n\r\n\t\t\tscheduler._waiAria.headerButtonsAttributes(arrow, labels[j]);\r\n\r\n\t\t\tarrow.style.cssText = css_texts[j];\r\n\t\t\tarrow.innerHTML = this._mini_cal_arrows[j];\r\n\t\t\theader.appendChild(arrow);\r\n\t\t\tminicalDomEvents.attach(arrow, \"click\", handler(diffs[j]));\r\n\t\t}\r\n\t}\r\n\td._date = new Date(sd);\r\n\r\n\td.week_start = (sd.getDay() - (this.config.start_on_monday ? 1 : 0) + 7) % 7;\r\n\r\n\tvar dd = d._min_date = this.date.week_start(sd);\r\n\td._max_date = this.date.add(d._min_date, 6, \"week\");\r\n\r\n\tthis._reset_month_scale(body, sd, dd, 6);\r\n\r\n\tif (!previous)\r\n\t\tobj.appendChild(d);\r\n\r\n\tweekHeader.style.height = (weekHeader.childNodes[0].offsetHeight - 1) + \"px\"; // dhx_year_week should have height property so that day dates would get correct position. dhx_year_week height = height of it's child (with the day name)\r\n\r\n\tvar headerId = scheduler.uid();\r\n\tscheduler._waiAria.minicalHeader(header, headerId);\r\n\tscheduler._waiAria.minicalGrid(d.querySelector(\".dhx_year_grid\"), headerId);\r\n\tscheduler._waiAria.minicalRow(weekHeader);\r\n\r\n\tvar dayHeaders = weekHeader.querySelectorAll(\".dhx_scale_bar\");\r\n\tfor(var i = 0; i < dayHeaders.length; i++){\r\n\t\tscheduler._waiAria.minicalHeadCell(dayHeaders[i]);\r\n\t}\r\n\tvar dayCells = body.querySelectorAll(\".dhx_cal_month_cell\");\r\n\tvar firstDate = new Date(dd);\r\n\tfor(var i = 0; i < dayCells.length; i++){\r\n\r\n\t\tscheduler._waiAria.minicalDayCell(dayCells[i], new Date(firstDate));\r\n\t\tfirstDate = scheduler.date.add(firstDate, 1, \"day\");\r\n\t}\r\n\r\n\tscheduler._waiAria.minicalHeader(header, headerId);\r\n\r\n\t/*restore*/\r\n\tthis._cols = temp;\r\n\tthis._mode = temp2;\r\n\tthis._colsS = temp3;\r\n\tthis._min_date = temp4;\r\n\tthis._max_date = temp5;\r\n\tscheduler._date = temp6;\r\n\tts.month_day = temp7;\r\n\tthis._ignores_detected = temp8;\r\n\treturn d;\r\n};\r\nscheduler.destroyCalendar = function(cal, force) {\r\n\tif (!cal && this._def_count && this._def_count.firstChild) {\r\n\t\tif (force || (new Date()).valueOf() - this._def_count._created.valueOf() > 500)\r\n\t\t\tcal = this._def_count.firstChild;\r\n\t}\r\n\tif (!cal) return;\r\n\tminicalDomEvents.detachAll();\r\n\t//cal.onclick = null;\r\n\tcal.innerHTML = \"\";\r\n\tif (cal.parentNode)\r\n\t\tcal.parentNode.removeChild(cal);\r\n\tif (this._def_count)\r\n\t\tthis._def_count.style.top = \"-1000px\";\r\n\r\n\tif(cal.conf && cal.conf._on_xle_handler)\r\n\t\tscheduler.detachEvent(cal.conf._on_xle_handler);\r\n};\r\nscheduler.isCalendarVisible = function() {\r\n\tif (this._def_count && parseInt(this._def_count.style.top, 10) > 0)\r\n\t\treturn this._def_count;\r\n\treturn false;\r\n};\r\n\r\nscheduler.attachEvent(\"onTemplatesReady\", function() {\r\n\tscheduler.event(document.body, \"click\", function() { scheduler.destroyCalendar(); });\r\n}, {once: true});\r\n\r\n\r\n\r\nscheduler.form_blocks.calendar_time = {\r\n\trender: function(sns) {\r\n\t\tvar html = \"<span class='dhx_minical_input_wrapper'><input class='dhx_readonly dhx_minical_input' type='text' readonly='true'></span>\";\r\n\r\n\t\tvar cfg = scheduler.config;\r\n\t\tvar dt = this.date.date_part(scheduler._currentDate());\r\n\r\n\t\tvar last = 24 * 60, first = 0;\r\n\t\tif (cfg.limit_time_select) {\r\n\t\t\tfirst = 60 * cfg.first_hour;\r\n\t\t\tlast = 60 * cfg.last_hour + 1;  // to include \"17:00\" option if time select is limited\r\n\t\t}\r\n\t\tdt.setHours(first / 60);\r\n\r\n\t\tsns._time_values = [];\r\n\t\thtml += \" <select class='dhx_lightbox_time_select'>\";\r\n\t\tfor (var i = first; i < last; i += this.config.time_step * 1) { // `<` to exclude last \"00:00\" option\r\n\t\t\tvar time = this.templates.time_picker(dt);\r\n\t\t\thtml += \"<option value='\" + i + \"'>\" + time + \"</option>\";\r\n\t\t\tsns._time_values.push(i);\r\n\t\t\tdt = this.date.add(dt, this.config.time_step, \"minute\");\r\n\t\t}\r\n\t\thtml += \"</select>\";\r\n\r\n\t\t//var full_day = scheduler.config.full_day;\r\n\r\n\t\treturn \"<div class='dhx_section_time dhx_lightbox_minical'>\" + html + \"<span class='dhx_lightbox_minical_spacer'> &nbsp;&ndash;&nbsp; </span>\" + html + \"</div>\";\r\n\t},\r\n\tset_value: function(node, value, ev, config) {\r\n\r\n\t\tvar inputs = node.getElementsByTagName(\"input\");\r\n\t\tvar selects = node.getElementsByTagName(\"select\");\r\n\t\tvar start_date,\r\n\t\t\tend_date;\r\n\r\n\t\tvar _init_once = function(inp, date, number) {\r\n\t\t\tscheduler.event(inp, \"click\", function() {\r\n\t\t\t\tscheduler.destroyCalendar(null, true);\r\n\t\t\t\tscheduler.renderCalendar({\r\n\t\t\t\t\tposition: inp,\r\n\t\t\t\t\tdate: new Date(this._date),\r\n\t\t\t\t\tnavigation: true,\r\n\t\t\t\t\thandler: function(new_date) {\r\n\t\t\t\t\t\tinp.value = scheduler.templates.calendar_time(new_date);\r\n\t\t\t\t\t\tinp._date = new Date(new_date);\r\n\t\t\t\t\t\tscheduler.destroyCalendar();\r\n\t\t\t\t\t\tif (scheduler.config.event_duration && scheduler.config.auto_end_date && number === 0) { //first element = start date\r\n\t\t\t\t\t\t\t_update_minical_select();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tif (scheduler.config.full_day) {\r\n\t\t\tif (!node._full_day) {\r\n\t\t\t\tvar html = \"<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> \" + scheduler.locale.labels.full_day + \"&nbsp;</label></input>\";\r\n\t\t\t\tif (!scheduler.config.wide_form)\r\n\t\t\t\t\thtml = node.previousSibling.innerHTML + html;\r\n\t\t\t\tnode.previousSibling.innerHTML = html;\r\n\t\t\t\tnode._full_day = true;\r\n\t\t\t}\r\n\t\t\tvar input = node.previousSibling.getElementsByTagName(\"input\")[0];\r\n\r\n\t\t\tvar isFulldayEvent = (scheduler.date.time_part(ev.start_date) === 0 && scheduler.date.time_part(ev.end_date) === 0);\r\n\t\t\tinput.checked = isFulldayEvent;\r\n\r\n\t\t\tselects[0].disabled = input.checked;\r\n\t\t\tselects[1].disabled = input.checked;\r\n\r\n\t\t\tif (!input.$_eventAttached) {\r\n\t\t\t\tinput.$_eventAttached = true;\r\n\t\t\t\tscheduler.event(input, \"click\", function() {\r\n\t\t\t\t\tif (input.checked === true) {\r\n\t\t\t\t\t\tvar obj = {};\r\n\t\t\t\t\t\tscheduler.form_blocks.calendar_time.get_value(node, obj);\r\n\r\n\t\t\t\t\t\tstart_date = scheduler.date.date_part(obj.start_date);\r\n\t\t\t\t\t\tend_date = scheduler.date.date_part(obj.end_date);\r\n\r\n\t\t\t\t\t\tif (+end_date == +start_date || (+end_date >= +start_date && (ev.end_date.getHours() !== 0 || ev.end_date.getMinutes() !== 0)))\r\n\t\t\t\t\t\t\tend_date = scheduler.date.add(end_date, 1, \"day\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar start = start_date || ev.start_date;\r\n\t\t\t\t\tvar end = end_date || ev.end_date;\r\n\t\t\t\t\t_attach_action(inputs[0], start);\r\n\t\t\t\t\t_attach_action(inputs[1], end);\r\n\t\t\t\t\tselects[0].value = start.getHours() * 60 + start.getMinutes();\r\n\t\t\t\t\tselects[1].value = end.getHours() * 60 + end.getMinutes();\r\n\r\n\t\t\t\t\tselects[0].disabled = input.checked;\r\n\t\t\t\t\tselects[1].disabled = input.checked;\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (scheduler.config.event_duration && scheduler.config.auto_end_date) {\r\n\r\n\t\t\tvar _update_minical_select = function () {\r\n\t\t\t\tif (!(scheduler.config.auto_end_date && scheduler.config.event_duration)){\r\n\t\t\t\t\t// setting may be disabled after the handler is attached\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tstart_date = scheduler.date.add(inputs[0]._date, selects[0].value, \"minute\");\r\n\t\t\t\tend_date = new Date(start_date.getTime() + (scheduler.config.event_duration * 60 * 1000));\r\n\r\n\t\t\t\tinputs[1].value = scheduler.templates.calendar_time(end_date);\r\n\t\t\t\tinputs[1]._date = scheduler.date.date_part(new Date(end_date));\r\n\r\n\t\t\t\tselects[1].value = end_date.getHours() * 60 + end_date.getMinutes();\r\n\t\t\t};\r\n\r\n\t\t\tif(!selects[0].$_eventAttached){\r\n\t\t\t\tselects[0].addEventListener(\"change\", _update_minical_select); // only update on first select should trigger update so user could define other end date if he wishes too\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction _attach_action(inp, date, number) {\r\n\t\t\t_init_once(inp, date, number);\r\n\t\t\tinp.value = scheduler.templates.calendar_time(date);\r\n\t\t\tinp._date = scheduler.date.date_part(new Date(date));\r\n\t\t}\r\n\r\n\t\t_attach_action(inputs[0], ev.start_date, 0);\r\n\t\t_attach_action(inputs[1], ev.end_date, 1);\r\n\t\t_init_once = function() {};\r\n\r\n\t\tfunction _round_minutes(date) {\r\n\t\t\tvar time_values = config._time_values;\r\n\t\t\tvar direct_value = date.getHours() * 60 + date.getMinutes();\r\n\t\t\tvar fixed_value = direct_value;\r\n\t\t\tvar value_found = false;\r\n\r\n\t\t\tfor (var k = 0; k < time_values.length; k++) {\r\n\t\t\t\tvar t_v = time_values[k];\r\n\t\t\t\tif (t_v === direct_value) {\r\n\t\t\t\t\tvalue_found = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (t_v < direct_value)\r\n\t\t\t\t\tfixed_value = t_v;\r\n\t\t\t}\r\n\r\n\t\t\tif(!(value_found || fixed_value))\r\n\t\t\t\treturn -1;\r\n\r\n\t\t\treturn (value_found) ? direct_value : fixed_value;\r\n\t\t}\r\n\r\n\t\tselects[0].value = _round_minutes(ev.start_date);\r\n\t\tselects[1].value = _round_minutes(ev.end_date);\r\n\r\n\t},\r\n\tget_value: function(node, ev) {\r\n\t\tvar inputs = node.getElementsByTagName(\"input\");\r\n\t\tvar selects = node.getElementsByTagName(\"select\");\r\n\r\n\t\tev.start_date = scheduler.date.add(inputs[0]._date, selects[0].value, \"minute\");\r\n\t\tev.end_date = scheduler.date.add(inputs[1]._date, selects[1].value, \"minute\");\r\n\r\n\t\tif (ev.end_date <= ev.start_date)\r\n\t\t\tev.end_date = scheduler.date.add(ev.start_date, scheduler.config.time_step, \"minute\");\r\n\t\treturn {\r\n\t\t\tstart_date: new Date(ev.start_date),\r\n\t\t\tend_date: new Date(ev.end_date)\r\n\t\t};\r\n\t},\r\n\tfocus: function(node) {\r\n\t}\r\n};\r\nscheduler.linkCalendar = function(calendar, datediff) {\r\n\tvar action = function() {\r\n\t\tvar date = scheduler._date;\r\n\t\tvar dateNew = new Date(date.valueOf());\r\n\t\tif (datediff) dateNew = datediff(dateNew);\r\n\t\tdateNew.setDate(1);\r\n\t\tscheduler.updateCalendar(calendar, dateNew);\r\n\t\treturn true;\r\n\t};\r\n\r\n\tscheduler.attachEvent(\"onViewChange\", action);\r\n\tscheduler.attachEvent(\"onXLE\", action);\r\n\tscheduler.attachEvent(\"onEventAdded\", action);\r\n\tscheduler.attachEvent(\"onEventChanged\", action);\r\n\tscheduler.attachEvent(\"onEventDeleted\", action);\r\n\taction();\r\n};\r\n\r\nscheduler._markCalendarCurrentDate = function(calendar) {\r\n\tvar state = scheduler.getState();\r\n\tvar from = state.min_date;\r\n\tvar to = state.max_date;\r\n\tvar mode = state.mode;\r\n\r\n\tvar month_start = scheduler.date.month_start(new Date(calendar._date));\r\n\tvar month_end = scheduler.date.add(month_start, 1, \"month\");\r\n\r\n\tvar noHighlight = {\r\n\t\t\"month\":true,\r\n\t\t\"year\":true,\r\n\t\t\"agenda\":true,\r\n\t\t\"grid\":true\r\n\t};\r\n\t// no need to highlight current dates for a large range views - agenda, year, etc.\r\n\tif(noHighlight[mode] || (from.valueOf() <= month_start.valueOf() && to.valueOf() >= month_end.valueOf())){\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar current = from;\r\n\twhile(current.valueOf() < to.valueOf()){\r\n\t\tif (month_start.valueOf() <= current.valueOf() && month_end > current) {\r\n\t\t\tscheduler.markCalendar(calendar, current, \"dhx_calendar_click\");\r\n\t\t}\r\n\t\tcurrent = scheduler.date.add(current, 1, \"day\");\r\n\t}\r\n};\r\n\r\nscheduler.attachEvent(\"onEventCancel\", function(){\r\n\tscheduler.destroyCalendar(null, true);\r\n});\r\n\r\nscheduler.attachEvent(\"onDestroy\", function(){\r\n\tscheduler.destroyCalendar();\r\n});\r\n\r\n}","export default function(scheduler){\r\n\r\nscheduler.attachEvent(\"onTemplatesReady\",function(){\r\n\tscheduler.xy.scroll_width = 0;\r\n\r\n\tvar old = scheduler.render_view_data;\r\n\tscheduler.render_view_data=function(){\r\n\t\tvar data = this._els[\"dhx_cal_data\"][0];\r\n\t\tdata.firstChild._h_fix = true;\r\n\r\n\t\told.apply(scheduler,arguments);\r\n\r\n\r\n\r\n\t\tvar height = parseInt(data.style.height);\r\n\t\tdata.style.height=\"1px\";\r\n\t\tdata.style.height=data.scrollHeight+\"px\";\r\n\r\n\t\tthis._obj.style.height = this._obj.clientHeight + data.scrollHeight - height + \"px\";\r\n\t};\r\n\r\n\tvar old_s=scheduler._reset_month_scale;\r\n\tscheduler._reset_month_scale=function(a,b,c,d){\r\n\t\tvar dummy = {clientHeight:100};\r\n\t\told_s.apply(scheduler,[dummy,b,c,d]);\r\n\t\ta.innerHTML = dummy.innerHTML;\r\n\t};\r\n\r\n});\r\n\r\n}","import notImplemented from \"./not_implemented_extension\";\r\n\r\nexport default function(scheduler){\r\n\tnotImplemented.alert(\"Multisection\", scheduler.assert);\r\n}","export default function(scheduler){\r\n\r\n\r\nfunction parseXMLOptions(loader, config){\r\n\tvar items = scheduler.ajax.xpath(\"//data/item\", loader.xmlDoc);\r\n\tvar ids = {};\r\n\tfor (var i = 0; i < items.length; i++) {\r\n\t\tids[items[i].getAttribute(config.map_to)] = true;\r\n\t}\r\n\treturn ids;\r\n}\r\n\r\nfunction parseJSONOptions(loader, config){\r\n\ttry{\r\n\t\tvar items = JSON.parse(loader.xmlDoc.responseText);\r\n\t\tvar ids = {};\r\n\t\tfor (var i = 0; i < items.length; i++) {\r\n\t\t\tvar option = items[i];\r\n\r\n\t\t\tids[option.value || option.key || option.id] = true;\r\n\t\t}\r\n\t\treturn ids;\r\n\t}catch(e){\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nscheduler.form_blocks[\"multiselect\"]={\r\n\trender:function(sns) {\r\n\t\tvar css = \"dhx_multi_select_control dhx_multi_select_\"+sns.name;\r\n\t\tif(!!sns.vertical){\r\n\t\t\tcss += \" dhx_multi_select_control_vertical\";\r\n\t\t}\r\n\r\n\t\tvar _result = \"<div class='\"+css+\"' style='overflow: auto; max-height: \"+sns.height+\"px; position: relative;' >\";\r\n\t\tfor (var i=0; i<sns.options.length; i++) {\r\n\t\t\t_result += \"<label><input type='checkbox' value='\"+sns.options[i].key+\"'/>\"+sns.options[i].label+\"</label>\";\r\n\t\t}\r\n\t\t_result += \"</div>\";\r\n\t\treturn _result;\r\n\t},\r\n\tset_value:function(node,value,ev,config){\r\n\r\n\t\tvar _children = node.getElementsByTagName('input');\r\n\t\tfor(var i=0;i<_children.length;i++) {\r\n\t\t\t_children[i].checked = false; //unchecking all inputs on the form\r\n\t\t}\r\n\r\n\t\tfunction _mark_inputs(ids) { // ids = [ 0: undefined, 1: undefined, 2: true, 'custom_name': false ... ]\r\n\t\t\tvar _children = node.getElementsByTagName('input');\r\n\t\t\tfor(var i=0;i<_children.length; i++) {\r\n\t\t\t\t_children[i].checked = !! ids[_children[i].value];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar _ids = {};\r\n\t\tif (ev[config.map_to]) {\r\n\t\t\tvar results = (ev[config.map_to] + \"\").split(config.delimiter || scheduler.config.section_delimiter || \",\");\r\n\t\t\tfor (var i = 0; i < results.length; i++) {\r\n\t\t\t\t_ids[results[i]] = true;\r\n\t\t\t}\r\n\t\t\t_mark_inputs(_ids);\r\n\t\t} else {\r\n\t\t\tif (scheduler._new_event || !config.script_url)\r\n\t\t\t\treturn;\r\n\t\t\tvar divLoading = document.createElement('div');\r\n\t\t\tdivLoading.className = 'dhx_loading';\r\n\t\t\tdivLoading.style.cssText = \"position: absolute; top: 40%; left: 40%;\";\r\n\t\t\tnode.appendChild(divLoading);\r\n\r\n\t\t\tvar url = [\r\n\t\t\t\tconfig.script_url,\r\n\t\t\t\t(config.script_url.indexOf(\"?\") == -1 ? \"?\" : \"&\"),\r\n\t\t\t\t'dhx_crosslink_' + config.map_to + '=' + ev.id + '&uid=' + scheduler.uid()\r\n\t\t\t].join(\"\");\r\n\r\n\t\t\tscheduler.ajax.get(url, function(loader) {\r\n\t\t\t\tvar options = parseJSONOptions(loader, config);\r\n\t\t\t\tif(!options){\r\n\t\t\t\t\toptions = parseXMLOptions(loader, config);\r\n\t\t\t\t}\r\n\t\t\t\t_mark_inputs(options);\r\n\t\t\t\tnode.removeChild(divLoading);\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tget_value:function(node,ev,config){\r\n\t\tvar _result = [];\r\n\t\tvar _children = node.getElementsByTagName(\"input\");\r\n\t\tfor(var i=0;i<_children.length;i++) {\r\n\t\t\tif(_children[i].checked)\r\n\t\t\t\t_result.push(_children[i].value);\r\n\t\t}\r\n\t\treturn _result.join(config.delimiter || scheduler.config.section_delimiter || \",\");\r\n\t},\r\n\r\n\tfocus:function(node){\r\n\t}\r\n};\r\n\r\n}","export default function(scheduler){\r\n\r\n\r\n\tfunction backup(obj){\r\n\t\tvar t = function(){};\r\n\t\tt.prototype = obj;\r\n\t\treturn t;\r\n\t}\r\n\r\n\tvar old = scheduler._load;\r\n\tscheduler._load=function(url,from){\r\n\t\turl=url||this._load_url;\r\n\t\tif (typeof url == \"object\"){\r\n\t\t\tvar t = backup(this._loaded);\r\n\t\t\tfor (var i=0; i < url.length; i++) {\r\n\t\t\t\tthis._loaded=new t();\r\n\t\t\t\told.call(this,url[i],from);\r\n\t\t\t}\r\n\t\t} else\r\n\t\t\told.apply(this,arguments);\r\n\t};\r\n\r\n}","export default function(scheduler){\r\n\t/* global Backbone */\r\n\tvar cfg = {\r\n\t\tuse_id : false\r\n\t};\r\n\r\n\t//remove private properties\r\n\tfunction sanitize(ev){\r\n\t\tvar obj = {};\r\n\t\tfor (var key in ev)\r\n\t\t\tif (key.indexOf(\"_\") !== 0)\r\n\t\t\t\tobj[key] = ev[key];\r\n\r\n\t\tif (!cfg.use_id)\r\n\t\t\tdelete obj.id;\r\n\r\n\t\treturn obj;\r\n\t}\r\n\r\n\tvar update_timer;\r\n\tfunction update_view(){\r\n\t\tclearTimeout(update_timer);\r\n\t\tupdate_timer = setTimeout(function(){\r\n\t\t\tif(scheduler.$destroyed){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tscheduler.updateView();\r\n\t\t},1);\r\n\t}\r\n\r\n\tfunction _start_ext_load(cal){\r\n\t\tcal._loading = true;\r\n\t\tcal._not_render = true;\r\n\r\n\t\tcal.callEvent(\"onXLS\", []);\r\n\t}\r\n\tfunction _finish_ext_load(cal){\r\n\t\tcal._not_render = false;\r\n\t\tif (cal._render_wait)\r\n\t\t\tcal.render_view_data();\r\n\t\tcal._loading = false;\r\n\r\n\t\tcal.callEvent(\"onXLE\", []);\r\n\t}\r\n\r\n\r\n\tfunction _get_id(model){\r\n\t\treturn cfg.use_id ? model.id : model.cid;\r\n\t}\r\n\r\nscheduler.backbone = function(events, config){\r\n\tif (config) cfg = config;\r\n\r\n\tevents.bind(\"change\", function(model, info){\r\n\t\tvar cid = _get_id(model);\r\n\t\tvar ev = scheduler._events[cid] = model.toJSON();\r\n\t\tev.id = cid;\r\n\r\n\t\tscheduler._init_event(ev);\r\n\t\tupdate_view();\r\n\t});\r\n\tevents.bind(\"remove\", function(model, changes){\r\n\t\tvar cid = _get_id(model);\r\n\t\tif (scheduler._events[cid])\r\n\t\t\tscheduler.deleteEvent(cid);\r\n\t});\r\n\r\n\tvar queue = [];\r\n\tfunction add_from_queue(){\r\n\t\tif(scheduler.$destroyed){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (queue.length){\r\n\t\t\tscheduler.parse(queue, \"json\");\r\n\t\t\tqueue = [];\r\n\t\t}\r\n\t}\r\n\r\n\tevents.bind(\"add\", function(model, changes){\r\n\t\tvar cid = _get_id(model);\r\n\t\tif (!scheduler._events[cid]){\r\n\t\t\tvar ev =  model.toJSON();\r\n\t\t\tev.id = cid;\r\n\t\t\tscheduler._init_event(ev);\r\n\r\n\t\t\tqueue.push(ev);\r\n\t\t\tif (queue.length == 1)\r\n\t\t\t\tsetTimeout(add_from_queue,1);\r\n\t\t}\r\n\t});\r\n\r\n\tevents.bind(\"request\", function(obj){\r\n\t\tif (obj instanceof Backbone.Collection)\r\n\t\t\t_start_ext_load(scheduler);\r\n\t});\r\n\tevents.bind(\"sync\", function(obj){\r\n\t\tif (obj instanceof Backbone.Collection)\r\n\t\t\t_finish_ext_load(scheduler);\r\n\t});\r\n\tevents.bind(\"error\", function(obj){\r\n\t\tif (obj instanceof Backbone.Collection)\r\n\t\t\t_finish_ext_load(scheduler);\r\n\t});\r\n\r\n\r\n\tscheduler.attachEvent(\"onEventCreated\", function(id){\r\n\t\tvar ev = new events.model(scheduler.getEvent(id));\r\n\t\tscheduler._events[id] = ev.toJSON();\r\n\t\tscheduler._events[id].id = id;\r\n\r\n\t\treturn true;\r\n\t});\r\n\r\n\tscheduler.attachEvent(\"onEventAdded\", function(id){\r\n\t\tif (!events.get(id)){\r\n\t\t\tvar data = sanitize(scheduler.getEvent(id));\r\n\t\t\tvar model = new events.model(data);\r\n\r\n\t\t\tvar cid = _get_id(model);\r\n\t\t\tif (cid != id)\r\n\t\t\t\tthis.changeEventId(id, cid);\r\n\t\t\tevents.add(model);\r\n\t\t\tevents.trigger(\"scheduler:add\", model);\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\tscheduler.attachEvent(\"onEventChanged\", function(id){\r\n\t\tvar ev = events.get(id);\r\n\t\tvar upd = sanitize(scheduler.getEvent(id));\r\n\r\n\t\tev.set(upd);\r\n\t\tevents.trigger(\"scheduler:change\", ev);\r\n\r\n\t\treturn true;\r\n\t});\r\n\tscheduler.attachEvent(\"onEventDeleted\", function(id){\r\n\t\tvar model = events.get(id);\r\n\t\tif (model){\r\n\t\t\tevents.trigger(\"scheduler:remove\", model);\r\n\t\t\tevents.remove(id);\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n};\r\n\r\n}","export default function(scheduler){\r\n\r\n\t/* global dhtmlDragAndDropObject, dhtmlx */\r\n// lame old code doesn't provide raw event object\r\n\tscheduler.attachEvent(\"onTemplatesReady\", function() {\r\n\t\tvar dragger = (new dhtmlDragAndDropObject());\r\n\t\tvar old = dragger.stopDrag;\r\n\t\tvar last_event;\r\n\t\tdragger.stopDrag = function(e) {\r\n\t\t\tlast_event = e;\r\n\t\t\treturn old.apply(this, arguments);\r\n\t\t};\r\n\r\n\t\tfunction on_drop(sourceHtmlObject, dhtmlObject, targetHtmlObject, targetHtml) {\r\n\r\n\t\t\tif (scheduler.checkEvent(\"onBeforeExternalDragIn\") && !scheduler.callEvent(\"onBeforeExternalDragIn\", [sourceHtmlObject, dhtmlObject, targetHtmlObject, targetHtml, last_event]))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar temp = scheduler.attachEvent(\"onEventCreated\", function (id) {\r\n\t\t\t\tif (!scheduler.callEvent(\"onExternalDragIn\", [id, sourceHtmlObject, last_event])) {\r\n\t\t\t\t\tthis._drag_mode = this._drag_id = null;\r\n\t\t\t\t\tthis.deleteEvent(id);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tvar action_data = scheduler.getActionData(last_event);\r\n\t\t\tvar event_data = {\r\n\t\t\t\tstart_date: new Date(action_data.date)\r\n\t\t\t};\r\n\r\n\t\t\t// custom views, need to assign section id, fix dates\r\n\t\t\tif (scheduler.matrix && scheduler.matrix[scheduler._mode]) {\r\n\t\t\t\tvar view_options = scheduler.matrix[scheduler._mode];\r\n\t\t\t\tevent_data[view_options.y_property] = action_data.section;\r\n\r\n\t\t\t\tvar pos = scheduler._locate_cell_timeline(last_event);\r\n\t\t\t\tevent_data.start_date = view_options._trace_x[pos.x];\r\n\t\t\t\tevent_data.end_date = scheduler.date.add(event_data.start_date, view_options.x_step, view_options.x_unit);\r\n\t\t\t}\r\n\t\t\tif (scheduler._props && scheduler._props[scheduler._mode]) {\r\n\t\t\t\tevent_data[scheduler._props[scheduler._mode].map_to] = action_data.section;\r\n\t\t\t}\r\n\r\n\t\t\tscheduler.addEventNow(event_data);\r\n\r\n\t\t\tscheduler.detachEvent(temp);\r\n\t\t}\r\n\r\n\t\tdragger.addDragLanding(scheduler._els[\"dhx_cal_data\"][0], {\r\n\t\t\t_drag: function(sourceHtmlObject, dhtmlObject, targetHtmlObject, targetHtml) {\r\n\t\t\t\ton_drop(sourceHtmlObject, dhtmlObject, targetHtmlObject, targetHtml);\r\n\t\t\t},\r\n\t\t\t_dragIn: function(htmlObject, shtmlObject) {\r\n\t\t\t\treturn htmlObject;\r\n\t\t\t},\r\n\t\t\t_dragOut: function(htmlObject) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(dhtmlx.DragControl) {\r\n\t\t\tdhtmlx.DragControl.addDrop(scheduler._els[\"dhx_cal_data\"][0], {\r\n\t\t\t\tonDrop: function (source, target, d, e) {\r\n\t\t\t\t\tvar sourceDhtmlx = dhtmlx.DragControl.getMaster(source);\r\n\t\t\t\t\tlast_event = e;\r\n\t\t\t\t\ton_drop(source, sourceDhtmlx, target, e.target || e.srcElement);\r\n\t\t\t\t},\r\n\r\n\t\t\t\tonDragIn: function (source, target, e) {\r\n\t\t\t\t\treturn target;\r\n\t\t\t\t}\r\n\t\t\t}, true);\r\n\t\t}\r\n\t});\r\n\r\n}","export default function(scheduler){\r\n\r\n\tvar dx, dy,\r\n\t\thtml_regexp = new RegExp(\"<[^>]*>\", \"g\"),\r\n\t\tnewline_regexp = new RegExp(\"<br[^>]*>\", \"g\");\r\n\r\n\tfunction clean_html(val) {\r\n\t\treturn val.replace(newline_regexp, \"\\n\").replace(html_regexp, \"\");\r\n\t}\r\n\r\n\tfunction x_norm(x, offset) {\r\n\t\tx = parseFloat(x);\r\n\t\toffset = parseFloat(offset);\r\n\t\tif (!isNaN(offset)) x -= offset;\r\n\r\n\t\tvar w = colsWidth(x);\r\n\t\tx = x - w.width + w.cols*dx;\r\n\t\treturn isNaN(x)?\"auto\":(100*x/(dx));\r\n\t}\r\n\r\n\tfunction x_norm_event(x, offset, is_left) {\r\n\t\tx = parseFloat(x);\r\n\t\toffset = parseFloat(offset);\r\n\t\tif (!isNaN(offset) && is_left) x -= offset;\r\n\r\n\t\tvar w = colsWidth(x);\r\n\t\tx = x - w.width + w.cols*dx;\r\n\t\treturn isNaN(x)?\"auto\":(100*x/(dx-(!isNaN(offset)?offset:0)));\r\n\t}\r\n\tfunction colsWidth(width) {\r\n\t\tvar r = 0;\r\n\t\tvar header = scheduler._els.dhx_cal_header[0].childNodes;\r\n\t\tvar els = header[1] ? header[1].childNodes : header[0].childNodes;\r\n\t\tfor (var i = 0; i < els.length; i++) {\r\n\t\t\tvar el = els[i].style ? els[i] : els[i].parentNode;\r\n\t\t\tvar w = parseFloat(el.style.width);\r\n\t\t\tif (width > w){\r\n\t\t\t\twidth -= (w+1);\r\n\t\t\t\tr+=(w+1);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn { width: r, cols: i };\r\n\t}\r\n\r\n\tfunction y_norm(y) {\r\n\t\ty = parseFloat(y);\r\n\t\tif (isNaN(y)) return \"auto\";\r\n\t\treturn 100 * y / dy;\r\n\t}\r\n\r\n\tfunction get_style(node, style){\r\n\t\treturn (window.getComputedStyle?(window.getComputedStyle(node, null)[style]):(node.currentStyle?node.currentStyle[style]:null))||\"\";\r\n\t}\r\n\r\n\tfunction de_day(node, n) {\r\n\t\tvar x = parseInt(node.style.left, 10);\r\n\r\n\t\tfor (var dx = 0; dx < scheduler._cols.length; dx++) {\r\n\t\t\tx -= scheduler._cols[dx];\r\n\t\t\tif (x < 0) return dx;\r\n\t\t}\r\n\t\treturn n;\r\n\t}\r\n\r\n\tfunction de_week(node, n) {\r\n\t\tvar y = parseInt(node.style.top, 10);\r\n\t\tfor (var dy = 0; dy < scheduler._colsS.heights.length; dy++)\r\n\t\t\tif (scheduler._colsS.heights[dy] > y) return dy;\r\n\t\treturn n;\r\n\t}\r\n\r\n\tfunction xml_start(tag) {\r\n\t\treturn tag ? \"<\"+tag+\">\" : \"\";\r\n\t}\r\n\tfunction xml_end(tag) {\r\n\t\treturn tag ? \"</\"+tag+\">\" : \"\";\r\n\t}\r\n\r\n\tfunction xml_top(tag, profile, header, footer) {\r\n\t\tvar xml = \"<\"+tag+\" profile='\" + profile + \"'\";\r\n\t\tif (header)\r\n\t\t\txml += \" header='\" + header + \"'\";\r\n\t\tif (footer)\r\n\t\t\txml += \" footer='\" + footer + \"'\";\r\n\t\txml += \">\";\r\n\t\treturn xml;\r\n\t}\r\n\r\n\tfunction xml_body_header() {\r\n\t\tvar xml = \"\";\r\n\t\t// detects if current mode is timeline\r\n\t\tvar mode = scheduler._mode;\r\n\t\tif (scheduler.matrix && scheduler.matrix[scheduler._mode])\r\n\t\t\tmode = (scheduler.matrix[scheduler._mode].render == \"cell\") ? \"matrix\" : \"timeline\";\r\n\t\txml += \"<scale mode='\" + mode + \"' today='\" + scheduler._els.dhx_cal_date[0].innerHTML + \"'>\";\r\n\r\n\t\tif (scheduler._mode == \"week_agenda\") {\r\n\t\t\tvar xh = scheduler._els.dhx_cal_data[0].getElementsByTagName(\"DIV\");\r\n\t\t\tfor (var i = 0; i < xh.length; i++)\r\n\t\t\t\tif (xh[i].className == \"dhx_wa_scale_bar\")\r\n\t\t\t\t\txml += \"<column>\" + clean_html(xh[i].innerHTML) + \"</column>\";\r\n\t\t} else if (scheduler._mode == \"agenda\" || scheduler._mode == \"map\") {\r\n\t\t\tvar xh = scheduler._els.dhx_cal_header[0].childNodes[0].childNodes;\r\n\r\n\t\t\txml += \"<column>\" + clean_html(xh[0].innerHTML) + \"</column><column>\" + clean_html(xh[1].innerHTML) + \"</column>\";\r\n\t\t} else if (scheduler._mode == \"year\") {\r\n\t\t\tvar xh = scheduler._els.dhx_cal_data[0].childNodes;\r\n\t\t\tfor (var i = 0; i < xh.length; i++) {\r\n\t\t\t\txml += \"<month label='\" + clean_html(xh[i].querySelector(\".dhx_year_month\").innerHTML) + \"'>\";\r\n\t\t\t\txml += xml_month_scale(xh[i].querySelector(\".dhx_year_week\").childNodes);\r\n\t\t\t\txml += xml_month(xh[i].querySelector(\".dhx_year_body\"));\r\n\t\t\t\txml += \"</month>\";\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\txml += \"<x>\";\r\n\t\t\tvar xh = scheduler._els.dhx_cal_header[0].childNodes;\r\n\t\t\txml += xml_month_scale(xh);\r\n\t\t\txml += \"</x>\";\r\n\r\n\t\t\tvar yh = scheduler._els.dhx_cal_data[0];\r\n\t\t\tif (scheduler.matrix && scheduler.matrix[scheduler._mode]) {\r\n\t\t\t\txml += \"<y>\";\r\n\t\t\t\tfor (var i = 0; i < yh.firstChild.rows.length; i++) {\r\n\t\t\t\t\tvar el = yh.firstChild.rows[i];\r\n\t\t\t\t\txml += \"<row><![CDATA[\" + clean_html(el.cells[0].innerHTML) + \"]]></row>\";\r\n\t\t\t\t}\r\n\t\t\t\txml += \"</y>\";\r\n\t\t\t\tdy = yh.firstChild.rows[0].cells[0].offsetHeight;\r\n\t\t\t} else if (yh.firstChild.tagName == \"TABLE\") {\r\n\t\t\t\txml += xml_month(yh);\r\n\t\t\t} else {\r\n\t\t\t\tyh = yh.childNodes[yh.childNodes.length - 1];\r\n\t\t\t\twhile (yh.className.indexOf(\"dhx_scale_holder\") == -1)\r\n\t\t\t\t\tyh = yh.previousSibling;\r\n\t\t\t\tyh = yh.childNodes;\r\n\r\n\t\t\t\txml += \"<y>\";\r\n\t\t\t\tfor (var i = 0; i < yh.length; i++)\r\n\t\t\t\t\txml += \"\\n<row><![CDATA[\" + clean_html(yh[i].innerHTML) + \"]]></row>\";\r\n\t\t\t\txml += \"</y>\";\r\n\t\t\t\tdy = yh[0].offsetHeight;\r\n\t\t\t}\r\n\t\t}\r\n\t\txml += \"</scale>\";\r\n\t\treturn xml;\r\n\t}\r\n\r\n\tfunction xml_month(yh) {\r\n\t\tvar xml = \"\";\r\n\t\tvar r = yh.querySelectorAll(\"tr\");\r\n\t\tfor (var i = 0; i < r.length; i++) {\r\n\t\t\tvar days = [];\r\n\t\t\tvar cells = r[i].querySelectorAll(\"td\");\r\n\r\n\t\t\tfor (var j = 0; j < cells.length; j++)\r\n\t\t\t\tdays.push(cells[j].querySelector(\".dhx_month_head\").innerHTML);\r\n\r\n\t\t\txml += \"\\n<row height='\" + cells[0].offsetHeight + \"'><![CDATA[\" + clean_html(days.join(\"|\")) + \"]]></row>\";\r\n\t\t\tdy = cells[0].offsetHeight;\r\n\t\t}\r\n\t\treturn xml;\r\n\t}\r\n\r\n\tfunction xml_month_scale(xh) {\r\n\t\tvar xhs,\r\n\t\t\txml = \"\";\r\n\t\tif (scheduler.matrix && scheduler.matrix[scheduler._mode]) {\r\n\t\t\tif (scheduler.matrix[scheduler._mode].second_scale)\r\n\t\t\t\txhs = xh[1].childNodes;\r\n\r\n\t\t\txh = xh[0].childNodes;\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < xh.length; i++)\r\n\t\t\txml += \"\\n<column><![CDATA[\" + clean_html(xh[i].innerHTML) + \"]]></column>\";\r\n\t\tdx = xh[0].offsetWidth;\r\n\r\n\t\tif (xhs) {\r\n\t\t\tvar width = 0;\r\n\t\t\tvar top_width = xh[0].offsetWidth;\r\n\t\t\tvar top_col = 1;\r\n\t\t\tfor (var i = 0; i < xhs.length; i++) {\r\n\t\t\t\txml += \"\\n<column second_scale='\" + top_col + \"'><![CDATA[\" + clean_html(xhs[i].innerHTML) + \"]]></column>\";\r\n\t\t\t\twidth += xhs[i].offsetWidth;\r\n\t\t\t\tif (width >= top_width) {\r\n\t\t\t\t\ttop_width += (xh[top_col] ? xh[top_col].offsetWidth : 0);\r\n\t\t\t\t\ttop_col++;\r\n\t\t\t\t}\r\n\t\t\t\tdx = xhs[0].offsetWidth;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn xml;\r\n\t}\r\n\r\n\tfunction xml_body(colors) {\r\n\t\tvar xml = \"\";\r\n\t\tvar evs = scheduler._rendered;\r\n\t\tvar matrix = scheduler.matrix && scheduler.matrix[scheduler._mode];\r\n\r\n\t\tif (scheduler._mode == \"agenda\" || scheduler._mode == \"map\") {\r\n\r\n\t\t\tfor (var i = 0; i < evs.length; i++)\r\n                xml += \"<event><head><![CDATA[\" + clean_html(evs[i].childNodes[0].innerHTML) + \"]]></head><body><![CDATA[\" + clean_html(evs[i].childNodes[2].innerHTML) + \"]]></body></event>\";\r\n\r\n\t\t} else if (scheduler._mode == \"week_agenda\") {\r\n\r\n\t\t\tfor (var i = 0; i < evs.length; i++)\r\n\t\t\t\txml += \"<event day='\" + evs[i].parentNode.getAttribute(\"day\") + \"'><body>\" + clean_html(evs[i].innerHTML) + \"</body></event>\";\r\n\r\n\t\t} else if (scheduler._mode == \"year\") {\r\n\r\n\t\t\tvar evs = scheduler.get_visible_events();\r\n\t\t\tfor (var i = 0; i < evs.length; i++) {\r\n\t\t\t\tvar d = evs[i].start_date;\r\n\t\t\t\tif (d.valueOf() < scheduler._min_date.valueOf())\r\n\t\t\t\t\td = scheduler._min_date;\r\n\r\n\t\t\t\twhile (d < evs[i].end_date) {\r\n\t\t\t\t\tvar m = d.getMonth() + 12 * (d.getFullYear() - scheduler._min_date.getFullYear()) - scheduler.week_starts._month;\r\n\t\t\t\t\tvar day = scheduler.week_starts[m] + d.getDate() - 1;\r\n\t\t\t\t\tvar text_color = colors ? get_style(scheduler._get_year_cell(d), \"color\") : \"\";\r\n\t\t\t\t\tvar bg_color = colors ? get_style(scheduler._get_year_cell(d), \"backgroundColor\") : \"\";\r\n\r\n\t\t\t\t\txml += \"<event day='\" + (day % 7) + \"' week='\" + Math.floor(day / 7) + \"' month='\" + m + \"' backgroundColor='\" + bg_color + \"' color='\" + text_color + \"'></event>\";\r\n\t\t\t\t\td = scheduler.date.add(d, 1, \"day\");\r\n\t\t\t\t\tif (d.valueOf() >= scheduler._max_date.valueOf())\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (matrix && matrix.render == \"cell\") {\r\n\t\t\tvar evs = scheduler._els.dhx_cal_data[0].getElementsByTagName(\"TD\");\r\n\t\t\tfor (var i = 0; i < evs.length; i++) {\r\n\t\t\t\tvar text_color = colors ? get_style(evs[i], \"color\") : \"\";\r\n\t\t\t\tvar bg_color = colors ? get_style(evs[i], \"backgroundColor\") : \"\";\r\n\t\t\t\txml += \"\\n<event><body backgroundColor='\" + bg_color + \"' color='\" + text_color + \"'><![CDATA[\" + clean_html(evs[i].innerHTML) + \"]]></body></event>\";\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (var i = 0; i < evs.length; i++) {\r\n\t\t\t\tvar zx, zdx;\r\n\t\t\t\tif (scheduler.matrix && scheduler.matrix[scheduler._mode]) {\r\n\t\t\t\t\t// logic for timeline view\r\n\t\t\t\t\tzx = x_norm(evs[i].style.left);\r\n\t\t\t\t\tzdx = x_norm(evs[i].offsetWidth)-1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// we should use specific logic for day/week/units view\r\n\t\t\t\t\tvar left_norm = scheduler.config.use_select_menu_space ? 0 : 26;\r\n\t\t\t\t\tzx = x_norm_event(evs[i].style.left, left_norm, true);\r\n\t\t\t\t\tzdx = x_norm_event(evs[i].style.width, left_norm)-1;\r\n\t\t\t\t}\r\n\t\t\t\tif (isNaN(zdx * 1)) continue;\r\n\t\t\t\tvar zy = y_norm(evs[i].style.top);\r\n\t\t\t\tvar zdy = y_norm(evs[i].style.height);\r\n\r\n\t\t\t\tvar e_type = evs[i].className.split(\" \")[0].replace(\"dhx_cal_\", \"\");\r\n\t\t\t\tif (e_type === 'dhx_tooltip_line') continue;\r\n\r\n\t\t\t\tvar dets = scheduler.getEvent(evs[i].getAttribute(scheduler.config.event_attribute));\r\n                if (!dets) continue;\r\n\t\t\t\tvar day = dets._sday;\r\n\t\t\t\tvar week = dets._sweek;\r\n\t\t\t\tvar length = dets._length || 0;\r\n\r\n\t\t\t\tif (scheduler._mode == \"month\") {\r\n\t\t\t\t\tzdy = parseInt(evs[i].offsetHeight, 10);\r\n\t\t\t\t\tzy = parseInt(evs[i].style.top, 10) - scheduler.xy.month_head_height;\r\n\r\n\t\t\t\t\tday = de_day(evs[i], day);\r\n\t\t\t\t\tweek = de_week(evs[i], week);\r\n\t\t\t\t} else if (scheduler.matrix && scheduler.matrix[scheduler._mode]) {\r\n\t\t\t\t\tday = 0;\r\n\t\t\t\t\tvar el = evs[i].parentNode.parentNode.parentNode;\r\n\t\t\t\t\tweek = el.rowIndex;\r\n\t\t\t\t\tvar dy_copy = dy;\r\n\t\t\t\t\tdy = evs[i].parentNode.offsetHeight;\r\n\t\t\t\t\tzy = y_norm(evs[i].style.top);\r\n\t\t\t\t\tzy -= zy * 0.2;\r\n\t\t\t\t\tdy = dy_copy;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (evs[i].parentNode == scheduler._els.dhx_cal_data[0]) continue;\r\n\t\t\t\t\tvar parent = scheduler._els[\"dhx_cal_data\"][0].childNodes[0];\r\n\t\t\t\t\tvar offset = parseFloat(parent.className.indexOf(\"dhx_scale_holder\") != -1 ? parent.style.left : 0);\r\n\t\t\t\t\tzx += x_norm(evs[i].parentNode.style.left, offset);\r\n\t\t\t\t}\r\n\r\n\t\t\t\txml += \"\\n<event week='\" + week + \"' day='\" + day + \"' type='\" + e_type + \"' x='\" + zx + \"' y='\" + zy + \"' width='\" + zdx + \"' height='\" + zdy + \"' len='\" + length + \"'>\";\r\n\r\n\t\t\t\tif (e_type == \"event\") {\r\n\t\t\t\t\txml += \"<header><![CDATA[\" + clean_html(evs[i].childNodes[1].innerHTML) + \"]]></header>\";\r\n\t\t\t\t\tvar text_color = colors ? get_style(evs[i].childNodes[2], \"color\") : \"\";\r\n\t\t\t\t\tvar bg_color = colors ? get_style(evs[i].childNodes[2], \"backgroundColor\") : \"\";\r\n\t\t\t\t\txml += \"<body backgroundColor='\" + bg_color + \"' color='\" + text_color + \"'><![CDATA[\" + clean_html(evs[i].childNodes[2].innerHTML) + \"]]></body>\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar text_color = colors ? get_style(evs[i], \"color\") : \"\";\r\n\t\t\t\t\tvar bg_color = colors ? get_style(evs[i], \"backgroundColor\") : \"\";\r\n\t\t\t\t\txml += \"<body backgroundColor='\" + bg_color + \"' color='\" + text_color + \"'><![CDATA[\" + clean_html(evs[i].innerHTML) + \"]]></body>\";\r\n\t\t\t\t}\r\n\t\t\t\txml += \"</event>\";\r\n\t\t\t}\r\n\t\t\t}\r\n\r\n\t\treturn xml;\r\n\t}\r\n\r\n\tfunction toXML(start, end, view, mode, header, footer){\r\n\t\tvar colors = false;\r\n\t\tif (mode == \"fullcolor\") {\r\n\t\t\tcolors = true;\r\n\t\t\tmode = \"color\";\r\n\t\t}\r\n\r\n\t\tmode = mode || \"color\";\r\n\r\n\t\tvar xml = \"\";\r\n\t\tif (start) {\r\n\r\n\t\t\tvar original_date = scheduler._date;\r\n\t\t\tvar original_mode = scheduler._mode;\r\n\t\t\tend = scheduler.date[view+\"_start\"](end);\r\n\t\t\tend = scheduler.date[\"get_\"+view+\"_end\"] ? scheduler.date[\"get_\"+view+\"_end\"](end) : scheduler.date.add(end, 1, view);\r\n\r\n\t\t\txml = xml_top(\"pages\", mode, header, footer);\r\n\t\t\tfor (var temp_date = new Date(start); +temp_date < +end; temp_date = this.date.add(temp_date, 1, view)) {\r\n\t\t\t\tthis.setCurrentView(temp_date, view);\r\n\t\t\t\txml += xml_start(\"page\") + xml_body_header().replace(\"\\u2013\", \"-\") + xml_body(colors) + xml_end(\"page\");\r\n\t\t\t}\r\n\t\t\txml += xml_end(\"pages\");\r\n\r\n\t\t\tthis.setCurrentView(original_date, original_mode);\r\n\t\t} else {\r\n\t\t\txml = xml_top(\"data\", mode, header, footer) + xml_body_header().replace(\"\\u2013\", \"-\") + xml_body(colors) + xml_end(\"data\");\r\n\t\t}\r\n\t\treturn xml;\r\n\t}\r\n\tscheduler.getPDFData = toXML;\r\n\tfunction send_xml(xml, url){\r\n\t\tvar uid = scheduler.uid();\r\n\t\tvar d = document.createElement(\"div\");\r\n\t\td.style.display = \"none\";\r\n\t\tdocument.body.appendChild(d);\r\n\r\n\t\td.innerHTML = '<form id=\"' + uid + '\" method=\"post\" target=\"_blank\" action=\"' + url + '\" accept-charset=\"utf-8\" enctype=\"application/x-www-form-urlencoded\"><input type=\"hidden\" name=\"mycoolxmlbody\"/> </form>';\r\n\t\tdocument.getElementById(uid).firstChild.value = encodeURIComponent(xml);\r\n\t\tdocument.getElementById(uid).submit();\r\n\t\td.parentNode.removeChild(d);\r\n\t}\r\n\r\n\tfunction to_pdf(start, end, view, url, mode, header, footer) {\r\n\t\tvar xml = \"\";\r\n\t\tif(typeof mode == \"object\"){\r\n\t\t\txml = schedulersToPdf(mode);\r\n\t\t}else{\r\n\t\t\txml = toXML.apply(this, [start, end, view, mode, header, footer]);\r\n\t\t}\r\n\r\n\t\tsend_xml(xml, url);\r\n\t}\r\n\r\n\tfunction schedulersToPdf(objects){\r\n\t\tvar xml = \"<data>\";\r\n\t\tfor(var i=0; i < objects.length; i++){\r\n\t\t\txml += objects[i].source.getPDFData(objects[i].start, objects[i].end, objects[i].view, objects[i].mode, objects[i].header, objects[i].footer);\r\n\t\t}\r\n\t\txml += \"</data>\";\r\n\t\treturn xml;\r\n\t}\r\n\r\n\t/*\r\n\t * scheduler.toPDF(url, mode, header, footer) - for a single scheduler\r\n\t * scheduler.toPDF(url, [scheduler1, scheduler2,...]) - for multiple schedulers\r\n\t * example:\r\n\t * scheduler.toPDF(\"generate.ashx\", [\r\n\t *     { source: scheduler1, mode: \"color\" },\r\n\t *     { source: scheduler2, mode: \"gray\", view:\"week\", start:new Date(2013, 06, 1), end:new Date(2013, 06, 28) },\r\n\t *     { source: scheduler3 }\r\n\t * ]);\r\n\t *\r\n\t */\r\n\tscheduler.toPDF = function(url, mode, header, footer) {\r\n\t\treturn to_pdf.apply(this, [null, null, null, url, mode, header, footer]);\r\n\t};\r\n\tscheduler.toPDFRange = function(start, end, view, url, mode, header, footer) {\r\n\t\tif (typeof start == \"string\") {\r\n\t\t\tstart = scheduler.templates.api_date(start);\r\n\t\t\tend = scheduler.templates.api_date(end);\r\n\t\t}\r\n\r\n\t\treturn to_pdf.apply(this, arguments);\r\n\t};\r\n\r\n}","export default function(scheduler){\r\n\r\nscheduler.config.icons_select = [\"icon_form\", \"icon_delete\"];\r\nscheduler.config.details_on_create = true;\r\nscheduler.config.show_quick_info = true;\r\nscheduler.xy.menu_width = 0;\r\n\r\nscheduler.attachEvent(\"onClick\", function(id){\r\n\tif(!scheduler.config.show_quick_info){\r\n\t\treturn;\r\n\t}\r\n\tscheduler.showQuickInfo(id);\r\n\treturn true;\r\n});\r\n\r\n(function(){\r\n\t// pass `force` argument in order to hide quick info synchronously\r\n\t// so it won't affect showQuickInfo call that can follow\r\n\tvar events = [\"onEmptyClick\", \"onViewChange\", \"onLightbox\", \"onBeforeEventDelete\", \"onBeforeDrag\"];\r\n\tvar hiding_function = function(){\r\n\t\tscheduler.hideQuickInfo(true);\r\n\t\treturn true;\r\n\t};\r\n\tfor (var i=0; i<events.length; i++){\r\n\t\tscheduler.attachEvent(events[i], hiding_function);\r\n\t}\r\n})();\r\n\r\nscheduler.templates.quick_info_title = function(start, end, ev){ return ev.text.substr(0,50); };\r\nscheduler.templates.quick_info_content = function(start, end, ev){ return ev.details || \"\"; };\r\nscheduler.templates.quick_info_date = function(start, end, ev){\r\n\tif (scheduler.isOneDayEvent(ev) && scheduler.config.rtl){\r\n\t\treturn scheduler.templates.day_date(start, end, ev) + \" \" +scheduler.templates.event_header(end, start, ev);\r\n\t} else if (scheduler.isOneDayEvent(ev)) {\r\n\t\treturn scheduler.templates.day_date(start, end, ev) + \" \" +scheduler.templates.event_header(start, end, ev);\r\n\t} else if (scheduler.config.rtl) {\r\n\t\treturn scheduler.templates.week_date(end, start, ev);\r\n\t} else {\r\n\t\treturn scheduler.templates.week_date(start, end, ev);\r\n\t}\r\n};\r\n\r\nscheduler.showQuickInfo = function(id){\r\n\tif (id == this._quick_info_box_id) return;\r\n\tthis.hideQuickInfo(true);\r\n\tif(this.callEvent(\"onBeforeQuickInfo\", [id]) === false){\r\n\t\treturn;\r\n\t}\r\n\tvar pos = this._get_event_counter_part(id);\r\n\r\n\tif (pos){\r\n\t\tthis._quick_info_box = this._init_quick_info(pos);\r\n\t\tthis._fill_quick_data(id);\r\n\t\tthis._show_quick_info(pos);\r\n\r\n\t\tthis.callEvent(\"onQuickInfo\", [id]);\r\n\t}\r\n};\r\n\r\n(function(){\r\n\r\nfunction cssTimeToMs(time) {\r\n\ttime = time || \"\";\r\n\r\n\tvar num = parseFloat(time),\r\n\t\tunit = time.match(/m?s/),\r\n\t\tmilliseconds;\r\n\r\n\tif (unit) {\r\n\t\tunit = unit[0];\r\n\t}\r\n\r\n\tswitch (unit) {\r\n\t\tcase \"s\": // seconds\r\n\t\t\tmilliseconds = num * 1000;\r\n\t\t\tbreak;\r\n\t\tcase \"ms\": // milliseconds\r\n\t\t\tmilliseconds = num;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tmilliseconds = 0;\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\treturn milliseconds;\r\n}\r\n\r\nscheduler.hideQuickInfo = function(forced){\r\n\tvar qi = this._quick_info_box;\r\n\tvar eventId = this._quick_info_box_id;\r\n\tthis._quick_info_box_id = 0;\r\n\r\n\tif (qi && qi.parentNode){\r\n\t\tvar width = qi.offsetWidth;\r\n\t\tif (scheduler.config.quick_info_detached) {\r\n\t\t\tthis.callEvent(\"onAfterQuickInfo\", [eventId]);\r\n\t\t\treturn qi.parentNode.removeChild(qi);\r\n\t\t}\r\n\r\n\t\tif (qi.style.right == \"auto\")\r\n\t\t\tqi.style.left = -width + \"px\";\r\n\t\telse\r\n\t\t\tqi.style.right = -width + \"px\";\r\n\r\n\t\tif (forced) {\r\n\t\t\tqi.parentNode.removeChild(qi);\r\n\t\t}else{\r\n\r\n\t\t\tvar style;\r\n\t\t\tif(window.getComputedStyle){\r\n\t\t\t\tstyle = window.getComputedStyle(qi, null);\r\n\t\t\t}else if(qi.currentStyle){\r\n\t\t\t\tstyle = qi.currentStyle;\r\n\t\t\t}\r\n\t\t\tvar delay = cssTimeToMs(style[\"transition-delay\"]) + cssTimeToMs(style[\"transition-duration\"]);\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tif(qi.parentNode){\r\n\t\t\t\t\tqi.parentNode.removeChild(qi);\r\n\t\t\t\t}\r\n\t\t\t}, delay);\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterQuickInfo\", [eventId]);\r\n\t}\r\n};\r\n\r\n})();\r\n\r\nscheduler.event(window, \"keydown\", function(e){\r\n\tif (e.keyCode == 27)\r\n\t\tscheduler.hideQuickInfo();\r\n});\r\n\r\nscheduler._show_quick_info = function(pos){\r\n\tvar qi = scheduler._quick_info_box;\r\n\tscheduler._obj.appendChild(qi);\r\n\tvar width = qi.offsetWidth;\r\n\tvar height = qi.offsetHeight;\r\n\r\n\tif (scheduler.config.quick_info_detached){\r\n\t\tvar left = pos.left - pos.dx*(width - pos.width);\r\n\t\tif(scheduler.getView() && scheduler.getView()._x_scroll){\r\n\t\t\t// scrollable timeline\r\n\t\t\tif(scheduler.config.rtl){\r\n\t\t\t\tleft += scheduler.getView()._x_scroll;\r\n\t\t\t}else{\r\n\t\t\t\tleft -= scheduler.getView()._x_scroll;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tvar right = left + width;\r\n\t\tif(right > window.innerWidth){\r\n\t\t\tleft = window.innerWidth - width;\r\n\t\t}\r\n\t\tleft = Math.max(0, left);\r\n\r\n\t\tqi.style.left = left + \"px\";\r\n\t\tqi.style.top = pos.top - (pos.dy?height:-pos.height) + \"px\";\r\n\t} else {\r\n\r\n\t\tconst dataPos = scheduler.$container.querySelector('.dhx_cal_data').offsetTop;\r\n\t\tqi.style.top = dataPos + 20 + \"px\";\r\n\t\tif (pos.dx == 1){\r\n\t\t\tqi.style.right = \"auto\";\r\n\t\t\tqi.style.left = -width + \"px\";\r\n\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tqi.style.left = \"-10px\";\r\n\t\t\t},1);\r\n\t\t} else {\r\n\t\t\tqi.style.left = \"auto\";\r\n\t\t\tqi.style.right = -width + \"px\";\r\n\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tqi.style.right = \"-10px\";\r\n\t\t\t},1);\r\n\t\t}\r\n\t\tqi.className = qi.className.replace(\" dhx_qi_left\",\"\").replace(\" dhx_qi_right\",\"\")+\" dhx_qi_\"+(pos.dx==1?\"left\":\"right\");\r\n\t}\r\n};\r\nscheduler.attachEvent(\"onTemplatesReady\", function(){\r\n\tscheduler.hideQuickInfo();\r\n\tif(this._quick_info_box){\r\n\t\tvar box = this._quick_info_box;\r\n\t\tif(box.parentNode){\r\n\t\t\tbox.parentNode.removeChild(box);\r\n\t\t}\r\n\t\tthis._quick_info_box = null;\r\n\t}\r\n});\r\nscheduler._quick_info_onscroll_handler = function(e){\r\n\tscheduler.hideQuickInfo();\r\n};\r\nscheduler._init_quick_info = function(){\r\n\tif (!this._quick_info_box){\r\n\r\n\r\n\t\tvar qi = this._quick_info_box = document.createElement(\"div\");\r\n\r\n\t\tthis._waiAria.quickInfoAttr(qi);\r\n\r\n\t\tqi.className = \"dhx_cal_quick_info\";\r\n\t\tif (scheduler.$testmode)\r\n\t\t\tqi.className += \" dhx_no_animate\";\r\n\t\tif (scheduler.config.rtl) qi.className += \" dhx_quick_info_rtl\";\r\n\t//title\r\n\t\tvar ariaAttr = this._waiAria.quickInfoHeaderAttrString();\r\n\t\tvar html = `\r\n\t\t<div class=\"dhx_cal_qi_tcontrols\">\r\n\t\t\t<a class=\"dhx_cal_qi_close_btn scheduler_icon close\"></a>\r\n\t\t</div>\r\n\t\t<div class=\"dhx_cal_qi_title\" ${ariaAttr}>\r\n\t\t\t\t\r\n\t\t\t\t<div class=\"dhx_cal_qi_tcontent\"></div>\r\n\t\t\t\t<div class=\"dhx_cal_qi_tdate\"></div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"dhx_cal_qi_content\"></div>`;\r\n\r\n\t//buttons\r\n\t\thtml += \"<div class=\\\"dhx_cal_qi_controls\\\">\";\r\n\t\tvar buttons = scheduler.config.icons_select;\r\n\t\t\tfor (var i = 0; i < buttons.length; i++) {\r\n\t\t\t\tvar ariaAttr = this._waiAria.quickInfoButtonAttrString(this.locale.labels[buttons[i]]);\r\n\t\t\t\thtml += `<div ${ariaAttr} class=\"dhx_qi_big_icon ${buttons[i]}\" title=\"${scheduler.locale.labels[buttons[i]]}\">\r\n\t\t\t\t<div class='dhx_menu_icon ${buttons[i]}'></div><div>${scheduler.locale.labels[buttons[i]]}</div></div>`;\r\n\t\t\t}\r\n\t\t// }\r\n\t\thtml += \"</div>\";\r\n\r\n\t\tqi.innerHTML = html;\r\n\t\tscheduler.event(qi, \"click\", function(ev){\r\n\t\t\tscheduler._qi_button_click(ev.target || ev.srcElement);\r\n\t\t});\r\n\t\tif (scheduler.config.quick_info_detached){\r\n\t\t\tscheduler._detachDomEvent(scheduler._els[\"dhx_cal_data\"][0], \"scroll\", scheduler._quick_info_onscroll_handler);\r\n\t\t\tscheduler.event(scheduler._els[\"dhx_cal_data\"][0], \"scroll\", scheduler._quick_info_onscroll_handler);\r\n\t\t}\r\n\t}\r\n\r\n\treturn this._quick_info_box;\r\n};\r\n\r\nscheduler._qi_button_click = function(node){\r\n\tvar box = scheduler._quick_info_box;\r\n\tif (!node || node == box) return;\r\n\r\n\tif(node.closest(\".dhx_cal_qi_close_btn\")){\r\n\t\tscheduler.hideQuickInfo();\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar mask = scheduler._getClassName(node);\r\n\tif (mask.indexOf(\"_icon\")!=-1){\r\n\t\tvar id = scheduler._quick_info_box_id;\r\n\t\tscheduler._click.buttons[mask.split(\" \")[1].replace(\"icon_\",\"\")](id);\r\n\t} else\r\n\t\tscheduler._qi_button_click(node.parentNode);\r\n};\r\nscheduler._get_event_counter_part = function(id){\r\n\tvar domEv = scheduler.getRenderedEvent(id);\r\n\tvar left = 0;\r\n\tvar top = 0;\r\n\r\n\tvar node = domEv;\r\n\twhile (node && node != scheduler._obj){\r\n\t\tleft += node.offsetLeft;\r\n\t\ttop += node.offsetTop-node.scrollTop;\r\n\t\tnode = node.offsetParent;\r\n\t}\r\n\tif(node){\r\n\t\tvar dx = (left + domEv.offsetWidth/2) > (scheduler._x/2) ? 1 : 0;\r\n\t\tvar dy = (top + domEv.offsetHeight/2) > (scheduler._y/2) ? 1 : 0;\r\n\r\n\t\treturn { left:left, top:top, dx:dx, dy:dy,\r\n\t\t\twidth:domEv.offsetWidth, height:domEv.offsetHeight };\r\n\t}\r\n\treturn 0;\r\n};\r\n\r\nscheduler._fill_quick_data  = function(id){\r\n\tvar ev = scheduler.getEvent(id);\r\n\tvar qi = scheduler._quick_info_box;\r\n\r\n\tscheduler._quick_info_box_id = id;\r\n\r\n//title content\r\n\r\n\tvar header = {\r\n\t\tcontent: scheduler.templates.quick_info_title(ev.start_date, ev.end_date, ev),\r\n\t\tdate: scheduler.templates.quick_info_date(ev.start_date, ev.end_date, ev)\r\n\t};\r\n\tvar titleContent = qi.querySelector(\".dhx_cal_qi_tcontent\");\r\n\ttitleContent.innerHTML = `<span>${header.content}</span>`;\r\n\tvar titleDate = qi.querySelector(\".dhx_cal_qi_tdate\");\r\n\ttitleDate.innerHTML = header.date;\r\n\r\n\tscheduler._waiAria.quickInfoHeader(qi, [header.content, header.date].join(\" \"));\r\n\r\n//main content\r\n\tvar main = qi.querySelector(\".dhx_cal_qi_content\");\r\n\tconst mainContent = scheduler.templates.quick_info_content(ev.start_date, ev.end_date, ev);\r\n\tif(mainContent){\r\n\t\tmain.classList.remove(\"dhx_hidden\");\r\n\t\tmain.innerHTML = mainContent;\r\n\t}else{\r\n\t\tmain.classList.add(\"dhx_hidden\");\r\n\t}\r\n};\r\n\r\n\r\n}","export default function(scheduler){\r\n\t\r\nscheduler.attachEvent(\"onTemplatesReady\", function() {\r\n\tvar originalRecurringSetValue;\r\n\tif (scheduler.form_blocks.recurring) {\r\n\t\toriginalRecurringSetValue = scheduler.form_blocks.recurring.set_value;\r\n\t}\r\n\tvar original_left_buttons = scheduler.config.buttons_left.slice();\r\n\tvar original_right_buttons = scheduler.config.buttons_right.slice();\r\n\r\n\tscheduler.attachEvent(\"onBeforeLightbox\", function(id) {\r\n\t\tif (this.config.readonly_form || this.getEvent(id).readonly) {\r\n\t\t\tthis.config.readonly_active = true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.config.readonly_active = false;\r\n\t\t\tscheduler.config.buttons_left = original_left_buttons.slice();\r\n\t\t\tscheduler.config.buttons_right = original_right_buttons.slice();\r\n\t\r\n\t\t\t// initial value\r\n\t\t\tif(scheduler.form_blocks.recurring) {\r\n\t\t\t\tscheduler.form_blocks.recurring.set_value = originalRecurringSetValue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar sns = this.config.lightbox.sections;\r\n\t\tif (this.config.readonly_active) {\r\n\t\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\t\tif (sns[i].type == 'recurring') {\r\n\t\t\t\t\tif (this.config.readonly_active && scheduler.form_blocks.recurring) {\r\n\t\t\t\t\t\tscheduler.form_blocks.recurring.set_value = function(node, value, ev) {\r\n\t\t\t\t\t\t\tvar wrapper = scheduler.$domHelpers.closest(node, \".dhx_wrap_section\");\r\n\t\t\t\t\t\t\tvar style = \"none\";\r\n\t\t\t\t\t\t\twrapper.querySelector('.dhx_cal_lsection').display = style;\r\n\t\t\t\t\t\t\twrapper.querySelector('.dhx_form_repeat').display = style;\r\n\t\t\t\t\t\t\twrapper.style.display = style;\r\n\r\n\t\t\t\t\t\t\tscheduler.setLightboxSize();\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar forbidden_buttons = [\"dhx_delete_btn\", \"dhx_save_btn\"];\r\n\t\t\tvar button_arrays = [scheduler.config.buttons_left, scheduler.config.buttons_right];\r\n\t\t\tfor (var i = 0; i < forbidden_buttons.length; i++) {\r\n\t\t\t\tvar forbidden_button = forbidden_buttons[i];\r\n\t\t\t\tfor (var k = 0; k < button_arrays.length; k++) {\r\n\t\t\t\t\tvar button_array = button_arrays[k];\r\n\t\t\t\t\tvar index = -1;\r\n\t\t\t\t\tfor (var p = 0; p < button_array.length; p++) {\r\n\t\t\t\t\t\tif (button_array[p] == forbidden_button) {\r\n\t\t\t\t\t\t\tindex = p;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (index != -1) {\r\n\t\t\t\t\t\tbutton_array.splice(index, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.resetLightbox();\r\n\r\n\t\treturn true;\r\n\t});\r\n\r\n\tfunction txt_replace(tag, d, n, text) {\r\n\t\tvar txts = d.getElementsByTagName(tag);\r\n\t\tvar txtt = n.getElementsByTagName(tag);\r\n\t\tfor (var i = txtt.length - 1; i >= 0; i--) {\r\n\t\t\tvar n = txtt[i];\r\n\t\t\tif (!text){\r\n\t\t\t\tn.disabled = true;\r\n\t\t\t\t//radio and checkboxes loses state after .cloneNode in IE\r\n\t\t\t\tif(d.checked)\r\n\t\t\t\t\tn.checked = true;\r\n\t\t\t}else {\r\n\t\t\t\tvar t = document.createElement(\"span\");\r\n\t\t\t\tt.className = \"dhx_text_disabled\";\r\n\t\t\t\tt.innerHTML = text(txts[i]);\r\n\t\t\t\tn.parentNode.insertBefore(t, n);\r\n\t\t\t\tn.parentNode.removeChild(n);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar old = scheduler._fill_lightbox;\r\n\tscheduler._fill_lightbox = function() {\r\n\r\n\t\tvar lb = this.getLightbox();\r\n\t\tif (this.config.readonly_active) {\r\n\t\t\tlb.style.visibility = 'hidden';\r\n\t\t\t// lightbox should have actual sizes before rendering controls\r\n\t\t\t// currently only matters for dhtmlxCombo\r\n\t\t\tlb.style.display = 'block';\r\n\t\t}\r\n\t\tvar res = old.apply(this, arguments);\r\n\t\tif (this.config.readonly_active) {\r\n\t\t\t//reset visibility and display\r\n\t\t\tlb.style.visibility = '';\r\n\t\t\tlb.style.display = 'none';\r\n\t\t}\r\n\r\n\t\tif (this.config.readonly_active) {\r\n\r\n\t\t\tvar originalForm = this.getLightbox();\r\n\t\t\tvar readonlyForm = this._lightbox_r = originalForm.cloneNode(true);\r\n\t\t\treadonlyForm.id = scheduler.uid();\r\n\t\t\treadonlyForm.className += \" dhx_cal_light_readonly\";\r\n\t\t\ttxt_replace(\"textarea\", originalForm, readonlyForm, function(a) {\r\n\t\t\t\treturn a.value;\r\n\t\t\t});\r\n\t\t\ttxt_replace(\"input\", originalForm, readonlyForm, false);\r\n\t\t\ttxt_replace(\"select\", originalForm, readonlyForm, function(a) {\r\n\t\t\t\tif(!a.options.length) return \"\";\r\n\t\t\t\treturn a.options[Math.max((a.selectedIndex || 0), 0)].text;\r\n\t\t\t});\r\n\r\n\t\t\toriginalForm.parentNode.insertBefore(readonlyForm, originalForm);\r\n\r\n\t\t\tthis.showCover(readonlyForm);\r\n\t\t\tif (scheduler._lightbox)\r\n\t\t\t\tscheduler._lightbox.parentNode.removeChild(scheduler._lightbox);\r\n\t\t\tthis._lightbox = readonlyForm;\r\n\r\n\t\t\tif (scheduler.config.drag_lightbox)\r\n\t\t\t\tscheduler.event(readonlyForm.firstChild, \"mousedown\", scheduler._ready_to_dnd);\r\n\t\t\t\t\r\n\t\t\tscheduler._init_lightbox_events();\r\n\t\t\tthis.setLightboxSize();\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tvar hold = scheduler.hide_lightbox;\r\n\tscheduler.hide_lightbox = function() {\r\n\t\tif (this._lightbox_r) {\r\n\t\t\tthis._lightbox_r.parentNode.removeChild(this._lightbox_r);\r\n\t\t\tthis._lightbox_r = this._lightbox = null;\r\n\t\t}\r\n\r\n\t\treturn hold.apply(this, arguments);\r\n\t};\r\n});\r\n\r\n\r\n}","export default function(scheduler){\r\n\r\nscheduler.config.occurrence_timestamp_in_utc = false;\r\nscheduler.config.recurring_workdays = [1,2,3,4,5];\r\nscheduler.form_blocks[\"recurring\"] = {\r\n\t_get_node : function(node){\r\n\t\tif (typeof node == \"string\"){\r\n\t\t\tlet element = scheduler._lightbox.querySelector(`#${node}`);\r\n\t\t\tif(!element){\r\n\t\t\t\t// form is detached from lightbox \r\n\t\t\t\t// search globally, won't work in LWC\r\n\t\t\t\telement = document.getElementById(node);\r\n\t\t\t}\r\n\t\t\tnode = element;\r\n\t\t}\r\n\t\tif (node.style.display == 'none')\r\n\t\t\tnode.style.display = \"\";\r\n\t\treturn node;\r\n\t},\r\n\t_outer_html: function(node){\r\n\t\treturn node.outerHTML || getOuterHTML(node);\r\n\r\n\t\t//probably not needed, FF v10- only\r\n\t\tfunction getOuterHTML(n){\r\n\t\t\tvar div = document.createElement('div'), h;\r\n\t\t\tdiv.appendChild( n.cloneNode(true) );\r\n\t\t\th = div.innerHTML;\r\n\t\t\tdiv = null;\r\n\t\t\treturn h;\r\n\t\t}\r\n\t},\r\n\trender:function(sns) {\r\n\t\tif(sns.form){\r\n\t\t\tvar rec = scheduler.form_blocks[\"recurring\"];\r\n\t\t\tvar form = rec._get_node(sns.form);\r\n\t\t\tvar html = rec._outer_html(form);\r\n\t\t\tform.style.display = 'none';\r\n\t\t\treturn html;\r\n\t\t}\r\n\t\tvar loc = scheduler.locale.labels;\r\n\t\treturn '<div class=\"dhx_form_repeat\"> '+\r\n\t\t\t\t\t'<form> '+\r\n\t\t\t\t\t\t'<div class=\"dhx_repeat_left\"> '+\r\n\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"repeat\" value=\"day\" />'+loc.repeat_radio_day+'</label></div> '+\r\n\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"repeat\" value=\"week\"/>'+loc.repeat_radio_week+'</label></div> '+\r\n\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"repeat\" value=\"month\" checked />'+loc.repeat_radio_month+'</label></div> '+\r\n\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"repeat\" value=\"year\" />'+loc.repeat_radio_year+'</label></div> '+\r\n\t\t\t\t\t\t'</div> '+\r\n\t\t\t\t\t\t'<div class=\"dhx_repeat_divider\">'+\r\n\t\t\t\t\t\t'</div> '+\r\n\t\t\t\t\t\t'<div class=\"dhx_repeat_center\"> '+\r\n\t\t\t\t\t\t\t'<div style=\"display:none;\" id=\"dhx_repeat_day\"> '+\r\n\t\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"day_type\" value=\"d\"/>'+loc.repeat_radio_day_type+'</label>'+\r\n\t\t\t\t\t\t\t\t'<label><input class=\"dhx_repeat_text\" type=\"text\" name=\"day_count\" value=\"1\" />'+loc.repeat_text_day_count+'</label></div> '+\r\n\t\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"day_type\" checked value=\"w\"/>'+loc.repeat_radio_day_type2+'</label></div> '+\r\n\t\t\t\t\t\t\t'</div> '+\r\n\t\t\t\t\t\t\t'<div style=\"display:none;\" id=\"dhx_repeat_week\">'+\r\n\t\t\t\t\t\t\t\t'<div><label>'+loc.repeat_week+'<input class=\"dhx_repeat_text\" type=\"text\" name=\"week_count\" value=\"1\" /></label>'+\r\n\t\t\t\t\t\t\t\t'<span>'+loc.repeat_text_week_count+'</span></div>  '+\r\n\t\t\t\t\t\t\t\t'<table class=\"dhx_repeat_days\"> '+\r\n\t\t\t\t\t\t\t\t\t'<tr> '+\r\n\t\t\t\t\t\t\t\t\t\t'<td><div><label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"1\" />'+loc.day_for_recurring[1]+'</label></div> '+\r\n\t\t\t\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"4\" />'+loc.day_for_recurring[4]+'</label></div></td> '+\r\n\t\t\t\t\t\t\t\t\t\t'<td><div><label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"2\" />'+loc.day_for_recurring[2]+'</label></div> '+\r\n\t\t\t\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"5\" />'+loc.day_for_recurring[5]+'</label></div></td> '+\r\n\t\t\t\t\t\t\t\t\t\t'<td><div><label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"3\" />'+loc.day_for_recurring[3]+'</label></div> '+\r\n\t\t\t\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"6\" />'+loc.day_for_recurring[6]+'</label></div></td> '+\r\n\t\t\t\t\t\t\t\t\t\t'<td><div><label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"0\" />'+loc.day_for_recurring[0]+'</label></div> </td> '+\r\n\t\t\t\t\t\t\t\t\t'</tr> '+\r\n\t\t\t\t\t\t\t\t'</table> '+\r\n\t\t\t\t\t\t\t'</div> '+\r\n\t\t\t\t\t\t\t'<div id=\"dhx_repeat_month\"> '+\r\n\t\t\t\t\t\t\t\t'<div><label class = \"dhx_repeat_month_label\"><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"month_type\" value=\"d\"/>'+loc.repeat_radio_month_type+'</label>'+\r\n\t\t\t\t\t\t\t\t\t'<label><input class=\"dhx_repeat_text\" type=\"text\" name=\"month_day\" value=\"1\" />'+loc.repeat_text_month_day+'</label>'+\r\n\t\t\t\t\t\t\t\t\t'<label><input class=\"dhx_repeat_text\" type=\"text\" name=\"month_count\" value=\"1\" />'+loc.repeat_text_month_count+'</label></div> '+\r\n\t\t\t\t\t\t\t\t\t'<div><label class = \"dhx_repeat_month_label\"><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"month_type\" checked value=\"w\"/>'+loc.repeat_radio_month_start+'</label>'+\r\n\t\t\t\t\t\t\t\t\t'<input class=\"dhx_repeat_text\" type=\"text\" name=\"month_week2\" value=\"1\" />'+\r\n\t\t\t\t\t\t\t\t\t'<label>'+\r\n\t\t\t\t\t\t\t\t\t\t'<select name=\"month_day2\">'+\r\n\t\t\t\t\t\t\t\t\t\t'\t<option value=\"1\" selected >'+scheduler.locale.date.day_full[1]+\r\n\t\t\t\t\t\t\t\t\t\t\t'<option value=\"2\">'+scheduler.locale.date.day_full[2]+\r\n\t\t\t\t\t\t\t\t\t\t\t'<option value=\"3\">'+scheduler.locale.date.day_full[3]+\r\n\t\t\t\t\t\t\t\t\t\t\t'<option value=\"4\">'+scheduler.locale.date.day_full[4]+\r\n\t\t\t\t\t\t\t\t\t\t\t'<option value=\"5\">'+scheduler.locale.date.day_full[5]+\r\n\t\t\t\t\t\t\t\t\t\t\t'<option value=\"6\">'+scheduler.locale.date.day_full[6]+\r\n\t\t\t\t\t\t\t\t\t\t\t'<option value=\"0\">'+scheduler.locale.date.day_full[0]+\r\n\t\t\t\t\t\t\t\t\t\t'</select>'+\r\n\t\t\t\t\t\t\t\t\t\tloc.repeat_text_month_count2_before+\r\n\t\t\t\t\t\t\t\t\t'</label>'+\r\n\t\t\t\t\t\t\t\t\t'<label><input class=\"dhx_repeat_text\" type=\"text\" name=\"month_count2\" value=\"1\" />'+loc.repeat_text_month_count2_after+'</label></div> '+\r\n\t\t\t\t\t\t\t'</div> '+\r\n\t\t\t\t\t\t\t'<div style=\"display:none;\" id=\"dhx_repeat_year\"> '+\r\n\t\t\t\t\t\t\t\t'<div><label class = \"dhx_repeat_year_label\"><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"year_type\" value=\"d\"/>'+loc.repeat_radio_day_type+'</label>'+\r\n\t\t\t\t\t\t\t\t'<label><input class=\"dhx_repeat_text\" type=\"text\" name=\"year_day\" value=\"1\" />'+loc.repeat_text_year_day+'</label>'+\r\n\t\t\t\t\t\t\t\t'<label>'+\r\n\t\t\t\t\t\t\t\t\t'<select name=\"year_month\">'+\r\n\t\t\t\t\t\t\t\t\t\t'<option value=\"0\" selected >'+loc.month_for_recurring[0]+\r\n\t\t\t\t\t\t\t\t\t\t'<option value=\"1\">'+loc.month_for_recurring[1]+\r\n\t\t\t\t\t\t\t\t\t\t'<option value=\"2\">'+loc.month_for_recurring[2]+\r\n\t\t\t\t\t\t\t\t\t\t'<option value=\"3\">'+loc.month_for_recurring[3]+\r\n\t\t\t\t\t\t\t\t\t\t'<option value=\"4\">'+loc.month_for_recurring[4]+\r\n\t\t\t\t\t\t\t\t\t\t'<option value=\"5\">'+loc.month_for_recurring[5]+\r\n\t\t\t\t\t\t\t\t\t\t'<option value=\"6\">'+loc.month_for_recurring[6]+\r\n\t\t\t\t\t\t\t\t\t\t'<option value=\"7\">'+loc.month_for_recurring[7]+\r\n\t\t\t\t\t\t\t\t\t\t'<option value=\"8\">'+loc.month_for_recurring[8]+\r\n\t\t\t\t\t\t\t\t\t\t'<option value=\"9\">'+loc.month_for_recurring[9]+\r\n\t\t\t\t\t\t\t\t\t\t'<option value=\"10\">'+loc.month_for_recurring[10]+\r\n\t\t\t\t\t\t\t\t\t\t'<option value=\"11\">'+loc.month_for_recurring[11]+\r\n\t\t\t\t\t\t\t\t\t'</select>'+\r\n\t\t\t\t\t\t\t\t\tloc.select_year_month+\r\n\t\t\t\t\t\t\t\t'</label></div> '+\r\n\t\t\t\t\t\t\t\t'<div><label class = \"dhx_repeat_year_label\"><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"year_type\" checked value=\"w\"/>'+loc.repeat_year_label+'</label>'+\r\n\t\t\t\t\t\t\t\t'<input class=\"dhx_repeat_text\" type=\"text\" name=\"year_week2\" value=\"1\" />'+\r\n\t\t\t\t\t\t\t\t'<select name=\"year_day2\">'+\r\n\t\t\t\t\t\t\t\t\t'<option value=\"1\" selected >'+scheduler.locale.date.day_full[1]+\r\n\t\t\t\t\t\t\t\t\t'<option value=\"2\">'+scheduler.locale.date.day_full[2]+\r\n\t\t\t\t\t\t\t\t\t'<option value=\"3\">'+scheduler.locale.date.day_full[3]+\r\n\t\t\t\t\t\t\t\t\t'<option value=\"4\">'+scheduler.locale.date.day_full[4]+\r\n\t\t\t\t\t\t\t\t\t'<option value=\"5\">'+scheduler.locale.date.day_full[5]+\r\n\t\t\t\t\t\t\t\t\t'<option value=\"6\">'+scheduler.locale.date.day_full[6]+\r\n\t\t\t\t\t\t\t\t\t'<option value=\"7\">'+scheduler.locale.date.day_full[0]+\r\n\t\t\t\t\t\t\t\t'</select>'+\r\n\t\t\t\t\t\t\t\tloc.select_year_day2+\r\n\t\t\t\t\t\t\t\t'<select name=\"year_month2\">'+\r\n\t\t\t\t\t\t\t\t\t'<option value=\"0\" selected >'+loc.month_for_recurring[0]+\r\n\t\t\t\t\t\t\t\t\t'<option value=\"1\">'+loc.month_for_recurring[1]+\r\n\t\t\t\t\t\t\t\t\t'<option value=\"2\">'+loc.month_for_recurring[2]+\r\n\t\t\t\t\t\t\t\t\t'<option value=\"3\">'+loc.month_for_recurring[3]+\r\n\t\t\t\t\t\t\t\t\t'<option value=\"4\">'+loc.month_for_recurring[4]+\r\n\t\t\t\t\t\t\t\t\t'<option value=\"5\">'+loc.month_for_recurring[5]+\r\n\t\t\t\t\t\t\t\t\t'<option value=\"6\">'+loc.month_for_recurring[6]+\r\n\t\t\t\t\t\t\t\t\t'<option value=\"7\">'+loc.month_for_recurring[7]+\r\n\t\t\t\t\t\t\t\t\t'<option value=\"8\">'+loc.month_for_recurring[8]+\r\n\t\t\t\t\t\t\t\t\t'<option value=\"9\">'+loc.month_for_recurring[9]+\r\n\t\t\t\t\t\t\t\t\t'<option value=\"10\">'+loc.month_for_recurring[10]+\r\n\t\t\t\t\t\t\t\t\t'<option value=\"11\">'+loc.month_for_recurring[11]+\r\n\t\t\t\t\t\t\t\t'</select></div> '+\r\n\t\t\t\t\t\t\t'</div> '+\r\n\t\t\t\t\t\t'</div> '+\r\n\t\t\t\t\t\t'<div class=\"dhx_repeat_divider\">'+\r\n\t\t\t\t\t\t'</div> '+\r\n\t\t\t\t\t\t'<div class=\"dhx_repeat_right\"> '+\r\n\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"end\" checked/>'+loc.repeat_radio_end+'</label></div> '+\r\n\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"end\" />'+loc.repeat_radio_end2+'</label>'+\r\n\t\t\t\t\t\t\t'<input class=\"dhx_repeat_text\" type=\"text\" name=\"occurences_count\" value=\"1\" />'+loc.repeat_text_occurences_count+'</div> '+\r\n\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"end\" />'+loc.repeat_radio_end3+'</label>'+\r\n\t\t\t\t\t\t\t'<input class=\"dhx_repeat_date\" type=\"text\" name=\"date_of_end\" value=\"'+scheduler.config.repeat_date_of_end+'\" /></div> '+\r\n\t\t\t\t\t\t'</div> '+\r\n\t\t\t\t\t'</form> '+\r\n\t\t\t\t'</div> '+\r\n\t\t\t\t'</div>';\r\n\t},\r\n\t_ds: {},\r\n\t_get_form_node: function(els, name, value){\r\n\t\tvar col = els[name];\r\n\t\tif(!col) return null;\r\n\t\tif(col.nodeName) return col;\r\n\r\n\t\tif(col.length){\r\n\t\t\tfor(var i=0; i < col.length; i++){\r\n\t\t\t\tif(col[i].value == value)\r\n\t\t\t\t\treturn col[i];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_get_node_value: function(els, name, multiselect){\r\n\t\tvar col = els[name];\r\n\t\tif(!col) return \"\";\r\n\t\tif(col.length){\r\n\t\t\tif(multiselect){\r\n\t\t\t\tvar res = [];\r\n\t\t\t\tfor (var i = 0; i < col.length; i++)\r\n\t\t\t\t\tif (col[i].checked) res.push(col[i].value);\r\n\r\n\t\t\t\treturn res;\r\n\t\t\t}else{\r\n\t\t\t\tfor (var i = 0; i < col.length; i++)\r\n\t\t\t\t\tif (col[i].checked) return col[i].value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(col.value)\r\n\t\t\treturn !multiselect ? col.value : [col.value];\r\n\t},\r\n\r\n\t_get_node_numeric_value: function(els, name){\r\n\t\tvar value = scheduler.form_blocks[\"recurring\"]._get_node_value(els, name);\r\n\t\treturn ((value * 1) || 0);\r\n\t},\r\n\r\n\t_set_node_value: function(els, name, value){\r\n\t\tvar col = els[name];\r\n\t\tif(!col) return;\r\n\r\n\t\tif(col.name == name){\r\n\t\t\tcol.value = value;\r\n\t\t}else if(col.length){\r\n\t\t\tvar hash_value = typeof value == \"object\";\r\n\t\t\tfor (var i = 0; i < col.length; i++)\r\n\t\t\t\tif (hash_value || col[i].value == value){\r\n\t\t\t\t\tcol[i].checked = hash_value ? !!value[col[i].value] : !!value;\r\n\t\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_init_set_value:function(node, value, ev) {\r\n\t\tvar block = scheduler.form_blocks[\"recurring\"];\r\n\t\tvar get_value = block._get_node_value;\r\n\t\tvar set_value = block._set_node_value;\r\n\t\tscheduler.form_blocks[\"recurring\"]._ds = {start:ev.start_date, end:ev._end_date};\r\n\r\n\t\tvar str_date_format = scheduler.date.str_to_date(scheduler.config.repeat_date, false, true);\r\n\t\tvar str_date = function(str_date) {\r\n\t\t\tvar date = str_date_format(str_date);\r\n\t\t\tif (scheduler.config.include_end_by)\r\n\t\t\t\tdate = scheduler.date.add(date, 1, 'day');\r\n\t\t\treturn date;\r\n\t\t};\r\n\r\n\t\tvar date_str = scheduler.date.date_to_str(scheduler.config.repeat_date);\r\n\r\n\t\tvar top = node.getElementsByTagName(\"FORM\")[0];\r\n\t\tvar els = {};\r\n\r\n\t\tfunction register_els(inps) {\r\n\t\t\tfor (var i = 0; i < inps.length; i++) {\r\n\t\t\t\tvar inp = inps[i];\r\n\r\n\t\t\t\tif(inp.name){\r\n\t\t\t\t\tif(!els[inp.name]){\r\n\t\t\t\t\t\tels[inp.name] = inp;\r\n\t\t\t\t\t}else if(els[inp.name].nodeType){\r\n\t\t\t\t\t\tvar node = els[inp.name];\r\n\t\t\t\t\t\tels[inp.name] = [node, inp];\r\n\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tels[inp.name].push(inp);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tregister_els(top.getElementsByTagName(\"INPUT\"));\r\n\t\tregister_els(top.getElementsByTagName(\"SELECT\"));\r\n\r\n\t\tif (!scheduler.config.repeat_date_of_end) {\r\n\t\t\tvar formatter = scheduler.date.date_to_str(scheduler.config.repeat_date);\r\n\t\t\tscheduler.config.repeat_date_of_end = formatter(scheduler.date.add(scheduler._currentDate(), 30, \"day\"));\r\n\t\t}\r\n\t\tset_value(els, \"date_of_end\", scheduler.config.repeat_date_of_end);\r\n\r\n\t\tvar $ = function(a) {\r\n\t\t\treturn scheduler._lightbox.querySelector(`#${a}`) || { style:{} };//return fake object if node not found\r\n\t\t};\r\n\r\n\t\tfunction change_current_view() {\r\n\t\t\t$(\"dhx_repeat_day\").style.display = \"none\";\r\n\t\t\t$(\"dhx_repeat_week\").style.display = \"none\";\r\n\t\t\t$(\"dhx_repeat_month\").style.display = \"none\";\r\n\t\t\t$(\"dhx_repeat_year\").style.display = \"none\";\r\n\t\t\t$(\"dhx_repeat_\" + this.value).style.display = \"\";\r\n\t\t\tscheduler.setLightboxSize();\r\n\t\t}\r\n\r\n\t\tfunction get_repeat_code(dates) {\r\n\t\t\tvar code = [get_value(els, \"repeat\")];\r\n\t\t\tget_rcode[code[0]](code, dates);\r\n\r\n\t\t\twhile (code.length < 5) code.push(\"\");\r\n\t\t\tvar repeat = \"\";\r\n\r\n\t\t\tvar end = get_end_rule(els);\r\n\r\n\t\t\tif (end == \"no\") {\r\n\t\t\t\tdates.end = new Date(9999, 1, 1);\r\n\t\t\t\trepeat = \"no\";\r\n\t\t\t}\r\n\t\t\telse if (end == \"date_of_end\") {\r\n\t\t\t\tdates.end = str_date(get_value(els, \"date_of_end\"));\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tscheduler.transpose_type(code.join(\"_\"));\r\n\t\t\t\trepeat = Math.max(1, get_value(els, \"occurences_count\"));\r\n\r\n\t\t\t\tvar transp = 0;\r\n\r\n\t\t\t\t//var transp = ((code[0] == \"week\" && code[4] && code[4].toString().indexOf(scheduler.config.start_on_monday ? 1 : 0) == -1) ? 1 : 0);\r\n\r\n\t\t\t\t// which is equal to following code, seems to produce extra instance, not clear why needed\r\n\r\n\t\t\t\t/*if(code[0] == \"week\"){\r\n\t\t\t\t\tvar days = code[4] || \"\";\r\n\t\t\t\t\tif(scheduler.config.start_on_monday){\r\n\t\t\t\t\t\tif(days.indexOf(1) == -1)\r\n\t\t\t\t\t\ttransp = 1;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(days.indexOf(0) == -1)\r\n\t\t\t\t\t\ttransp = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}*/\r\n\r\n\t\t\t//\tdates.end = scheduler.date.add(new Date(dates.start), repeat + transp, code.join(\"_\"));\r\n\r\n\t\t\t\tdates.end = scheduler.date[\"add_\" + code.join(\"_\")](new Date(dates.start), repeat + transp, {start_date: dates.start}) || dates.start;\r\n\t\t\t}\r\n\r\n\t\t\treturn code.join(\"_\") + \"#\" + repeat;\r\n\t\t}\r\n\t\tfunction get_end_rule(els){\r\n\t\t\tvar end = els[\"end\"];\r\n\t\t\tif(end.length){\r\n\t\t\t\tfor(var i =0; i < end.length; i++){\r\n\t\t\t\t\tif(end[i].checked){\r\n\t\t\t\t\t\tif(end[i].value && end[i].value != \"on\"){//seems to be default value:var input = document.createElement(\"input\"); input.type = \"radio\"; input.value\r\n\t\t\t\t\t\t\treturn end[i].value;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(!i){\r\n\t\t\t\t\t\t\t\treturn \"no\";\r\n\t\t\t\t\t\t\t}else if(i == 2){\r\n\t\t\t\t\t\t\t\treturn \"date_of_end\";\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\treturn \"occurences_count\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(end.value)\r\n\t\t\t\t\treturn end.value;\r\n\t\t\t}\r\n\t\t\treturn \"no\";\r\n\t\t}\r\n\t\tfunction set_end_rule(els, value){\r\n\t\t\tvar end = els[\"end\"];\r\n\r\n\t\t\tif(end.length){\r\n\t\t\t\tvar has_values = !!end[0].value && end[0].value != \"on\";\r\n\t\t\t\tif(has_values){\r\n\t\t\t\t\tfor(var i =0; i < end.length; i++){\r\n\t\t\t\t\t\tif(end[i].value == value)\r\n\t\t\t\t\t\t\tend[i].checked = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar ind = 0;\r\n\t\t\t\t\tswitch(value){\r\n\t\t\t\t\t\tcase \"no\":\r\n\t\t\t\t\t\t\tind = 0;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"date_of_end\":\r\n\t\t\t\t\t\t\tind = 2;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tind = 1;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tend[ind].checked = true;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tend.value = value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tscheduler.form_blocks[\"recurring\"]._get_repeat_code = get_repeat_code;\r\n\t\tvar get_rcode = {\r\n\t\t\tmonth:function(code, dates) {\r\n\t\t\t\tvar get_value = scheduler.form_blocks[\"recurring\"]._get_node_value;\r\n\t\t\t\tvar get_numeric_value = scheduler.form_blocks[\"recurring\"]._get_node_numeric_value;\r\n\r\n\t\t\t\tif (get_value(els, \"month_type\") == \"d\") {\r\n\t\t\t\t\tcode.push(Math.max(1, get_numeric_value(els, \"month_count\")));\r\n\t\t\t\t\tdates.start.setDate(get_value(els, \"month_day\"));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcode.push(Math.max(1, get_numeric_value(els, \"month_count2\")));\r\n\t\t\t\t\tcode.push( get_value(els, \"month_day2\"));\r\n\t\t\t\t\tcode.push(Math.max(1, get_numeric_value(els, \"month_week2\")));\r\n\t\t\t\t\tif (!scheduler.config.repeat_precise){\r\n\t\t\t\t\t\tdates.start.setDate(1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdates._start = true;\r\n\t\t\t},\r\n\t\t\tweek:function(code, dates) {\r\n\t\t\t\tvar get_value = scheduler.form_blocks[\"recurring\"]._get_node_value;\r\n\t\t\t\tvar get_numeric_value = scheduler.form_blocks[\"recurring\"]._get_node_numeric_value;\r\n\r\n\t\t\t\tcode.push(Math.max(1, get_numeric_value(els, \"week_count\")));\r\n\t\t\t\tcode.push(\"\");\r\n\t\t\t\tcode.push(\"\");\r\n\t\t\t\tvar t = [];\r\n\r\n\t\t\t\tvar col = get_value(els, \"week_day\", true);\r\n\t\t\t\t//var col = els[\"week_day\"];\r\n\t\t\t\tvar day = dates.start.getDay();\r\n\t\t\t\tvar start_exists = false;\r\n\r\n\t\t\t\tfor (var i = 0; i < col.length; i++){\r\n\t\t\t\t\tt.push(col[i]);\r\n\t\t\t\t\tstart_exists = start_exists || col[i] == day;\r\n\t\t\t\t}\r\n\t\t\t\tif (!t.length){\r\n\t\t\t\t\tt.push(day);\r\n\t\t\t\t\tstart_exists = true;\r\n\t\t\t\t}\r\n\t\t\t\tt.sort();\r\n\r\n\r\n\t\t\t\tif (!scheduler.config.repeat_precise){\r\n\t\t\t\t\tdates.start = scheduler.date.week_start(dates.start);\r\n\t\t\t\t\tdates._start = true;\r\n\t\t\t\t} else if (!start_exists){\r\n\t\t\t\t\tscheduler.transpose_day_week(dates.start, t, 1, 7);\r\n\t\t\t\t\tdates._start = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcode.push(t.join(\",\"));\r\n\t\t\t},\r\n\t\t\tday:function(code) {\r\n\t\t\t\tvar get_value = scheduler.form_blocks[\"recurring\"]._get_node_value;\r\n\t\t\t\tvar get_numeric_value = scheduler.form_blocks[\"recurring\"]._get_node_numeric_value;\r\n\r\n\t\t\t\tif (get_value(els, \"day_type\") == \"d\") {\r\n\t\t\t\t\tcode.push(Math.max(1, get_numeric_value(els, \"day_count\")));\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tcode.push(\"week\");\r\n\t\t\t\t\tcode.push(1);\r\n\t\t\t\t\tcode.push(\"\");\r\n\t\t\t\t\tcode.push(\"\");\r\n\t\t\t\t\tcode.push(scheduler.config.recurring_workdays.join(\",\"));\r\n\t\t\t\t\tcode.splice(0, 1);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tyear:function(code, dates) {\r\n\t\t\t\tvar get_value = scheduler.form_blocks[\"recurring\"]._get_node_value;\r\n\r\n\t\t\t\tif (get_value(els, \"year_type\") == \"d\") {\r\n\t\t\t\t\tcode.push(\"1\");\r\n\t\t\t\t\tdates.start.setMonth(0);\r\n\t\t\t\t\tdates.start.setDate(get_value(els, \"year_day\"));\r\n\t\t\t\t\tdates.start.setMonth(get_value(els, \"year_month\"));\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcode.push(\"1\");\r\n\t\t\t\t\tcode.push(get_value(els, \"year_day2\"));\r\n\t\t\t\t\tcode.push(get_value(els, \"year_week2\"));\r\n\t\t\t\t\tdates.start.setDate(1);\r\n\t\t\t\t\tdates.start.setMonth(get_value(els, \"year_month2\"));\r\n\t\t\t\t}\r\n\t\t\t\tdates._start = true;\r\n\t\t\t}\r\n\t\t};\r\n\t\tvar set_rcode = {\r\n\t\t\tweek:function(code, dates) {\r\n\t\t\t\tvar set_value = scheduler.form_blocks[\"recurring\"]._set_node_value;\r\n\t\t\t\tset_value(els, \"week_count\", code[1]);\r\n\r\n\t\t\t\tvar t = code[4].split(\",\");\r\n\t\t\t\tvar d = {};\r\n\t\t\t\tfor (var i = 0; i < t.length; i++) d[t[i]] = true;\r\n\r\n\t\t\t\tset_value(els, \"week_day\", d);\r\n\r\n\t\t\t\t//for (var i = 0; i < col.length; i++)\r\n\t\t\t\t//\tcol[i].checked = (!!d[col[i].value]);\r\n\t\t\t},\r\n\t\t\tmonth:function(code, dates) {\r\n\t\t\t\tvar set_value = scheduler.form_blocks[\"recurring\"]._set_node_value;\r\n\r\n\t\t\t\tif (code[2] === \"\") {\r\n\t\t\t\t\tset_value(els, \"month_type\", \"d\");\r\n\t\t\t\t\tset_value(els, \"month_count\", code[1]);\r\n\t\t\t\t\tset_value(els, \"month_day\", dates.start.getDate());\r\n\t\t\t\t} else {\r\n\t\t\t\t\tset_value(els, \"month_type\", \"w\");\r\n\t\t\t\t\tset_value(els, \"month_count2\", code[1]);\r\n\t\t\t\t\tset_value(els, \"month_week2\",  code[3]);\r\n\t\t\t\t\tset_value(els, \"month_day2\", code[2]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tday:function(code, dates) {\r\n\t\t\t\tvar set_value = scheduler.form_blocks[\"recurring\"]._set_node_value;\r\n\t\t\t\tset_value(els, \"day_type\", \"d\");\r\n\t\t\t\tset_value(els, \"day_count\", code[1]);\r\n\t\t\t},\r\n\t\t\tyear:function(code, dates) {\r\n\t\t\t\tvar set_value = scheduler.form_blocks[\"recurring\"]._set_node_value;\r\n\r\n\t\t\t\tif (code[2] === \"\") {\r\n\t\t\t\t\tset_value(els, \"year_type\", \"d\");\r\n\t\t\t\t\tset_value(els, \"year_day\", dates.start.getDate());\r\n\t\t\t\t\tset_value(els, \"year_month\", dates.start.getMonth());\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tset_value(els, \"year_type\", \"w\");\r\n\t\t\t\t\tset_value(els, \"year_week2\", code[3]);\r\n\t\t\t\t\tset_value(els, \"year_day2\", code[2]);\r\n\t\t\t\t\tset_value(els, \"year_month2\", dates.start.getMonth());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tfunction set_repeat_code(code, dates) {\r\n\t\t\tvar set_value = scheduler.form_blocks[\"recurring\"]._set_node_value;\r\n\t\t\tvar data = code.split(\"#\");\r\n\t\t\tcode = data[0].split(\"_\");\r\n\t\t\tset_rcode[code[0]](code, dates);\r\n\r\n\t\t\tswitch (data[1]) {\r\n\t\t\t\tcase \"no\":\r\n\t\t\t\t\tset_end_rule(els, \"no\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"\":\r\n\t\t\t\t\tset_end_rule(els, \"date_of_end\");\r\n\r\n\t\t\t\t\tvar end_date = dates.end;\r\n\t\t\t\t\tif (scheduler.config.include_end_by){\r\n\t\t\t\t\t\tend_date = scheduler.date.add(end_date, -1, 'day');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tset_value(els, \"date_of_end\", date_str(end_date));\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tset_end_rule(els, \"occurences_count\");\r\n\t\t\t\t\tset_value(els, \"occurences_count\", data[1]);\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tset_value(els, \"repeat\", code[0]);\r\n\t\t\t//e.checked = true;\r\n\r\n\t\t\tvar node = scheduler.form_blocks[\"recurring\"]._get_form_node(els, \"repeat\", code[0]);\r\n\t\t\tif(node.nodeName == \"SELECT\"/* && node.onchange*/){\r\n\t\t\t//\tnode.onchange();\r\n\t\t\t\tnode.dispatchEvent(new Event('change'));\r\n\t\t\t\tnode.dispatchEvent(new MouseEvent('click'));\r\n\t\t\t}else{\r\n\t\t\t\tnode.dispatchEvent(new MouseEvent('click'));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tscheduler.form_blocks[\"recurring\"]._set_repeat_code = set_repeat_code;\r\n\r\n\t\tfor (var i = 0; i < top.elements.length; i++) {\r\n\t\t\tvar el = top.elements[i];\r\n\t\t\tswitch (el.name) {\r\n\t\t\t\tcase \"repeat\":\r\n\t\t\t\t\tif (el.nodeName == \"SELECT\" && !el.$_eventAttached) {\r\n\t\t\t\t\t\tel.$_eventAttached = true;\r\n\t\t\t\t\t\tel.addEventListener(\"change\", change_current_view);\r\n\t\t\t\t\t} else if(!el.$_eventAttached){\r\n\t\t\t\t\t\tel.$_eventAttached = true;\r\n\t\t\t\t\t\tel.addEventListener(\"click\", change_current_view);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tscheduler._lightbox._rec_init_done = true;\r\n\t},\r\n\tset_value:function(node, value, ev) {\r\n\t\tvar rf = scheduler.form_blocks[\"recurring\"];\r\n\t\tif (!scheduler._lightbox._rec_init_done)\r\n\t\t\trf._init_set_value(node, value, ev);\r\n\t\tnode.open = !ev.rec_type;\r\n\r\n\t\tnode.blocked = this._is_modified_occurence(ev);\r\n\r\n\t\tvar ds = rf._ds;\r\n\t\tds.start = ev.start_date;\r\n\t\tds.end = ev._end_date;\r\n\r\n\t\trf._toggle_block();\r\n\r\n\t\tif (value)\r\n\t\t\trf._set_repeat_code(value, ds);\r\n\t},\r\n\tget_value:function(node, ev) {\r\n\t\tif (node.open) {\r\n\t\t\tvar ds = scheduler.form_blocks[\"recurring\"]._ds;\r\n\t\t\tvar actual_dates = {};\r\n\r\n\t\t\tvar timeControl = getTimeSection();\r\n\r\n\t\t\ttimeControl.getValue(actual_dates);\r\n\t\t\tds.start = actual_dates.start_date;\r\n\t\t\tev.rec_type = scheduler.form_blocks[\"recurring\"]._get_repeat_code(ds);\r\n\t\t\tif (ds._start) {\r\n\t\t\t\tev.start_date = new Date(ds.start);\r\n\t\t\t\tev._start_date = new Date(ds.start);\r\n\t\t\t\tds._start = false;\r\n\t\t\t} else\r\n\t\t\t\tev._start_date = null;\r\n\r\n\t\t\tev._end_date = ds.end;\r\n\t\t\tev.rec_pattern = ev.rec_type.split(\"#\")[0];\r\n\t\t} else {\r\n\t\t\tev.rec_type = ev.rec_pattern = \"\";\r\n\t\t\tev._end_date = ev.end_date;\r\n\t\t}\r\n\t\treturn ev.rec_type;\r\n\t},\r\n\t_get_button: function(){\r\n\t\tvar node = getRecurringSection().header;\r\n\t\treturn node.firstChild.firstChild;\r\n\t},\r\n\t_get_form: function(){\r\n\t\treturn getRecurringSection().node;\r\n\t},\r\n\topen:function(){\r\n\t\tvar block = scheduler.form_blocks.recurring;\r\n\r\n\t\tvar cont = block._get_form();\r\n\t\tif(!cont.open)\r\n\t\t\tblock._toggle_block();\r\n\t},\r\n\tclose: function(){\r\n\t\tvar block = scheduler.form_blocks.recurring;\r\n\r\n\t\tvar cont = block._get_form();\r\n\r\n\t\tif(cont.open)\r\n\t\t\tblock._toggle_block();\r\n\t},\r\n\t_toggle_block: function(){\r\n\t\tvar block = scheduler.form_blocks.recurring;\r\n\r\n\t\tvar cont = block._get_form(),\r\n\t\t\tel = block._get_button();\r\n\t\tif (!cont.open && !cont.blocked) {\r\n\t\t\tcont.style.height = \"auto\";//reset to default value\r\n\t\t\tif(el){\r\n\t\t\t\tel.style.backgroundPosition = \"-5px 0px\";\r\n\t\t\t\tel.nextSibling.innerHTML = scheduler.locale.labels.button_recurring_open;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcont.style.height = \"0px\";\r\n\t\t\tif(el){\r\n\t\t\t\tel.style.backgroundPosition = \"-5px 20px\";\r\n\t\t\t\tel.nextSibling.innerHTML = scheduler.locale.labels.button_recurring;\r\n\t\t\t}\r\n\t\t}\r\n\t\tcont.open = !cont.open;\r\n\r\n\t\tscheduler.setLightboxSize();\r\n\t},\r\n\tfocus:function(node) {\r\n\t},\r\n\tbutton_click:function(node, button, event) {\r\n\t\tvar block = scheduler.form_blocks.recurring;\r\n\t\tvar cont = block._get_form();\r\n\t\tif (!cont.blocked)\r\n\t\t\tscheduler.form_blocks.recurring._toggle_block();\r\n\t}\r\n};\r\n\r\nfunction getTimeSection(){\r\n\tvar timeControl = scheduler.formSection('time');\r\n\tif(!timeControl){\r\n\t\ttimeControl = getFirstSectionOfType('time');\r\n\t}\r\n\tif(!timeControl){\r\n\t\ttimeControl = getFirstSectionOfType('calendar_time');\r\n\t}\r\n\r\n\t\r\n\tif (!timeControl) {\r\n\t\tthrow new Error([\"Can't calculate the recurring rule, the Recurring form block can't find the Time control. Make sure you have the time control in 'scheduler.config.lightbox.sections' config.\",\r\n\"You can use either the default time control https://docs.dhtmlx.com/scheduler/time.html, or the datepicker https://docs.dhtmlx.com/scheduler/minicalendar.html, or a custom control. \",\r\n\"In the latter case, make sure the control is named \\\"time\\\":\",\r\n\"\",\r\n\"scheduler.config.lightbox.sections = [\",\r\n\"{name:\\\"time\\\", height:72, type:\\\"YOU CONTROL\\\", map_to:\\\"auto\\\" }];\"]\r\n.join(\"\\n\"));\r\n\t}\r\n\r\n\treturn timeControl;\r\n}\r\n\r\nfunction getRecurringSection(){\r\n\tvar recurringSection = scheduler.formSection('recurring');\r\n\tif(!recurringSection){\r\n\t\trecurringSection = getFirstSectionOfType('recurring');\r\n\t}\r\n\r\n\tif (!recurringSection) {\r\n\t\tthrow new Error([\"Can't locate the Recurring form section.\",\r\n\t\t\"Make sure that you have the recurring control on the lightbox configuration https://docs.dhtmlx.com/scheduler/recurring_events.html#recurringlightbox \",\r\n\t\t\"and that the recurring control has name \\\"recurring\\\":\",\r\n\"\",\r\n\"scheduler.config.lightbox.sections = [\",\r\n\"\t{name:\\\"recurring\\\", ... }\",\r\n\"];\"].join(\"\\n\"));\r\n\r\n\t}\r\n\r\n\treturn recurringSection;\r\n}\r\n\r\nfunction getFirstSectionOfType(type){\r\n\tfor(var i = 0; i < scheduler.config.lightbox.sections.length; i++){\r\n\t\tvar section = scheduler.config.lightbox.sections[i];\r\n\t\tif(section.type === type){\r\n\t\t\treturn scheduler.formSection(section.name);\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\n//problem may occur if we will have two repeating events in the same moment of time\r\nscheduler._rec_markers = {};\r\nscheduler._rec_markers_pull = {};\r\nscheduler._add_rec_marker = function(ev, time) {\r\n\tev._pid_time = time;\r\n\tthis._rec_markers[ev.id] = ev;\r\n\tif (!this._rec_markers_pull[ev.event_pid]) this._rec_markers_pull[ev.event_pid] = {};\r\n\tthis._rec_markers_pull[ev.event_pid][time] = ev;\r\n};\r\nscheduler._get_rec_marker = function(time, id) {\r\n\tvar ch = this._rec_markers_pull[id];\r\n\tif (ch) return ch[time];\r\n\treturn null;\r\n};\r\nscheduler._get_rec_markers = function(id) {\r\n\treturn (this._rec_markers_pull[id] || []);\r\n};\r\n\r\nfunction clearMilliseconds(date){\r\n//\treturn date;\r\n\treturn new Date(\r\n\t\tdate.getFullYear(), \r\n\t\tdate.getMonth(), \r\n\t\tdate.getDate(), \r\n\t\tdate.getHours(), \r\n\t\tdate.getMinutes(),\r\n\t\tdate.getSeconds(),\r\n\t\t0\r\n\t);\r\n}\r\n\r\nscheduler._rec_temp = [];\r\n(function() {\r\n\tvar old_add_event = scheduler.addEvent;\r\n\tscheduler.addEvent = function(start_date, end_date, text, id, extra_data) {\r\n\t\tvar ev_id = old_add_event.apply(this, arguments);\r\n\r\n\t\tif (ev_id && scheduler.getEvent(ev_id)) {\r\n\t\t\tvar ev = scheduler.getEvent(ev_id);\r\n\t\t\t\r\n\t\t\tif(ev.start_date){\r\n\t\t\t\tev.start_date = clearMilliseconds(ev.start_date);\r\n\t\t\t}\r\n\t\t\tif(ev.end_date){\r\n\t\t\t\tev.end_date = clearMilliseconds(ev.end_date);\r\n\t\t\t}\r\n\t\t\tif (this._is_modified_occurence(ev))\r\n\t\t\t\tscheduler._add_rec_marker(ev, ev.event_length * 1000);\r\n\t\t\tif (ev.rec_type)\r\n\t\t\t\tev.rec_pattern = ev.rec_type.split(\"#\")[0];\r\n\t\t}\r\n\t\treturn ev_id;\r\n\t};\r\n})();\r\n\r\nscheduler.attachEvent(\"onEventIdChange\", function(id, new_id) {\r\n\tif (this._ignore_call) return;\r\n\tthis._ignore_call = true;\r\n\r\n\tif(scheduler._rec_markers[id]){\r\n\t\t//important for for correct work of scheduler.getEvents(from, to) and collision detection\r\n\t\tscheduler._rec_markers[new_id] = scheduler._rec_markers[id];\r\n\t\tdelete scheduler._rec_markers[id];\r\n\t}\r\n\r\n\tif(scheduler._rec_markers_pull[id]){\r\n\t\tscheduler._rec_markers_pull[new_id] = scheduler._rec_markers_pull[id];\r\n\t\tdelete scheduler._rec_markers_pull[id];\r\n\t}\r\n\r\n\tfor (var i = 0; i < this._rec_temp.length; i++) {\r\n\t\tvar tev = this._rec_temp[i];\r\n\t\tif (tev.event_pid == id) {\r\n\t\t\ttev.event_pid = new_id;\r\n\t\t\tthis.changeEventId(tev.id, new_id + \"#\" + tev.id.split(\"#\")[1]);\r\n\t\t}\r\n\t}\r\n\r\n\tfor(var i in this._rec_markers){\r\n\t\tvar tev = this._rec_markers[i];\r\n\t\tif(tev.event_pid == id){\r\n\t\t\ttev.event_pid = new_id;\r\n\t\t\ttev._pid_changed = true;\r\n\t\t}\r\n\t}\r\n\r\n\tvar el = scheduler._rec_markers[new_id];\r\n\tif(el && el._pid_changed) {\r\n\t\tdelete el._pid_changed;\r\n\t\tsetTimeout(function() {\r\n\t\t\tif(scheduler.$destroyed){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tscheduler.callEvent(\"onEventChanged\", [new_id, scheduler.getEvent(new_id)]);\r\n\t\t}, 1);\r\n\t}\r\n\r\n\tdelete this._ignore_call;\r\n});\r\nscheduler.attachEvent(\"onConfirmedBeforeEventDelete\", function(id) {\r\n\tvar ev = this.getEvent(id);\r\n\tif (this._is_virtual_event(id) || (this._is_modified_occurence(ev) && ev.rec_type && ev.rec_type != 'none')) {\r\n\t\tid = id.split(\"#\");\r\n\t\tvar nid = this.uid();\r\n\t\tvar tid = (id[1]) ? id[1] : Math.round(ev._pid_time / 1000);\r\n\r\n\t\tvar nev = this._copy_event(ev);\r\n\t\tnev.id = nid;\r\n\t\tnev.event_pid = ev.event_pid || id[0];\r\n\t\tvar timestamp = tid;\r\n\t\tnev.event_length = timestamp;\r\n\t\tnev.rec_type = nev.rec_pattern = \"none\";\r\n\t\tthis.addEvent(nev);\r\n\r\n\t\tthis._add_rec_marker(nev, timestamp * 1000);\r\n\t} else {\r\n\t\tif (ev.rec_type && this._lightbox_id)\r\n\t\t\tthis._roll_back_dates(ev);\r\n\t\tvar sub = this._get_rec_markers(id);\r\n\t\tfor (var i in sub) {\r\n\t\t\tif (sub.hasOwnProperty(i)) {\r\n\t\t\t\tid = sub[i].id;\r\n\t\t\t\tif (this.getEvent(id))\r\n\t\t\t\t\tthis.deleteEvent(id, true);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn true;\r\n});\r\nscheduler.attachEvent(\"onEventDeleted\", function(id, ev){\r\n\tif(!this._is_virtual_event(id) && this._is_modified_occurence(ev)){\r\n\t\tif(!scheduler._events[id]){\r\n\t\t\tev.rec_type = ev.rec_pattern = \"none\";\r\n\t\t\tthis.setEvent(id, ev);\r\n\t\t}\r\n\t}\r\n});\r\nscheduler.attachEvent(\"onEventChanged\", function(id, event) {\r\n\tif (this._loading) return true;\r\n\r\n\tvar ev = this.getEvent(id);\r\n\r\n\tif (this._is_virtual_event(id)) {\r\n\t\tvar id = id.split(\"#\");\r\n\t\tvar nid = this.uid();\r\n\t\tthis._not_render = true;\r\n\r\n\t\tvar nev = this._copy_event(event);\r\n\t\tnev.id = nid;\r\n\t\tnev.event_pid = id[0];\r\n\t\tvar timestamp = id[1];\r\n\t\tnev.event_length = timestamp;\r\n\t\tnev.rec_type = nev.rec_pattern = \"\";\r\n\r\n\t\tthis._add_rec_marker(nev, timestamp * 1000);\r\n\t\tthis.addEvent(nev);\r\n\r\n\t\tthis._not_render = false;\r\n\r\n\t} else {\r\n\t\tif(ev.start_date){\r\n\t\t\tev.start_date = clearMilliseconds(ev.start_date);\r\n\t\t}\r\n\t\tif(ev.end_date){\r\n\t\t\tev.end_date = clearMilliseconds(ev.end_date);\r\n\t\t}\r\n\r\n\t\tif (ev.rec_type && this._lightbox_id){\r\n\t\t\tthis._roll_back_dates(ev);\r\n\t\t}\r\n\t\tvar sub = this._get_rec_markers(id);\r\n\t\tfor (var i in sub) {\r\n\t\t\tif (sub.hasOwnProperty(i)) {\r\n\t\t\t\tdelete this._rec_markers[sub[i].id];\r\n\t\t\t\tthis.deleteEvent(sub[i].id, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\tdelete this._rec_markers_pull[id];\r\n\r\n\t\t// it's possible that after editing event is no longer exists, in such case we need to remove _select_id flag\r\n\t\tvar isEventFound = false;\r\n\t\tfor (var k = 0; k < this._rendered.length; k++) {\r\n\t\t\tif (this._rendered[k].getAttribute(this.config.event_attribute) == id)\r\n\t\t\t\tisEventFound = true;\r\n\t\t}\r\n\t\tif (!isEventFound)\r\n\t\t\tthis._select_id = null;\r\n\t}\r\n\treturn true;\r\n});\r\nscheduler.attachEvent(\"onEventAdded\", function(id) {\r\n\tif (!this._loading) {\r\n\t\tvar ev = this.getEvent(id);\r\n\t\tif (ev.rec_type && !ev.event_length){\r\n\t\t\tthis._roll_back_dates(ev);\r\n\t\t}\r\n\t}\r\n\treturn true;\r\n});\r\nscheduler.attachEvent(\"onEventSave\", function(id, data, is_new_event) {\r\n\tvar ev = this.getEvent(id);\r\n\tif (!ev.rec_type && data.rec_type && !this._is_virtual_event(id))\r\n\t\tthis._select_id = null;\r\n\treturn true;\r\n});\r\nscheduler.attachEvent(\"onEventCreated\", function(id) {\r\n\tvar ev = this.getEvent(id);\r\n\tif (!ev.rec_type)\r\n\t\tev.rec_type = ev.rec_pattern = ev.event_length = ev.event_pid = \"\";\r\n\treturn true;\r\n});\r\nscheduler.attachEvent(\"onEventCancel\", function(id) {\r\n\tvar ev = this.getEvent(id);\r\n\tif (ev.rec_type) {\r\n\t\tthis._roll_back_dates(ev);\r\n\t\t// a bit expensive, but we need to be sure that event re-rendered, because view can be corrupted by resize , during edit process\r\n\t\tthis.render_view_data();\r\n\t}\r\n});\r\nscheduler._roll_back_dates = function(ev) {\r\n\tif(ev.start_date){\r\n\t\tev.start_date = clearMilliseconds(ev.start_date);\r\n\t}\r\n\tif(ev.end_date){\r\n\t\tev.end_date = clearMilliseconds(ev.end_date);\r\n\t}\r\n\tev.event_length = Math.round((ev.end_date.valueOf() - ev.start_date.valueOf()) / 1000);\r\n\tev.end_date = ev._end_date;\r\n\tif (ev._start_date) {\r\n\t\tev.start_date.setMonth(0);\r\n\t\tev.start_date.setDate(ev._start_date.getDate());\r\n\t\tev.start_date.setMonth(ev._start_date.getMonth());\r\n\t\tev.start_date.setFullYear(ev._start_date.getFullYear());\r\n\r\n\t}\r\n};\r\n\r\nscheduler._is_virtual_event = function(id){\r\n\treturn id.toString().indexOf(\"#\") != -1;\r\n};\r\nscheduler._is_modified_occurence = function(ev){\r\n\treturn (ev.event_pid && ev.event_pid != \"0\");\r\n};\r\n\r\nscheduler.showLightbox_rec = scheduler.showLightbox;\r\nscheduler.showLightbox = function(id) {\r\n\tvar locale = this.locale;\r\n\tvar c = scheduler.config.lightbox_recurring;\r\n\tvar ev = this.getEvent(id);\r\n\tvar pid = ev.event_pid;\r\n\tvar isVirtual = this._is_virtual_event(id);\r\n\tif (isVirtual)\r\n\t\tpid = id.split(\"#\")[0];\r\n\r\n\t// show series\r\n\tvar showSeries = function(id) {\r\n\t\tvar event = scheduler.getEvent(id);\r\n\t\tevent._end_date = event.end_date;\r\n\t\tevent.end_date = new Date(event.start_date.valueOf() + event.event_length * 1000);\r\n\t\treturn scheduler.showLightbox_rec(id); // editing series\r\n\t};\r\n\r\n\tif ( (pid || pid*1 === 0) && ev.rec_type) {\r\n\t\t// direct API call on series id\r\n\t\treturn showSeries(id);\r\n\t}\r\n\tif ( !pid || pid === '0' || ( (!locale.labels.confirm_recurring || c == 'instance') || (c == 'series' && !isVirtual)) ) {\r\n\t\t// editing instance or non recurring event\r\n\t\treturn this.showLightbox_rec(id);\r\n\t}\r\n\tif (c == 'ask') {\r\n\t\tvar that = this;\r\n\t\tscheduler.modalbox({\r\n\t\t\ttext: locale.labels.confirm_recurring,\r\n\t\t\ttitle: locale.labels.title_confirm_recurring,\r\n\t\t\twidth: \"500px\",\r\n\t\t\tposition: \"middle\",\r\n\t\t\tbuttons:[locale.labels.button_edit_series, locale.labels.button_edit_occurrence, locale.labels.icon_cancel],\r\n\t\t\tcallback: function(index) {\r\n\t\t\t\tswitch(+index) {\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\treturn showSeries(pid);\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\treturn that.showLightbox_rec(id);\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t} else {\r\n\t\tshowSeries(pid);\r\n\t}\r\n};\r\n\r\n\r\nscheduler.get_visible_events_rec = scheduler.get_visible_events;\r\nscheduler.get_visible_events = function(only_timed) {\r\n\tfor (var i = 0; i < this._rec_temp.length; i++)\r\n\t\tdelete this._events[this._rec_temp[i].id];\r\n\tthis._rec_temp = [];\r\n\r\n\tvar stack = this.get_visible_events_rec(only_timed);\r\n\tvar out = [];\r\n\tfor (var i = 0; i < stack.length; i++) {\r\n\t\tif (stack[i].rec_type) {\r\n\t\t\t//deleted element of series\r\n\t\t\tif (stack[i].rec_pattern != \"none\")\r\n\t\t\t\tthis.repeat_date(stack[i], out);\r\n\t\t}\r\n\t\telse out.push(stack[i]);\r\n\t}\r\n\treturn out;\r\n};\r\n\r\n\r\n(function() {\r\n\tvar old = scheduler.isOneDayEvent;\r\n\tscheduler.isOneDayEvent = function(ev) {\r\n\t\tif (ev.rec_type) return true;\r\n\t\treturn old.call(this, ev);\r\n\t};\r\n\tvar old_update_event = scheduler.updateEvent;\r\n\tscheduler.updateEvent = function(id) {\r\n\t\tvar ev = scheduler.getEvent(id);\r\n\t\tif(ev && ev.rec_type){\r\n\t\t\t//rec_type can be changed without the lightbox,\r\n\t\t\t// make sure rec_pattern updated as well\r\n\t\t\tev.rec_pattern = (ev.rec_type || \"\").split(\"#\")[0];\r\n\t\t}\r\n\t\tif (ev && ev.rec_type && !this._is_virtual_event(id)) {\r\n\t\t\tscheduler.update_view();\r\n\t\t} else {\r\n\t\t\told_update_event.call(this, id);\r\n\t\t}\r\n\t};\r\n})();\r\n\r\nscheduler.transponse_size = {\r\n\tday:1, week:7, month:1, year:12\r\n};\r\nscheduler.date.day_week = function(sd, day, week) {\r\n\tsd.setDate(1);\r\n\tvar originalMonth = scheduler.date.month_start(new Date(sd));\r\n\tweek = (week - 1) * 7;\r\n\tvar cday = sd.getDay();\r\n\tvar nday = day * 1 + week - cday + 1;\r\n\tsd.setDate(nday <= week ? (nday + 7) : nday);\r\n\tvar newMonth = scheduler.date.month_start(new Date(sd));\r\n\tif(originalMonth.valueOf() !== newMonth.valueOf()){\r\n\t\treturn false;\r\n\t}\r\n\treturn true;\r\n};\r\nscheduler.transpose_day_week = function(sd, list, cor, size, cor2) {\r\n\tvar cday = (sd.getDay() || (scheduler.config.start_on_monday ? 7 : 0)) - cor;\r\n\tfor (var i = 0; i < list.length; i++) {\r\n\t\tif (list[i] > cday)\r\n\t\t\treturn sd.setDate(sd.getDate() + list[i] * 1 - cday - (size ? cor : cor2));\r\n\t}\r\n\tthis.transpose_day_week(sd, list, cor + size, null, cor);\r\n};\r\nscheduler.transpose_type = function(type) {\r\n\tvar transposeRecurring = \"transpose_\" + type;\r\n\tif (!this.date[transposeRecurring]) {\r\n\t\tvar recurringParts = type.split(\"_\");\r\n\t\tvar dayDurationMs = 60 * 60 * 24 * 1000;\r\n\t\tvar addRecurring = \"add_\" + type;\r\n\t\tvar recurringStepDays = this.transponse_size[recurringParts[0]] * recurringParts[1];\r\n\r\n\t\tif (recurringParts[0] == \"day\" || recurringParts[0] == \"week\") {\r\n\t\t\tvar weekDays = null;\r\n\t\t\tif (recurringParts[4]) {\r\n\t\t\t\tweekDays = recurringParts[4].split(\",\");\r\n\t\t\t\tif (scheduler.config.start_on_monday) {\r\n\t\t\t\t\tfor (var i = 0; i < weekDays.length; i++)\r\n\t\t\t\t\t\tweekDays[i] = (weekDays[i] * 1) || 7;\r\n\t\t\t\t\tweekDays.sort();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.date[transposeRecurring] = function(nd, td) {\r\n\t\t\t\tvar delta = Math.floor((td.valueOf() - nd.valueOf()) / (dayDurationMs * recurringStepDays));\r\n\t\t\t\tif (delta > 0)\r\n\t\t\t\t\tnd.setDate(nd.getDate() + delta * recurringStepDays);\r\n\t\t\t\tif (weekDays)\r\n\t\t\t\t\tscheduler.transpose_day_week(nd, weekDays, 1, recurringStepDays);\r\n\r\n\t\t\t\treturn nd;\r\n\t\t\t};\r\n\t\t\tthis.date[addRecurring] = function(sd, inc) {\r\n\t\t\t\tvar nd = new Date(sd.valueOf());\r\n\t\t\t\tif (weekDays) {\r\n\t\t\t\t\tfor (var count = 0; count < inc; count++)\r\n\t\t\t\t\t\tscheduler.transpose_day_week(nd, weekDays, 0, recurringStepDays);\r\n\t\t\t\t} else\r\n\t\t\t\t\tnd.setDate(nd.getDate() + inc * recurringStepDays);\r\n\r\n\t\t\t\treturn nd;\r\n\t\t\t};\r\n\t\t}\r\n\t\telse if (recurringParts[0] == \"month\" || recurringParts[0] == \"year\") {\r\n\t\t\tthis.date[transposeRecurring] = function(nd, td, seriesInstance) {\r\n\t\t\t\tvar delta = Math.ceil(((td.getFullYear() * 12 + td.getMonth() * 1 + 1) - (nd.getFullYear() * 12 + nd.getMonth() * 1 + 1)) / (recurringStepDays) - 1);\r\n\r\n\t\t\t\tif (delta >= 0){\r\n\t\t\t\t\tnd.setDate(1);\r\n\t\t\t\t\tnd.setMonth(nd.getMonth() + delta * recurringStepDays);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn scheduler.date[addRecurring](nd, 0, seriesInstance);\r\n\t\t\t\t//if (str[3]){\r\n\t\t\t\t//\tscheduler.date.day_week(nd, str[2], str[3]);\r\n\t\t\t\t//}\r\n\t\t\t};\r\n\t\t\tthis.date[addRecurring] = function(sd, inc, seriesInstance, currentCount) {\r\n\t\t\t\tif(!currentCount){\r\n\t\t\t\t\tcurrentCount = 1;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcurrentCount++;\r\n\t\t\t\t}\r\n\t\t\t\tvar maxCount = 12;\r\n\t\t\t\tif(currentCount > maxCount){\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar nd = new Date(sd.valueOf());\r\n\t\t\t\tnd.setDate(1);\r\n\r\n\r\n\t\t\t\tnd.setMonth(nd.getMonth() + inc * recurringStepDays);\r\n\t\t\t\tvar origMonth = nd.getMonth();\r\n\t\t\t\tvar origYear = nd.getFullYear();\r\n\t\t\t\tnd.setDate(seriesInstance.start_date.getDate());\r\n\t\t\t\tif (recurringParts[3]){\r\n\t\t\t\t\tscheduler.date.day_week(nd, recurringParts[2], recurringParts[3]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar correctOverflowInstances = scheduler.config.recurring_overflow_instances;\r\n\t\t\t\tif(nd.getMonth() != origMonth && correctOverflowInstances != \"none\"){\r\n\t\t\t\t\t// no such day in a month\r\n\t\t\t\t\tif(correctOverflowInstances === \"lastDay\"){\r\n\t\t\t\t\t\t// return either last day of the month\r\n\t\t\t\t\t\tnd = new Date(origYear, origMonth + 1, 0, nd.getHours(), nd.getMinutes(), nd.getSeconds(), nd.getMilliseconds());\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t// or go to the next instance\r\n\t\t\t\t\t\tnd = scheduler.date[addRecurring](new Date(origYear, origMonth + 1, 0), inc||1, seriesInstance, currentCount);\r\n\t\t\t\t\t\t// if next instance is not possible (e.g. 'repeat on 40th day of the month') null will be returned\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn nd;\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n};\r\nscheduler.repeat_date = function(ev, stack, non_render, from, to, maxCount) {\r\n\r\n\tfrom = from || this._min_date;\r\n\tto = to || this._max_date;\r\n\tvar max = maxCount || -1;\r\n\tvar td = new Date(ev.start_date.valueOf());\r\n\r\n\tvar startHour = td.getHours();\r\n\r\n\tvar visibleCount = 0;\r\n\r\n\tif (!ev.rec_pattern && ev.rec_type)\r\n\t\tev.rec_pattern = ev.rec_type.split(\"#\")[0];\r\n\r\n\tthis.transpose_type(ev.rec_pattern);\r\n\ttd = scheduler.date[\"transpose_\" + ev.rec_pattern](td, from, ev);\r\n\twhile ( td && (\r\n\t\ttd < ev.start_date ||\r\n\t\tscheduler._fix_daylight_saving_date(td,from,ev,td,new Date(td.valueOf() + ev.event_length * 1000)).valueOf() <= from.valueOf() ||\r\n\t\ttd.valueOf() + ev.event_length * 1000 <= from.valueOf())){\r\n\t\t\ttd = this.date[\"add_\" + ev.rec_pattern](td, 1, ev);\r\n\r\n\t}\r\n\twhile (td && (td < to && td < ev.end_date && (max < 0 || visibleCount < max))) {\r\n\t\ttd.setHours(startHour);\r\n\r\n\t\tvar timestamp = (scheduler.config.occurrence_timestamp_in_utc) ? Date.UTC(td.getFullYear(), td.getMonth(), td.getDate(), td.getHours(), td.getMinutes(), td.getSeconds()) : td.valueOf();\r\n\t\tvar ch = this._get_rec_marker(timestamp, ev.id);\r\n\t\tif (!ch) { // unmodified element of series\r\n\t\t\tvar ted = new Date(td.valueOf() + ev.event_length * 1000);\r\n\t\t\tvar copy = this._copy_event(ev);\r\n\t\t\t//copy._timed = ev._timed;\r\n\t\t\tcopy.text = ev.text;\r\n\t\t\tcopy.start_date = td;\r\n\t\t\tcopy.event_pid = ev.id;\r\n\t\t\tcopy.id = ev.id + \"#\" + Math.round(timestamp / 1000);\r\n\t\t\tcopy.end_date = ted;\r\n\r\n\t\t\tcopy.end_date = scheduler._fix_daylight_saving_date(copy.start_date, copy.end_date, ev, td, copy.end_date);\r\n\r\n\t\t\tcopy._timed = this.isOneDayEvent(copy);\r\n\r\n\t\t\tif (!copy._timed && !this._table_view && !this.config.multi_day) return;\r\n\t\t\tstack.push(copy);\r\n\r\n\t\t\tif (!non_render) {\r\n\t\t\t\tthis._events[copy.id] = copy;\r\n\t\t\t\tthis._rec_temp.push(copy);\r\n\t\t\t}\r\n\r\n\t\t\tvisibleCount++;\r\n\r\n\t\t} else\r\n\t\tif (non_render){\r\n\t\t\tif(ch.rec_type != \"none\"){\r\n\t\t\t\tvisibleCount++;\r\n\t\t\t}\r\n\t\t\tstack.push(ch);\r\n\t\t}\r\n\r\n\t\ttd = this.date[\"add_\" + ev.rec_pattern](td, 1, ev);\r\n\t//\tif(!scheduler.date[\"validate_add_\" + ev.rec_pattern](td, 1, ev.rec_pattern)){\r\n\t///\t\talert(\"detect add\")\r\n\t//\t}\r\n\t}\r\n};\r\nscheduler._fix_daylight_saving_date = function(start_date, end_date, ev, counter, default_date) {\r\n\tvar shift = start_date.getTimezoneOffset() - end_date.getTimezoneOffset();\r\n\tif (shift) {\r\n\t\tif (shift > 0) {\r\n\t\t\t// e.g. 24h -> 23h\r\n\t\t\treturn new Date(counter.valueOf() + ev.event_length * 1000 - shift * 60 * 1000);\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// e.g. 24h -> 25h\r\n\t\t\treturn new Date(end_date.valueOf() - shift * 60 * 1000);\r\n\t\t}\r\n\t}\r\n\treturn new Date(default_date.valueOf());\r\n};\r\nscheduler.getRecDates = function(id, max) {\r\n\tvar ev = typeof id == \"object\" ? id : scheduler.getEvent(id);\r\n\tvar recurrings = [];\r\n\tmax = max || 100;\r\n\r\n\tif (!ev.rec_type) {\r\n\t\treturn [\r\n\t\t\t{ start_date: ev.start_date, end_date: ev.end_date }\r\n\t\t];\r\n\t}\r\n\tif (ev.rec_type == \"none\") {\r\n\t\treturn [];\r\n\t}\r\n\r\n\tscheduler.repeat_date(ev, recurrings, true, ev.start_date, ev.end_date, max);\r\n\r\n\tvar result = [];\r\n\tfor(var i = 0; i < recurrings.length; i++){\r\n\t\tif(recurrings[i].rec_type != \"none\"){\r\n\t\t\tresult.push({start_date: recurrings[i].start_date, end_date: recurrings[i].end_date});\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n};\r\nscheduler.getEvents = function(from, to) {\r\n\tvar result = [];\r\n\tfor (var a in this._events) {\r\n\t\tvar ev = this._events[a];\r\n\t\tif (ev && ev.start_date < to && ev.end_date > from) {\r\n\t\t\tif (ev.rec_pattern) {\r\n\t\t\t\tif (ev.rec_pattern == \"none\") continue;\r\n\t\t\t\tvar sev = [];\r\n\t\t\t\tthis.repeat_date(ev, sev, true, from, to);\r\n\t\t\t\tfor (var i = 0; i < sev.length; i++) {\r\n\t\t\t\t\t// if event is in rec_markers then it will be checked by himself, here need to skip it\r\n\t\t\t\t\tif (!sev[i].rec_pattern && sev[i].start_date < to && sev[i].end_date > from && !this._rec_markers[sev[i].id]) {\r\n\t\t\t\t\t\tresult.push(sev[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (!this._is_virtual_event(ev.id)) { // if it's virtual event we can skip it\r\n\t\t\t\tresult.push(ev);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n};\r\n\r\nscheduler.config.repeat_date = \"%m.%d.%Y\";\r\nscheduler.config.lightbox.sections = [\r\n\t{name:\"description\", map_to:\"text\", type:\"textarea\" , focus:true},\r\n\t{name:\"recurring\", type:\"recurring\", map_to:\"rec_type\", button:\"recurring\"},\r\n\t{name:\"time\", height:72, type:\"time\", map_to:\"auto\"}\r\n];\r\n\r\n\r\n//drop secondary attributes\r\nscheduler._copy_dummy = function(ev) {\r\n\tvar start_date = new Date(this.start_date);\r\n\tvar end_date = new Date(this.end_date);\r\n\tthis.start_date = start_date;\r\n\tthis.end_date = end_date;\r\n\tthis.event_length = this.event_pid = this.rec_pattern = this.rec_type = null;\r\n};\r\n\r\nscheduler.config.include_end_by = false;\r\nscheduler.config.lightbox_recurring = 'ask'; // series, instance\r\n\r\nscheduler.attachEvent(\"onClearAll\", function(){\r\n\tscheduler._rec_markers = {}; //clear recurring events data\r\n\tscheduler._rec_markers_pull = {};\r\n\tscheduler._rec_temp = [];\r\n});\r\n\r\n}","import getSerializator from '../core/common/get_serializable_events';\r\nexport default function(scheduler){\r\n\r\n\t\r\nconst getSerializableData = getSerializator(scheduler);\r\n\r\n//redefine this method, if you want to provide a custom set of attributes for serialization\r\nscheduler.data_attributes=function(){\r\n\tvar attrs = [];\r\n\tvar format = scheduler._helpers.formatDate;\r\n\tvar all_events = getSerializableData();\r\n\tfor (var a in all_events){\r\n\t\tvar ev = all_events[a];\r\n\t\tfor (var name in ev)\r\n\t\t\tif (name.substr(0,1) !=\"_\")\r\n\t\t\t\tattrs.push([name,((name == \"start_date\" || name == \"end_date\")?format:null)]);\r\n\t\tbreak;\r\n\t}\r\n\treturn attrs;\r\n};\r\n\r\nscheduler.toXML = function(header){\r\n\tvar xml = [];\r\n\tvar attrs = this.data_attributes();\r\n\tvar all_events = getSerializableData();\r\n\tfor (var a in all_events){\r\n\t\tvar ev = all_events[a];\r\n\r\n\t\txml.push(\"<event>\");\r\n\t\tfor (var i=0; i < attrs.length; i++)\r\n\t\t\txml.push(\"<\"+attrs[i][0]+\"><![CDATA[\"+(attrs[i][1]?attrs[i][1](ev[attrs[i][0]]):ev[attrs[i][0]])+\"]]></\"+attrs[i][0]+\">\");\r\n\r\n\t\txml.push(\"</event>\");\r\n\t}\r\n\treturn (header||\"\")+\"<data>\"+xml.join(\"\\n\")+\"</data>\";\r\n};\r\n\r\nscheduler._serialize_json_value = function(value){\r\n\tif(value === null || typeof value === \"boolean\"){\r\n\t\tvalue = \"\" + value;\r\n\t}else{\r\n\t\tif(!value && value !== 0){\r\n\t\t\tvalue = \"\";\r\n\t\t}\r\n\t\tvalue = '\"' + value.toString().\r\n\t\t\treplace(/\\n/g,\"\").\r\n\t\t\treplace(/\\\\/g,\"\\\\\\\\\").\r\n\t\t\treplace(/\"/g, '\\\\\"') + '\"';\r\n\t}\r\n\treturn value;\r\n};\r\n\r\n\r\n\r\nscheduler.toJSON = function(){\r\n\treturn JSON.stringify(this.serialize());\r\n};\r\n\r\n\r\nscheduler.toICal = function(header){\r\n\tvar start = \"BEGIN:VCALENDAR\\nVERSION:2.0\\nPRODID:-//dhtmlXScheduler//NONSGML v2.2//EN\\nDESCRIPTION:\";\r\n\tvar end = \"END:VCALENDAR\";\r\n\tvar format = scheduler.date.date_to_str(\"%Y%m%dT%H%i%s\");\r\n\tvar full_day_format = scheduler.date.date_to_str(\"%Y%m%d\");\r\n\r\n\tvar ical = [];\r\n\tvar all_events = getSerializableData();\r\n\tfor (var a in all_events){\r\n\t\tvar ev = all_events[a];\r\n\r\n\r\n\t\tical.push(\"BEGIN:VEVENT\");\r\n\t\tif (!ev._timed || (!ev.start_date.getHours() && !ev.start_date.getMinutes()))\r\n\t\t\tical.push(\"DTSTART:\"+full_day_format(ev.start_date));\r\n\t\telse\r\n\t\t\tical.push(\"DTSTART:\"+format(ev.start_date));\r\n\t\tif (!ev._timed || (!ev.end_date.getHours() && !ev.end_date.getMinutes()))\r\n\t\t\tical.push(\"DTEND:\"+full_day_format(ev.end_date));\r\n\t\telse\r\n\t\t\tical.push(\"DTEND:\"+format(ev.end_date));\r\n\t\tical.push(\"SUMMARY:\"+ev.text);\r\n\t\tical.push(\"END:VEVENT\");\r\n\t}\r\n\treturn start+(header||\"\")+\"\\n\"+ical.join(\"\\n\")+\"\\n\"+end;\r\n};\r\n\r\n}","import notImplemented from \"./not_implemented_extension\";\r\n\r\nexport default function(scheduler){\r\n\tnotImplemented.alert(\"Timeline\", scheduler.assert);\r\n}","import { TooltipManager } from \"./tooltipManager\";\r\n\r\nexport default function (scheduler: any) {\r\n\r\n\tscheduler.config.tooltip_timeout = 30;\r\n\tscheduler.config.tooltip_offset_y = 20;\r\n\tscheduler.config.tooltip_offset_x = 10;\r\n\tscheduler.config.tooltip_hide_timeout = 30;\r\n\r\n\tconst tooltipManager = new TooltipManager(scheduler);\r\n\r\n\tscheduler.ext.tooltips = tooltipManager;\r\n\r\n\tscheduler.attachEvent(\"onSchedulerReady\", function () {\r\n\r\n\t\ttooltipManager.tooltipFor({\r\n\t\t\tselector: \"[\" + scheduler.config.event_attribute + \"]\",\r\n\t\t\thtml: (event: MouseEvent) => {\r\n\t\t\t\tif (scheduler._mobile && !scheduler.config.touch_tooltip) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst targetEventId = scheduler._locate_event(event.target);\r\n\t\t\t\tif (scheduler.getEvent(targetEventId)) {\r\n\t\t\t\t\tconst event = scheduler.getEvent(targetEventId);\r\n\t\t\t\t\treturn scheduler.templates.tooltip_text(event.start_date, event.end_date, event);\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t},\r\n\t\t\tglobal: false\r\n\t\t});\r\n\t});\r\n\r\n\tscheduler.attachEvent(\"onDestroy\", function () {\r\n\t\ttooltipManager.destructor();\r\n\t});\r\n\r\n\tscheduler.attachEvent(\"onLightbox\", function () {\r\n\t\ttooltipManager.hideTooltip();\r\n\t});\r\n\r\n\tscheduler.attachEvent(\"onBeforeDrag\", function() {\r\n\t\ttooltipManager.hideTooltip();\r\n\t\treturn true;\r\n\t});\r\n\tscheduler.attachEvent(\"onEventDeleted\", function() {\r\n\t\ttooltipManager.hideTooltip();\r\n\t\treturn true;\r\n\t});\r\n\r\n}","import notImplemented from \"./not_implemented_extension\";\r\n\r\nexport default function(scheduler){\r\n\tnotImplemented.alert(\"Tree Timeline\", scheduler.assert);\r\n}","import notImplemented from \"./not_implemented_extension\";\r\n\r\nexport default function(scheduler){\r\n\tnotImplemented.alert(\"Units\", scheduler.assert);\r\n}","export default function(scheduler){\r\n\r\nscheduler._get_url_nav = function(){\r\n\tvar p = {};\r\n\tvar data = (document.location.hash || \"\").replace(\"#\", \"\").split(\",\");\r\n\tfor (var i = 0; i < data.length; i++) {\r\n\t\tvar s = data[i].split(\"=\");\r\n\t\tif (s.length == 2)\r\n\t\t\tp[s[0]] = s[1];\r\n\t}\r\n\treturn p;\r\n};\r\n\r\nscheduler.attachEvent(\"onTemplatesReady\", function () {\r\n\tvar first = true;\r\n\tvar s2d = scheduler.date.str_to_date(\"%Y-%m-%d\");\r\n\tvar d2s = scheduler.date.date_to_str(\"%Y-%m-%d\");\r\n\tvar select_event =  scheduler._get_url_nav().event || null;\r\n\r\n\tscheduler.attachEvent(\"onAfterEventDisplay\", function(ev){\r\n\t\tselect_event = null;\r\n\t\treturn true;\r\n\t});\r\n\r\n\tscheduler.attachEvent(\"onBeforeViewChange\", function (om, od, m, d) {\r\n\t\tif (first) {\r\n\t\t\tfirst = false;\r\n\t\t\tvar p = scheduler._get_url_nav();\r\n\r\n\t\t\tif (p.event){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tif(scheduler.getEvent(p.event)){\r\n\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\tshowEvent(p.event);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar handler = scheduler.attachEvent(\"onXLE\", function(){\r\n\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\tshowEvent(p.event);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tscheduler.detachEvent(handler);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e){}\r\n\t\t\t}\r\n\r\n\t\t\tif (p.date || p.mode) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.setCurrentView((p.date ? s2d(p.date) : null), (p.mode || null));\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t//assuming that mode is not available anymore\r\n\t\t\t\t\tthis.setCurrentView((p.date ? s2d(p.date) : null), m);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar values = [\r\n\t\t\t\"date=\" + d2s(d || od),\r\n\t\t\t\"mode=\" + (m || om)\r\n\t\t];\r\n\r\n\t\tif(select_event){\r\n\t\t\tvalues.push(\"event=\" + select_event);\r\n\t\t}\r\n\r\n\t\tvar text = \"#\" + values.join(\",\");\r\n\t\tdocument.location.hash = text;\r\n\t\treturn true;\r\n\t});\r\n\r\n\tfunction showEvent(e){\r\n\t\tif(scheduler.$destroyed){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tselect_event = e;\r\n\t\tif(scheduler.getEvent(e)){\r\n\t\t\tscheduler.showEvent(e);\r\n\t\t}\r\n\t}\r\n});\r\n}","import notImplemented from \"./not_implemented_extension\";\r\n\r\nexport default function(scheduler){\r\n\tnotImplemented.alert(\"Week Agenda\", scheduler.assert);\r\n}","export default function(scheduler){\r\nscheduler.attachEvent(\"onLightBox\",function(){\r\n\tif (this._cover){\r\n\t\ttry{\r\n\t\t\tthis._cover.style.height = this.expanded ? \"100%\" : ((document.body.parentNode||document.body).scrollHeight+\"px\");\r\n\t\t} catch(e) {\r\n\r\n\t\t}\r\n\t}\r\n});\r\n\r\nscheduler.form_blocks.select.set_value=function(node,value,ev){\r\n\tif (typeof value == \"undefined\" || value === \"\")\r\n\t\tvalue = (node.firstChild.options[0]||{}).value;\r\n\tnode.firstChild.value=value||\"\";\r\n};\r\n\r\n}","export default function(scheduler){\r\n\r\n\t// scheduler.config.year_x = 4;\r\n\t// scheduler.config.year_y = 3;\r\n\t// scheduler.xy.year_top = 0;\r\n\r\n\tscheduler.templates.year_date = function(date) {\r\n\t\treturn scheduler.date.date_to_str(scheduler.locale.labels.year_tab + \" %Y\")(date);\r\n\t};\r\n\tscheduler.templates.year_month = scheduler.date.date_to_str(\"%F\");\r\n\tscheduler.templates.year_scale_date = scheduler.date.date_to_str(\"%D\");\r\n\tscheduler.templates.year_tooltip = function(s, e, ev) {\r\n\t\treturn ev.text;\r\n\t};\r\n\r\n\tconst isYearMode = function() {\r\n\t\treturn scheduler._mode == \"year\";\r\n\t};\r\n\t\r\n\tconst getCellDate = function(node){\r\n\t\tvar day = scheduler.$domHelpers.closest(node, \"[data-cell-date]\");\r\n\t\tif(!day || !day.hasAttribute(\"data-cell-date\")) return null;\r\n\t\treturn scheduler.templates.parse_date(day.getAttribute(\"data-cell-date\"));\r\n\t};\r\n\r\n\t// dbl click hook for scheduler._on_dbl_click\r\n\tscheduler.dblclick_dhx_month_head = function(e) {\r\n\t\tif (isYearMode()) {\r\n\t\t\tconst target = e.target;\r\n\t\t\tif(scheduler.$domHelpers.closest(target, \".dhx_before\") || scheduler.$domHelpers.closest(target, \".dhx_after\")){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst date = getCellDate(target);\r\n\t\t\t\r\n\t\t\tif(date){\r\n\t\t\t\tconst start = date;\r\n\t\t\t\tconst end = this.date.add(start, 1, \"day\");\r\n\t\t\t\tif (!this.config.readonly && this.config.dblclick_create){\r\n\t\t\t\t\tthis.addEventNow(start.valueOf(), end.valueOf(), e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\tscheduler.attachEvent(\"onEventIdChange\", function(){\r\n\t\tif (isYearMode())\r\n\t\t\tthis.year_view(true);\r\n\t});\r\n\r\n\r\n\tvar old = scheduler.render_data;\r\n\tscheduler.render_data = function(evs) {\r\n\t\tif (!isYearMode()) return old.apply(this, arguments);\r\n\t\tfor (var i = 0; i < evs.length; i++)\r\n\t\t\tthis._year_render_event(evs[i]);\r\n\t};\r\n\r\n\tvar clear = scheduler.clear_view;\r\n\tscheduler.clear_view = function() {\r\n\t\tif (!isYearMode()) return clear.apply(this, arguments);\r\n\t\tvar dates = scheduler._year_marked_cells,\r\n\t\t\tdiv = null;\r\n\t\tfor (var date in dates) {\r\n\t\t\tif (dates.hasOwnProperty(date)) {\r\n\t\t\t\tdiv = dates[date];\r\n\t\t\t\tdiv.classList.remove(\"dhx_year_event\", \"dhx_cal_datepicker_event\");\r\n\t\t\t\t// div.className = \"dhx_month_head\";\r\n\t\t\t\t// div.removeAttribute(\"date\");\r\n\t\t\t\t// div.removeAttribute(\"data-year-date\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tscheduler._year_marked_cells = {};\r\n\t};\r\n\r\n\tscheduler._hideToolTip = function() {\r\n\t\tif (this._tooltip) {\r\n\t\t\tthis._tooltip.style.display = \"none\";\r\n\t\t\tthis._tooltip.date = new Date(9999, 1, 1);\r\n\t\t}\r\n\t};\r\n\r\n\tscheduler._showToolTip = function(date, pos, e, src) {\r\n\t\tif (this._tooltip) {\r\n\t\t\tif (this._tooltip.date.valueOf() == date.valueOf()) return;\r\n\t\t\tthis._tooltip.innerHTML = \"\";\r\n\t\t} else {\r\n\t\t\tvar t = this._tooltip = document.createElement(\"div\");\r\n\t\t\tt.className = \"dhx_year_tooltip\";\r\n\t\t\tif (this.config.rtl) t.className += \" dhx_tooltip_rtl\";\r\n\t\t\tdocument.body.appendChild(t);\r\n\t\t\tt.addEventListener(\"click\", scheduler._click.dhx_cal_data);\r\n\t\t\tt.addEventListener(\"click\", function(e){\r\n\t\t\t\tif(e.target.closest(`[${scheduler.config.event_attribute}]`)){\r\n\t\t\t\t\tconst id = e.target.closest(`[${scheduler.config.event_attribute}]`).getAttribute(scheduler.config.event_attribute);\r\n\t\t\t\t\tscheduler.showLightbox(id);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tvar evs = this.getEvents(date, this.date.add(date, 1, \"day\"));\r\n\t\tvar html = \"\";\r\n\r\n\t\tfor (var i = 0; i < evs.length; i++) {\r\n\t\t\tvar ev = evs[i];\r\n\t\t\tif(!this.filter_event(ev.id, ev))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar bg_color = (ev.color ? (\"--dhx-scheduler-event-background:\" + ev.color + \";\") : \"\");\r\n\t\t\tvar color = (ev.textColor ? (\"--dhx-scheduler-event-color:\" + ev.textColor + \";\") : \"\");\r\n\r\n\t\t\thtml += \"<div class='dhx_tooltip_line' style='\" + bg_color + \"\" + color + \"' event_id='\" + evs[i].id + \"' \"+this.config.event_attribute+\"='\"+evs[i].id+\"'>\";\r\n\t\t\thtml += \"<div class='dhx_tooltip_date' style='\" + bg_color + \"\" + color + \"'>\" + (evs[i]._timed ? this.templates.event_date(evs[i].start_date) : \"\") + \"</div>\";\r\n\t\t\thtml += \"<div class='dhx_event_icon icon_details'>&nbsp;</div>\";\r\n\t\t\thtml += this.templates.year_tooltip(evs[i].start_date, evs[i].end_date, evs[i]) + \"</div>\";\r\n\t\t}\r\n\r\n\t\tthis._tooltip.style.display = \"\";\r\n\t\tthis._tooltip.style.top = \"0px\";\r\n\r\n\r\n\t\tif (document.body.offsetWidth - pos.left - this._tooltip.offsetWidth < 0)\r\n\t\t\tthis._tooltip.style.left = pos.left - this._tooltip.offsetWidth + \"px\";\r\n\t\telse\r\n\t\t\tthis._tooltip.style.left = pos.left + src.offsetWidth + \"px\";\r\n\r\n\t\tthis._tooltip.date = date;\r\n\t\tthis._tooltip.innerHTML = html;\r\n\r\n\t\tif (document.body.offsetHeight - pos.top - this._tooltip.offsetHeight < 0)\r\n\t\t\tthis._tooltip.style.top = pos.top - this._tooltip.offsetHeight + src.offsetHeight + \"px\";\r\n\t\telse\r\n\t\t\tthis._tooltip.style.top = pos.top + \"px\";\r\n\t};\r\n\r\n\tscheduler._year_view_tooltip_handler = function(e){\r\n\t\tif (!isYearMode()) return;\r\n\r\n\t\tvar src = e.target || e.srcElement;\r\n\t\tif (src.tagName.toLowerCase() == 'a') // fix for active links extension (it adds links to the date in the cell)\r\n\t\t\tsrc = src.parentNode;\r\n\t\tif (scheduler._getClassName(src).indexOf(\"dhx_year_event\") != -1)\r\n\t\t\tscheduler._showToolTip(scheduler.templates.parse_date(src.getAttribute(\"data-year-date\")), scheduler.$domHelpers.getOffset(src), e, src);\r\n\t\telse\r\n\t\t\tscheduler._hideToolTip();\r\n\t};\r\n\tscheduler._init_year_tooltip = function() {\r\n\t\tscheduler._detachDomEvent(scheduler._els[\"dhx_cal_data\"][0], \"mouseover\", scheduler._year_view_tooltip_handler);\r\n\t\tscheduler.event(scheduler._els[\"dhx_cal_data\"][0], \"mouseover\", scheduler._year_view_tooltip_handler);\r\n\t};\r\n\r\n\tscheduler._get_year_cell = function(d) {\r\n\t\tvar dateString = scheduler.templates.format_date(d);\r\n\t\tvar cells = this.$root.querySelectorAll(`.dhx_cal_data .dhx_cal_datepicker_date[data-cell-date=\"${dateString}\"]`);\r\n\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\tif(!scheduler.$domHelpers.closest(cells[i], \".dhx_after, .dhx_before\")){\r\n\t\t\t\treturn cells[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tscheduler._year_marked_cells = {};\r\n\tscheduler._mark_year_date = function(date, event) {\r\n\t\tvar dateString = scheduler.templates.format_date(date);\r\n\t\tvar cell = this._get_year_cell(date);\r\n\t\tif (!cell) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar ev_class = this.templates.event_class(event.start_date, event.end_date, event);\r\n\t\tif (!scheduler._year_marked_cells[dateString]) {\r\n\t\t\tcell.classList.add(\"dhx_year_event\", \"dhx_cal_datepicker_event\");// = \"dhx_month_head dhx_year_event\";\r\n\t\t\tcell.setAttribute(\"data-year-date\", dateString);\r\n\t\t\tcell.setAttribute(\"date\", dateString);\r\n\t\t\tscheduler._year_marked_cells[dateString] = cell;\r\n\t\t}\r\n\t\tif(ev_class){\r\n\t\t\tcell.classList.add(ev_class);\r\n\t\t}\r\n\t};\r\n\tscheduler._unmark_year_date = function(date) {\r\n\t\tvar cell = this._get_year_cell(date);\r\n\t\tif (!cell) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tcell.classList.remove(\"dhx_year_event\", \"dhx_cal_datepicker_event\");\r\n//\t\tcell.className = \"dhx_month_head\";\r\n\t};\r\n\tscheduler._year_render_event = function(event) {\r\n\t\tvar date = event.start_date;\r\n\t\tif (date.valueOf() < this._min_date.valueOf()){\r\n\t\t\tdate = this._min_date;\r\n\t\t} else {\r\n\t\t\tdate = this.date.date_part(new Date(date));\r\n\t\t}\r\n\r\n\t\twhile (date < event.end_date) {\r\n\t\t\tthis._mark_year_date(date, event);\r\n\t\t\tdate = this.date.add(date, 1, \"day\");\r\n\t\t\tif (date.valueOf() >= this._max_date.valueOf())\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tscheduler.year_view = function(mode) {\r\n\r\n\t\tscheduler.set_sizes();\r\n\r\n\t\tscheduler._table_view = mode;\r\n\r\n\t\tif (this._load_mode && this._load()) return;\r\n\r\n\t\tif (mode) {\r\n\t\t\tscheduler._init_year_tooltip();\r\n\t\t\tscheduler._reset_year_scale();\r\n\t\t\tif (scheduler._load_mode && scheduler._load()){\r\n\t\t\t\tscheduler._render_wait = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tscheduler.render_view_data();\r\n\t\t} else {\r\n\t\t\tscheduler._hideToolTip();\r\n\t\t}\r\n\t};\r\n\tscheduler._reset_year_scale = function() {\r\n\t\tthis._cols = [];\r\n\t\tthis._colsS = {};\r\n\t\tvar week_starts = []; //start day of first week in each month\r\n\t\tvar dataArea = this._els[\"dhx_cal_data\"][0];\r\n\r\n\t\tvar c = this.config;\r\n\t\tdataArea.scrollTop = 0; //fix flickering in FF\r\n\t\tdataArea.innerHTML = \"\";\r\n\r\n\t\tvar dy = Math.floor((parseInt(dataArea.style.height) - scheduler.xy.year_top) / c.year_y);\r\n\t\tif (dy < 190) {\r\n\t\t\tdy = 190;\r\n\t\t}\r\n\r\n\t\tvar week_template = document.createElement(\"div\");\r\n\t\tvar dummy_date = this.date.week_start(scheduler._currentDate());\r\n\r\n\t\tthis._process_ignores(dummy_date, 7, \"day\", 1);\r\n\r\n\t\tfor (var i = 0; i < 7; i++) {\r\n\t\t\tif(!(this._ignores && this._ignores[i])) {\r\n\t\t\t\tthis._cols[i] = 'var(--dhx-scheduler-datepicker-cell-size)';\r\n\t\t\t\tthis._render_x_header(i, 0, dummy_date, week_template);\r\n\r\n\t\t\t}\r\n\t\t\tdummy_date = this.date.add(dummy_date, 1, \"day\");\r\n\t\t}\r\n\t\tweek_template.lastChild.className += \" dhx_scale_bar_last\";\r\n\r\n\t\tfor(var i = 0; i < week_template.childNodes.length; i++){\r\n\t\t\tthis._waiAria.yearHeadCell(week_template.childNodes[i]);\r\n\t\t}\r\n\r\n\t\tvar sd = this.date[this._mode + \"_start\"](this.date.copy(this._date));\r\n\t\tvar ssd = sd;\r\n\t\tvar yearBox = null;\r\n\t\tconst wrapper = document.createElement(\"div\");\r\n\t\twrapper.classList.add(\"dhx_year_wrapper\");\r\n\t\tfor (var i = 0; i < c.year_y; i++){\r\n\t\t\tfor (var j = 0; j < c.year_x; j++) {\r\n\t\t\t\tyearBox = document.createElement(\"div\");\r\n\t\t\t\tyearBox.className = \"dhx_year_box\";\r\n\r\n\t\t\t\tyearBox.setAttribute(\"date\", this._helpers.formatDate(sd));\r\n\t\t\t\tyearBox.setAttribute(\"data-month-date\", this._helpers.formatDate(sd));\r\n\t\t\t\tyearBox.innerHTML = \"<div class='dhx_year_month'></div><div class='dhx_year_grid'><div class='dhx_year_week'>\" + week_template.innerHTML + \"</div><div class='dhx_year_body'></div></div>\";\r\n\r\n\t\t\t\tvar header = yearBox.querySelector(\".dhx_year_month\");\r\n\t\t\t\tvar grid = yearBox.querySelector(\".dhx_year_grid\");\r\n\t\t\t\tvar body = yearBox.querySelector(\".dhx_year_body\");\r\n\r\n\t\t\t\tvar headerId = scheduler.uid();\r\n\t\t\t\tthis._waiAria.yearHeader(header, headerId);\r\n\t\t\t\tthis._waiAria.yearGrid(grid, headerId);\r\n\r\n\r\n\t\t\t\theader.innerHTML = this.templates.year_month(sd);\r\n\r\n\r\n\r\n\t\t\t\tvar dd = this.date.week_start(sd);\r\n\t\t\t\tthis._reset_month_scale(body, sd, dd, 6);\r\n\r\n\t\t\t\tvar days = body.querySelectorAll(\"td\");\r\n\t\t\t\tfor(var day = 0; day < days.length; day++){\r\n\t\t\t\t\tthis._waiAria.yearDayCell(days[day]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\twrapper.appendChild(yearBox);\r\n\r\n\t\t\t\tweek_starts[i * c.year_x + j] = (sd.getDay() - (this.config.start_on_monday ? 1 : 0) + 7) % 7;\r\n\t\t\t\tsd = this.date.add(sd, 1, \"month\");\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdataArea.appendChild(wrapper);\r\n\r\n\t\tvar dateElement = this._getNavDateElement();\r\n\t\tif(dateElement){\r\n\t\t\tdateElement.innerHTML = this.templates[this._mode + \"_date\"](ssd, sd, this._mode);\r\n\t\t}\r\n\r\n\t\tthis.week_starts = week_starts;\r\n\t\tweek_starts._month = ssd.getMonth();\r\n\t\tthis._min_date = ssd;\r\n\t\tthis._max_date = sd;\r\n\t};\r\n\r\n\tscheduler._reset_year_scale = function(){\r\n\r\n\t\tvar dataArea = this._els[\"dhx_cal_data\"][0];\r\n\r\n\t\tdataArea.scrollTop = 0; //fix flickering in FF\r\n\t\tdataArea.innerHTML = \"\";\r\n\r\n\t\tlet yearStart = this.date.year_start(new Date(this._date));\r\n\t\t\r\n\t\tthis._min_date = this.date.week_start(new Date(yearStart));\r\n\r\n\t\tconst wrapper = document.createElement(\"div\");\r\n\t\twrapper.classList.add(\"dhx_year_wrapper\");\r\n\r\n\t\tlet currentDate = yearStart;\r\n\t\tfor(let i = 0; i < 12; i++){\r\n\t\t\tlet yearBox = document.createElement(\"div\");\r\n\t\t\tyearBox.className = \"dhx_year_box\";\r\n\r\n\t\t\tyearBox.setAttribute(\"date\", this._helpers.formatDate(currentDate));\r\n\t\t\tyearBox.setAttribute(\"data-month-date\", this._helpers.formatDate(currentDate));\r\n\t\t\tyearBox.innerHTML = `<div class='dhx_year_month'>${this.templates.year_month(currentDate)}</div>\r\n\t\t\t<div class='dhx_year_grid'></div>`;\r\n\r\n\t\t\tconst yearGrid = yearBox.querySelector(\".dhx_year_grid\");\r\n\t\t\tconst datepicker = scheduler._createDatePicker(null, {\r\n\t\t\t\tdate: currentDate,\r\n\t\t\t\tminWeeks: 6\r\n\t\t\t});\r\n\t\t\tdatepicker._renderDayGrid(yearGrid);\r\n\t\t\tdatepicker.destructor();\r\n\r\n\t\t\twrapper.appendChild(yearBox);\r\n\r\n\t\t\tcurrentDate = this.date.add(currentDate, 1, \"month\");\r\n\r\n\t\t}\r\n\t\tdataArea.appendChild(wrapper);\r\n\r\n\t\tlet lastDate = this.date.add(yearStart, 1, \"year\");\r\n\t\tif(lastDate.valueOf() != this.date.week_start(new Date(lastDate)).valueOf()){\r\n\t\t\tlastDate = this.date.week_start(new Date(lastDate));\r\n\t\t\tlastDate = this.date.add(lastDate, 1, \"week\");\r\n\t\t}\r\n\t\tthis._max_date = lastDate;\r\n\t\tvar dateElement = this._getNavDateElement();\r\n\t\tif(dateElement){\r\n\t\t\tdateElement.innerHTML = this.templates[this._mode + \"_date\"](yearStart, lastDate, this._mode);\r\n\t\t}\r\n\t};\r\n\r\n\tvar getActionData = scheduler.getActionData;\r\n\tscheduler.getActionData = function(n_ev) {\r\n\t\tif(!isYearMode()){\r\n\t\t\treturn getActionData.apply(scheduler, arguments);\r\n\t\t}\r\n\t\t\r\n\t\tvar date = getCellDate(n_ev.target);\r\n\t\treturn {\r\n\t\t\tdate:date,\r\n\t\t\tsection:null\r\n\t\t};\r\n\t};\r\n\r\n\tvar locateEvent = scheduler._locate_event;\r\n\tscheduler._locate_event = function(node) {\r\n\t\tvar id = locateEvent.apply(scheduler, arguments);\r\n\t\tif(!id){\r\n\t\t\t\r\n\t\t\tvar date = getCellDate(node);\r\n\t\t\tif(!date) return null;\r\n\t\t\tvar evs = scheduler.getEvents(date, scheduler.date.add(date, 1, \"day\"));\r\n\t\t\tif(!evs.length) return null;\r\n\r\n\t\t\t//can be multiple events in the cell, return any single one\r\n\t\t\tid = evs[0].id;\r\n\t\t}\r\n\t\treturn id;\r\n\t};\r\n\r\n\tscheduler.attachEvent(\"onDestroy\", function(){\r\n\t\tscheduler._hideToolTip();\r\n\t});\r\n}","import SchedulerFactory from \"./scheduler_factory\";\r\nimport gplExtensions from \"./ext/extensions_gpl\";\r\n\r\nconst factory = new SchedulerFactory(gplExtensions);\r\n\r\nconst scheduler = factory.getSchedulerInstance();\r\nconst Scheduler = {\r\n\tplugin: scheduler.bind(factory.plugin, factory)\r\n};\r\n\r\nwindow.scheduler = scheduler;\r\nwindow.Scheduler = Scheduler;\r\n\r\nif(!window.$dhx) {\r\n\twindow.$dhx = {};\r\n}\r\n\r\nwindow.$dhx.scheduler = scheduler;\r\nwindow.$dhx.Scheduler = Scheduler;\r\n\r\nexport default scheduler;export { scheduler, Scheduler };","\r\n\r\nimport dhtmlxHook from \"./dhtmlx_hook\";\r\nimport \"./css/theme.less\";\r\ndhtmlxHook();\r\n\r\nimport global from \"./global\";\r\n\r\nimport factoryMethod from \"./scheduler_factory_method\";\r\nimport ExtensionsManager from \"./ext/extension_manager\";\r\n\r\nclass SchedulerFactory {\r\n\r\n\tconstructor (extensions) {\r\n\t\tthis._seed = 0;\r\n\t\tthis._schedulerPlugins = [];\r\n\t\tthis._bundledExtensions = extensions;\r\n\t\tthis._extensionsManager = new ExtensionsManager(extensions);\r\n\t}\r\n\r\n\tplugin(code) {\r\n\t\tthis._schedulerPlugins.push(code);\r\n\r\n\t\tif(global.scheduler){\r\n\t\t\tcode(global.scheduler);\r\n\t\t}\r\n\t}\r\n\t\r\n\tgetSchedulerInstance(initConfig) {\r\n\t\tvar scheduler = factoryMethod(this._extensionsManager);\r\n\r\n\t\tfor (var i = 0; i < this._schedulerPlugins.length; i++) {\r\n\t\t\tthis._schedulerPlugins[i](scheduler);\r\n\t\t}\r\n\t\tscheduler._internal_id = this._seed++;\r\n\t\r\n\t\tif (this.$syncFactory){\r\n\t\t\tthis.$syncFactory(scheduler);\r\n\t\t}\r\n\r\n\t\tif(initConfig){\r\n\t\t\tthis._initFromConfig(scheduler, initConfig);\r\n\t\t}\r\n\r\n\t\treturn scheduler;\r\n\t}\r\n\r\n\t_initFromConfig(scheduler, initConfig){\r\n\t\tif(initConfig.plugins){\r\n\t\t\tscheduler.plugins(initConfig.plugins);\r\n\t\t}\r\n\t\r\n\t\tif(initConfig.config){\r\n\t\t\tscheduler.mixin(scheduler.config, initConfig.config, true);\r\n\t\t}\r\n\t\r\n\t\tif(initConfig.templates){\r\n\t\t\tscheduler.attachEvent(\"onTemplatesReady\", function(){\r\n\t\t\t\tscheduler.mixin(scheduler.templates, initConfig.templates, true);\r\n\t\t\t}, {once: true});\r\n\t\t}\r\n\t\r\n\t\tif(initConfig.events){\r\n\t\t\tfor(const event in initConfig.events){\r\n\t\t\t\tscheduler.attachEvent(event, initConfig.events[event]);\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tif(initConfig.locale){\r\n\t\t\tscheduler.i18n.setLocale(initConfig.locale);\r\n\t\t}\r\n\t\r\n\t\tif(Array.isArray(initConfig.calendars)){\r\n\t\t\tinitConfig.calendars.forEach(function(calendar){\r\n\t\t\t\tscheduler.addCalendar(calendar);\r\n\t\t\t});\r\n\t\t}\r\n\t\r\n\t\tif(initConfig.container){\r\n\t\t\tscheduler.init(initConfig.container);\r\n\t\t} else {\r\n\t\t\tscheduler.init();\r\n\t\t}\r\n\t\r\n\t\tif(initConfig.data){\r\n\t\t\tif(typeof initConfig.data === \"string\"){\r\n\t\t\t\tscheduler.load(initConfig.data);\r\n\t\t\t}else{\r\n\t\t\t\tscheduler.parse(initConfig.data);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\r\n}\r\n\r\nexport default SchedulerFactory;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}